<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>MPlayer - Odtwarzacz filmów</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="pl" class="book" title="MPlayer - Odtwarzacz filmów"><div class="titlepage"><div><div><h1 class="title"><a name="index"></a><span class="application">MPlayer</span> - Odtwarzacz filmów</h1></div><div><h2 class="subtitle"><a class="ulink" href="http://www.mplayerhq.hu" target="_top">http://www.mplayerhq.hu</a></h2></div><div><p class="copyright">Copyright © 2000-2010 Załoga MPlayera</p></div><div><div class="legalnotice" title="License"><a name="id2499752"></a><p class="legalnotice-title"><b>License</b></p><p>MPlayer is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by the
  Free Software Foundation; either version 2 of the License, or (at your
  option) any later version.</p><p>MPlayer is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
  for more details.</p><p>You should have received a copy of the GNU General Public License
  along with MPlayer; if not, write to the Free Software Foundation,
  Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</p></div></div></div><hr></div><div class="toc"><dl><dt><span class="preface"><a href="#howtoread">Jak czytać tę dokumentację</a></span></dt><dt><span class="chapter"><a href="#intro">1. Wprowadzenie</a></span></dt><dt><span class="chapter"><a href="#install">2. Instalacja</a></span></dt><dd><dl><dt><span class="sect1"><a href="#softreq">2.1. Wymagane oprogramowanie</a></span></dt><dt><span class="sect1"><a href="#features">2.2. Możliwości</a></span></dt><dt><span class="sect1"><a href="#gui">2.3. A co z GUI?</a></span></dt><dt><span class="sect1"><a href="#fonts-osd">2.4. Czcionki i OSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#truetype-fonts">2.4.1. Czcionki TrueType</a></span></dt><dt><span class="sect2"><a href="#bitmap-fonts">2.4.2. Czcionki bitmapowe</a></span></dt><dt><span class="sect2"><a href="#osdmenu">2.4.3. Menu OSD</a></span></dt></dl></dd><dt><span class="sect1"><a href="#codec-installation">2.5. Codec installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xvid">2.5.1. Xvid</a></span></dt><dt><span class="sect2"><a href="#x264">2.5.2. <code class="systemitem">x264</code></a></span></dt><dt><span class="sect2"><a href="#aac">2.5.3. Kodek AAC</a></span></dt><dt><span class="sect2"><a href="#amr">2.5.4. Kodeki AMR</a></span></dt></dl></dd><dt><span class="sect1"><a href="#rtc">2.6. RTC</a></span></dt></dl></dd><dt><span class="chapter"><a href="#usage">3. Sposób użycia</a></span></dt><dd><dl><dt><span class="sect1"><a href="#commandline">3.1. Wiersz poleceń</a></span></dt><dt><span class="sect1"><a href="#subosd">3.2. Napisy i OSD</a></span></dt><dt><span class="sect1"><a href="#control">3.3. Sterowanie</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ctrl-cfg">3.3.1. Konfiguracja sterowania</a></span></dt><dt><span class="sect2"><a href="#lirc">3.3.2. Sterowanie poprzez LIRC</a></span></dt><dt><span class="sect2"><a href="#slave-mode">3.3.3. Tryb sługi</a></span></dt></dl></dd><dt><span class="sect1"><a href="#streaming">3.4. Strumieniowanie z sieci i potoków</a></span></dt><dd><dl><dt><span class="sect2"><a href="#streaming-save">3.4.1. Zapisywanie strumieniowanej zawartości</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mpst">3.5. Strumienie zdalne</a></span></dt><dd><dl><dt><span class="sect2"><a href="#compile_mpst_server">3.5.1. Kompilacja serwera</a></span></dt><dt><span class="sect2"><a href="#use_mpst">3.5.2. Używanie strumieni zdalnych</a></span></dt></dl></dd><dt><span class="sect1"><a href="#edl">3.6. Decyzyjne Listy Edycji (Edit Decision Lists - EDL)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#edl_using">3.6.1. Używanie pliku EDL</a></span></dt><dt><span class="sect2"><a href="#edl_making">3.6.2. Tworzenie pliku EDL</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio">3.7. Zaawansowane audio</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-surround">3.7.1. Dźwięk przestrzenny/wielokanałowy</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-surround-DVD">3.7.1.1. DVDs</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-stereoinfour">3.7.1.2. Odtwarzanie plików stereo przy użyciu czterech głośników</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-passthrough">3.7.1.3. Przekazywanie AC3/DTS</a></span></dt><dt><span class="sect3"><a href="#hwmpa-surround-passthrough">3.7.1.4. Przekazywanie dźwięku MPEG</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-matrix">3.7.1.5. Dźwięk zakodowany macierzowo</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-hrtf">3.7.1.6. Emulacja przestrzeni w słuchawkach</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-troubleshooting">3.7.1.7. Rozwiązywanie problemów</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-channels">3.7.2. Manipulowanie kanałami</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-channels-general">3.7.2.1. Ogólne informacje</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mono">3.7.2.2. Odtwarzanie dźwięku mono przy użyciu dwóch głośników</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-copying">3.7.2.3. Kopiowanie i przesuwanie kanałów</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mixing">3.7.2.4. Miksowanie kanałów</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-volume">3.7.3. Programowa regulacja głośności</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#cd-dvd">4. Używanie CD/DVD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#drives">4.1. Napędy CD/DVD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#drives_linux">4.1.1. Linux</a></span></dt><dt><span class="sect2"><a href="#drives_freebsd">4.1.2. FreeBSD</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dvd">4.2. Odtwarzanie DVD</a></span></dt><dt><span class="sect1"><a href="#vcd">4.3. Odtwarzanie VCD</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tv">5. TV</a></span></dt><dd><dl><dt><span class="sect1"><a href="#tv-input">5.1. Wejście TV</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-compilation">5.1.1. Kompilacja</a></span></dt><dt><span class="sect2"><a href="#tv-tips">5.1.2. Wskazówki użytkowania</a></span></dt><dt><span class="sect2"><a href="#tv-examples">5.1.3. Przykłady</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#radio">6. Radio</a></span></dt><dd><dl><dt><span class="sect1"><a href="#radio-input">6.1. Słuchanie radia</a></span></dt><dd><dl><dt><span class="sect2"><a href="#radio-compilation">6.1.1. Kompilacja</a></span></dt><dt><span class="sect2"><a href="#radio-tips">6.1.2. Rady przy stosowaniu</a></span></dt><dt><span class="sect2"><a href="#radio-examples">6.1.3. Przykłady</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#video">7. Urządzenia wyjścia video</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mtrr">7.1. Ustawianie MTRR</a></span></dt><dt><span class="sect1"><a href="#output-trad">7.2. Wyjścia video dla tradycyjnych kart graficznych</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xv">7.2.1. Xv</a></span></dt><dd><dl><dt><span class="sect3"><a href="#tdfx">7.2.1.1. Karty 3dfx</a></span></dt><dt><span class="sect3"><a href="#s3">7.2.1.2. Karty S3</a></span></dt><dt><span class="sect3"><a href="#nvidia">7.2.1.3. Karty nVidia</a></span></dt><dt><span class="sect3"><a href="#ati">7.2.1.4. Karty ATI</a></span></dt><dt><span class="sect3"><a href="#neomagic">7.2.1.5. Karty NeoMagic</a></span></dt><dt><span class="sect3"><a href="#trident">7.2.1.6. Karty Trident</a></span></dt><dt><span class="sect3"><a href="#kyro">7.2.1.7. Karty Kyro/PowerVR</a></span></dt></dl></dd><dt><span class="sect2"><a href="#dga">7.2.2. DGA</a></span></dt><dt><span class="sect2"><a href="#sdl">7.2.3. SDL</a></span></dt><dt><span class="sect2"><a href="#svgalib">7.2.4. SVGAlib</a></span></dt><dt><span class="sect2"><a href="#fbdev">7.2.5. Wyjście bufora ramki (FBdev)</a></span></dt><dt><span class="sect2"><a href="#mga_vid">7.2.6. Bufor ramki Matrox (mga_vid)</a></span></dt><dt><span class="sect2"><a href="#tdfxfb">7.2.7. Obsługa 3dfx YUV</a></span></dt><dt><span class="sect2"><a href="#opengl">7.2.8. Wyjście OpenGL</a></span></dt><dt><span class="sect2"><a href="#aalib">7.2.9. AAlib - wyświetlanie w trybie tekstowym</a></span></dt><dt><span class="sect2"><a href="#caca">7.2.10. <code class="systemitem">libcaca</code> - Color ASCII Art library (biblioteka kolorowego ASCII-Art)</a></span></dt><dt><span class="sect2"><a href="#vesa">7.2.11. VESA - wyjście na VESA BIOS</a></span></dt><dt><span class="sect2"><a href="#x11">7.2.12. X11</a></span></dt><dt><span class="sect2"><a href="#vidix">7.2.13. VIDIX</a></span></dt><dd><dl><dt><span class="sect3"><a href="#vidix-ati">7.2.13.1. Karty ATI</a></span></dt><dt><span class="sect3"><a href="#vidix-mga">7.2.13.2. Karty Matrox</a></span></dt><dt><span class="sect3"><a href="#vidix-trident">7.2.13.3. Karty Trident</a></span></dt><dt><span class="sect3"><a href="#vidix-3dlabs">7.2.13.4. Karty 3DLabs</a></span></dt><dt><span class="sect3"><a href="#vidix-nvidia">7.2.13.5. Karty nVidia</a></span></dt><dt><span class="sect3"><a href="#vidix-sis">7.2.13.6. Karty SiS</a></span></dt></dl></dd><dt><span class="sect2"><a href="#directfb">7.2.14. DirectFB</a></span></dt><dt><span class="sect2"><a href="#dfbmga">7.2.15. DirectFB/Matrox (dfbmga)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mpeg_decoders">7.3. Dekodery MPEG</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dvb">7.3.1. Wejście i wyjście DVB</a></span></dt><dt><span class="sect2"><a href="#dxr2">7.3.2. DXR2</a></span></dt><dt><span class="sect2"><a href="#dxr3">7.3.3. DXR3/Hollywood+</a></span></dt></dl></dd><dt><span class="sect1"><a href="#other">7.4. Inny sprzęt do wizualizacji</a></span></dt><dd><dl><dt><span class="sect2"><a href="#zr">7.4.1. Zr</a></span></dt><dt><span class="sect2"><a href="#blinkenlights">7.4.2. Blinkenlights</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tvout">7.5. Obsługa wyjścia TV</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tvout-mga-g400">7.5.1. Karty Matrox G400</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_g450">7.5.2. Karty Matrox G450/G550</a></span></dt><dt><span class="sect2"><a href="#tvout-ati">7.5.3. karty ATI</a></span></dt><dt><span class="sect2"><a href="#tvout-nvidia">7.5.4. nVidia</a></span></dt><dt><span class="sect2"><a href="#tvout-neomagic">7.5.5. NeoMagic</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ports">8. Porty</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linux">8.1. Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#debian">8.1.1. Pakiety Debiana</a></span></dt><dt><span class="sect2"><a href="#rpm">8.1.2. Pakiety RPM</a></span></dt><dt><span class="sect2"><a href="#arm">8.1.3. ARM</a></span></dt></dl></dd><dt><span class="sect1"><a href="#bsd">8.2. *BSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#freebsd">8.2.1. FreeBSD</a></span></dt><dt><span class="sect2"><a href="#openbsd">8.2.2. OpenBSD</a></span></dt><dt><span class="sect2"><a href="#darwin">8.2.3. Darwin</a></span></dt></dl></dd><dt><span class="sect1"><a href="#unix">8.3. Komercyjny Unix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#solaris">8.3.1. Solaris</a></span></dt><dt><span class="sect2"><a href="#hp-ux">8.3.2. HP-UX</a></span></dt><dt><span class="sect2"><a href="#aix">8.3.3. AIX</a></span></dt><dt><span class="sect2"><a href="#qnx">8.3.4. QNX</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows">8.4. Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwin">8.4.1. <span class="application">Cygwin</span></a></span></dt><dt><span class="sect2"><a href="#mingw">8.4.2. <span class="application">MinGW</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="#macos">8.5. Mac OS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#osx_gui">8.5.1. MPlayer OS X GUI</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#mencoder">9. Podstawy używania <span class="application">MEncodera</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#menc-feat-selecting-codec">9.1. Wybieranie kodeka i formatu</a></span></dt><dt><span class="sect1"><a href="#menc-feat-selecting-input">9.2. Wybieranie źródłowego zbioru lub urządzenia</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg4">9.3. Kodowanie dwuprzebiegowe MPEG-4 ("DivX")</a></span></dt><dt><span class="sect1"><a href="#menc-feat-handheld-psp">9.4. Kodowanie do formatu video Sony PSP</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg">9.5. Kodowanie do formatu MPEG</a></span></dt><dt><span class="sect1"><a href="#menc-feat-rescale">9.6. Przeskalowywanie filmów</a></span></dt><dt><span class="sect1"><a href="#menc-feat-streamcopy">9.7. Kopiowanie strumieni</a></span></dt><dt><span class="sect1"><a href="#menc-feat-enc-images">9.8. Kodowanie z wielu wejściowych plików obrazkowych
  (JPEG, PNG, TGA itp.)</a></span></dt><dt><span class="sect1"><a href="#menc-feat-extractsub">9.9. Wydobywanie napisów z DVD do pliku VOBsub</a></span></dt><dt><span class="sect1"><a href="#aspect">9.10. Utrzymywanie proporcji obrazu (aspect ratio)</a></span></dt></dl></dd><dt><span class="chapter"><a href="#encoding-guide">10. Kodowanie przy użyciu <span class="application">MEncodera</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#menc-feat-dvd-mpeg4">10.1. Rippowanie DVD do wysokiej jakości pliku MPEG-4 ("DivX")</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-preparing-encode">10.1.1. Przygotowanie do kodowania: Identyfikowanie materiału źródłowego
i framerate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-fps">10.1.1.1. Ustalanie źródłowego framerate</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-material">10.1.1.2. Identyfikowanie materiału źródłowego</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-2pass">10.1.2. Stały kwantyzator a tryb wieloprzebiegowy</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-constraints">10.1.3. Ograniczenia efektywnego kodowania</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-crop">10.1.4. Kadrowanie i skalowanie</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate">10.1.5. Dobieranie rozdzielczości i bitrate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate-compute">10.1.5.1. Obliczanie rozdzielczości</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-filtering">10.1.6. Filtrowanie</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-interlacing">10.1.7. Przeplot i telecine</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-encoding-interlaced">10.1.8. Encoding interlaced video</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-av-sync">10.1.9. Notes on Audio/Video synchronization</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-codec">10.1.10. Choosing the video codec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-audio">10.1.11. Audio</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-muxing">10.1.12. Muxing</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-filter-issues">10.1.12.1. Improving muxing and A/V sync reliability</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-avi-limitations">10.1.12.2. Limitations of the AVI container</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-matroska">10.1.12.3. Muxing into the Matroska container</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#menc-feat-telecine">10.2. How to deal with telecine and interlacing within NTSC DVDs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-telecine-intro">10.2.1. Introduction</a></span></dt><dt><span class="sect2"><a href="#menc-feat-telecine-ident">10.2.2. How to tell what type of video you have</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-ident-progressive">10.2.2.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-telecined">10.2.2.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-interlaced">10.2.2.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpt">10.2.2.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpi">10.2.2.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-encode">10.2.3. How to encode each category</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-encode-progressive">10.2.3.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-telecined">10.2.3.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-interlaced">10.2.3.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpt">10.2.3.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpi">10.2.3.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-footnotes">10.2.4. Footnotes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-enc-libavcodec">10.3. Encoding with the <code class="systemitem">libavcodec</code>
  codec family</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-video-codecs">10.3.1. <code class="systemitem">libavcodec</code>'s
  video codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-audio-codecs">10.3.2. <code class="systemitem">libavcodec</code>'s
  audio codecs</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-enc-libavcodec-audio-codecs-pcmadpcm">10.3.2.1. PCM/ADPCM format supplementary table</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-lavc-encoding-options">10.3.3. Encoding options of libavcodec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-mpeg4-lavc-example-settings">10.3.4. Encoding setting examples</a></span></dt><dt><span class="sect2"><a href="#custommatrices">10.3.5. Custom inter/intra matrices</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-example">10.3.6. Example</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-xvid">10.4. Encoding with the <code class="systemitem">Xvid</code>
  codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-xvid-intro">10.4.1. What options should I use to get the best results?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-options">10.4.2. Encoding options of <code class="systemitem">Xvid</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-profiles">10.4.3. Encoding profiles</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-example-settings">10.4.4. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-x264">10.5. Encoding with the
  <code class="systemitem">x264</code> codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-x264-encoding-options">10.5.1. Encoding options of x264</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-intro">10.5.1.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-speedvquality">10.5.1.2. Options which primarily affect speed and quality</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-misc-preferences">10.5.1.3. Options pertaining to miscellaneous preferences</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-x264-example-settings">10.5.2. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-video-for-windows">10.6. 
  Encoding with the <code class="systemitem">Video For Windows</code>
  codec family
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-vfw-video-codecs">10.6.1. Video for Windows supported codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-video-for-windows-bitrate-settings">10.6.2. Using vfw2menc to create a codec settings file.</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-quicktime-7">10.7. Using <span class="application">MEncoder</span> to create
<span class="application">QuickTime</span>-compatible files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-quicktime-7-why-use-it">10.7.1. Why would one want to produce <span class="application">QuickTime</span>-compatible Files?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-constraints">10.7.2. <span class="application">QuickTime</span> 7 limitations</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-crop">10.7.3. Cropping</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-scale">10.7.4. Scaling</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-avsync">10.7.5. A/V sync</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-bitrate">10.7.6. Bitrate</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-example">10.7.7. Encoding example</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-remux">10.7.8. Remuxing as MP4</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-metadata">10.7.9. Adding metadata tags</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-vcd-dvd">10.8. Using <span class="application">MEncoder</span>
  to create VCD/SVCD/DVD-compliant files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-constraints">10.8.1. Format Constraints</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-resolution">10.8.1.1. Format Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-gop">10.8.1.2. GOP Size Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-bitrate">10.8.1.3. Bitrate Constraints</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-output">10.8.2. Output Options</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-aspect">10.8.2.1. Aspect Ratio</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-a-v-sync">10.8.2.2. Maintaining A/V sync</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-srate">10.8.2.3. Sample Rate Conversion</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-lavc">10.8.3. Using libavcodec for VCD/SVCD/DVD Encoding</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-intro">10.8.3.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-options">10.8.3.2. lavcopts</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-examples">10.8.3.3. Examples</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-advanced">10.8.3.4. Advanced Options</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-audio">10.8.4. Encoding Audio</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-toolame">10.8.4.1. toolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-twolame">10.8.4.2. twolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-lavc">10.8.4.3. libavcodec</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-all">10.8.5. Putting it all Together</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-dvd">10.8.5.1. PAL DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-dvd">10.8.5.2. NTSC DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-ac3-copy">10.8.5.3. PAL AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-ac3-copy">10.8.5.4. NTSC AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-svcd">10.8.5.5. PAL SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-svcd">10.8.5.6. NTSC SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-vcd">10.8.5.7. PAL VCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-vcd">10.8.5.8. NTSC VCD</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#faq">11. FAQ - Często Zadawane Pytania</a></span></dt><dt><span class="appendix"><a href="#bugreports">A. Jak zgłaszać błędy</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bugreports_security">A.1. Zgłaszanie błędów związanych z bezpieczeństwem</a></span></dt><dt><span class="sect1"><a href="#bugreports_fix">A.2. Jak poprawiać błędy</a></span></dt><dt><span class="sect1"><a href="#bugreports_regression_test">A.3. Jak wykonać test regresji za pomocą Subversion</a></span></dt><dt><span class="sect1"><a href="#bugreports_report">A.4. Jak zgłaszać błędy</a></span></dt><dt><span class="sect1"><a href="#bugreports_where">A.5. Gdzie zgłaszać błędy</a></span></dt><dt><span class="sect1"><a href="#bugreports_what">A.6. Co zgłaszać</a></span></dt><dd><dl><dt><span class="sect2"><a href="#bugreports_system">A.6.1. Informacja o systemie operacyjnym</a></span></dt><dt><span class="sect2"><a href="#bugreports_hardware">A.6.2. Sprzęt i sterowniki</a></span></dt><dt><span class="sect2"><a href="#bugreports_configure">A.6.3. Problemy z konfiguracją</a></span></dt><dt><span class="sect2"><a href="#bugreports_compilation">A.6.4. Problemy z kompilacją</a></span></dt><dt><span class="sect2"><a href="#bugreports_playback">A.6.5. Problemy z odtwarzaniem</a></span></dt><dt><span class="sect2"><a href="#bugreports_crash">A.6.6. Awarie programu (ang. Crashes)</a></span></dt><dd><dl><dt><span class="sect3"><a href="#bugreports_debug">A.6.6.1. Jak otrzymać informację o awarii</a></span></dt><dt><span class="sect3"><a href="#bugreports_core">A.6.6.2. Jak wyciągnąć sensowne informacje ze zrzutu core (ang. core dump)</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#bugreports_advusers">A.7. Wiem co robię...</a></span></dt></dl></dd><dt><span class="appendix"><a href="#skin">B. Format skórki <span class="application">MPlayera</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#skin-overview">B.1. Wstęp</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-overview-directories">B.1.1. Katalogi</a></span></dt><dt><span class="sect2"><a href="#skin-overview-formats">B.1.2. Formaty obrazków</a></span></dt><dt><span class="sect2"><a href="#skin-overview-components">B.1.3. Składniki skórki</a></span></dt><dt><span class="sect2"><a href="#skin-files">B.1.4. Pliki</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-file">B.2. Plik skin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-file-main">B.2.1. Okno główne i panel odtwarzania</a></span></dt><dt><span class="sect2"><a href="#skin-file-subwindow">B.2.2. Okno ekranu</a></span></dt><dt><span class="sect2"><a href="#skin-file-menu">B.2.3. Menu skórki</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-fonts">B.3. Czcionki</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-fonts-symbols">B.3.1. Znaki specjalne (symbole)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-gui">B.4. Sygnały GUI</a></span></dt><dt><span class="sect1"><a href="#skin-quality">B.5. Tworzenie dobrych skórek</a></span></dt></dl></dd></dl></div><div class="preface" title="Jak czytać tę dokumentację"><div class="titlepage"><div><div><h2 class="title"><a name="howtoread"></a>Jak czytać tę dokumentację</h2></div></div></div><p>
Przy pierwszej instalacji powinieneś przeczytać wszystko od tego miejsca do
końca rozdziału Instalacja, łącznie z tekstami, do których są tam odnośniki.
Jeśli masz jeszcze jakieś pytania, wróć do <a class="link" href="#toc">Spisu
treści</a> i w nim poszukaj odpowiedniego tematu, przeczytaj
<a class="xref" href="#faq" title="Rozdział 11. FAQ - Często Zadawane Pytania">FAQ</a> albo spróbuj przegrepować zbiory. Odpowiedź na większość
pytań powinna być zawarta w niniejszej dokumentacji, a pozostałe prawdopodobnie zostały
już zadane na naszych
<a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">listach dyskusyjnych</a>.


</p></div><div class="chapter" title="Rozdział 1. Wprowadzenie"><div class="titlepage"><div><div><h2 class="title"><a name="intro"></a>Rozdział 1. Wprowadzenie</h2></div></div></div><p>
<span class="application">MPlayer</span> jest odtwarzaczem filmów dla Linuksa
(działa też na wielu innych Uniksach i na procesorach
<span class="bold"><strong>nie-x86</strong></span>, patrz <a class="link" href="#ports" title="Rozdział 8. Porty">
porty</a>). Odtwarza większość zbiorów w formatach MPEG, VOB, AVI, OGG/OGM,
VIVO, ASF/WMA/WMV, QT/MOV/MP4, FLI, RM, NuppelVideo, yuv4mpeg, FILM, RoQ, PVA,
zbiory Matroska, obsługiwanych przez wiele rdzennych kodeków, XAnim,
RealPlayer i Win32 DLL. Możesz w nim także oglądać filmy
<span class="bold"><strong>VideoCD, SVCD, DVD, 3ivx, RealMedia, Sorenson,
Theora</strong></span> i <span class="bold"><strong>MPEG-4 (DivX)</strong></span>
Inną wielką zaletą <span class="application">MPlayera</span> jest
szeroki zakres obsługiwanych sterowników wyjściowych. Działa on z X11, Xv, DGA,
OpenGL, SVGAlib, fbdev, AAlib, libcaca, DirectFB, ale możesz też używać GGI
i SDL (i dzięki temu wszystkich ich sterowników) i niektórych specyficznych dla
kart graficznych sterowników niskiego poziomu (dla Matroxa, 3Dfxa, Radeona,
Mach64, Permedia3)! Większość z nich obsługuje skalowanie sprzętowe lub
programowe, więc filmy można oglądać na pełnym ekranie.
<span class="application">MPlayer</span> obsługuje wyświetlanie przy użyciu
niektórych sprzętowych dekoderów MPEG, takich jak
<a class="link" href="#dvb" title="7.3.1. Wejście i wyjście DVB">DVB</a> i <a class="link" href="#dxr3" title="7.3.3. DXR3/Hollywood+">DXR3/Hollywood+</a>.
Nie można też zapomnieć o ładnych, dużych, antyaliasowanych i cieniowanych
napisach (<span class="bold"><strong>14 obsługiwanych typów</strong></span>) z
czcionkami europejskimi/ISO 8859-1,2 (polskimi, węgierskimi, angielskimi,
czeskimi, itp.), cyrylicą, koreańskimi i wyświetlaniem na ekranie (OSD)!
</p><p>
<span class="application">MPlayer</span> jest doskonały do odczytywania uszkodzonych
plików MPEG (przydatne przy niektórych VCD), odtwarza również błędne pliki AVI,
których nie można odczytać za pomocą wiodącego odtwarzacza multimedialnego pod
Windows. Nawet zbiory AVI bez bloku indeksowego można odtworzyć i można
zrekonstruować ich indeks tymczasowo, używając opcji <tt class="option">-idx</tt>, albo
trwale dzięki <span class="application">MEncoderowi</span>, w ten sposób umożliwiając
sobie przewijanie! Jak widać najważniejsza jest tu stabilność i jakość, ale
szybkość również jest zadziwiająca. Ma też potężny system wtyczek do
manipulacji obrazem i dźwiękiem.
</p><p>
<span class="application">MEncoder</span> (Enkoder filmów
<span class="application">MPlayera</span>) jest to prosty enkoder filmów,
zaprojektowany do kodowania odczytywalnych przez
<span class="application">MPlayera</span> filmów
(<span class="bold"><strong>AVI/ASF/OGG/DVD/VCD/VOB/MPG/MOV/VIV/FLI/RM/NUV/NET/PVA</strong></span>)
na inne odczytywalne formaty (patrz niżej). Może kodować rozmaitymi kodekami
video, takimi jak <span class="bold"><strong>MPEG-4 (DivX4)</strong></span>
(jedno- lub dwuprzebiegowy), <code class="systemitem">libavcodec</code>
oraz audio <span class="bold"><strong>PCM/MP3/VBR MP3</strong></span>.
</p><div class="itemizedlist" title="Możliwości MEncodera"><p class="title"><b>Możliwości <span class="application">MEncodera</span></b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Kodowanie z szerokiego zakresu formatów i dekoderów
  <span class="application">MPlayer</span>
</p></li><li class="listitem"><p>
  Kodowanie na wszystkie kodeki
  <code class="systemitem">libavcodec</code> z ffmpeg.
</p></li><li class="listitem"><p>
  Kodowanie obrazu z <span class="bold"><strong>tunerów kompatybilnych z V4L</strong></span>
</p></li><li class="listitem"><p>
  Kodowanie/multipleksowanie przeplatanych zbiorów AVI z prawidłowymi
  indeksami
</p></li><li class="listitem"><p>
  Tworzenie zbiorów z zewnętrznego strumienia audio
</p></li><li class="listitem"><p>
  Kodowanie 1, 2 lub 3-przebiegowe
</p></li><li class="listitem"><p>
  Dźwięk MP3 <span class="bold"><strong>VBR</strong></span>
  </p><div class="important" title="WAŻNE" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">WAŻNE</h3><p>
  Dźwięk MP3 VBR w odtwarzaczach pod Windows nie zawsze brzmi przyjemnie!
  </p></div><p>
</p></li><li class="listitem"><p>
  Dźwięk PCM
</p></li><li class="listitem"><p>
  Kopiowanie strumieniowe
</p></li><li class="listitem"><p>
  Synchronizacja wejścia A/V (oparta na PTS, może być wyłączona opcją
  <tt class="option">-mc 0</tt>)
</p></li><li class="listitem"><p>
  Korekta fps opcją <tt class="option">-ofps</tt> (przydatne gdy kodujesz
  30000/1001 fps VOB na 24000/1001 fps AVI)
</p></li><li class="listitem"><p>
  Możliwość zastosowania naszego potężnego systemu filtrów (kadrowanie,
  powiększanie, obracanie, postproces, skalowanie, konwersja rgb/yuv)
</p></li><li class="listitem"><p>
  Możliwość wkodowania DVD/VOBsub <span class="bold"><strong>ORAZ</strong></span> napisów
  w zbiór wyjściowy
</p></li><li class="listitem"><p>
  Możliwość zapisu napisów DVD do formatu VOBsub
</p></li></ul></div><div class="itemizedlist" title="Planowane możliwości"><p class="title"><b>Planowane możliwości</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Zwiększenie zakresu dostępnych formatów/kodeków do (de)kodowania
  (tworzenie zbiorów VOB ze strumieniami DivX4/Indeo5/VIVO :).
</p></li></ul></div><p>
<span class="application">MPlayer</span> i <span class="application">MEncoder</span>
mogą być rozprowadzane zgodnie z warunkami GNU General Public License Version 2.
</p></div><div class="chapter" title="Rozdział 2. Instalacja"><div class="titlepage"><div><div><h2 class="title"><a name="install"></a>Rozdział 2. Instalacja</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#softreq">2.1. Wymagane oprogramowanie</a></span></dt><dt><span class="sect1"><a href="#features">2.2. Możliwości</a></span></dt><dt><span class="sect1"><a href="#gui">2.3. A co z GUI?</a></span></dt><dt><span class="sect1"><a href="#fonts-osd">2.4. Czcionki i OSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#truetype-fonts">2.4.1. Czcionki TrueType</a></span></dt><dt><span class="sect2"><a href="#bitmap-fonts">2.4.2. Czcionki bitmapowe</a></span></dt><dt><span class="sect2"><a href="#osdmenu">2.4.3. Menu OSD</a></span></dt></dl></dd><dt><span class="sect1"><a href="#codec-installation">2.5. Codec installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xvid">2.5.1. Xvid</a></span></dt><dt><span class="sect2"><a href="#x264">2.5.2. <code class="systemitem">x264</code></a></span></dt><dt><span class="sect2"><a href="#aac">2.5.3. Kodek AAC</a></span></dt><dt><span class="sect2"><a href="#amr">2.5.4. Kodeki AMR</a></span></dt></dl></dd><dt><span class="sect1"><a href="#rtc">2.6. RTC</a></span></dt></dl></div><p>
Przewodnik szybkiej instalacji znajdziesz w pliku <tt class="filename">README</tt>.
Proszę, najpierw go przeczytaj, a później wróć do tego dokumentu
po mrożące krew w żyłach szczegóły.
</p><p>
W tym rozdziale zostaniesz przeprowadzony przez proces kompilacji
i konfiguracji <span class="application">MPlayera</span>. Nie będzie to łatwe,
ale niekoniecznie też musi być trudne. Jeżeli zauważysz zachowanie inne niż
tutaj opisane, proszę poszukaj w dokumentacji, a na pewno znajdziesz
odpowiedzi.
</p><div class="sect1" title="2.1. Wymagane oprogramowanie"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="softreq"></a>2.1. Wymagane oprogramowanie</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>binutils</strong></span> - zalecana jest wersja
  <span class="bold"><strong>2.11.x</strong></span>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>gcc</strong></span> - zalecanymi wersjami są 2.95 i 3.4+.
  Wiadomo, że 2.96 i 3.0.x generują wadliwy kod, 3.1 i 3.2 również miały problemy,
  3.3 niewielkie.
  Na PowerPC używaj 4.x+.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>XFree86</strong></span> - sugerowaną wersją jest
  4.3 lub nowsza.
  Upewnij się, że są zainstalowane również <span class="bold"><strong>pakiety rozwojowe</strong></span>,
  w przeciwnym wypadku nie zadziała.
  X'y nie są absolutnie niezbędne,
  niektóre sterowniki wyjścia video działają bez nich.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>make</strong></span> - sugerowaną wersją jest 3.79.x lub
  nowsza. Żeby zbudować dokumentację XML potrzebujesz przynajmniej 3.80.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>FreeType</strong></span> - opcjonalna, wymagana by mieć
  czcionkę do OSD i napisów. Wymagana jest przynajmniej wersja 2.0.9.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libjpeg</strong></span> - opcjonalny koder/dekoder JPEG,
  wymagany przez wyjście video JPEG i do dekodowania filmów MJPEG
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libpng</strong></span> - domyślny i zalecany koder/dekoder (M)PNG,
  wymagany przez GUI i wyjście video PNG
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lame</strong></span> - zalecana jest wersja 3.90 lub
  późniejsza, wymagana do zakodowania dźwięku MP3 przez
  <span class="application">MEncodera</span>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>zlib</strong></span> - zalecana, wymagana dla skompresowanych
  nagłówków MOV i obsługi PNG.
</p></li><li class="listitem"><p>
  <span class="bold"><strong><a class="ulink" href="http://www.live555.com/mplayer/" target="_top">LIVE555 Streaming Media</a></strong></span>
  - opcjonalna, wymagana do odtwarzania niektórych strumieni RTSP/RTP.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>directfb</strong></span> - opcjonalna, używaj 0.9.13 lub
  nowszej.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cdparanoia</strong></span> - opcjonalna, do obsługi CDDA.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libxmms</strong></span> - opcjonalna, do obsługi wtyczek wejściowych
  XMMS. Wymagana jest przynajmniej wersja 1.2.7.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libsmb</strong></span> - opcjonalna, do obsługi sieci przez smb.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>ALSA</strong></span> - opcjonalna, do obsługi wyjścia dźwięku
  przez ALSA. Wymagana jest przynajmniej wersja 0.9.0rc4.
</p></li></ul></div></div><div class="sect1" title="2.2. Możliwości"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="features"></a>2.2. Możliwości</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Zdecyduj czy potrzebujesz GUI. Jeśli tak, przeczytaj rozdział
  <a class="link" href="#gui" title="2.3. A co z GUI?">GUI</a> przed kompilacją.
</p></li><li class="listitem"><p>
  Jeżeli chcesz zainstalować <span class="application">MEncodera</span>
  (naszego wspaniałego enkodera do wszelkich celów), przeczytaj sekcję
  <a class="link" href="#mencoder" title="Rozdział 9. Podstawy używania MEncodera"><span class="application">MEncoder</span></a>.
</p></li><li class="listitem"><p>
  Jeżeli masz <span class="bold"><strong>tuner TV</strong></span> kompatybilny z V4L
  i chcesz oglądać/przechwytywać i kodować filmy przy pomocy
  <span class="application">MPlayera</span>,
  przeczytaj rozdział <a class="link" href="#tv-input" title="5.1. Wejście TV">wejście TV</a>.
</p></li><li class="listitem"><p>
  Jeżeli masz <span class="bold"><strong>tuner radiowy</strong></span> kompatybilny z V4L
  i chcesz słuchać i zapisywać dźwięk przy pomocy
  <span class="application">MPlayera</span>,
  przeczytaj rozdział <a class="link" href="#radio" title="Rozdział 6. Radio">radio</a>.
</p></li><li class="listitem"><p>
  Dostępne jest miłe, gotowe do użycia
  <span class="bold"><strong>Menu OSD</strong></span>.
  Przeczytaj rozdział <a class="link" href="#subosd" title="3.2. Napisy i OSD">menu OSD</a>.
</p></li></ul></div><p>
Potem skompiluj <span class="application">MPlayera</span>:
</p><pre class="screen">
./configure
make
make install
</pre><p>
</p><p>
W tym momencie <span class="application">MPlayer</span> jest już gotowy do użycia.
Katalog <tt class="filename">$PREFIX/share/mplayer</tt>
zawiera plik <tt class="filename">codecs.conf</tt>, który informuje program o
wszystkich, dostępnych kodekach i ich możliwościach. Plik ten potrzebny Ci
będzie tylko wtedy, jeżeli będziesz chciał zmodyfikować jego ustawienia, jako że
plik wykonywalny zawiera go już w sobie. Sprawdź czy masz
<tt class="filename">codecs.conf</tt> ze starych wersji
<span class="application">MPlayera</span> w swoim katalogu domowym
(<tt class="filename">~/.mplayer/codecs.conf</tt>) i usuń go.
</p><p>
Zauważ, że jeżeli masz <tt class="filename">codecs.conf</tt> w
<tt class="filename">~/.mplayer/</tt>, wbudowany i systemowy
<tt class="filename">codecs.conf</tt> będą całkowicie zignorowane.
Nie rób tak, chyba że chcesz pobawić się z ustawieniami wewnętrznymi
<span class="application">MPlayera</span>, ponieważ może to spowodować wiele
problemów. Jeżeli chcesz zmienić kolejność szukania kodeków, skorzystaj
z opcji <tt class="option">-vc</tt>, <tt class="option">-ac</tt>, <tt class="option">-vfm</tt>
lub <tt class="option">-afm</tt> w wierszu poleceń, lub w Twoim pliku konfiguracyjnym
(sprawdź stronę man).
</p><p>
Użytkownicy Debiana mogą sobie zbudować paczkę .deb, jest
to bardzo proste. Wykonaj
</p><pre class="screen">fakeroot debian/rules binary</pre><p>
w głównym katalogu <span class="application">MPlayera</span>. Przeczytaj rozdział
<a class="link" href="#debian" title="8.1.1. Pakiety Debiana">paczki Debiana</a>, aby uzyskać więcej informacji.
</p><p>
<span class="bold"><strong>Zawsze przejrzyj wyniki</strong></span>
<tt class="filename">./configure</tt> i plik
<tt class="filename">configure.log</tt>, zawierają one informacje o tym, co będzie zbudowane,
a co nie. Możesz również obejrzeć pliki
<tt class="filename">config.h</tt> i <tt class="filename">config.mak</tt>.
Jeżeli masz zainstalowane jakieś biblioteki, ale nie są one wykrywane przez
<tt class="filename">./configure</tt>, sprawdź czy masz również odpowiednie
pliki nagłówkowe (przeważnie pakiety -dev) i ich wersje się zgadzają. Plik
<tt class="filename">configure.log</tt> zazwyczaj powie Ci, czego brakuje.
</p><p>
Chociaż nie jest to konieczne, czcionki powinny być zainstalowane, żebyś mógł
korzystać z OSD i napisów. Zalecana jest instalacja czcionki TTF i ustawienie
<span class="application">MPlayera</span> tak, żeby z niej korzystał. Przeczytaj
rozdział <a class="link" href="#subosd" title="3.2. Napisy i OSD">Napisy i OSD</a> dla uzyskania bardziej
szczegółowych informacji.
</p></div><div class="sect1" title="2.3. A co z GUI?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gui"></a>2.3. A co z GUI?</h2></div></div></div><p>
GUI wymaga biblioteki GTK 1.2.x lub GTK 2.0 (nie jest w pełni w GTK, ale jego
panele są). Skórki przechowywane są w formacie PNG, tak więc musi być
zainstalowane GTK, <code class="systemitem">libpng</code>
(i ich pakiety rozwojowe, zazwyczaj nazwane
<code class="systemitem">gtk-dev</code> i
<code class="systemitem">libpng-dev</code>).
Możesz go zbudować podając opcję <tt class="option">--enable-gui</tt> skryptowi
<tt class="filename">./configure</tt>. Aby skorzystać z trybu GUI, musisz wywołać
polecenie <span class="command"><strong>gmplayer</strong></span>.
</p><p>
Jako że <span class="application">MPlayer</span> nie zawiera żadnej skórki, musisz
je ściągnąć, jeżeli chcesz używać GUI. Sprawdź
<a class="ulink" href="http://www.mplayerhq.hu/dload.html" target="_top">stronę z zasobami do pobrania</a>.
Skórki powinny być rozpakowane do katalogu dostępnego dla wszystkich
(<tt class="filename">$PREFIX/share/mplayer/skins</tt>) lub do
<tt class="filename">$HOME/.mplayer/skins</tt>.
<span class="application">MPlayer</span> sprawdza je w poszukiwaniu
folderu nazwanego <tt class="filename">default</tt>, ale
możesz użyć opcji <tt class="option">-skin <em class="replaceable"><code>nowaskórka</code></em></tt>
lub wpisać do pliku konfiguracyjnego <code class="literal">skin=nowaskórka</code>, aby
program korzystał ze skórki w katalogu
<tt class="filename">*/skins/nowaskórka</tt>.
</p></div><div class="sect1" title="2.4. Czcionki i OSD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="fonts-osd"></a>2.4. Czcionki i OSD</h2></div></div></div><p>
Musisz powiedzieć <span class="application">MPlayerowi</span> której czcionki ma
używać, by móc cieszyć się OSD i napisami. Działa dowolna czcionka TrueType
lub specjalne czcionki bitmapowe. Jednakże zalecane są czcionki TrueType,
ponieważ wyglądają o wiele lepiej, mogą być prawidłowo przeskalowane do
wielkości filmu i lepiej sobie radzą z różnymi sposobami kodowania.
</p><div class="sect2" title="2.4.1. Czcionki TrueType"><div class="titlepage"><div><div><h3 class="title"><a name="truetype-fonts"></a>2.4.1. Czcionki TrueType</h3></div></div></div><p>
Są dwa sposoby na skłonienie czcionek TrueType do działania. Pierwszy to
podanie w wierszu poleceń pliku z czcionką TrueType przy pomocy opcji
<tt class="option">-font</tt>.
Ta opcja jest też dobrym kandydatem do włożenie w plik konfiguracyjny
(szczegóły na stronie man).
Drugi to stworzenie dowiązania symbolicznego (symlink) o nazwie
<tt class="filename">subfont.ttf</tt> wskazującego na wybraną czcionkę.
Albo
</p><pre class="screen">
ln -s <em class="replaceable"><code>/ścieżka/do/przykładowej_czcionki.ttf</code></em> ~/.mplayer/subfont.ttf
</pre><p>
dla każdego użytkownika osobno, albo ogólnosystemowe:
</p><pre class="screen">
ln -s <em class="replaceable"><code>/ścieżka/do/przykładowej_czcionki.ttf</code></em> $PREFIX/share/mplayer/subfont.ttf
</pre><p>
</p><p>
Jeśli <span class="application">MPlayer</span> był skompilowany z obsługą
<code class="systemitem">fontconfig</code>, te metody nie zadziałają,
zamiast tego <tt class="option">-font</tt> oczekuje nazwy czcionki według
<code class="systemitem">fontconfig</code> i domyślnie bierze
czcionkę sans-serif.
Przykład:
</p><pre class="screen">
mplayer -font <em class="replaceable"><code>'Bitstream Vera Sans'</code></em> <em class="replaceable"><code>anime.mkv</code></em>
</pre><p>
</p><p>
Żeby zobaczyć jakie czcionki zna
<code class="systemitem">fontconfig</code>, użyj
<span class="command"><strong>fc-list</strong></span>.
</p></div><div class="sect2" title="2.4.2. Czcionki bitmapowe"><div class="titlepage"><div><div><h3 class="title"><a name="bitmap-fonts"></a>2.4.2. Czcionki bitmapowe</h3></div></div></div><p>
Jeśli z jakiegoś powodu chcesz lub musisz użyć czcionek bitmapowych, ściągnij
zestaw z naszej strony domowej. Możesz wybierać spośród rozmaitych
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/fonts/" target="_top">czcionek ISO</a>
oraz zestawów czcionek
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/fonts/" target="_top">stworzonych przez użytkowników</a>
w rozmaitych kodowaniach.
</p><p>
Rozpakuj ściągnięty plik do katalogu
<tt class="filename">~/.mplayer</tt> lub
<tt class="filename">$PREFIX/share/mplayer</tt>.
Potem przemianuj lub stwórz dowiązanie symboliczne jednego z rozpakowanych
katalogów na nazwę
<tt class="filename">font</tt>, na przykład:
</p><pre class="screen">
ln -s <em class="replaceable"><code>~/.mplayer/arial-24</code></em> ~/.mplayer/font
</pre><p>
</p><pre class="screen">
ln -s <em class="replaceable"><code>$PREFIX/share/mplayer/arial-24</code></em> $PREFIX/share/mplayer/font
</pre><p>
</p><p>
Czcionki powinny mieć odpowiedni plik <tt class="filename">font.desc</tt>, który
przypisuje pozycje czcionek unicode na właściwą stronę kodową napisów.
Innym rozwiązaniem jest mieć napisy zakodowane w UTF-8 i używać opcji
<tt class="option">-utf8</tt> albo nazwać plik z napisami tak samo jak film, ale z
rozszerzeniem <tt class="filename">.utf</tt>
i mieć go w tym samym katalogu co film.
</p></div><div class="sect2" title="2.4.3. Menu OSD"><div class="titlepage"><div><div><h3 class="title"><a name="osdmenu"></a>2.4.3. Menu OSD</h3></div></div></div><p>
<span class="application">MPlayer</span>
ma całkowicie definiowalny Interfejs Menu OSD.
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Menu Ustawienia nie jest jeszcze ZAIMPLEMENTOWANE!
</p></div><div class="orderedlist" title="Instalacja"><p class="title"><b>Instalacja</b></p><ol class="orderedlist" type="1"><li class="listitem"><p>
  skompiluj <span class="application">MPlayera</span> z opcją
  <tt class="option">--enable-menu</tt> dla skryptu <tt class="filename">./configure</tt>
</p></li><li class="listitem"><p>
  upewnij się, że masz zainstalowaną czcionkę OSD
</p></li><li class="listitem"><p>
  skopiuj plik <tt class="filename">etc/menu.conf</tt> do Twojego katalogu
  <tt class="filename">.mplayer</tt>
</p></li><li class="listitem"><p>
  skopiuj plik <tt class="filename">etc/input.conf</tt> do Twojego katalogu
  <tt class="filename">.mplayer</tt> lub do ogólnosystemowego
  katalogu z konfiguracją <span class="application">MPlayera</span> (domyślnie:
  <tt class="filename">/usr/local/etc/mplayer</tt>)
</p></li><li class="listitem"><p>
  sprawdź i ewentualnie przerób plik <tt class="filename">input.conf</tt>,
  aby określić funkcje klawiszy (wszystko jest tam opisane).
</p></li><li class="listitem"><p>
  uruchom <span class="application">MPlayera</span> przykładową komendą:
  </p><pre class="screen">mplayer -menu <em class="replaceable"><code>plik.avi</code></em></pre><p>
</p></li><li class="listitem"><p>
  wciśnij dowolny klawisz, który wcześniej zdefiniowałeś
</p></li></ol></div></div></div><div class="sect1" title="2.5. Codec installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="codec-installation"></a>2.5. Codec installation</h2></div></div></div><div class="sect2" title="2.5.1. Xvid"><div class="titlepage"><div><div><h3 class="title"><a name="xvid"></a>2.5.1. Xvid</h3></div></div></div><p>
<a class="ulink" href="http://www.xvid.org" target="_top">Xvid</a> jest wolnym, kompatybilnym
z MPEG-4 ASP, kodekiem video z możliwościami kodowania dwuprzebiegowego
i pełną obsługą MPEG-4 ASP.
Zauważ, że Xvid nie jest konieczny do odtwarzania video zakodowanego przy
pomocy Xvid. Domyślnie używana jest biblioteka
<code class="systemitem">libavcodec</code>, bo jest szybsza.
</p><div class="procedure" title="Instalacja Xvid"><a name="id2541213"></a><p class="title"><b>Instalacja <code class="systemitem">Xvid</code></b></p><p>
  Jak większość otwartego oporgramowania dostępny jest w dwóch wersjach:
  <a class="ulink" href="http://www.xvid.org/downloads.html" target="_top">oficjalnych wydań</a>
  i wersji CVS.
  Wersja CVS jest zazwyczaj wystarczająco stablina by jej używać, jako że
  zazwyczaj ma poprawki do błędów występujących w wydaniach.
  Tak należy nakłonić <code class="systemitem">Xvid</code> CVS do
  pracy z <span class="application">MEncoderem</span> (będziesz potrzebował
  przenajmniej <span class="application">autoconf</span> 2.50,
  <span class="application">automake</span> i <span class="application">libtool</span>):
</p><ol class="procedure" type="1"><li class="step" title="krok 1"><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid login</pre><p>
</p></li><li class="step" title="krok 2"><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid co xvidcore</pre><p>
</p></li><li class="step" title="krok 3"><p>
  </p><pre class="screen">cd xvidcore/build/generic</pre><p>
</p></li><li class="step" title="krok 4"><p>
  </p><pre class="screen">./bootstrap.sh</pre><p>
</p></li><li class="step" title="krok 5"><p>
  </p><pre class="screen">./configure</pre><p>
  Możesz potrzebować dodać jakieś opcje (przejrzyj wyjście
  polecenia <span class="command"><strong>./configure --help</strong></span>)
</p></li><li class="step" title="krok 6"><p>
  </p><pre class="screen">make &amp;&amp; make install</pre><p>
</p></li><li class="step" title="krok 7"><p>
  Przekompiluj <span class="application">MPlayera</span>.
</p></li></ol></div></div><div class="sect2" title="2.5.2. x264"><div class="titlepage"><div><div><h3 class="title"><a name="x264"></a>2.5.2. <code class="systemitem">x264</code></h3></div></div></div><p>
<a class="ulink" href="http://developers.videolan.org/x264.html" target="_top"><code class="systemitem">x264</code></a>
is a library for creating H.264 video.
<span class="application">MPlayer</span> sources are updated whenever
an <code class="systemitem">x264</code> API change
occurs, so it is always suggested to use
<span class="application">MPlayer</span> from Subversion.
</p><p>
If you have a GIT client installed, the latest x264
sources can be gotten with this command:
</p><pre class="screen">git clone git://git.videolan.org/x264.git</pre><p>

Then build and install in the standard way:
</p><pre class="screen">./configure &amp;&amp; make &amp;&amp; make install</pre><p>

Now rerun <tt class="filename">./configure</tt> for
<span class="application">MPlayer</span> to pick up
<code class="systemitem">x264</code> support.
</p></div><div class="sect2" title="2.5.3. Kodek AAC"><div class="titlepage"><div><div><h3 class="title"><a name="aac"></a>2.5.3. Kodek AAC</h3></div></div></div><p>
AAC (Advanced Audio Coding) jest kodekiem audio spotykanym czasami w plikach
MOV i MP4. Otwarty dekoder nazywany FAAD dostępny jest na stronie
<a class="ulink" href="http://www.audiocoding.com" target="_top">http://www.audiocoding.com</a>.
<span class="application">MPlayer</span> zawiera migawkę CVS z
libfaad 2.1beta, więc nie musisz ściągać go oddzielnie.
</p><p>
Jeżeli używasz gcc 3.2, który ma kłopoty z kompilacją wbudowanej wersji
FAAD lub chcesz z jakichś powodów użyć zewnętrznej biblioteki,
ściągnij ją z
<a class="ulink" href="http://www.audiocoding.com/modules/mydownloads/" target="_top">tej strony</a>
i dodaj opcję <tt class="option">--enable-external-faad</tt> do
<tt class="filename">./configure</tt>. Nie potrzebujesz całego faad2 do dekodowanie
plików AAC. Wystarczy użyć samej biblioteki libfaad. Zbudujesz ją w następujący
sposób
</p><pre class="screen">
cd faad2/
sh bootstrap
./configure
cd libfaad
make
make install
</pre><p>
Wersje binarne nie są dostępne na stronie audiocoding.com, ale możesz
ściągnąć (apt-getem) Debianowe paczki ze
<a class="ulink" href="http://www.debian-multimedia.org/" target="_top">strony domowej Christiana Marillata</a>,
RPM-y dla Mandrake/Mandriva ze strony <a class="ulink" href="http://plf.zarb.org" target="_top">P.L.F</a>,
a RPM-y dla Fedory z <a class="ulink" href="http://rpm.livna.org/" target="_top">Livna</a>.
</p></div><div class="sect2" title="2.5.4. Kodeki AMR"><div class="titlepage"><div><div><h3 class="title"><a name="amr"></a>2.5.4. Kodeki AMR</h3></div></div></div><p>
Kodeki mowy Adaptive Multi-Rate są używane w telefonii komórkowej
trzeciej generacji (3G).
Opis implementacji udostępniany jest przez
<a class="ulink" href="http://www.3gpp.org" target="_top">The 3rd Generation Partnership Project</a>
(za darmo dla osób prywatnych).
</p><p>
Żeby uaktywnić obsługę kodeków, pobierz źródła kodeków
<a class="ulink" href="http://www.3gpp.org/ftp/Specs/latest/Rel-6/26_series/26104-610.zip" target="_top">AMR-NB</a> i
<a class="ulink" href="http://www.3gpp.org/ftp/Specs/latest/Rel-6/26_series/26204-600.zip" target="_top">AMR-WB</a>,
umieść je w katalogu do którego rozpakowałeś źródła
<span class="application">MPlayera</span> i wpisz następujące komendy:
</p><pre class="screen">
unzip 26104-610.zip
unzip 26104-610_ANSI_C_source_code.zip
mv c-code libavcodec/amr_float
unzip 26204-600.zip
unzip 26204-600_ANSI-C_source_code.zip
mv c-code libavcodec/amrwb_float
</pre><p>
Gdy już to zrobisz, kontynuuj <a class="link" href="#features" title="2.2. Możliwości">budowanie</a>
<span class="application">MPlayera</span> tak, jak zwykle.
</p></div></div><div class="sect1" title="2.6. RTC"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rtc"></a>2.6. RTC</h2></div></div></div><p>
Istnieją trzy metody synchronizacji w <span class="application">MPlayerze</span>.

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Żeby skorzystać ze starej metody</strong></span>, nie musisz
  robić nic. Używa ona <code class="systemitem">usleep()</code>, aby poprawnie
  zsynchronizować A/V z dokładnością +/- 10ms. Czasami jednak synchronizacja
  musi być jeszcze dokładniejsza.
</p></li><li class="listitem"><p>
  Kod <span class="bold"><strong>nowego zegara</strong></span> korzysta do tego celu
  z RTC (RealTime Clock), ponieważ jest on dokładny co do 1ms.
  Włącza się go opcją
  <tt class="option">-rtc</tt>, ale wymaga odpowiednio skonfigurowanego jądra.
  Jeżeli korzystasz z jądra w wersji 2.4.19pre8 lub późniejszej, wystarczy, że
  ustawisz maksymalną częstotliwość RTC dla zwykłego użytkownika przez
  system plików <code class="systemitem">/proc</code>.
  Użyj jednego z następujących poleceń, aby pozwolić na korzystanie z RTC
  zwykłym użytkownikom:
  </p><pre class="screen">echo 1024 &gt; /proc/sys/dev/rtc/max-user-freq</pre><p>
  </p><pre class="screen">sysctl dev/rtc/max-user-freq=1024</pre><p>
  Możesz uczynić tę zmianę trwałą  dodając ten drugi wiersz do
  <tt class="filename">/etc/sysctl.conf</tt>.
  </p><p>
  Możesz zobaczyć wydajność nowego synchronizatora w wierszu stanu.
  Zarządzanie energią w BIOSach niektórych notebooków z procesorami w technologii
  speedstep nie współgra z RTC. Dźwięk i obraz mogą być niezsynchronizowane.
  Podłączenie zewnętrznego źródła energii przed włączeniem notebooka
  wydaje się pomagać.
  W niektórych zestawieniach sprzętowych (sprawdzone przy używaniu DVD bez
  obsługi DMA na płycie ALi1541) korzystanie z RTC wywołuje skokowe odtwarzanie.
  Zaleca się skorzystanie w tych przypadkach z trzeciej metody.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Trzeci kod zegara</strong></span> włączany jest opcją
  <tt class="option">-softsleep</tt>. Ma dokładność RTC, ale z niego nie korzysta.
  Wymaga jednak większej mocy obliczeniowej procesora.
</p></li></ul></div><p>
</p></div></div><div class="chapter" title="Rozdział 3. Sposób użycia"><div class="titlepage"><div><div><h2 class="title"><a name="usage"></a>Rozdział 3. Sposób użycia</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#commandline">3.1. Wiersz poleceń</a></span></dt><dt><span class="sect1"><a href="#subosd">3.2. Napisy i OSD</a></span></dt><dt><span class="sect1"><a href="#control">3.3. Sterowanie</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ctrl-cfg">3.3.1. Konfiguracja sterowania</a></span></dt><dt><span class="sect2"><a href="#lirc">3.3.2. Sterowanie poprzez LIRC</a></span></dt><dt><span class="sect2"><a href="#slave-mode">3.3.3. Tryb sługi</a></span></dt></dl></dd><dt><span class="sect1"><a href="#streaming">3.4. Strumieniowanie z sieci i potoków</a></span></dt><dd><dl><dt><span class="sect2"><a href="#streaming-save">3.4.1. Zapisywanie strumieniowanej zawartości</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mpst">3.5. Strumienie zdalne</a></span></dt><dd><dl><dt><span class="sect2"><a href="#compile_mpst_server">3.5.1. Kompilacja serwera</a></span></dt><dt><span class="sect2"><a href="#use_mpst">3.5.2. Używanie strumieni zdalnych</a></span></dt></dl></dd><dt><span class="sect1"><a href="#edl">3.6. Decyzyjne Listy Edycji (Edit Decision Lists - EDL)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#edl_using">3.6.1. Używanie pliku EDL</a></span></dt><dt><span class="sect2"><a href="#edl_making">3.6.2. Tworzenie pliku EDL</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio">3.7. Zaawansowane audio</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-surround">3.7.1. Dźwięk przestrzenny/wielokanałowy</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-surround-DVD">3.7.1.1. DVDs</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-stereoinfour">3.7.1.2. Odtwarzanie plików stereo przy użyciu czterech głośników</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-passthrough">3.7.1.3. Przekazywanie AC3/DTS</a></span></dt><dt><span class="sect3"><a href="#hwmpa-surround-passthrough">3.7.1.4. Przekazywanie dźwięku MPEG</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-matrix">3.7.1.5. Dźwięk zakodowany macierzowo</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-hrtf">3.7.1.6. Emulacja przestrzeni w słuchawkach</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-troubleshooting">3.7.1.7. Rozwiązywanie problemów</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-channels">3.7.2. Manipulowanie kanałami</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-channels-general">3.7.2.1. Ogólne informacje</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mono">3.7.2.2. Odtwarzanie dźwięku mono przy użyciu dwóch głośników</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-copying">3.7.2.3. Kopiowanie i przesuwanie kanałów</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mixing">3.7.2.4. Miksowanie kanałów</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-volume">3.7.3. Programowa regulacja głośności</a></span></dt></dl></dd></dl></div><div class="sect1" title="3.1. Wiersz poleceń"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="commandline"></a>3.1. Wiersz poleceń</h2></div></div></div><p>
<span class="application">MPlayer</span> używa skomplikowanego drzewa odtwarzania.
Składa się ono z opcji globalnych podanych na początku, na przykład:
</p><pre class="screen">mplayer -vfm 5</pre><p>
i opcji podanych po nazwach plików, które stosują się jedynie do podanego
pliku/URLa/czegokolwiek, na przykład:
</p><pre class="screen">
mplayer -vfm 5 <em class="replaceable"><code>film1.avi</code></em> <em class="replaceable"><code>film2.avi</code></em> -vfm 4
</pre><p>
</p><p>
Możesz pogrupować nazwy plików/URLe za pomocą <code class="literal">{</code> oraz
<code class="literal">}</code>. Przydaje się to przy opcji <tt class="option">-loop</tt>:
</p><pre class="screen">mplayer { 1.avi -loop 2 2.avi } -loop 3</pre><p>
Powyższe polecenie odtworzy pliki w kolejności: 1, 1, 2, 1, 1, 2, 1, 1, 2.
</p><p>
Odtwarzanie pliku:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje</code></em>] [<em class="replaceable"><code>ścieżka</code></em>/]<em class="replaceable"><code>nazwa_pliku</code></em>
</pre><p>
</p><p>
Kolejny sposób na odtworzenie pliku:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje</code></em>] <em class="replaceable"><code>file:///zakodowana-ścieżka-uri</code></em>
</pre><p>
</p><p>
Odtwarzanie większej ilości plików:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje domyślne</code></em>] [<em class="replaceable"><code>ścieżka</code></em>/]<em class="replaceable"><code>plik1</code></em> [<em class="replaceable"><code>opcje dla pliku1</code></em>] <em class="replaceable"><code>plik2</code></em> [<em class="replaceable"><code>opcje dla pliku2</code></em>] ...
</pre><p>
</p><p>
Odtwarzanie VCD:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje</code></em>] vcd://<em class="replaceable"><code>numer_ścieżki</code></em> [-cdrom-device <em class="replaceable"><code>/dev/cdrom</code></em>]
</pre><p>
</p><p>
Odtwarzanie DVD:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje</code></em>] dvd://<em class="replaceable"><code>numer_tytułu</code></em> [-dvd-device <em class="replaceable"><code>/dev/dvd</code></em>]
</pre><p>
</p><p>
Odtwarzanie z WWW:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje</code></em>] http://<em class="replaceable"><code>strona.com/plik.asf</code></em>
</pre><p>
(można użyć również playlist)
</p><p>
Odtwarzanie z RTSP:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>opcje</code></em>] rtsp://<em class="replaceable"><code>serwer.przyklad.com/nazwa_strumienia</code></em>
</pre><p>
</p><p>
Przykłady:
</p><pre class="screen">
mplayer -vo x11 <em class="replaceable"><code>/mnt/Films/Contact/contact2.mpg</code></em>
mplayer vcd://<em class="replaceable"><code>2</code></em> -cdrom-device <em class="replaceable"><code>/dev/hdc</code></em>
mplayer -afm 3 <em class="replaceable"><code>/mnt/DVDtrailers/alien4.vob</code></em>
mplayer dvd://<em class="replaceable"><code>1</code></em> -dvd-device <em class="replaceable"><code>/dev/hdc</code></em>
mplayer -abs 65536 -delay -0.4 -nobps <em class="replaceable"><code>~/movies/test.avi</code></em></pre><p>
</p></div><div class="sect1" title="3.2. Napisy i OSD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="subosd"></a>3.2. Napisy i OSD</h2></div></div></div><p>
<span class="application">MPlayer</span> może wyświetlać napisy podczas odtwarzania
filmu. Obecnie obsługiwane są następujące formaty:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>VOBsub</p></li><li class="listitem"><p>OGM</p></li><li class="listitem"><p>CC (closed caption)</p></li><li class="listitem"><p>MicroDVD</p></li><li class="listitem"><p>SubRip</p></li><li class="listitem"><p>SubViewer</p></li><li class="listitem"><p>Sami</p></li><li class="listitem"><p>VPlayer</p></li><li class="listitem"><p>RT</p></li><li class="listitem"><p>SSA</p></li><li class="listitem"><p>PJS (Phoenix Japanimation Society)</p></li><li class="listitem"><p>MPsub</p></li><li class="listitem"><p>AQTitle</p></li><li class="listitem"><p>
    <a class="ulink" href="http://unicorn.us.com/jacosub/" target="_top">JACOsub</a></p></li></ul></div><p>
</p><p>
<span class="application">MPlayer</span> może zrzucić wyżej wymienione formaty napisów
(<span class="bold"><strong>poza pierwszymi trzema</strong></span>) do następujących formatów,
jeśli podasz odpowiednią opcję:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>MPsub: <tt class="option">-dumpmpsub</tt></p></li><li class="listitem"><p>SubRip: <tt class="option">-dumpsrtsub</tt></p></li><li class="listitem"><p>MicroDVD: <tt class="option">-dumpmicrodvdsub</tt></p></li><li class="listitem"><p>JACOsub: <tt class="option">-dumpjacosub</tt></p></li><li class="listitem"><p>Sami: <tt class="option">-dumpsami</tt></p></li></ul></div><p>
</p><p>
<span class="application">MEncoder</span> może zrzucić napisy DVD do formatu
<a class="link" href="#menc-feat-extractsub" title="9.9. Wydobywanie napisów z DVD do pliku VOBsub">VOBsub</a>.
</p><p>
Opcje wiersza poleceń różnią się nieco dla poszczególnych formatów:
</p><p title="Format VOBsub"><b>Format VOBsub. </b>
Napisy VOBsub składają się z dużego (kilkumegabajtowego) pliku <tt class="filename">.SUB</tt>
i opcjonalnych plików <tt class="filename">.IDX</tt> i/lub <tt class="filename">.IFO</tt>.
Jeżeli masz takie pliki, jak
<tt class="filename"><em class="replaceable"><code>przykład.sub</code></em></tt>,
<tt class="filename"><em class="replaceable"><code>przykład.ifo</code></em></tt> (opcjonalne),
<tt class="filename"><em class="replaceable"><code>przykład.idx</code></em></tt> -
musisz przekazać <span class="application">MPlayerowi</span> opcje
<tt class="option">-vobsub przykład [-vobsubid <em class="replaceable"><code>id</code></em>]</tt>
(pełna ścieżka jest opcjonalna). Parametr <tt class="option">-vobsubid</tt> jest, jak
<tt class="option">-sid</tt> dla DVD - przy jego pomocy możesz wybierać pomiędzy ścieżkami napisów
(różne języki). Jeżeli opcja <tt class="option">-vobsubid</tt> jest pominięta,
<span class="application">MPlayer</span> spróbuje użyć języka podanego przez parametr
<tt class="option">-slang</tt> i powróci do <code class="systemitem">langidx</code>
zawartego w pliku<tt class="filename">.IDX</tt>, żeby ustawić język napisów. Jeżeli to
zakończy się niepowodzeniem, napisy nie będą wyświetlane.
</p><p title="Inne formaty napisów"><b>Inne formaty napisów. </b>
Inne formaty składają się z pojedynczego pliku tekstowego zawierającego przedział
czasowy, rozmieszczenie i sam tekst. Sposób użycia: Jeżeli masz taki plik, jak
<tt class="filename"><em class="replaceable"><code>przykład.txt</code></em></tt>,
musisz przekazać opcję <tt class="option">-sub
<em class="replaceable"><code>przykład.txt</code></em></tt> (pełna ścieżka jest opcjonalna).
</p><div class="variablelist" title="Dopasowywanie czasu wyświetlania i położenia napisów:"><p class="title"><b>Dopasowywanie czasu wyświetlania i położenia napisów:</b></p><dl><dt><span class="term"><tt class="option">-subdelay <em class="replaceable"><code>sek</code></em></tt></span></dt><dd><p>
    Opóźnia wyświetlanie napisów o <tt class="option"><em class="replaceable"><code>sek</code></em></tt> sekund.
    Może być liczbą ujemną. Wartość jest dodawana do licznika czasu filmu.
  </p></dd><dt><span class="term"><tt class="option">-subfps <em class="replaceable"><code>ILOŚĆ</code></em></tt></span></dt><dd><p>
    Określa ilość klatek na sekundę pliku z napisami (liczba rzeczywista).
  </p></dd><dt><span class="term"><tt class="option">-subpos <em class="replaceable"><code>0-100</code></em></tt></span></dt><dd><p>
    Określa położenie napisów.
  </p></dd></dl></div><p>
Jeżeli podczas używania napisów w formacie MicroDVD zauważysz rosnące opóźnienie
między nimi a filmem, to prawdopodobnie ilość klatek na sekundę filmu różni się
od wartości, do której zostały przystosowane napisy.
Zauważ, że format ten korzysta z bezwzględnych numerów klatek do wyświetlania
napisów w odpowiednim momencie, ale nie zawiera w sobie informacji o wartości fps,
dlatego powinieneś skorzystać z opcji <tt class="option">-subfps</tt>.
Jeżeli chciałbyś trwale rozwiązać ten problem, musisz ręcznie zmienić
wartość framerate pliku z napisami.
<span class="application">MPlayer</span> może zrobić to za ciebie:

</p><pre class="screen">
mplayer -dumpmicrodvdsub -fps <em class="replaceable"><code>fps_napisów</code></em> -subfps <em class="replaceable"><code>fps_filmu</code></em> \
    -sub <em class="replaceable"><code>zbiór_z_napisami</code></em> <em class="replaceable"><code>atrapa.avi</code></em>
</pre><p>
</p><p>
O napisach DVD przeczytasz w rozdziale <a class="link" href="#dvd" title="4.2. Odtwarzanie DVD">DVD</a>.
</p></div><div class="sect1" title="3.3. Sterowanie"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="control"></a>3.3. Sterowanie</h2></div></div></div><p>
<span class="application">MPlayer</span> posiada w pełni konfigurowalną, opartą na
komendach warstwę sterowania, która pozwala na sterowanie
<span class="application">MPlayerem</span> za pomocą klawiatury, myszki, joysticka lub
zdalnego sterowania (za pomocą LIRC). Zajrzyj na stronę man w celu przejrzenia
pełnej listy skrótów klawiszowych.
</p><div class="sect2" title="3.3.1. Konfiguracja sterowania"><div class="titlepage"><div><div><h3 class="title"><a name="ctrl-cfg"></a>3.3.1. Konfiguracja sterowania</h3></div></div></div><p>
<span class="application">MPlayer</span> pozwala Ci przypisać dowolny klawisz/przycisk
do dowolnego polecenia za pomocą prostego pliku konfiguracyjnego. Składnia tego
pliku to nazwa klawisza, po której znajduje się komenda. Domyślny plik
konfiguracyjny znajduje się w <tt class="filename">$HOME/.mplayer/input.conf</tt>, ale
można podać także inny za pomocą opcji
<tt class="option">-input <em class="replaceable"><code>plik</code></em></tt>
(ścieżki względne są względem <tt class="filename">$HOME/.mplayer</tt>).
</p><p>
Możesz uzyskać pełną listę obsługiwanych klawiszy uruchamiając
<span class="command"><strong>mplayer -input keylist</strong></span>
i pełną listę dostępnych komend za pomocą
<span class="command"><strong>mplayer -input cmdlist</strong></span>.
</p><div class="example"><a name="input_control_file"></a><p class="title"><b>Przykład 3.1. Przykładowy plik konfiguracji sterowania</b></p><div class="example-contents"><pre class="programlisting">
##
## Plik konfiguracji sterowania MPlayera
##

RIGHT seek +10
LEFT seek -10
- audio_delay 0.100
+ audio_delay -0.100
q quit
&gt; pt_step 1
&lt; pt_step -1
ENTER pt_step 1 1</pre></div></div><br class="example-break"></div><div class="sect2" title="3.3.2. Sterowanie poprzez LIRC"><div class="titlepage"><div><div><h3 class="title"><a name="lirc"></a>3.3.2. Sterowanie poprzez LIRC</h3></div></div></div><p>
Linux Infrared Remote Control - użyj łatwego do własnoręcznego zbudowania
odbiornika podczerwieni i (prawie) dowolnego pilota zdalnego sterowania i
steruj nim swoim Linuksem!
Więcej informacji na <a class="ulink" href="http://www.lirc.org" target="_top">stronie domowej LIRC</a>.
</p><p>
Jeśli zainstalowałeś pakiet LIRC, <tt class="filename">configure</tt> automatycznie go
wykryje. Jeśli wszystko pójdzie dobrze, <span class="application">MPlayer</span>
wypisze przy starcie "<code class="systemitem">Setting up LIRC support...</code>".
Jeśli wystąpi błąd, powiadomi Cię o tym. Jeśli nic nie powie Ci na
temat LIRC, to znaczy, że jego obsługa nie została wkompilowana. Proste :-)
</p><p>
Nazwa aplikacji dla <span class="application">MPlayer</span> to - niespodzianka -
<tt class="filename">mplayer</tt>. Możesz używać dowolnych komend
<span class="application">MPlayera</span>, a nawet podać więcej niż jedną
komendę na raz oddzielając je za pomocą <code class="literal">\n</code>.
Nie zapomnij o włączeniu flagi repeat w <tt class="filename">.lircrc</tt> jeśli
ma to sens (skoki, głośność itp). To jest fragment przykładowego
<tt class="filename">.lircrc</tt>:
</p><pre class="programlisting">
begin
     button = VOLUME_PLUS
     prog = mplayer
     config = volume 1
     repeat = 1
end

begin
    button = VOLUME_MINUS
    prog = mplayer
    config = volume -1
    repeat = 1
end

begin
    button = CD_PLAY
    prog = mplayer
    config = pause
end

begin
    button = CD_STOP
    prog = mplayer
    config = seek 0 1\npause
end</pre><p>
Jeśli nie lubisz standardowej lokalizacji pliku lirc-config
(<tt class="filename">~/.lircrc</tt>), użyj opcji <tt class="option">-lircconf
<em class="replaceable"><code>nazwa_pliku</code></em></tt> by podać inny plik.
</p></div><div class="sect2" title="3.3.3. Tryb sługi"><div class="titlepage"><div><div><h3 class="title"><a name="slave-mode"></a>3.3.3. Tryb sługi</h3></div></div></div><p>
Tryb sługi pozwala Ci na utworzenie prostej nakładki na
<span class="application">MPlayera</span>. Po uruchomieniu z opcją
<tt class="option">-slave</tt> <span class="application">MPlayer</span> będzie czytał
ze standardowego wejścia komendy oddzielone znakami nowego wiersza (\n).
Komendy zostały udokumentowane w pliku
<a class="ulink" href="../../tech/slave.txt" target="_top">slave.txt</a>
</p></div></div><div class="sect1" title="3.4. Strumieniowanie z sieci i potoków"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="streaming"></a>3.4. Strumieniowanie z sieci i potoków</h2></div></div></div><p>
<span class="application">MPlayer</span> potrafi odtwarzać pliki z sieci, używając
protokołów HTTP, FTP, MMS lub RTSP/RTP.
</p><p>
Odtwarzanie następuje przez proste podanie URLa w wierszu poleceń.
<span class="application">MPlayer</span> zwraca również uwagę na zmienną środowiskową
<code class="envar">http_proxy</code> i używa proxy jeśli jest to możliwe. Korzystanie
z proxy może być również wymuszone za pomocą:
</p><pre class="screen">
mplayer <em class="replaceable"><code>http_proxy://proxy.micorsops.com:3128/http://micorsops.com:80/strumien.asf</code></em>
</pre><p>
</p><p>
<span class="application">MPlayer</span> potrafi również czytać ze standardowego wejścia
(<span class="emphasis"><em>nie</em></span> z nazwanych potoków). Może to być wykorzystane np. do
odtwarzania poprzez FTP:
</p><pre class="screen">i
wget <em class="replaceable"><code>ftp://micorsops.com/cokolwiek.avi</code></em> -O - | mplayer -
</pre><p>
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Zalecane jest również włączenie <tt class="option">-cache</tt> przy odtwarzaniu
z sieci:
</p><pre class="screen">
wget <em class="replaceable"><code>ftp://micorsops.com/cokolwiek.avi</code></em> -O - | mplayer -cache 8192 -
</pre><p>
</p></div><div class="sect2" title="3.4.1. Zapisywanie strumieniowanej zawartości"><div class="titlepage"><div><div><h3 class="title"><a name="streaming-save"></a>3.4.1. Zapisywanie strumieniowanej zawartości</h3></div></div></div><p>
Jak już uda Ci się zmusić <span class="application">MPlayera</span> do odtwarzania
Twojego ulubionego strumienia internetowego, możesz użyć opcji
<tt class="option">-dumpstream</tt> aby zapisać strumień do pliku.
Na przykład:
</p><pre class="screen">
mplayer <em class="replaceable"><code>http://217.71.208.37:8006</code></em> -dumpstream -dumpfile <em class="replaceable"><code>strumien.asf</code></em>
</pre><p>
zapisze zawartość strumieniowaną z
<em class="replaceable"><code>http://217.71.208.37:8006</code></em> do pliku
<em class="replaceable"><code>stream.asf</code></em>.
Działa to ze wszystkimi protokołami obsługiwanymi przez
<span class="application">MPlayera</span>, jak MMS, RSTP itd.
</p></div></div><div class="sect1" title="3.5. Strumienie zdalne"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mpst"></a>3.5. Strumienie zdalne</h2></div></div></div><p>
Strumienie zdalne pozwalają na dostęp do większości strumieni obsługiwanych
przez <span class="application">MPlayera</span> ze zdalnego hosta. Głównym celem tej
funkcji jest umożliwienie bezpośredniego korzystania z napędu CD lub DVD innego
komputera w sieci (pod warunkiem posiadania odpowiedniej przepustowości).
Niestety niektóre typy strumieni (aktualnie TV oraz MF) nie są dostępne zdalnie,
gdyż są zaimplementowane na poziomie demultipleksera. Jest to przykre w
przypadku MF, gdyż TV i tak by wymagało szalonej przepustowości.
</p><div class="sect2" title="3.5.1. Kompilacja serwera"><div class="titlepage"><div><div><h3 class="title"><a name="compile_mpst_server"></a>3.5.1. Kompilacja serwera</h3></div></div></div><p>
Po kompilacji <span class="application">MPlayera</span> wejdź do katalogu
<tt class="filename">TOOLS/netstream</tt> i wpisz <span class="application">make</span>
by zbudować program serwera. Możesz wtedy skopiować program
<span class="application">nestream</span> do odpowiedniego miejsca w Twoim
systemie (przeważnie <tt class="filename">/usr/local/bin</tt>
pod Linuksem).
</p></div><div class="sect2" title="3.5.2. Używanie strumieni zdalnych"><div class="titlepage"><div><div><h3 class="title"><a name="use_mpst"></a>3.5.2. Używanie strumieni zdalnych</h3></div></div></div><p>
Najpierw musisz uruchomić serwer na komputerze, do którego masz zamiar mieć
dostęp zdalny. Aktualnie serwer jest bardzo podstawowy i nie ma żadnych
argumentów wiersza poleceń, więc po prostu wpisz <tt class="filename">netstream</tt>.
Teraz możesz np. odtworzyć drugą ścieżkę VCD na serwerze za pomocą:
</p><pre class="screen">
mplayer -cache 5000 <em class="replaceable"><code>mpst://nazwa_serwera/vcd://2</code></em>
</pre><p>
Masz również dostęp do plików na tym serwerze:
</p><pre class="screen">
mplayer -cache 5000 <em class="replaceable"><code>mpst://nazwa_serwera//usr/local/movies/lol.avi</code></em>
</pre><p>
Zauważ, że ścieżki, które nie zaczynają się na "/" będą względne do katalogu,
w którym uruchomiono serwer. Opcja <tt class="option">-cache</tt> nie jest wymagana,
lecz bardzo zalecana.
</p><p>
Miej na uwadze to, że aktualnie serwer nie ma żadnych zabezpieczeń. Nie narzekaj
więc na liczne nadużycia, które są przez to możliwe. Zamiast tego wyślij jakąś
(dobrą) łatkę, by stał się lepszy lub napisz swój własny serwer.
</p></div></div><div class="sect1" title="3.6. Decyzyjne Listy Edycji (Edit Decision Lists - EDL)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edl"></a>3.6. Decyzyjne Listy Edycji (Edit Decision Lists - EDL)</h2></div></div></div><p>
Decyzyjna lista edycji (EDL) pozwala na automatyczne omijanie, bądź wyciszanie
fragmentów filmów podczas ich odtwarzania, na podstawie pliku konfiguracji EDL
dla danego filmu.
</p><p>
Funkcja ta jest użyteczna dla osób, które zechcą obejrzeć film w "przyjaznym
dla rodziny" trybie. Możesz usunąć z filmu przemoc, przekleństwa, Jar-Jar
Binksa, zgodnie z własnymi preferencjami. Ponadto istnieją także inne
zastosowania, jak automatyczne pomijanie reklam w oglądanych filmach.
</p><p>
Format pliku EDL jest raczej "goły". Używana jest struktura z pojedynczym
poleceniem w wierszu, w którym określone jest co należy zrobić (skip/mute),
oraz kiedy (używając opóźnienia w sekundach).
</p><div class="sect2" title="3.6.1. Używanie pliku EDL"><div class="titlepage"><div><div><h3 class="title"><a name="edl_using"></a>3.6.1. Używanie pliku EDL</h3></div></div></div><p>
Użyj podczas uruchamiania <span class="application">MPlayera</span> flagi
<tt class="option">-edl &lt;nazwa pliku&gt;</tt> z nazwą pliku EDL, który ma być
zastosowany do filmu.
</p></div><div class="sect2" title="3.6.2. Tworzenie pliku EDL"><div class="titlepage"><div><div><h3 class="title"><a name="edl_making"></a>3.6.2. Tworzenie pliku EDL</h3></div></div></div><p>
Aktualny format pliku EDL jest następujący:
</p><pre class="programlisting">[sekunda początkowa] [sekunda końcowa] [akcja]</pre><p>
gdzie liczby odpowiadające sekundom nie muszą być całkowite, zaś akcja może
przyjmować wartość <code class="literal">0</code> dla pominięcia bądź
<code class="literal">1</code> dla wyciszenia.
Na przykład:
</p><pre class="programlisting">
5.3   7.1    0
15    16.7   1
420   422    0
</pre><p>
Oznacza to pominięcie filmu między 5,3 sekundą, a 7,1 sekundą filmu, następnie
wyciszenie od 15-tej sekundy do 16,7 sekundy i wreszcie pominięcie filmu
pomiędzy 420 a 422 sekundą Akcje te są wykonywane, gdy licznik czasu filmu
osiągnie zadeklarowaną wartość.
</p><p>
Aby stworzyć plik EDL, będący punktem wyjścia do dalszej edycji, użyj flagi
<tt class="option">-edlout &lt;nazwa pliku&gt;</tt>.
Następnie, podczas odtwarzania filmu, naciśnij <span class="keycap"><b>i</b></span>, aby oznaczyć
początek i koniec bloku do pominięcia.
Odpowiedni wpis zostanie automatycznie utworzony w pliku.
Wtedy możesz wrócić do edycji i "dostrajania" wygenerowanego pliku EDL,
w którym możesz także zmienić domyślne pomijanie bloku na wyciszanie.
</p></div></div><div class="sect1" title="3.7. Zaawansowane audio"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advaudio"></a>3.7. Zaawansowane audio</h2></div></div></div><div class="sect2" title="3.7.1. Dźwięk przestrzenny/wielokanałowy"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround"></a>3.7.1. Dźwięk przestrzenny/wielokanałowy</h3></div></div></div><div class="sect3" title="3.7.1.1. DVDs"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-DVD"></a>3.7.1.1. DVDs</h4></div></div></div><p>
Większość płyt DVD, a także wiele innych plików, zawiera dźwięk przestrzenny.
<span class="application">MPlayer</span> obsługuje dźwięk przestrzenny, ale opcja ta
nie jest domyślnie włączona, ponieważ sprzęt przeznaczony dla zwykłego stereo
jest znacznie bedziej popularny. Aby odtworzyć plik zawierający więcej niż dwa
kanały audio, użyj opcji <tt class="option">-channels</tt>.
Na przykład, aby odtworzyć DVD z audio 5.1:
</p><pre class="screen">mplayer dvd://1 -channels 6</pre><p>
Zauważmy, że mimo nazwy "5.1", używanych jest 6 kanałów.
Jeżeli posiadasz sprzęt pozwalający na odtwarzanie dźwięku przestrzennego możesz
bezpiecznie wpisać <tt class="option">channels</tt> do swojego pliku konfiguracyjnego
<span class="application">MPlayera</span> (<tt class="filename">~/.mplayer/config</tt>).
Przykładowo, aby domyślnie włączyć efekt kwadrofonii, należy dodać wiersz:
</p><pre class="programlisting">channels=4</pre><p>
Od tego momentu, <span class="application">MPlayer</span> będzie odtwarzał cztery
kanały audio, zawsze gdy będą one dostępne.
</p></div><div class="sect3" title="3.7.1.2. Odtwarzanie plików stereo przy użyciu czterech głośników"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-stereoinfour"></a>3.7.1.2. Odtwarzanie plików stereo przy użyciu czterech głośników</h4></div></div></div><p>
<span class="application">MPlayer</span> standardowo nie duplikuje kanałów, ani nie
robi tego większość sterowników audio. Jeżeli chcesz zrobić to ręcznie:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af channels=2:2:0:1:0:0</pre><p>
Zobacz sekcję o
<a class="link" href="#advaudio-channels-copying" title="3.7.2.3. Kopiowanie i przesuwanie kanałów">kopiowaniu kanałów</a>,
jest tam wyjaśnienie tego polecenia.
</p></div><div class="sect3" title="3.7.1.3. Przekazywanie AC3/DTS"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-passthrough"></a>3.7.1.3. Przekazywanie AC3/DTS</h4></div></div></div><p>
Dźwięk przestrzenny na płytach DVD zazwyczaj kodowany jest w formacie AC3
(Dolby Digital) lub DTS (Digital Theater System). Część współczesnego sprzętu
audio jest w stanie dekodować te formaty.
<span class="application">MPlayer</span> może zostać skonfigurowany, aby przekazywał
dane audio bez ich dekodowania. Rozwiązanie takie będzie działało tylko, jeżeli
posiadasz w swojej karcie muzycznej złącze S/PDIF (Sony/Philips Digital Interface).
</p><p>
Jeżeli twój sprzęt audio potrafi dekodować zarówno AC3 jak i DTS, możesz
bezpiecznie włączyć przekazywanie dla obu formatów. W przeciwnym razie, tylko
dla tego formatu, który jest obsługiwany przez Twój sprzęt.
</p><div class="itemizedlist" title="Aby włączyć przekazywanie z wiersza poleceń:"><p class="title"><b>Aby włączyć przekazywanie z wiersza poleceń:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  dla AC3 użyj <tt class="option">-ac hwac3</tt>
</p></li><li class="listitem"><p>
  dla DTS użyj <tt class="option">-ac hwdts</tt>
</p></li><li class="listitem"><p>
  dla AC3 i DTS użyj <tt class="option">-afm hwac3</tt>
</p></li></ul></div><div class="itemizedlist" title="Aby włączyć przekazywanie w pliku konfiguracyjnym MPlayera:"><p class="title"><b>Aby włączyć przekazywanie w pliku konfiguracyjnym
  <span class="application">MPlayera</span>: </b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  dla AC3 użyj <tt class="option">ac=hwac3,</tt>
</p></li><li class="listitem"><p>
  dla DTS użyj <tt class="option">ac=hwdts,</tt>
</p></li><li class="listitem"><p>
  dla AC3 i DTS użyj <tt class="option">afm=hwac3</tt>
</p></li></ul></div><p>
Zauważ, że na końcu opcji <tt class="option">ac=hwac3,</tt> oraz
<tt class="option">ac=hwdts,</tt> są przecinki. Powodują one, że
<span class="application">MPlayer</span> będzie używał standardowych kodeków, które
są normalnie używane podczas odtwarzania plików, które nie posiadają dźwięku
AC3 ani DTS.
Opcja <tt class="option">afm=hwac3</tt> nie wymaga przecinka,
samo podanie rodziny kodeków powoduje że <span class="application">MPlayer</span>
wypróbuje inne gdy będzie musiał.
</p></div><div class="sect3" title="3.7.1.4. Przekazywanie dźwięku MPEG"><div class="titlepage"><div><div><h4 class="title"><a name="hwmpa-surround-passthrough"></a>3.7.1.4. Przekazywanie dźwięku MPEG</h4></div></div></div><p>
Cyfrowe transmisje TV (takie jak DVB czy ATSC), także niektóre płyty DVDs
zazwyczaj zawierają strumienie audio w formacie MPEG (zazwyczaj MP2).
Część sprzętowych dekoderów MPEG, takich jak pełnofunkcjonalne karty DVB, oraz
adaptery DXR2, potrafi natywnie dekodować ten format.
<span class="application">MPlayer</span> może zostać tak skonfigurowany, aby przekazywać
dane audio bez ich dekodowania.
</p><p>
Aby użyć tego sposobu dekodowania:
</p><pre class="screen"> mplayer -ac hwmpa </pre><p>
</p></div><div class="sect3" title="3.7.1.5. Dźwięk zakodowany macierzowo"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-matrix"></a>3.7.1.5. Dźwięk zakodowany macierzowo</h4></div></div></div><p>
<span class="emphasis"><em>***TODO***</em></span>
</p><p>
Ta sekcja musi dopiero zostać napisana i nie może zostać ukończona zanim
ktoś nie dostarczy przykładowych plików do testów. Jeżeli posiadasz jakieś
pliki audio zakodowane macierzowo (matrix-encoded), wiesz kto je posiada lub
wiesz cokolwiek co mogłoby być pomocne, wyślij proszę informację na listę
mailingową
<a class="ulink" href="http://mplayerhq.hu/mailman/listinfo/mplayer-docs" target="_top">MPlayer-DOCS</a>
W temacie podaj "[matrix-encoded audio]".
</p><p>
Jeżeli nie nadejdą żadne wiadomości, ta sekcja zostanie usunięta.
</p><p>
Przydatne linki:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <a class="ulink" href="http://electronics.howstuffworks.com/surround-sound5.htm" target="_top">http://electronics.howstuffworks.com/surround-sound5.htm</a>
</p></li><li class="listitem"><p>
  <a class="ulink" href="http://www.extremetech.com/article2/0,1697,1016875,00.asp" target="_top">http://www.extremetech.com/article2/0,1697,1016875,00.asp</a>
</p></li></ul></div><p>
</p></div><div class="sect3" title="3.7.1.6. Emulacja przestrzeni w słuchawkach"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-hrtf"></a>3.7.1.6. Emulacja przestrzeni w słuchawkach</h4></div></div></div><p>
<span class="application">MPlayer</span> posiada filtr HRTF (Head Related Transfer
Function) bazujący na <a class="ulink" href="http://sound.media.mit.edu/KEMAR.html" target="_top">projekcie MIT</a>,
w ramach którego wykonane zostały pomiary z mikrofonów zamontowanych na głowie
ludzkiego manekina.
</p><p>
Chociaż nie jest możliwe dokładne zasymulowanie systemu dźwięku przestrzennego,
filtr HRTF zawarty w <span class="application">MPlayerze</span> powoduje bardziej
przestrzenne zanurzenie w dźwięku przy użyciu 2-kanałowych słuchawek.
Standardowy procedura po prostu łączy wszystkie kanały w dwa. <tt class="option">hrtf</tt>,
obok łączenia kanałów, generuje także subtelne echa, nieznacznie zwiększa
separację kanałów stereo, a także zmienia głośność niektórych częstotliwości.
To, czy dźwięk HRTF brzmi lepiej, może zależeć od źródła dźwięku oraz gustu
słuchacza, ale z pewnością jest on warty wypróbowania.
</p><p>
Odtwarzanie DVD z HRTF:
</p><pre class="screen">mplayer dvd://1 -channels 6 -af hrtf</pre><p>
</p><p>
<tt class="option">hrtf</tt> działa poprawnie tylko przy 5 i 6 kanałach. Opcja ta wymaga
także audio próbkowanego z częstotliwością 48kHz. Audio na płytach DVD jest już
próbkowane 48kHz, lecz jeżeli chcesz odtworzyć plik z innym próbkowaniem i opcją
<tt class="option">hrtf</tt>, musisz dokonać jego przepróbkowania tego pliku:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -channels 6 -af resample=48000,hrtf
</pre><p>
</p></div><div class="sect3" title="3.7.1.7. Rozwiązywanie problemów"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-troubleshooting"></a>3.7.1.7. Rozwiązywanie problemów</h4></div></div></div><p>
Jeżeli nie słyszysz żadnych dźwięków, sprawdź ustawienia miksera przy pomocy
stosownego programu, takiego jak <span class="application">alsamixer</span>;
niejednokrotnie wyjścia audio są domyślnie wyciszone lub ich głośność jest ustawiona
na zero.
</p></div></div><div class="sect2" title="3.7.2. Manipulowanie kanałami"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-channels"></a>3.7.2. Manipulowanie kanałami</h3></div></div></div><div class="sect3" title="3.7.2.1. Ogólne informacje"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-general"></a>3.7.2.1. Ogólne informacje</h4></div></div></div><p>
Niestety nie ma żadnego standardu opisującego w jaki sposób kanały są uporządkowane.
Poniższe porządki przedstawiają te używane przez AC3, które są dość typowe. Spróbuj
ich i sprawdź czy odpowiednie źródła dźwięku się zgadzają. Kanały są numerowane od 0.

</p><div class="orderedlist" title="mono"><p class="title"><b>mono</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>środkowy</p></li></ol></div><p>

</p><div class="orderedlist" title="stereo"><p class="title"><b>stereo</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>lewy</p></li><li class="listitem"><p>prawy</p></li></ol></div><p>

</p><div class="orderedlist" title="kwadrofonia"><p class="title"><b>kwadrofonia</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>lewy przedni</p></li><li class="listitem"><p>prawy przedni</p></li><li class="listitem"><p>lewy tylny</p></li><li class="listitem"><p>prawy tylny</p></li></ol></div><p>

</p><div class="orderedlist" title="surround 4.0"><p class="title"><b>surround 4.0</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>lewy przedni</p></li><li class="listitem"><p>prawy przedni</p></li><li class="listitem"><p>środkowy tylny</p></li><li class="listitem"><p>środkowy przedni</p></li></ol></div><p>

</p><div class="orderedlist" title="surround 5.0"><p class="title"><b>surround 5.0</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>lewy przedni</p></li><li class="listitem"><p>prawy przedni</p></li><li class="listitem"><p>lewy tylny</p></li><li class="listitem"><p>prawy tylny</p></li><li class="listitem"><p>środkowy przedni</p></li></ol></div><p>

</p><div class="orderedlist" title="surround 5.1"><p class="title"><b>surround 5.1</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>lewy przedni</p></li><li class="listitem"><p>prawy przedni</p></li><li class="listitem"><p>lewy tylny</p></li><li class="listitem"><p>prawy tylny</p></li><li class="listitem"><p>środkowy przedni</p></li><li class="listitem"><p>subwoofer (głośnik niskotonowy)</p></li></ol></div><p>
</p><p>
Opcja <tt class="option">-channels</tt> jest używana w celu określenia liczby kanałów
dekodowanego audio. Niektóre kodeki audio wykorzystują tę liczbę aby zdecydować
czy konieczne jest zmniejszenie liczby kanałów poprzez miksowanie.
Zauważ, że ustawienie tej opcji nie jest równoważne z ustawieniem liczby
wyjściowych kanałów. Przykładowo, używając opcji <tt class="option">-channels 4</tt>
aby odtworzyć plik stereo MP3, otrzymamy 2 kanały wyjściowe, bowiem kodek MP3
nie potrafi spreparować dodatkowych kanałów.
</p><p>
Filtr audio <tt class="option">channels</tt> może być użyty aby stworzyć lub usunąć kanały,
co może być przydatne przy określaniu liczy kanałów przesyłanych do karty muzycznej.
Aby dowiedzieć się więcej, zobacz kolejne sekcje.
</p></div><div class="sect3" title="3.7.2.2. Odtwarzanie dźwięku mono przy użyciu dwóch głośników"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-mono"></a>3.7.2.2. Odtwarzanie dźwięku mono przy użyciu dwóch głośników</h4></div></div></div><p>
Dźwięk mono brzmi znacznie lepiej, gdy jest odtwarzany przy użyciu dwóch
głośników - szczególnie gdy używamy słuchawek. Pliki audio, które posiadają
tylko jeden kanał audio są automatycznie odtwarzane przy użyciu obu głośników;
niestety większość plików mono jest zakodowana jako dźwięk stereo, gdzie jeden
kanał jest wyciszony. Najłatwiejszą i najbardziej niezawodną metodą pozwalającą
na odtworzenie dźwięku przy użyciu obu głośników jest użycie filtru
<tt class="option">extrastereo</tt>:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af extrastereo=0</pre><p>
</p><p>
Metoda ta uśrednia oba kanały, co skutkuje zmniejszeniu głośności każdego z kanałów
o połowę względem oryginału. W następnej sekcji zawarto przykłady innych metod rozwiązania
tego problemu bez zmniejszania głośności; niestety są one bardziej skomplikowanego
i wymagają różnych opcji w zależności od kanału, który zawiera dane.
Jeżeli na prawdę potrzebujesz utrzymać głośność, możliwe że łatwiej będzie odpowiednio
dopasować głośność przy użyciu filtru <tt class="option">volume</tt>. Na przykład:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af extrastereo=0,volume=5</pre><p>
</p></div><div class="sect3" title="3.7.2.3. Kopiowanie i przesuwanie kanałów"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-copying"></a>3.7.2.3. Kopiowanie i przesuwanie kanałów</h4></div></div></div><p>
Filtr <tt class="option">channels</tt> potrafi przesunąć dowolny jeden lub wszystkie kanały.
Ustawienie wszystkich podopcji filtru <tt class="option">channels</tt> może być
skomplikowane i wymaga nieco uwagi.

</p><div class="orderedlist"><ol class="orderedlist" type="1" compact><li class="listitem"><p>
  Zdecyduj ile wyjściowych kanałów audio potrzebujesz. Oto pierwsza podopcja.
</p></li><li class="listitem"><p>
  Policz ile przesunięć kanałów zamierzasz wykonać. To jest druga podopcja.
  Każdy kanał może być przesunięty do kilku różnych kanałów w tym samym czasie,
  ale pamiętaj, że gdy przesuniesz kanał (również gdy tylko do jednego kanału
  docelowego), źródło zostanie opróżnione, chyba że inny kanał zostanie tam
  przesunięty. Aby skopiować kanał, pozostawiając źródło nietknięte, po prostu
  przesuń kanał zarówno do miejsca kopiowania, jak i do źródła. Na przykład:
  </p><pre class="programlisting">
kanał 2 --&gt; kanał 3
kanał 2 --&gt; kanał 2</pre><p>
</p></li><li class="listitem"><p>
  Wypisz kopie kanałów jako pary subopcji. Pamiętaj, że pierwszy kanał ma numer
  0, drugi 1 itd. Kolejność subopcji nie jest istotna tak długo, ale muszą one
  być pogrupowane w pary typu
  <em class="replaceable"><code>źródło:cel</code></em>.
</p></li></ol></div><p>
</p><h5><a name="id2545903"></a>Przykład: jeden kanał w dwóch głośnikach</h5><p>
Oto przykład innej metody odtwarzania jednego kanału w dwóch głośnikach.
Załóżmy, że lewy kanał ma być odtwarzany, a prawy ma zostać pominięty.
Zgodnie z krokami opisanymi powyżej:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Aby dostarczyć dźwięk do każdego z dwóch głośników, pierwsza opcja musi mieć
  wartość "2".
</p></li><li class="listitem"><p>
  Lewy kanał musi zostać przesunięty do prawego kanału oraz lewego, aby nie
  został on pusty. Sumaryczna liczba przesunięć to dwa, zatem druga opcja to
  również "2".
</p></li><li class="listitem"><p>
  Aby przesunąć lewy kanał (kanał 0) do kanału prawego (kanał 1), para subopcji
  musi byc "0:1", "0:0" przesunie lewy kanał do siebie.
</p></li></ol></div><p>
Po połączeniu wszystkiego razem otrzymamy:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -af channels=2:2:0:1:0:0
</pre><p>
</p><p>
Przewaga tego przykładu nad opcją <tt class="option">extrastereo</tt> jest taka, że
głośność każdego z kanałów wyjściowych pozostanie taka sama jak kanału źródłowego.
Wadą jest, że podopcje muszą zostać zmienione na "2:2:1:0:1:1", gdy dźwięk zawiera
kanał prawy. Ponadto trudniej to zapamiętać i wpisać.
</p><h5><a name="id2545979"></a>Przykład: lewy kanał w obu głośnikach (skrót)</h5><p>
Istnieje znacznie łatwiejsza metoda na użycie filtru <tt class="option">channels</tt> w
celu odtworzenia lewego kanału w dwóch głośnikach:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af channels=1</pre><p>
Drugi kanał jest pomijany, a pierwszy jest pozostawiany, bez dodatkowych podopcji.
Sterowniki kart muzycznych automatycznie odtwarzają jednokanałowy dźwięk wykorzystując
oba głośniki. Oczywiście zadziała to tylko, gdy pożądanym kanałem jest kanał lewy.
</p><h5><a name="id2546012"></a>Przykład: kopiowanie kanałów przednich do kanałów tylnych</h5><p>
Kolejną typową operacją jest kopiowanie kanałów przednich i odtwarzanie ich
z tylnych głośników zestawu kwadrofonicznego.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Potrzebujemy czterech kanałów wyjściowych, więc pierwsza podopcja to "4".
</p></li><li class="listitem"><p>
  Każdy z przednich kanałów musi zostać przesunięty do odpowiedniego kanału
  tylnego oraz do siebie. W sumie użyte będą cztery przesunięcia, więc druga
  opcja to "4".
</p></li><li class="listitem"><p>
  Lewy przedni kanał (kanał 0) musi zostać przesunięty do lewego tylnego (kanał
  2): "0:2".  Lewy przedni musi być także przesunięty do siebie: "0:0". Prawy
  przedni (kanał 1) musi zostać przesunięty do prawego tylnego (kanał 3): "1:3"
  oraz do siebie: "1:1".
</p></li></ol></div><p>
Po połączeniu wszystkich podopcji otrzymujemy:
</p><pre class="screen">
mplayer <em class="replaceable"><code>filename</code></em> -af channels=4:4:0:2:0:0:1:3:1:1
</pre><p>
</p></div><div class="sect3" title="3.7.2.4. Miksowanie kanałów"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-mixing"></a>3.7.2.4. Miksowanie kanałów</h4></div></div></div><p>
Filtr <tt class="option">pan</tt> potrafi zmiksować kanały w określonych przez
użytkownika proporcjach. Pozwala to na wykonanie wszystkiego tego co potrafi
filtr <tt class="option">channels</tt> i wiele więcej. Niestety podopcje są tutaj
znacznie bardziej skomplikowane.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Zdecyduj z iloma kanałami chcesz pracować. Aby to określić możesz potrzebować
  użyć <tt class="option">-channels</tt> i/lub <tt class="option">-af channels</tt>.
  Późniejsze przykłady pokażą kiedy użyć którego.
</p></li><li class="listitem"><p>
  Zdecyduj ile kanałów ma zostać wprowadzonych do <tt class="option">pan</tt> (dalsze
  dekodowane kanały zostaną porzucone). To jest pierwsza podopcja. Kontroluje
  ona także liczbę kanałów używanych jako wyjście.
</p></li><li class="listitem"><p>
  Pozostałe podopcje określają jak dużą część danego kanału zmiksować do kanału
  docelowego. To jest najbardziej skomplikowana część. Aby sprostać temu
  zadaniu, podzielmy podopcje na kilka grup, po jednej dla każdego kanału
  wyjściowego.  Każda podopcja w zbiorze odpowiada pojedynczemu kanałowi
  wejściowemu. Liczba, którą podasz odpowiada części kanału wejściowego, która
  zostanie zmiksowana w kanale wyjściowym.
  </p><p>
  <tt class="option">pan</tt> akceptuje wartości od 0 do 512, co odpowiada wartościom
  od 0% do 51200% oryginalnej głośności. Bądź ostrożny używając wartości
  większych od 1. Może to spowodować nie tylko bardzo duże zwiększenie
  głośności, ale także, jeżeli przekroczysz zakres swojej karty muzycznej,
  możesz usłyszeć okropne trzaski.  Jeżeli chcesz, możesz stosować po filtrze
  <tt class="option">pan</tt> dopisać <tt class="option">,volume</tt>, co włączy obcinanie
  głośności, jednak najlepiej używać na tyle małych wartości parametrów
  <tt class="option">pan</tt>, aby przycinanie nie było potrzebne.
  </p></li></ol></div><p>
</p><h5><a name="id2546187"></a>Przykład: jeden kanał w dwóch głośnikach</h5><p>
Oto jeszcze jeden przykład, jak odtworzyć lewy kanał w dwóch głośnikach.
Postępując zgodnie z krokami opisanymi powyżej:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <tt class="option">pan</tt> powinien używać dwóch kanałów wyjściowych, więc pierwsza
  podopcja to "2".
</p></li><li class="listitem"><p>
  Ponieważ mamy dwa kanały wejściowe, będziemy mieli dwie grupy podopcji.
  Ponieważ używane są również dwa kanały wyjściowe, w każdej grupie będą po dwie
  podopcje. Lewy kanał z pliku powinien zostać skopiowany z pełną głośnością
  do nowych kanału: lewego i prawego. W związku z tym, pierwsza grupa podopcji
  to "1:1". Prawy kanał powinien zostać pominięty, zatem druga grupa to "0:0".
  Wszelkie zera na końcu listy podopcji mogą zostać pominięte, ale dla
  przejrzystości przykładu, pozostawimy je.
</p></li></ol></div><p>
Po złączeniu wszystkich podopcji otrzymamy:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af pan=2:1:1:0:0</pre><p>
Jeżeli pożądanym kanałem jest prawy, a nie lewy, podopcje zmienią się na
"2:0:0:1:1".
</p><h5><a name="id2546246"></a>Przykład: lewy kanał w dwóch głośnikach (skrót)</h5><p>
Podobnie jak przy użyciu <tt class="option">channels</tt>, istnieje skrót działający
tylko z lewym kanałem:
</p><pre class="screen">mplayer <em class="replaceable"><code>filename</code></em> -af pan=1:1</pre><p>
Jeżeli <tt class="option">pan</tt> posiada tylko jeden kanał wejściowy (pozostałe kanały
są pomijane), potrzebna jest tylko jedna grupa podopcji z jedną podopcją, która
oznacza, że jedyny kanał będzie zawierał 100% siebie.
</p><h5><a name="id2546279"></a>Przykład: zmniejszanie liczy kanałów w 6-kanałowym PCM</h5><p>
Dekoder 6-kanałowego PCM zawarty w <span class="application">MPlayerze</span> nie potrafi
zmniejszać liczby kanałów przez miksowanie. Oto metoda dokonania tego przy użyciu
opcji <tt class="option">pan</tt>:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Liczba kanałów wyjściowych to 2, więc pierwsza podopcja to "2".
</p></li><li class="listitem"><p>
  Jako, że mamy 6 kanałów wejściowych, musimy użyć sześciu grup opcji.
  Na szczęście, ponieważ interesują nas tylko dwa pierwsze kanały, możemy
  użyć tylko dwóch grup opcji; pozostałe cztery grupy mogą zostać pominięte.
  Pamiętaj, że nie wszystkie wielokanałowe pliki audio mają tę samą kolejność
  kanałów. Poniższy przykład pokazuje zmniejszanie liczby kanałów w pliku, w którym
  kolejność kanałów jest taka, jak w AC3 5.1:
  </p><pre class="programlisting">
0 - lewy przedni
1 - prawy przedni
2 - lewy tylny
3 - prawy tylny
4 - środkowy przedni
5 - subwoofer (głośnik niskotonowy)</pre><p>
  Pierwsza grupa podopcji zawiera kolejne wartości oryginalnej głośności lewego
  przedniego kanału, które powinny być dostarczone do odpowiednich kanałów
  wyjściowych: "1:0". Prawy przedni kanał powinien zostać przeniesiony do
  prawego wyjściowego: "0:1". Analogicznie dla kanałów tylnych: "1:0" i "0:1".
  Kanał środkowy powinien zostać przeniesiony do obu kanałów wyjściowych z połową
  głośności: "0.5:0.5", zaś kanał głośnika niskotonowego powinien być słyszalny
  w obu kanałach wyjściowych z pełną głośnością: "1:1".
</p></li></ol></div><p>
Połącz wszystko razem, a otrzymasz:
</p><pre class="screen">
mplayer <em class="replaceable"><code>6-channel.wav</code></em> -af pan=2:1:0:0:1:1:0:0:1:0.5:0.5:1:1
</pre><p>
Przedstawione powyżej głośności są tylko przybliżonym przykładem. Nie czuj się
nimi skrępowany i zmieniaj je zgodnie ze swoim uznaniem.
</p><h5><a name="id2546367"></a>Przykład: Odtwarzanie audio 5.1 przy pomocy dużych głośników, bez subwoofera</h5><p>
Jeżeli posiadasz parę dużych przednich głośników, możesz nie mieć ochoty
tracić pieniędzy na dodatkowy głośnik niskotonowy, tylko po to, aby mieć
kompletny system 5.1. Jeżeli użyjesz opcji <tt class="option">-channels 5</tt>,
przekażesz do lib52 informację, że ma dekodować audio 5.1 dla systemu 5.0.
Tym sposobem kanał głośnika niskotonowego zostanie po prostu pominięty.
Jeżeli chcesz rozdzielić kanał subwoofera samodzielnie, musisz dokonać ręcznego
zmiksowania przy użyciu <tt class="option">pan</tt>:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Jako, że <tt class="option">pan</tt> musi analizować wszystkie 6 kanałów,
  podaj opcję <tt class="option">-channels 6</tt>, aby liba52 zdekodował je wszystkie.
</p></li><li class="listitem"><p>
  Ponieważ <tt class="option">pan</tt> będzie używał pięciu kanałów wyjściowych,
  pierwsza podopcja to "5".
</p></li><li class="listitem"><p>
  Sześć kanałów wejściowych i pięć wyjściowych oznacza 6 grup po 5 podopcji.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
    Lewy przedni kanał replikuje samego siebie:
    "1:0:0:0:0"
  </p></li><li class="listitem"><p>
    Identycznie dla prawego przedniego kanału:
    "0:1:0:0:0"
  </p></li><li class="listitem"><p>
    Tak samo dla lewego tylnego:
    "0:0:1:0:0"
  </p></li><li class="listitem"><p>
    Oraz tak samo dla prawego tylnego:
    "0:0:0:1:0"
  </p></li><li class="listitem"><p>
    Środkowy też:
    "0:0:0:0:1"
  </p></li><li class="listitem"><p>
    Teraz musimy zdecydować, co zrobić z subwooferem. Na przykład możemy
    podzielić go po połowie na lewy przedni i prawy przedni:
    "0.5:0.5:0:0:0"
  </p></li></ul></div><p>
</p></li></ol></div><p>
Po połączeniu wszystkich opcji otrzymasz:
</p><pre class="screen">
mplayer <em class="replaceable"><code>dvd://1</code></em> -channels 6 -af pan=5:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0.5:0.5:0:0:0
</pre><p>
</p></div></div><div class="sect2" title="3.7.3. Programowa regulacja głośności"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-volume"></a>3.7.3. Programowa regulacja głośności</h3></div></div></div><p>
Niekóre ścieżki audio są zbyt ciche aby można ich komfortowo słuchać bez
wzmocnienia. Staje się to problemem, gdy Twój sprzęt audio nie potrafi wzmacniać
sygnału. Opcja <tt class="option">-softvol</tt> instruuje <span class="application">MPlayera</span>,
aby ten używał wewnętrznego miksera. Możesz wtedy używać klawiszy strojenia
głośności (domyślnie <span class="keycap"><b>9</b></span> i <span class="keycap"><b>0</b></span>), aby uzyskać
większe poziomy głośności. Pamiętaj, że nie omija to miksera Twojej karty
muzycznej; <span class="application">MPlayer</span> zwiększa tylko głośność sygnału
przed przesłaniem go do Twojej karty.
Poniższy przykład może być dobrym początkiem:
</p><pre class="screen">
mplayer <em class="replaceable"><code>cichy-plik</code></em> -softvol -softvol-max 300
</pre><p>
Opcja <tt class="option">-softvol-max</tt> określa maksymalny dozwolony poziom głośności,
jako procent głośności oryginalnej. Przykładowo, <tt class="option">-softvol-max 200</tt>
pozwoli na maksymalne zwiększenie głośności do 200% głośności oryginalnej.
Można bezpiecznie używać dużych parametrów <tt class="option">-softvol-max</tt>;
większa głośność nie zostanie użyta, jeżeli nie zwiększysz jej przy pomocy
klawiszy regulacji głośności. Jedyną wadą stosowania większych wartości jest to,
że, ponieważ <span class="application">MPlayer</span> ustala głośność jako procent
głośności maksymalnej, nie będziesz w stanie precyzyjnie kontrolować głośności
przy pomocy klawiszy regulacji głośności. Użyj mniejszych wartości parametrów
<tt class="option">-softvol-max</tt> i/lub dodaj opcję <tt class="option">-volstep 1</tt>
aby uzyskać większą precyzję.
</p><p>
Opcja <tt class="option">-softvol</tt> działa poprzez kontrolę filtru
<tt class="option">volume</tt>. Jeżeli chcesz odtwarzać plik z określoną głośnością,
możesz podać opcję dla <tt class="option">volume</tt> ręcznie:
</p><pre class="screen">mplayer <em class="replaceable"><code>cichy-plik</code></em> -af volume=10</pre><p>
Pozwoli to na odtworzenie pliku z 10-decybelowym wzmocnieniem. Bądź ostrożny
używając filtru <tt class="option">volume</tt> - ustawiając zbyt dużą głośność możesz
łatwo uszkodzić swój słuch. Zaczynaj od małych wartości i stopniowo zwiększaj je
aż do uzyskania pożądanej głośności. Ponadto, jeżeli podasz zbyt dużą wartość,
filtr <tt class="option">volume</tt> może musieć przyciąć głośność, aby nie przesłać
do karty muzycznej danych spoza akceptowalnego przez nią zakresu; będzie to
powodować zniekształcenia dźwięku.
</p></div></div></div><div class="chapter" title="Rozdział 4. Używanie CD/DVD"><div class="titlepage"><div><div><h2 class="title"><a name="cd-dvd"></a>Rozdział 4. Używanie CD/DVD</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#drives">4.1. Napędy CD/DVD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#drives_linux">4.1.1. Linux</a></span></dt><dt><span class="sect2"><a href="#drives_freebsd">4.1.2. FreeBSD</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dvd">4.2. Odtwarzanie DVD</a></span></dt><dt><span class="sect1"><a href="#vcd">4.3. Odtwarzanie VCD</a></span></dt></dl></div><div class="sect1" title="4.1. Napędy CD/DVD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="drives"></a>4.1. Napędy CD/DVD</h2></div></div></div><p>
Nowoczesne napędy CD-ROM osiągają bardzo duże prędkości. Niektóre z nich są
dodatkowo zdolne do pracy przy zredukowanych prędkościach. Oto kilka powodów,
dla których powinniśmy zastanowić się czy nie należy zredukować prędkości
naszego napędu:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Istnieją doniesienia o błędach odczytu przy dużych prędkościach, szczególnie
  podczas używania uszkodzonych bądź wadliwie wytłoczonych/nagranych płyt CD.
  Redukcja prędkości odczytu może uchronić nas przed utratą danych w takich
  przypadkach.
</p></li><li class="listitem"><p>
  Wiele napędów CD jest dokuczliwie głośnych. Redukcja prędkości może zmniejszyć
  natężenie hałasu.
</p></li></ul></div><div class="sect2" title="4.1.1. Linux"><div class="titlepage"><div><div><h3 class="title"><a name="drives_linux"></a>4.1.1. Linux</h3></div></div></div><p>
Możesz zredukować prędkość napędu CD z interfejsem IDE korzystając
z <span class="command"><strong>hdparm</strong></span>, <span class="command"><strong>setcd</strong></span> lub
<span class="command"><strong>cdctl</strong></span>.
Działają one w następujący sposób:
</p><pre class="screen">hdparm -E <em class="replaceable"><code>[prędkość]</code></em> <em class="replaceable"><code>[urządzenie cdrom]</code></em></pre><p>
</p><pre class="screen">setcd -x <em class="replaceable"><code>[prędkość]</code></em> <em class="replaceable"><code>[urządzenie cdrom]</code></em></pre><p>
</p><pre class="screen">cdctl -bS <em class="replaceable"><code>[speed]</code></em></pre><p>
</p><p>
Jeśli używasz emulacji SCSI, możesz musieć zastosować ustawienia do prawdziwego
urządzenia IDE a nie emulowanego SCSI.
</p><p>
Jeżeli masz uprawnienia roota, to pomóc może także następująca komenda:
</p><pre class="screen">echo file_readahead:2000000 &gt; /proc/ide/<em class="replaceable"><code>[urządzenie cdrom]</code></em>/settings</pre><p>
</p><p>
Ustawiamy w ten sposób wielkość bufora odczytu na 2MB, co pomaga przy odczycie
porysowanych płyt. Jeżeli ustawimy zbyt dużą wielkość tego bufora, napęd będzie
stale rozkręcał się i zwalniał, co spowoduje bardzo znaczny spadek wydajności.
Zaleca się również dostrojenie napędu CD-ROM przy użyciu
<span class="command"><strong>hdparm</strong></span>:
</p><pre class="screen">hdparm -d1 -a8 -u1 <em class="replaceable"><code>[urządzenie cdrom]</code></em></pre><p>
</p><p>
Włączamy w ten sposób dostęp DMA do dysku, czytanie z wyprzedzeniem i
odmaskowanie IRQ (IRQ unmasking) (więcej przeczytasz na stronach man do
<span class="command"><strong>hdparm</strong></span>)
</p><p>
Proszę sprawdzić
"<tt class="filename">/proc/ide/<em class="replaceable"><code>[urządzenie cdrom]</code></em>/settings</tt>"
by dostroić swój napędu CD-ROM.
</p><p>
Dla napędów SCSI nie istnieje jednolity sposób ustawiawiania tych parametrów
(jeżeli znasz jakiś to napisz nam o nim). Istnieje narzędzie które działa z
<a class="ulink" href="http://das.ist.org/~georg/" target="_top">napędami SCSI Plextor</a>.
</p></div><div class="sect2" title="4.1.2. FreeBSD"><div class="titlepage"><div><div><h3 class="title"><a name="drives_freebsd"></a>4.1.2. FreeBSD</h3></div></div></div><p>Prędkość:
</p><pre class="screen">
cdcontrol [-f <em class="replaceable"><code>urządzenie</code></em>] speed <em class="replaceable"><code>[prędkość]</code></em>
</pre><p>
</p><p>DMA:
</p><pre class="screen">
sysctl hw.ata.atapi_dma=1
</pre><p>
</p></div></div><div class="sect1" title="4.2. Odtwarzanie DVD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dvd"></a>4.2. Odtwarzanie DVD</h2></div></div></div><p>
Aby poznać pełną listę dostępnych opcji, proszę przeczytać odpowiednie strony
man. Składnia do odtwarzania standardowego DVD jest następująca:
</p><pre class="screen">
mplayer dvd://<em class="replaceable"><code>&lt;ścieżka&gt;</code></em> [-dvd-device <em class="replaceable"><code>&lt;urządzenie&gt;</code></em>]
</pre><p>
</p><p>
Przykład:
</p><pre class="screen">mplayer dvd://1 -dvd-device /dev/hdc</pre><p>
</p><p>
Jeśli skompilowałeś <span class="application">MPlayera</span> z obsługą dvdnav,
składnia jest taka sama, tylko musisz użyć dvdnav:// zamiast dvd://.
</p><p>
Domyślnym urządzeniem (device) DVD jest <tt class="filename">/dev/dvd</tt>. Jeżeli
Twoje ustawienia są inne, stwórz odpowiedni symlink lub ustaw odpowiednie
urządzenie (device) w linii polecenia korzystając z opcji
<tt class="option">-dvd-device</tt>.
</p><p>
<span class="application">MPlayer</span> używa <code class="systemitem">libdvdread</code>
oraz <code class="systemitem">libdvdcss</code> do odtwarzania i dekodowania DVD.
Te dwie biblioteki są zawarte
w głównym drzewie źródłowym <span class="application">MPlayera</span>, nie trzeba
instalować ich osobno.
Możesz też użyć systemowych wersji tych bibliotek, ale nie jest to zalecane,
ponieważ może spowodować błędy, niekompatybilności bibliotek oraz zmniejszenie
prędkości.
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Jeśli występują problemy z dekodowaniem DVD, spróbuj wyłączyć supermount lub
inne tego typu usługi. Niektóre napędy RPC-2 mogą również wymagać ustawienia
kodu regionu DVD.
</p></div><p title="Struktura dysku DVD"><b>Struktura dysku DVD. </b>
Dyski DVD mają po 2048 bajtów na sektor z ECC/CRC. Zwykle posiadają system
plików UDF na pojedynczej ścieżce zawierającej różnorakie pliki (małe pliki .IFO
i .BUK oraz duże (1GB) pliki .VOB).
Są one rzeczywistymi plikami i mogą być kopiowane/odtwarzane z podmontowanego
systemu plików niezakodowanego DVD.
</p><p>
Pliki .IFO zawierają informacje nawigacyjne filmu (mapa
rozdziałów/tytułów/kątów kamery, tablica języków, itp) i są konieczne do
odczytu i interpretacji zawartości pliku .VOB (filmu).
Pliki .BUK są kopiami zapasowymi plików .IFO.
Używają <span class="bold"><strong>sektorów</strong></span> wszędzie, więc aby
zaimplementować nawigację na DVD lub rozszyfrować zawartość, należy używać
adresowania sektorów dysku w trybie raw.
</p><p>
Z tego powodu obsługa DVD wymaga
dostępu do urządzenia w trybie raw bazującym na sektorach. Niestety wymagane
jest (pod Linuksem) posiadanie uprawnień roota aby móc korzystać z sektorowego
adresowania pliku.
Dlatego też nie w ogóle używamy sterownika systemu plików pochodzącego
z jądra, ale reimplementujemy to w przestrzeni użytkownika.
Zajmuje się tym biblioteka <code class="systemitem">libdvdread</code> 0.9.x.
Sterownik
systemu plików UDF zawarty w jądrze nie jest wymagany ponieważ wspomniane
biblioteki zawierają własny, wbudowany sterownik systemu plików UDF. DVD nie
musi być podmontowany, bowiem używany jest jedynie dostęp w trybie raw.
</p><p>
Czasami <tt class="filename">/dev/dvd</tt> nie może być czytany przez użytkowników,
zatem autorzy <code class="systemitem">libdvdread</code> zaimplementowali warstwę
emulacji, która tłumaczy adresowanie sektorowe na nazwy plików i offsety, aby
emulować dostęp w trybie raw na podmontowanym systemie plików albo nawet na
twardym dysku.
</p><p>
<code class="systemitem">libdvdread</code> równie dobrze akceptuje miejsce
podmontowania (mountpoint) jak i nazwę urządzenia przy dostępie w trybie raw i
sprawdza <tt class="filename">/proc/mounts</tt> w celu odnalezienia odpowiedniej
nazwy urządzenia (device). Zostało to napisane z myślą o systemie Solaris, gdzie
nazwy urządzeń są przydzielane automatycznie.
</p><p title="Deszyfrowanie DVD"><b>Deszyfrowanie DVD. </b>
Do deszyfrowania DVD jest używana biblioteka
<code class="systemitem">libdvdcss</code>. Metoda jej działania może być określona
poprzez zmienna środowiskową <code class="envar">DVDCSS_METHOD</code>,
co jest dokładniej opisane na stronie man.
</p><p>
Napędy DVD RPC-1 zabezpieczają ustawienia regionu jedynie poprzez
oprogramowanie. Napędy RPC-2 mają sprzętowe zabezpieczenie, które pozwala na co
najwyżej 5 zmian. Jeżeli posiadamy napęd DVD RPC-2 wymagana/zalecana jest
aktualizacja firmware'u do RPC-1.
Nowe wersje firmware'ów można znaleźć w internecie.
Poszukiwania radzimy rozpocząć od
<a class="ulink" href="http://forum.rpc-1.com/dl_all.php" target="_top">forum firmware'ów</a>.
Jeżeli nie ma tam nowej wersji firmware'u dla naszego urządzenia, użyj
<a class="ulink" href="http://linvdr.org/projects/regionset/" target="_top">regionset tool
(narzędzia do zmiany regionów)</a> aby ustawić kod regionu na swoim napędzie
DVD (pod Linuksem). <span class="bold"><strong>Ostrzeżenie</strong></span>: Możesz
ustawić region tylko 5 razy.
</p></div><div class="sect1" title="4.3. Odtwarzanie VCD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vcd"></a>4.3. Odtwarzanie VCD</h2></div></div></div><p>
Pełna lista dostępnych opcji znajduje się na stronie man. Składnia dla
standardowego Video CD (VCD) jest następująca:
</p><pre class="screen">mplayer vcd://<em class="replaceable"><code>&lt;ścieżka&gt;</code></em> [-cdrom-device <em class="replaceable"><code>&lt;urządzenie&gt;</code></em>]</pre><p>
Przykład:
</p><pre class="screen">mplayer vcd://2 -cdrom-device /dev/hdc</pre><p>
Domyślnym urządzeniem VCD jest <tt class="filename">/dev/cdrom</tt>. Jeśli
Twoje ustawienia są inne, utwórz dowiązanie symboliczne
lub podaj prawidłowe urządzenie w linii poleceń za pomocą opcji
<tt class="option">-cdrom-device</tt>
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Przynajmniej napędy CD-ROM SCSI firmy Plextor i niektóre modele Toshiby
mają beznadziejną wydajność przy odczycie VCD. Jest to spowodowane
niekompletną implementacją <code class="systemitem">ioctl</code>'a CDROMREADRAW dla
tych urządzeń. Jeśli masz jakieś pojęcie o programowaniu SCSI,
<a class="ulink" href="../../tech/patches.txt" target="_top">pomóż nam</a> zaimplementować ogólną
obsługę SCSI dla VCD.
</p></div><p>
W międzyczasie możesz wyciągać dane z VCD za pomocą
<a class="ulink" href="http://ftp.ntut.edu.tw/ftp/OS/Linux/packages/X/viewers/readvcd/" target="_top">readvcd</a>
i odtwarzać plik wynikowy za pomocą <span class="application">MPlayera</span>
</p><p title="Struktura VCD"><b>Struktura VCD. </b>
Video CD (VCD) składa się z sektorów CD-ROM XA, tzn. ścieżek CD-ROM
mode 2 form 1 i form 2:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Pierwsza ścieżka jest w formacie mode 2 form 2, który oznacza użycie korekcji
  błędów L2. Ścieżka ta zawiera system plików ISO-9660 o gęstości 2048
  bajtów/sektor.  Ten system plików z kolei zawiera metainformacje VCD, a także
  nieruchome klatki, często używane w menu. Segmenty MPEG dla menu mogą także
  być składowane w tejże pierwszej ścieżce, ale MPEGi muszą być podzielone na
  kawałki po 150 sektorów. System plików ISO-9660 może zawierać inne pliki bądź
  programy, niekonieczne dla eksploatacji VCD.
</p></li><li class="listitem"><p>
  Druga i pozostałe ścieżki są zwykle ścieżkami video MPEG typu raw o gęstości
  2324 bajtów/sektor, zawierającymi jeden pakiet danych MGEG PS na sektor.
  Ścieżki te są w formacje mode 2 form 1, więc przechowują one więcej danych na
  sektor, w zamian za słabszą korekcję błędów. Możliwe są też ścieżki CD-DA na
  VCD poza pierwszą ścieżką. Niektóre systemy operacyjne używają pewnych
  trików aby ścieżki nie zawierające systemu plików ISO-9660 były widoczne
  w systemie plików. W pozostałych systemach, jak na przykład w systemie
  GNU/Linux, nie ma takiej możliwości (jeszcze). W takim przypadku dane MPEG
  <span class="bold"><strong>nie mogą być montowane</strong></span>.
  Jako że większość filmów znajduje się na tego typu ścieżce,
  powinieneś spróbować na początek opcji <tt class="option">vcd://2</tt>.
</p></li><li class="listitem"><p>
  Istnieją również płyty VCD bez pierwszej ścieżki (pojedyncza ścieżka i
  brak systemu plików w ogóle). Je również da się odtwarzać, ale nie da
  się ich montować.
</p></li><li class="listitem"><p>
  Definicja standardu Video CD, nazywana "Białą Księgą" Phillipsa,
  generalnie nie jest dostępna online, musi być zakupiona u Phillipsa.
  Bardziej szczegółowe informacje na temat Video CD można znaleźć na
  <a class="ulink" href="http://www.vcdimager.org/pub/vcdimager/manuals/0.7/vcdimager.html#SEC4" target="_top">stronie dokumentacji vcdimagera</a>.
</p></li></ul></div><p title="Struktura VCD">
</p><p title="O plikach .DAT"><b>O plikach .DAT. </b>
Plik o rozmiarze ok. 600 MB widoczny na pierwszej ścieżce zamontowanego VCD
nie jest prawdziwym plikiem ! Jest on tzw. bramką ISO, utworzoną by
Windows mógł obsługiwać takie ścieżki (Windows w ogóle nie zezwala aplikacjom
na dostęp do urządzeń w trybie raw). Pod Linuksem nie możesz kopiować ani
odtwarzać tych plików (zawierają "śmieci"). Pod Windows jest to możliwe, gdyż
jego sterownik iso9660 symuluje odczyt ścieżek w trybie raw za pomocą tego
pliku. By móc odtwarzać pliki .DAT, musisz mieć sterownik do jądra, który
dostarczany jest z linuksową wersją PowerDVD. Posiada on zmodyfikowany sterownik
systemu plików iso9660 (<tt class="filename">vcdfs/isofs-2.4.X.o</tt>), który jest w
stanie symulować odczyt ścieżek w trybie raw za pomocą pliku .DAT. Jeśli
podmontujesz płytę używając ich sterownika, możesz kopiować, a nawet odtwarzać
pliki .DAT za pomocą <span class="application">MPlayera</span>. Ale nie będzie to
działało za pomocą standardowego sterownika iso9660 dostarczonego z jądrem
Linuksa! Zamiast tego użyj opcji <tt class="option">vcd://</tt>. Alternatywą dla
kopiowania VCD jest nowy sterownik:
<a class="ulink" href="http://www.elis.rug.ac.be/~ronsse/cdfs/" target="_top">cdfs</a> (nie jest
częścią oficjalnego jądra), który wyświetla sesje CD jako pliki obrazów, oraz
<a class="ulink" href="http://cdrdao.sf.net/" target="_top">cdrdao</a>, program do zgrywania
płyt CD bit po bicie.
</p></div></div><div class="chapter" title="Rozdział 5. TV"><div class="titlepage"><div><div><h2 class="title"><a name="tv"></a>Rozdział 5. TV</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#tv-input">5.1. Wejście TV</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-compilation">5.1.1. Kompilacja</a></span></dt><dt><span class="sect2"><a href="#tv-tips">5.1.2. Wskazówki użytkowania</a></span></dt><dt><span class="sect2"><a href="#tv-examples">5.1.3. Przykłady</a></span></dt></dl></dd></dl></div><div class="sect1" title="5.1. Wejście TV"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tv-input"></a>5.1. Wejście TV</h2></div></div></div><p>
Sekcja ta opisuje jak <span class="bold"><strong>oglądać/nagrywać obraz
za pomocą tunera TV kompatybilnego z V4L</strong></span>. Zajrzyj do strony man
by zobaczyć opis opcji TV i klawiszy sterujących.
</p><div class="sect2" title="5.1.1. Kompilacja"><div class="titlepage"><div><div><h3 class="title"><a name="tv-compilation"></a>5.1.1. Kompilacja</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="krok 1"><p>
  Najpierw musisz przekompilować. <tt class="filename">./configure</tt> wykryje
  automatycznie nagłówki jądra związane z V4L i obecność urządzeń
  <tt class="filename">/dev/video*</tt>. Jeśli istnieją, obsługa TV zostanie
  wbudowana (zobacz wynik działania <tt class="filename">./configure</tt>).
</p></li><li class="step" title="krok 2"><p>
  Upewnij się, że Twój tuner działa z innymi programami do obsługi TV pod
  Linuksem, na przykład <span class="application">XawTV</span>.
</p></li></ol></div></div><div class="sect2" title="5.1.2. Wskazówki użytkowania"><div class="titlepage"><div><div><h3 class="title"><a name="tv-tips"></a>5.1.2. Wskazówki użytkowania</h3></div></div></div><p>
Kompletna lista opcji dostępna jest na stronie man.
Tu jest tylko kilka wskazówek:

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Używaj opcji <tt class="option">channels</tt>. Przykład:
  </p><pre class="screen">-tv channels=26-MTV1,23-TV2</pre><p>
  Wyjaśnienie: Jeśli użyjesz tej opcji, dostępne będą tylko kanały 23 i 26 oraz
  przy zmianie kanału pojawi się ładny napis na OSD, wyświetlający jego nazwę.
  Odstępy w nazwie kanału muszą zostać zastąpione znakiem "_".
</p></li><li class="listitem"><p>
  Używaj rozsądnych rozmiarów obrazu. Rozmiary obrazu wynikowego powinny
  być podzielne przez 16.
</p></li><li class="listitem"><p>
  Jeśli nagrywasz obraz video o pionowej rozdzielczości większej niż połowa
  rozdzielczości pełnej (np. 288 dla PAL lub 240 dla NTSC), wtedy 'ramki'
  które otrzymasz będą tak naprawdę parami poprzeplatanych (interleaved) pól.
  W zależności od tego, co chcesz zrobić ze strumieniem video, możesz go
  zostawić w takiej formie, użyć destrukcyjnego usuwania przeplotu
  (deinterlacing), albo rozdzielić pary na pojedyncze pola.
  </p><p>
  W przeciwnym wypadku dostaniesz film, który jest zniekształcony w trakcie
  scen o dużej dynamice, a wskazana szybkość transmisji (bitrate)
  prawdopodobnie nie będzie nawet mogła być utrzymana przez kontroler szybkości
  (bitrate controller), ponieważ artefakty przeplotu tworzą duże ilości
  szczegółów, a co za tym idzie, potrzebują dużej przepustowości. Możesz
  włączyć usuwanie przeplotu za pomocą opcji <tt class="option">-vf pp=TYP_DEINT</tt>.
  Zwykle <tt class="option">pp=lb</tt> spisuje się dobrze, ale to kwestia gustu.
  Poczytaj o innych algorytmach usuwania przeplotu na stronie man i zacznij
  eksperymentować.
  </p></li><li class="listitem"><p>
  Usuwaj "martwe miejsca". Kiedy nagrywasz video, są pewnie miejsca przy
  brzegach, które są zazwyczaj czarne lub zawierają szum.
  Jak się łatwo domyślić, niepotrzebnie zużywają sporo przepustowości
  (dokładniej, to nie same czarne miejsca, lecz ostre przejścia pomiędzy
  czarnym kolorem i jaśniejszym obrazem video, ale nie jest to akurat takie
  ważne). Zanim zaczniesz nagrywać, ustaw argumenty opcji <tt class="option">crop</tt>
  by wyciąć wszystkie "śmieci" na brzegach.
  Oczywiście nie zapomnij o utrzymaniu prawidłowych wymiarów obrazu.
</p></li><li class="listitem"><p>
  Uważaj na obciążenie CPU. Przez większość czasu Nie powinno ono przekroczyć
  granicy 90%.
  Jeśli masz duży bufor nagrywania, <span class="application">MEncoder</span> może
  przetrwać przeciążenie przez najwyżej kilka sekund i nic więcej.
  Lepiej więc wyłączyć wszystkie trójwymiarowe wygaszacze OpenGL i inne tego
  typu bajery.
</p></li><li class="listitem"><p>
  Nie mieszaj z zegarem systemowym. <span class="application">MEncoder</span>
  korzysta z niego do synchronizacji A/V. Jeśli zmodyfikujesz zegar systemowy
  (zwłaszcza wstecz), <span class="application">MEncoder</span> się pogubi i utraci
  klatki. Jest to bardzo ważna sprawa jeśli jesteś podpięty do sieci i używasz
  do synchronizacji czasu różnych programów typu NTP. Musisz wyłączyć NTP
  w trakcie nagrywania, jeśli chcesz, by było ono przeprowadzone niezawodnie.
</p></li><li class="listitem"><p>
  Nie zmieniaj opcji <tt class="option">outfmt</tt>, chyba, że wiesz co robisz lub
  Twoja karta/sterownik naprawdę nie obsługuje ustawienia domyślnego
  (przestrzeń kolorów YV12). W poprzednich wersjach
  <span class="application">MPlayera</span>/<span class="application">MEncodera</span>
  konieczne było podanie formatu wyjścia.
  Ten problem powinien być rozwiązany w aktualnych wydaniach i opcja
  <tt class="option">outfmt</tt> nie jest już wymagana, a ustawienie domyślne powinno
  pasować każdemu. Na przykład, jeśli nagrywasz do formatu DivX używając
  <code class="systemitem">libavcodec</code> i podasz opcję
  <tt class="option">outfmt=RGB24</tt> aby zwiększyć jakość nagrywanego obrazu,
  zostanie on i tak później z powrotem przekonwertowany do YV12, więc jedyne,
  co osiągniesz, to ogromna strata mocy obliczeniowej.
</p></li><li class="listitem"><p>
  By użyć przestrzeni kolorów I420 (<tt class="option">outfmt=i420</tt>), musisz dodać
  opcję <tt class="option">-vc rawi420</tt> z powodu konfliktu fourcc z kodekiem Intel
  Indeo.
</p></li><li class="listitem"><p>
  Jest kilka sposobów na nagrywanie audio. Możesz nagrywać dźwięk za pomocą
  Twojej karty dźwiękowej korzystając z zewnętrznego kabla pomiędzy kartą video
  i wejściem liniowym lub korzystając z wbudowanego w układ bt878 przetwornika
  ADC.  W tym drugim przypadku musisz załadować sterownik
  <span class="bold"><strong>btaudio</strong></span>. Przeczytaj plik
  <tt class="filename">linux/Documentation/sound/btaudio</tt> (w drzewie jądra,
  a nie <span class="application">MPlayera</span>) by dowiedzieć się jak korzystać
  z tego sterownika.
</p></li><li class="listitem"><p>
  Jeśli <span class="application">MEncoder</span> nie może otworzyć urządzenia
  dźwiękowego, upewnij się, że jest ono rzeczywiście dostępne. Zdarzają się
  problemy z serwerami dźwięku typu aRts (KDE) lub ESD (GNOME). Jeśli masz
  kartę full-duplex (prawie wszystkie przyzwoite karty dostępne obecnie
  obsługują tę funkcję) i korzystasz z KDE, spróbuj zaznaczyć opcję "Działanie
  w pełni dupleksowe" ("full duplex") w konfiguracji serwera dźwięku.
</p></li></ul></div><p>
</p></div><div class="sect2" title="5.1.3. Przykłady"><div class="titlepage"><div><div><h3 class="title"><a name="tv-examples"></a>5.1.3. Przykłady</h3></div></div></div><div class="informalexample"><p>
Puste wyjście, do AAlib :)
</p><pre class="screen">
mplayer -tv driver=dummy:width=640:height=480 -vo aa tv://
</pre><p>
</p></div><div class="informalexample"><p>
Wejście ze standardowego V4L:
</p><pre class="screen">
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://
</pre><p>
</p></div><div class="informalexample"><p>
Bardziej skomplikowany przykład. Każe on <span class="application">MEncoderowi</span>
nagrać pełen obraz PAL, wykadrować go i usunąć przeplot korzystając z algorytmu
liniowego zlewania (linear blend). Audio jest kompresowane ze stałą
szybkością równą 64kbps, przy użyciu kodeka LAME. To ustawienie jest
dobre do nagrywania filmów.
</p><pre class="screen">
mencoder -tv driver=v4l:width=768:height=576 -oac mp3lame -lameopts cbr:br=64 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
     -vf crop=720:544:24:16,pp=lb -o <em class="replaceable"><code>wyjscie.avi</code></em> tv://
</pre><p>
</p></div><div class="informalexample"><p>
Ten przykład dodatkowo przeskaluje obraz do 384x288 i skompresuje video
z szybkością 350kbps w trybie wysokiej jakości. Opcja <tt class="option">vqmax</tt>
uwalnia kwantyzator i pozwala kompresorowi video na osiągnięcie tak
niskiej szybkości nawet kosztem jakości obrazu. Może być to używane do
nagrywania długich seriali TV, kiedy jakość obrazu nie jest tak ważna.
</p><pre class="screen">
mencoder -tv driver=v4l:width=768:height=576 \
    -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
    -oac mp3lame -lameopts cbr:br=48 -sws 1 -o <em class="replaceable"><code>wyjscie.avi</code></em> \
    -vf crop=720:540:24:18,pp=lb,scale=384:288 tv://
</pre><p>
Jest również możliwe podanie mniejszych wymiarów obrazu w opcji
<tt class="option">-tv</tt> i pominięcie programowego skalowania, ale to podejście
wykorzystuje maksymalną ilość dostępnych informacji i jest trochę bardziej
odporne na szum.
Układy bt878, ze względu na ograniczenia sprzętowe, mogą stosować
uśrednianie pikseli jedynie w kierunku poziomym.
</p></div></div></div></div><div class="chapter" title="Rozdział 6. Radio"><div class="titlepage"><div><div><h2 class="title"><a name="radio"></a>Rozdział 6. Radio</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#radio-input">6.1. Słuchanie radia</a></span></dt><dd><dl><dt><span class="sect2"><a href="#radio-compilation">6.1.1. Kompilacja</a></span></dt><dt><span class="sect2"><a href="#radio-tips">6.1.2. Rady przy stosowaniu</a></span></dt><dt><span class="sect2"><a href="#radio-examples">6.1.3. Przykłady</a></span></dt></dl></dd></dl></div><div class="sect1" title="6.1. Słuchanie radia"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="radio-input"></a>6.1. Słuchanie radia</h2></div></div></div><p>
Ten rozdział opisuje jak włączyć możliwość słuchania radia przy użyciu tunera
radiowego kompatybilnego z V4L. Opis opcji i sterowania klawiaturą znajduje się
na stronie man.
</p><div class="sect2" title="6.1.1. Kompilacja"><div class="titlepage"><div><div><h3 class="title"><a name="radio-compilation"></a>6.1.1. Kompilacja</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="krok 1"><p>
  Najpierw, musisz przekompilować <span class="application">MPlayera</span> używając
  <tt class="filename">./configure</tt> z opcją <tt class="option">--enable-radio</tt>
  i (jeśli chcesz móc przechwytywać radio)
  <tt class="option">--enable-radio-capture</tt>.
</p></li><li class="step" title="krok 2"><p>
  Upewnij się że Twój tuner działa z innym oprogramowaniem do radia w Linuksie,
  na przykład z <span class="application">XawTV</span>.
</p></li></ol></div></div><div class="sect2" title="6.1.2. Rady przy stosowaniu"><div class="titlepage"><div><div><h3 class="title"><a name="radio-tips"></a>6.1.2. Rady przy stosowaniu</h3></div></div></div><p>
Pełna lista opcji jest dostępna na stronie man.
Tu jest tylko kilka porad:

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Używaj opcji <tt class="option">channels</tt>. Na przykład:
  </p><pre class="screen">-radio channels=104.4-Sibir,103.9-Maximum</pre><p>
  Wyjaśnienie: Przy użyciu tej opcji dostępne będą tylko stacje na
  częstotliwościach 104.4 i 103.9. Przy przełączaniu kanału OSD będzie
  wyświetlać nazwę kanału. Spacje w nazwie kanału muszą zostać zastąpione przez
  znak "_".
</p></li><li class="listitem"><p>
  Jest kilka metod przechwytywania audio. Możesz przechwytywać dźwięk albo
  korzystając ze swojej karty dźwiękowej i zewnętrznego kabelka łączącego kartę
  video z wejściem dźwięku, albo używając wbudowanego w chip saa7134 konwertera
  ADC. W tym drugim przypadku, musisz załadować sterownik
  <code class="systemitem">saa7134-alsa</code> lub <code class="systemitem">saa7134-oss</code>.
</p></li><li class="listitem"><p>
  Do przechwytywania dźwięku nie można użyć
  <span class="application">MEncodera</span>, ponieważ wymaga on do działania
  strumienia video. Możesz więc albo użyć <span class="application">arecord</span>
  z projektu ALSA albo opcji <tt class="option">-ao pcm:file=file.wav</tt>.
  W tym drugim przypadku nie będziesz słyszał dźwięku
  (chyba że masz kabelek do line-in i wyłączyłeś jego wyciszenie).
</p></li></ul></div><p>
</p></div><div class="sect2" title="6.1.3. Przykłady"><div class="titlepage"><div><div><h3 class="title"><a name="radio-examples"></a>6.1.3. Przykłady</h3></div></div></div><div class="informalexample"><p>
Wejście ze standardowego V4L (przy użyciu kabelka line-in, bez przechwytywania):
</p><pre class="screen">
mplayer radio://104.4
</pre><p>
</p></div><div class="informalexample"><p>
Wejście ze standardowego V4L (przy użyciu kabelka line-in, bez przechwytywania,
interface V4Lv1):
</p><pre class="screen">
mplayer -radio driver=v4l radio://104.4
</pre><p>
</p></div><div class="informalexample"><p>
Odtwarzanie drugiego kanału z listy:
</p><pre class="screen">
mplayer -radio channels=104.4=Sibir,103.9=Maximm radio://2
</pre><p>
</p></div><div class="informalexample"><p>
Przesyłanie dźwięku szyną PCI z wewnętrznego konwertera ADC na karcie radiowej.
W tym przykładzie tuner jest używany jako druga karta dźwiękowa (urządzenia
alsa hw:1,0). Dla kart opartych na saa7134 musi być załadowany moduł
<code class="systemitem">saa7134-alsa</code> lub <code class="systemitem">saa7134-oss</code>.
</p><pre class="screen">
mplayer -rawaudio rate=32000 radio://2/capture \
  -radio adevice=hw=1.0:arate=32000:channels=104.4=Sibir,103.9=Maximm
</pre><p>
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Jeśli używasz nazw urządzeń ALSA dwukropki muszą być zastąpione
znakami równości a przecinki kropkami.
</p></div><p>
</p></div></div></div></div><div class="chapter" title="Rozdział 7. Urządzenia wyjścia video"><div class="titlepage"><div><div><h2 class="title"><a name="video"></a>Rozdział 7. Urządzenia wyjścia video</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#mtrr">7.1. Ustawianie MTRR</a></span></dt><dt><span class="sect1"><a href="#output-trad">7.2. Wyjścia video dla tradycyjnych kart graficznych</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xv">7.2.1. Xv</a></span></dt><dd><dl><dt><span class="sect3"><a href="#tdfx">7.2.1.1. Karty 3dfx</a></span></dt><dt><span class="sect3"><a href="#s3">7.2.1.2. Karty S3</a></span></dt><dt><span class="sect3"><a href="#nvidia">7.2.1.3. Karty nVidia</a></span></dt><dt><span class="sect3"><a href="#ati">7.2.1.4. Karty ATI</a></span></dt><dt><span class="sect3"><a href="#neomagic">7.2.1.5. Karty NeoMagic</a></span></dt><dt><span class="sect3"><a href="#trident">7.2.1.6. Karty Trident</a></span></dt><dt><span class="sect3"><a href="#kyro">7.2.1.7. Karty Kyro/PowerVR</a></span></dt></dl></dd><dt><span class="sect2"><a href="#dga">7.2.2. DGA</a></span></dt><dt><span class="sect2"><a href="#sdl">7.2.3. SDL</a></span></dt><dt><span class="sect2"><a href="#svgalib">7.2.4. SVGAlib</a></span></dt><dt><span class="sect2"><a href="#fbdev">7.2.5. Wyjście bufora ramki (FBdev)</a></span></dt><dt><span class="sect2"><a href="#mga_vid">7.2.6. Bufor ramki Matrox (mga_vid)</a></span></dt><dt><span class="sect2"><a href="#tdfxfb">7.2.7. Obsługa 3dfx YUV</a></span></dt><dt><span class="sect2"><a href="#opengl">7.2.8. Wyjście OpenGL</a></span></dt><dt><span class="sect2"><a href="#aalib">7.2.9. AAlib - wyświetlanie w trybie tekstowym</a></span></dt><dt><span class="sect2"><a href="#caca">7.2.10. <code class="systemitem">libcaca</code> - Color ASCII Art library (biblioteka kolorowego ASCII-Art)</a></span></dt><dt><span class="sect2"><a href="#vesa">7.2.11. VESA - wyjście na VESA BIOS</a></span></dt><dt><span class="sect2"><a href="#x11">7.2.12. X11</a></span></dt><dt><span class="sect2"><a href="#vidix">7.2.13. VIDIX</a></span></dt><dd><dl><dt><span class="sect3"><a href="#vidix-ati">7.2.13.1. Karty ATI</a></span></dt><dt><span class="sect3"><a href="#vidix-mga">7.2.13.2. Karty Matrox</a></span></dt><dt><span class="sect3"><a href="#vidix-trident">7.2.13.3. Karty Trident</a></span></dt><dt><span class="sect3"><a href="#vidix-3dlabs">7.2.13.4. Karty 3DLabs</a></span></dt><dt><span class="sect3"><a href="#vidix-nvidia">7.2.13.5. Karty nVidia</a></span></dt><dt><span class="sect3"><a href="#vidix-sis">7.2.13.6. Karty SiS</a></span></dt></dl></dd><dt><span class="sect2"><a href="#directfb">7.2.14. DirectFB</a></span></dt><dt><span class="sect2"><a href="#dfbmga">7.2.15. DirectFB/Matrox (dfbmga)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#mpeg_decoders">7.3. Dekodery MPEG</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dvb">7.3.1. Wejście i wyjście DVB</a></span></dt><dt><span class="sect2"><a href="#dxr2">7.3.2. DXR2</a></span></dt><dt><span class="sect2"><a href="#dxr3">7.3.3. DXR3/Hollywood+</a></span></dt></dl></dd><dt><span class="sect1"><a href="#other">7.4. Inny sprzęt do wizualizacji</a></span></dt><dd><dl><dt><span class="sect2"><a href="#zr">7.4.1. Zr</a></span></dt><dt><span class="sect2"><a href="#blinkenlights">7.4.2. Blinkenlights</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tvout">7.5. Obsługa wyjścia TV</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tvout-mga-g400">7.5.1. Karty Matrox G400</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_g450">7.5.2. Karty Matrox G450/G550</a></span></dt><dt><span class="sect2"><a href="#tvout-ati">7.5.3. karty ATI</a></span></dt><dt><span class="sect2"><a href="#tvout-nvidia">7.5.4. nVidia</a></span></dt><dt><span class="sect2"><a href="#tvout-neomagic">7.5.5. NeoMagic</a></span></dt></dl></dd></dl></div><div class="sect1" title="7.1. Ustawianie MTRR"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mtrr"></a>7.1. Ustawianie MTRR</h2></div></div></div><p>
Jest WYSOCE wskazane sprawdzenie, czy rejestry MTRR są ustawione prawidłowo,
ponieważ mogą dać duży wzrost wydajności.
</p><p>
Wykonaj <span class="command"><strong>cat /proc/mtrr</strong></span>:
</p><pre class="screen">
<code class="prompt">--($:~)--</code> cat /proc/mtrr
reg00: base=0xe4000000 (3648MB), size=  16MB: write-combining, count=9
reg01: base=0xd8000000 (3456MB), size= 128MB: write-combining, count=1</pre><p>
</p><p>
Widać mojego Matroksa G400 z 16MB pamięci. Wydałem tę komendę z XFree 4.x.x,
które ustawiają MTRR automatycznie.
</p><p>
Jeżeli nie zadziałało, trzeba to ustawić ręcznie.
Przede wszystkim musisz znaleźć adres bazowy. Możesz to zrobić na 3 sposoby:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  z komunikatów startowych X11, na przykład:
  </p><pre class="screen">
(--) SVGA: PCI: Matrox MGA G400 AGP rev 4, Memory @ 0xd8000000, 0xd4000000
(--) SVGA: Linear framebuffer at 0xD8000000</pre><p>
</p></li><li class="listitem"><p>
  z <tt class="filename">/proc/pci</tt> (użyj polecenia <span class="command"><strong>lspci -v</strong></span>):
  </p><pre class="screen">
01:00.0 VGA compatible controller: Matrox Graphics, Inc.: Unknown device 0525
Memory at d8000000 (32-bit, prefetchable)</pre><p>
</p></li><li class="listitem"><p>
  z komunikatów sterownika mga_vid w jądrze (użyj <span class="command"><strong>dmesg</strong></span>):
  </p><pre class="screen">mga_mem_base = d8000000</pre><p>
</p></li></ol></div><p>
</p><p>
Znajdźmy teraz rozmiar pamięci. Jest to bardzo łatwe, po prostu zamień
rozmiar RAMu na karcie graficznej na system szesnastkowy lub użyj
tej tabelki:
</p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td>1 MB</td><td>0x100000</td></tr><tr><td>2 MB</td><td>0x200000</td></tr><tr><td>4 MB</td><td>0x400000</td></tr><tr><td>8 MB</td><td>0x800000</td></tr><tr><td>16 MB</td><td>0x1000000</td></tr><tr><td>32 MB</td><td>0x2000000</td></tr></tbody></table></div><p>
</p><p>
Znasz już adres bazowy i rozmiar pamięci. Ustawmy więc rejestry MTRR!
Na przykład dla powyższej karty Matrox (<code class="literal">base=0xd8000000</code>)
z 32MB RAMu (<code class="literal">size=0x2000000</code>) po prostu wykonaj:
</p><pre class="screen">
echo "base=0xd8000000 size=0x2000000 type=write-combining" &gt; /proc/mtrr</pre><p>
</p><p>
Nie wszystkie procesory obsługują MTRR. Na przykład starsze K6-2
(jakieś 266MHz, stepping 0) nie obsługują MTRR, ale stepping 12 już tak
(wykonaj <span class="command"><strong>cat /proc/cpuinfo</strong></span> aby sprawdzić).
</p></div><div class="sect1" title="7.2. Wyjścia video dla tradycyjnych kart graficznych"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="output-trad"></a>7.2. Wyjścia video dla tradycyjnych kart graficznych</h2></div></div></div><div class="sect2" title="7.2.1. Xv"><div class="titlepage"><div><div><h3 class="title"><a name="xv"></a>7.2.1. Xv</h3></div></div></div><p>
W XFree86 4.0.2 lub nowszym możesz używać sprzętowego YUV poprzez
rozszerzenie XVideo. To tego używa opcja <tt class="option">-vo xv</tt>.
Ten sterownik obsługuje także regulację jasności/kontrastu/nasycenia/itp.
(chyba, że używasz starego, powolnego kodeka DirectShow DivX,
który to obsługuje wszędzie). Spójrz na stronę man.
</p><p>
Aby to zadziałało upewnij się, że:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Masz XFree86 4.0.2 lub nowsze (starsze nie mają XVideo)
</p></li><li class="listitem"><p>
  Twoja karta obsługuje przyśpieszanie sprzętowe (współczesne karty to robią)
</p></li><li class="listitem"><p>
  X ładuje rozszerzenie XVideo, zwykle wygląda to tak:
  </p><pre class="programlisting">(II) Loading extension XVideo</pre><p>
  w <tt class="filename">/var/log/XFree86.0.log</tt>
  </p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
   To ładuje tylko rozszerzenie XFree86. W dobrej instalacji
   jest to zawsze włączone i nie oznacza to że obsługa XVideo w
   <span class="bold"><strong>karcie</strong></span> jest załadowana.
  </p></div><p>
</p></li><li class="listitem"><p>
  Twoja karta obsługuje Xv pod Linuksem. Aby sprawdzić, spróbuj
  <span class="command"><strong>xvinfo</strong></span>, wchodzące w skład dystrybucji XFree86.
  Powinno wyświetlić długi tekst podobny do tego:
  </p><pre class="screen">
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
(...)
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
(...etc...)</pre><p>
  Karta musi obsługiwać formaty "YUY2 packed" i "YV12 planar",
  aby mogła być używana z <span class="application">MPlayerem</span>.
</p></li><li class="listitem"><p>
  I na koniec sprawdź, czy <span class="application">MPlayer</span>
  został skompilowany z obsługą Xv.
  Wykonaj <span class="command"><strong>mplayer -vo help | grep xv </strong></span>.
  Jeżeli została wbudowana obsługa Xv to powinien się pojawić podobny wiersz:
  </p><pre class="screen">
  xv      X11/Xv</pre><p>
</p></li></ol></div><p>
</p><div class="sect3" title="7.2.1.1. Karty 3dfx"><div class="titlepage"><div><div><h4 class="title"><a name="tdfx"></a>7.2.1.1. Karty 3dfx</h4></div></div></div><p>
Starsze sterowniki 3dfx znane były z tego, że miały problemy z akceleracją
XVideo.
Nie obsługiwały ani przestrzeni kolorów YUY2, ani YV12. Sprawdź czy masz
XFree86 w wersji 4.2.0 lub nowszej, działają one dobrze z YV12 i YUY2.
Poprzednie wersje, z 4.1.0 włącznie,
<span class="bold"><strong>wywalały się na YV12</strong></span>.
Jeżeli napotkasz na dziwne działanie używając <tt class="option">-vo xv</tt>,
spróbuj SDL (także ma XVideo) i zobacz, czy to pomaga.
Dokładniejsze instrukcje są w sekcji <a class="link" href="#sdl" title="7.2.3. SDL">SDL</a>.
</p><p>
<span class="bold"><strong>LUB</strong></span>, spróbuj NOWEGO sterownika
<tt class="option">-vo tdfxfb</tt>!
Zajrzyj do sekcji <a class="link" href="#tdfxfb" title="7.2.7. Obsługa 3dfx YUV">tdfxfb</a>
</p></div><div class="sect3" title="7.2.1.2. Karty S3"><div class="titlepage"><div><div><h4 class="title"><a name="s3"></a>7.2.1.2. Karty S3</h4></div></div></div><p>
S3 Savage3D powinny działać. Jeżeli masz Savage4 używaj XFree86 4.0.3 lub
nowszego (gdyby występowały problemy z obrazem, spróbuj ustawić głębię kolorów
na 16bpp).
Jeżeli chodzi o S3 Virge: obsługuje ona Xv, ale jest bardzo wolna,
więc najlepiej ją sprzedaj.
</p><p>
Teraz dostępny jest natywny sterownik bufora ramek (framebuffer) dla
kart S3 Virge, podobny do tdfxfb. Ustaw swój bufor ramek (np. dodaj
"<tt class="option">vga=792 video=vesa:mtrr</tt>" do parametrów swojego kernela)
i używaj <tt class="option">-vo s3fb</tt> (<tt class="option">-vf yuy2</tt>
i <tt class="option">-dr</tt> także mogą okazać się przydatne).
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Obecnie niejasne jest, które modele kart Savage nie mają sprzętowej obsługi
YV12 i robią to programowo (co jest wolne). Jeżeli podejrzewasz o to swoją
kartę, zdobądź nowsze sterowniki, lub grzecznie poproś o sterownik z obsługą
MMX/3DNow! na liście dyskusyjnej MPlayer-users.
</p></div></div><div class="sect3" title="7.2.1.3. Karty nVidia"><div class="titlepage"><div><div><h4 class="title"><a name="nvidia"></a>7.2.1.3. Karty nVidia</h4></div></div></div><p>
nVidia nie zawsze jest dobrym wyborem dla Linuksa ...
Sterownik XFree86 o otwartych źródłach obsługuje większość tych kart, lecz
w niektórych wypadkach będziesz zmuszony używać binarnych sterowników
o zamkniętych źródłach (do pobrania ze
<a class="ulink" href="http://www.nvidia.com/object/linux.html" target="_top">strony nVidii</a>).
Jeżeli chcesz uzyskać przyspieszenie 3D to zawsze będziesz potrzebować tych
sterowników.
</p><p>
karty Riva 128 nie obsługują XVideo nawet ze sterownikami nVidii :(
Zażalenia składaj do nVidii.
</p><p>
Jednakże <span class="application">MPlayer</span> zawiera sterownik
<a class="link" href="#vidix" title="7.2.13. VIDIX">VIDIX</a> obsługujący większość kart nVidia.
Obecnie znajduje się w stadium beta i ma pewne ograniczenia.
Więcej informacji znajdziesz w sekcji <a class="link" href="#vidix-nvidia" title="7.2.13.5. Karty nVidia">nVidia VIDIX</a>.
</p></div><div class="sect3" title="7.2.1.4. Karty ATI"><div class="titlepage"><div><div><h4 class="title"><a name="ati"></a>7.2.1.4. Karty ATI</h4></div></div></div><p>
<a class="ulink" href="http://gatos.sf.net" target="_top">Sterowniki GATOS</a>
(których powinieneś używać, chyba że masz Rage128 lub Radeon)
mają standardowo włączone VSYNC. Znaczy to, że szybkość dekodowania (!)
jest zsynchronizowana z częstotliwością odświeżania obrazu.
Jeżeli odtwarzanie wydaje Ci się powolne,
spróbuj w jakiś sposób wyłączyć VSYNC,
lub ustaw częstotliwość odświeżania na n*(fps filmu) Hz.
</p><p>
Radeon VE - jeżeli potrzebujesz X, używaj XFree86 4.2.0 lub nowszego.
Brak obsługi wyjścia TV.
Oczywiście w <span class="application">MPlayerze</span> możesz uzyskać
<span class="bold"><strong>przyśpieszane</strong></span> wyświetlanie,
z lub bez <span class="bold"><strong>wyjścia TV</strong></span>.
Żadne biblioteki czy X nie są do tego potrzebne.
Poczytaj sekcję o <a class="link" href="#vidix" title="7.2.13. VIDIX">VIDIX</a>.
</p></div><div class="sect3" title="7.2.1.5. Karty NeoMagic"><div class="titlepage"><div><div><h4 class="title"><a name="neomagic"></a>7.2.1.5. Karty NeoMagic</h4></div></div></div><p>
Te karty można znaleźć w wielu laptopach.
Musisz używać XFree86 4.3.0 lub nowszych, lub sterowników Stefana Seyfried'a
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/" target="_top">
obsługujących Xv</a>.
Po prostu wybierz ten, który pasuje do Twojej wersji XFree86.
</p><p>
XFree86 4.3.0 zawierają obsługę Xv, lecz Bohdan Horst wysłał małą
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/neo_driver.patch" target="_top">łatkę</a>
na źródła XFree86, która przyśpiesza operacje na buforze ramki (framebuffer)
nawet czterokrotnie. Ta łatka została uwzględniona w XFree86 CVS
i powinna znaleźć się w następnej wersji po 4.3.0
</p><p>
Aby umożliwić odtwarzanie zawartości o rozmiarach DVD zmodyfikuj
swój XF86Config w następujący sposób:
</p><pre class="programlisting">
Section "Device"
    [...]
    Driver "neomagic"
    <span class="emphasis"><em>Option "OverlayMem" "829440"</em></span>
    [...]
EndSection</pre><p>
</p></div><div class="sect3" title="7.2.1.6. Karty Trident"><div class="titlepage"><div><div><h4 class="title"><a name="trident"></a>7.2.1.6. Karty Trident</h4></div></div></div><p>
Jeżeli chcesz używać Xv z kartą Trident, to jeśli nie działa z 4.1.0,
zainstaluj XFree 4.2.0. 4.2.0 obsługuje pełnoekranowe Xv
w karcie Cyberblade XP.
</p><p>
Alternatywą jest sterownik <a class="link" href="#vidix" title="7.2.13. VIDIX">VIDIX</a> dla
karty Cyberblade/i1.
</p></div><div class="sect3" title="7.2.1.7. Karty Kyro/PowerVR"><div class="titlepage"><div><div><h4 class="title"><a name="kyro"></a>7.2.1.7. Karty Kyro/PowerVR</h4></div></div></div><p>
Jeżeli chcesz używać Xv z kartą opartą na Kyro
(na przykład Hercules Prophet 4000XT), powinieneś ściągnąć sterowniki ze
<a class="ulink" href="http://www.powervr.com/" target="_top">strony PowerVR</a>.
</p></div></div><div class="sect2" title="7.2.2. DGA"><div class="titlepage"><div><div><h3 class="title"><a name="dga"></a>7.2.2. DGA</h3></div></div></div><p title="WSTĘP"><b>WSTĘP. </b>
Celem tego dokumentu jest wyjaśnienie w kilku słowach, czym ogólnie jest DGA
i co może zrobić sterownik do <span class="application">MPlayera</span>
(i czego nie może).
</p><p title="CO TO JEST DGA"><b>CO TO JEST DGA. </b>
<acronym class="acronym">DGA</acronym> to skrót od <span class="emphasis"><em>Direct Graphics Access
(Bezpośredni Dostęp do Grafiki)</em></span> i jest dla programu sposobem
ominięcia serwera X i bezpośrednią modyfikację pamięci bufora ramki
(framebuffer). Technicznie mówiąc, działa to w ten sposób,
że pamięć bufora ramki mapowana jest na zakres pamięci Twojego procesu.
Jądro pozwala na to tylko gdy masz prawa administratora (superuser).
Możesz je uzyskać logując się jako
<code class="systemitem">root</code> lub ustawiając bit SUID
na pliku wykonywalnym <span class="application">MPlayera</span>
(<span class="bold"><strong>nie zalecane</strong></span>).
</p><p>
Istnieją dwie wersje DGA: DGA1 używane przez XFree 3.x.x i DGA2,
które pojawiło się w XFree 4.0.1.
</p><p>
DGA1 zapewnia jedynie bezpośredni dostęp do bufora ramki,
w sposób opisany powyżej.
Aby zmienić rozdzielczość sygnału video będziesz musiał polegać na
rozszerzeniu XVidMode.
</p><p>
DGA2 łączy cechy rozszerzenia XVidMode z możliwością zmiany głębi wyświetlania,
więc możesz mając uruchomiony serwer X w 32 bitowej głębi przełączać się na
15 bitów i vice versa.
</p><p>
Jednakże DGA ma pewne wady. Jest poniekąd zależne od układu graficznego
jakiego używasz, a także od implementacji sterownika video (w serwerze X)
sterującego układem. Nie działa to więc na każdym systemie...
</p><p title="INSTALOWANIE OBSŁUGI DGA W MPLAYERZE"><b>INSTALOWANIE OBSŁUGI DGA W MPLAYERZE. </b>
Przede wszystkim upewnij się, że X ładuje rozszerzenie DGA. Spójrz na
<tt class="filename">/var/log/XFree86.0.log</tt>:

</p><pre class="programlisting">(II) Loading extension XFree86-DGA</pre><p title="INSTALOWANIE OBSŁUGI DGA W MPLAYERZE">

XFree86 4.0.x lub nowsze jest <span class="bold"><strong>wysoce wskazane</strong></span>!
Sterownik DGA <span class="application">MPlayera</span> jest wykrywany automatycznie
przez <tt class="filename">./configure</tt>. Możesz także wymusić jego obsługę
poprzez <tt class="option">--enable-dga</tt>.
</p><p>
Jeżeli sterownik nie mógł przełączyć się na niższą rozdzielczość,
poeksperymentuj z opcjami <tt class="option">-vm</tt> (tylko w X 3.3.x),
<tt class="option">-fs</tt>, <tt class="option">-bpp</tt>, <tt class="option">-zoom</tt>
aby znaleźć tryb wyświetlania, który odpowiada filmowi.
Na razie nie ma żadnego konwertera :(
</p><p>
Stań się użytkownikiem <code class="systemitem">root</code>.
DGA wymaga praw superużytkownika, aby móc zapisywać bezpośrednio do pamięci video.
Jeżeli chcesz posługiwać się DGA jako zwykły użytkownik, zainstaluj
<span class="application">MPlayera</span> w trybie SUID root:

</p><pre class="screen">
chown root <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
chmod 750 <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
chmod +s <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
</pre><p>
Teraz DGA działa także dla zwykłego użytkownika.
</p><div class="caution" title="Zagrożenie bezpieczeństwa" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Zagrożenie bezpieczeństwa</h3><p>
To jest <span class="bold"><strong>poważne</strong></span> zagrożenie bezpieczeństwa!
<span class="bold"><strong>Nigdy</strong></span>
nie rób tego na serwerze, ani na komputerze dostępnym dla innych osób,
ponieważ mogą one zdobyć prawa roota poprzez
<span class="application">MPlayera</span> z ustawionym SUID root.
</p></div><p>
Teraz użyj opcji <tt class="option">-vo dga</tt> i już! (mam nadzieję:)
Powinieneś także spróbować czy działa u Ciebie opcja
<tt class="option">-vo sdl:driver=dga</tt>! Jest wiele szybsza!
</p><p title="ZMIANA ROZDZIELCZOŚCI"><a name="dga-modelines"></a><b>ZMIANA ROZDZIELCZOŚCI. </b>
Sterownik DGA zezwala na zmianę rozdzielczości sygnału wyjściowego.
Eliminuje to potrzebę (wolnego) programowego skalowania i
równocześnie zapewnia wyświetlanie pełnoekranowe.
W warunkach idealnych rozdzielczość zostałaby zmieniona na dokładnie taką samą
(z zachowaniem formatu obrazu) jak dane video,
ale serwer X pozwala stosować tylko tryby predefiniowane w
<tt class="filename">/etc/X11/XF86Config</tt>
(<tt class="filename">/etc/X11/XF86Config-4</tt> dla XFree 4.X.X).
Są one definiowane przez tak zwane "modelines" (wiersze trybów) i zależą od
możliwości Twojego sprzętu.
serwer X skanuje przy starcie ten plik konfiguracyjny
i wyłącza tryby nie pasujące do Twojego sprzętu. Aby się dowiedzieć,
które tryby przetrwały ten proces sprawdź plik
<tt class="filename">/var/log/XFree86.0.log</tt>.
</p><p>
Te wpisy działają z układem Riva128, przy użyciu modułu sterownika nv.o
(moduł serwera X):
</p><pre class="programlisting">
Section "Modes"
  Identifier "Modes[0]"
  Modeline "800x600"  40     800 840 968 1056  600 601 605 628
  Modeline "712x600"  35.0   712 740 850 900   400 410 412 425
  Modeline "640x480"  25.175 640 664 760 800   480 491 493 525
  Modeline "400x300"  20     400 416 480 528   300 301 303 314 Doublescan
  Modeline "352x288"  25.10  352 368 416 432   288 296 290 310
  Modeline "352x240"  15.750 352 368 416 432   240 244 246 262 Doublescan
  Modeline "320x240"  12.588 320 336 384 400   240 245 246 262 Doublescan
EndSection
</pre><p title="DGA i MPLAYER"><b>DGA i MPLAYER. </b>
DGA jest używane w dwóch miejscach w <span class="application">MPlayerze</span>:
można go używać przez sterownik SDL (<tt class="option">-vo sdl:driver=dga</tt>)
oraz bezpośrednio przez sterownik DGA (<tt class="option">-vo dga</tt>).
To, co zostało napisane powyżej, jest prawdziwe dla obu;
w następnych sekcjach wyjaśnię, jak działa sterownik DGA dla
<span class="application">MPlayera</span>.
</p><p title="WŁASNOŚCI"><b>WŁASNOŚCI. </b>
Sterownik DGA wywoływany jest poprzez podanie <tt class="option">-vo dga</tt>
w wierszu poleceń.
Standardowym zachowaniem jest zmiana rozdzielczości na jak najbardziej
pasującą do obrazu.
Świadomie ignorowane są opcje <tt class="option">-vm</tt> i <tt class="option">-fs</tt>
(zmiana trybu wyświetlania oraz wyświetlanie pełnoekranowe) - sterownik zawsze
próbuje pokryć jak największą powierzchnię ekranu poprzez zmianę trybu
wyświetlania, dzięki temu nie marnuje mocy procesora na skalowanie obrazu.
Jeżeli nie podoba Ci się dobrany tryb, możesz sam go określić,
korzystając z opcji <tt class="option">-x</tt> oraz <tt class="option">-y</tt>.
Jeżeli podasz opcję <tt class="option">-v</tt>,
sterownik DGA wyświetli między innymi listę wszystkich obsługiwanych
w tej chwili trybów, dostępnych w Twoim pliku konfiguracyjnym
<tt class="filename">XF86Config</tt>.
Mając DGA2 możesz zmusić je także do wyświetlania obrazu w określonej głębi,
używając opcji <tt class="option">-bpp</tt>.
Prawidłowymi głębiami są 15, 16, 34 i 32.
Od Twojego sprzętu zależy, czy są one obsługiwane natywnie, czy też dokonywana
jest konwersja (możliwe, że powolna).
</p><p>
Jeżeli jesteś takim szczęśliwcem, że masz wystarczająco dużo pamięci
pozaekranowej (offscreen memory) aby zmieścił się tam cały obraz,
sterownik DGA użyje podwójnego buforowania.
Efektem będzie płynniejsze odtwarzanie filmu.
Sterownik poinformuje Cię czy podwójne buforowanie jest włączone czy nie.
</p><p>
Podwójne buforowanie oznacza, że następna ramka Twojego filmu jest rysowana
w pamięci pozaekranowej w czasie gdy obecna ramka jest wyświetlana.
Gdy następna ramka będzie gotowa, układ graficzny zostanie poinformowany
o lokalizacji nowej ramki w pamięci i po prostu sięgnie tam po dane
aby je wyświetlić.
W międzyczasie poprzedni bufor w pamięci zostanie ponownie wypełniony
kolejnymi danymi video.
</p><p>
Podwójne buforowanie może być włączane opcją
<tt class="option">-double</tt> oraz może być wyłączane opcją
<tt class="option">-nodouble</tt>.
Obecnie standardowym zachowaniem jest wyłączone podwójne buforowanie.
Jeśli używasz sterownika DGA wyświetlanie OSD
(On Screen Display - wyświetlanie na ekranie)
działa wyłącznie z włączonym podwójnym buforowaniem.
Jednakże włączenie podwójnego buforowania może zaowocować dużym spadkiem
szybkości (na moim K6-II+ 525 używało dodatkowe 20% czasu procesora!)
w zależności od implementacji DGA dla Twojego sprzętu.
</p><p title="KWESTIA SZYBKOŚCI"><b>KWESTIA SZYBKOŚCI. </b>
Ogólnie rzecz biorąc, dostęp do bufora ramki poprzez DGA powinien być
przynajmniej tak szybki, jak podczas używania sterownika X11,
z dodatkową korzyścią uzyskania pełnoekranowego obrazu.
Procentowe wartości szybkości wyświetlane przez
<span class="application">MPlayera</span> należy interpretować ostrożnie.
Na przykład przy korzystaniu ze sterownika X11 nie jest uwzględniany czas
potrzebny serwerowi X na rysowanie.
Podłącz terminal do portu szeregowego swojego komputera i uruchom
<span class="command"><strong>top</strong></span> aby zobaczyć co się na prawdę dzieje w Twoim komputerze.
</p><p>
Generalnie przyśpieszenie przy używaniu DGA w stosunku do
"normalnego"
używania X11 bardzo zależy od Twojej karty graficznej i od tego, jak dobrze
zoptymalizowany jest moduł do serwera X.
</p><p>
Jeżeli masz wolny system, lepiej używaj 15 lub 16 bitowej
głębi kolorówi, ponieważ wymaga ona tylko połowy przepustowości pamięci
w porównaniu do głębi 32 bitowej.
</p><p>
Używanie 24 bitowej głębi jest dobrym pomysłem, nawet jeśli
Twoja karta natywnie obsługuje tylko 32 bitową głębię, ponieważ 24 bitowa
głębia przesyła 25% mniej danych w porównaniu do w pełni 32 bitowego trybu.
</p><p>
Widziałem pewne pliki AVI odtwarzane na Pentium MMX 266.
Na AMD K6-2 powinno działać od 400MHz.
</p><p title="ZNANE BŁĘDY"><b>ZNANE BŁĘDY. </b>
Według niektórych deweloperów XFree DGA jest niezłą bestią.
Mówią oni, że lepiej go nie używać, ponieważ jego implementacja nie zawsze
jest bezbłędna dla każdego sterownika XFree.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Istnieje błąd związany z XFree 4.0.3 i sterownikiem <tt class="filename">nv.o</tt>
  objawiający się dziwnymi kolorami.
</p></li><li class="listitem"><p>
  Sterowniki ATI wymagają wielokrotnego przełączania trybu po użyciu DGA.
</p></li><li class="listitem"><p>
  Niektóre sterowniki po prostu nie wracają do normalnej rozdzielczości (użyj
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad +</b></span> oraz
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad -</b></span>
  aby przełączać się ręcznie).
</p></li><li class="listitem"><p>
  Niektóre sterowniki wyświetlają dziwne kolory.
</p></li><li class="listitem"><p>
  Niektóre sterowniki kłamią na temat rozmiaru pamięci,
  którą mapują na przestrzeń adresową procesu.
  Przez to vo_dga nie będzie używać podwójnego buforowania (SIS?).
</p></li><li class="listitem"><p>
  Niektóre sterowniki nie zwracają żadnego poprawnego trybu.
  W tym wypadku sterownik DGA się wywali mówiąc Ci o bezsensownym
  trybie 100000x100000 (lub podobnym).
</p></li><li class="listitem"><p>
  OSD działa tylko z włączonym podwójnym buforowaniem (w przeciwnym razie
  migocze).
</p></li></ul></div></div><div class="sect2" title="7.2.3. SDL"><div class="titlepage"><div><div><h3 class="title"><a name="sdl"></a>7.2.3. SDL</h3></div></div></div><p>
<acronym class="acronym">SDL</acronym> (Simple Directmedia Layer) jest w gruncie rzeczy
zunifikowanym interfejsem video/audio.
Programy, które go używają, wiedzą tylko o SDL,
a nie o sterownikach audio lub video, których używa SDL.
Na przykład port Dooma używający SDL może działać korzystając z
svgalib, aalib, X, fbdev i innych, musisz tylko określić (na przykład)
sterownik video, którego chcesz użyć.
Wybór następuje poprzez zmienną środowiskową <code class="envar">SDL_VIDEODRIVER</code>.
No, teoretycznie.
</p><p>
W <span class="application">MPlayerze</span> używaliśmy programowego skalowania
sterownika SDL dla X11, dla kart/sterowników, które nie obsługują XVideo,
dopóki nie zrobiliśmy własnego (szybszego, lepszego) programowego skalowania.
Używaliśmy także jego wyjścia aalib, ale teraz mamy własny sterownik,
który jest wygodniejszy. Jego tryb DGA był lepszy od naszego... aż do niedawna.
Rozumiesz już? :)
</p><p>
Pomaga także z niektórymi wadliwymi sterownikami/kartami w przypadku, gdy
odtwarzanie kuleje (nie z powodu wolnego systemu) lub gdy dźwięk jest opóźniony.
</p><p>
Wyjście video SDL obsługuje wyświetlanie napisów pod filmem, na czarnym pasku
(jeżeli obecny).
</p></div><div class="sect2" title="7.2.4. SVGAlib"><div class="titlepage"><div><div><h3 class="title"><a name="svgalib"></a>7.2.4. SVGAlib</h3></div></div></div><p title="INSTALACJA"><b>INSTALACJA. </b>
Będziesz musiał zainstalować svgalib i jej pakiet rozwojowy, aby
<span class="application">MPlayer</span> zbudował swój własny sterownik
SVGAlib (automatycznie wykrywane, lecz można wymusić).
Nie zapomnij przerobić <tt class="filename">/etc/vga/libvga.config</tt>, tak aby
svgalib współdziałało z Twoją kartą i monitorem.
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Nie używaj opcji <tt class="option">-fs</tt> ponieważ włącza ona
skalowanie programowe, które jest powolne. Jeżeli naprawdę tego potrzebujesz,
używaj opcji <tt class="option">-sws 4</tt>,
która produkuje obraz złej jakości, ale jest nieco szybsza.
</p></div><p title="OBSŁUGA EGA (4BPP)"><b>OBSŁUGA EGA (4BPP). </b>
SVGAlib zawiera EGAlib i <span class="application">MPlayer</span>
może wyświetlać każdy film w 16 kolorach.
Użyteczne jest to w następujących zestawieniach:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  karta EGA z monitorem EGA: 320x200x4bpp, 640x200x4bpp, 640x350x4bpp
</p></li><li class="listitem"><p>
  karta EGA z monitorem CGA: 320x200x4bpp, 640x200x4bpp
</p></li></ul></div><p>
bpp (bity na piksel) musi być ręcznie ustawione na 4: <tt class="option">-bpp 4</tt>
</p><p>
Film prawdopodobnie musi być przeskalowany tak, aby pasował do trybu EGA:
</p><pre class="screen">-vf scale=640:350</pre><p>
lub
</p><pre class="screen">-vf scale=320:200</pre><p>
</p><p>
Aby to osiągnąć, musimy sięgnąć po metodę skalowania szybką, lecz złej jakości:
</p><pre class="screen">-sws 4</pre><p>
</p><p>
Możliwe, że trzeba wyłączyć automatyczną korekcję proporcji obrazu:
</p><pre class="screen">-noaspect</pre><p>
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Z praktyki wiem, że najlepszą jakość obrazu na ekranach EGA można
osiągnąć poprzez lekkie zmniejszenie jasności:
<tt class="option">-vf eq=-20:0</tt>. Musiałem także zmniejszyć częstotliwość
próbkowania, ponieważ dźwięk 44kHz był popsuty: <tt class="option">-srate 22050</tt>.
</p></div><p>
OSD i napisy możesz włączyć tylko przy pomocy filtru
<tt class="option">expand</tt>. Dokładne parametry znajdziesz na stronie man.
</p></div><div class="sect2" title="7.2.5. Wyjście bufora ramki (FBdev)"><div class="titlepage"><div><div><h3 class="title"><a name="fbdev"></a>7.2.5. Wyjście bufora ramki (FBdev)</h3></div></div></div><p>
<tt class="filename">./configure</tt> automatycznie wykrywa, czy zbudować
wyjście FBdev. Więcej informacji znajdziesz w dokumentacji bufora
ramki w źródłach jądra (<tt class="filename">Documentation/fb/*</tt>).
</p><p>
Jeżeli Twoja karta nie obsługuje standardu VBE 2.0 (starsze karty ISA/PCI,
takie jak S3 Trio64), lecz VBE 1.2 (lub starsze?): cóż, pozostaje VESAfb,
ale będziesz musiał załadować SciTech Display Doctor
(dawniej UniVBE) przed zabootowaniem Linuksa.
Użyj dyskietki startowej DOS lub czegoś innego.
Nie zapomnij zarejestrować swojej kopii UniVBE ;))
</p><p>
Wyjście FBdev przyjmuje kilka dodatkowych parametrów:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-fb</tt></span></dt><dd><p>
    Określa urządzanie bufora ramki, którego użyć (domyślnie: <tt class="filename">/dev/fb0</tt>)
  </p></dd><dt><span class="term"><tt class="option">-fbmode</tt></span></dt><dd><p>
    Nazwa trybu do użycia (zgodnie z <tt class="filename">/etc/fb.modes</tt>)
  </p></dd><dt><span class="term"><tt class="option">-fbmodeconfig</tt></span></dt><dd><p>
    Plik konfiguracyjny trybów (domyślnie: <tt class="filename">/etc/fb.modes</tt>)
  </p></dd><dt><span class="term"><tt class="option">-monitor-hfreq</tt>, </span><span class="term"><tt class="option">-monitor-vfreq</tt>, </span><span class="term"><tt class="option">-monitor-dotclock</tt></span></dt><dd><p>
    <span class="bold"><strong>ważne</strong></span> wartości, patrz
    <tt class="filename">example.conf</tt>
  </p></dd></dl></div><p>
Jeżeli chcesz się przełączyć na określony tryb, użyj
</p><pre class="screen">
mplayer -vm -fbmode <em class="replaceable"><code>nazwa_trybu</code></em> <em class="replaceable"><code>nazwa_pliku</code></em>
</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Samo <tt class="option">-vm</tt> wybierze najbardziej odpowiedni tryb z
  <tt class="filename">/etc/fb.modes</tt>. Można użyć także wraz z opcjami
  <tt class="option">-x</tt> oraz <tt class="option">-y</tt>. Opcja
  <tt class="option">-flip</tt> jest obsługiwana wyłącznie gdy format
  (pixel format) filmu pasuje do formatu (pixel format) obrazu.
  Zwróć uwagę na wartość bpp. Sterownik fbdev próbuje użyć bieżącej wartości,
  chyba że użyjesz opcji <tt class="option">-bpp</tt>.
</p></li><li class="listitem"><p>
  Opcja <tt class="option">-zoom</tt> nie jest obsługiwana
  (użyj <tt class="option">-vf scale</tt>). Nie możesz używać trybów 8bpp (lub mniej).
</p></li><li class="listitem"><p>
  Możesz chcieć wyłączyć kursor:
  </p><pre class="screen">echo -e '\033[?25l'</pre><p>
  lub
  </p><pre class="screen">setterm -cursor off</pre><p>
  oraz wygaszacz ekranu:
  </p><pre class="screen">setterm -blank 0</pre><p>
  Aby z powrotem włączyć kursor:
  </p><pre class="screen">echo -e '\033[?25h'</pre><p>
  lub
  </p><pre class="screen">setterm -cursor on</pre><p>
</p></li></ul></div><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Zmiana trybów FBdev <span class="emphasis"><em>nie działa</em></span> z buforem ramki VESA,
i nie proś o to, ponieważ nie jest to ograniczenie
<span class="application">MPlayera</span>.
</p></div></div><div class="sect2" title="7.2.6. Bufor ramki Matrox (mga_vid)"><div class="titlepage"><div><div><h3 class="title"><a name="mga_vid"></a>7.2.6. Bufor ramki Matrox (mga_vid)</h3></div></div></div><p>
Ta sekcja traktuje o obsłudze układu BES (Back-End Scaler) na kartach
Matrox G200/G400/G450/G550 przez sterownik
<code class="systemitem">mga_vid</code> z jądra.
Ma on sprzętowy VSYNC z potrójnym buforowaniem.
Działa na konsoli framebuffer oraz w X.
</p><div class="warning" title="Ostrzeżenie" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Ostrzeżenie</h3><p>
Tylko dla Linuksa! Na systemach nie-Linuksowych (testowane na FreeBSD) używaj
zamiast tego <a class="link" href="#vidix" title="7.2.13. VIDIX">VIDIX</a>!
</p></div><div class="procedure" title="Instalacja"><a name="id2554550"></a><p class="title"><b>Instalacja</b></p><ol class="procedure" type="1"><li class="step" title="krok 1"><p>
  Przed użyciem musisz skompilować <tt class="filename">mga_vid.o</tt>:
  </p><pre class="screen">
cd drivers
make</pre><p>
</p></li><li class="step" title="krok 2"><p>
  Następnie stwórz urządzenie (device) <tt class="filename">/dev/mga_vid</tt>:
  </p><pre class="screen">mknod /dev/mga_vid c 178 0</pre><p>
  oraz załaduj sterownik poprzez:
  </p><pre class="screen">insmod mga_vid.o</pre><p>
</p></li><li class="step" title="krok 3"><p>
  Powinieneś sprawdzić rozmiar wykrywanej pamięci używając polecenia
  <span class="command"><strong>dmesg</strong></span>.
  Jeżeli zwracana wartość jest zła użyj opcji:
  <tt class="option">mga_ram_size</tt>
  (najpierw <span class="command"><strong>rmmod mga_vid</strong></span>),
  podaj rozmiar pamięci na karcie (w MB):
  </p><pre class="screen">insmod mga_vid.o mga_ram_size=16</pre><p>
</p></li><li class="step" title="krok 4"><p>
  Aby moduł był ładowany/usuwany automatycznie w razie potrzeby:
  najpierw wstaw następujący wiersz na końcu
  <tt class="filename">/etc/modules.conf</tt>:

  </p><pre class="programlisting">alias char-major-178 mga_vid</pre><p>

  Następnie skopiuj moduł <tt class="filename">mga_vid.o</tt>
  we właściwe miejsce w <tt class="filename">/lib/modules/<em class="replaceable"><code>wersja jądra</code></em>/<em class="replaceable"><code>gdzieś</code></em></tt>.
  </p><p>
  Po czym uruchom
  </p><pre class="screen">depmod -a</pre><p>
</p></li><li class="step" title="krok 5"><p>
  Teraz musisz (ponownie) skompilować <span class="application">MPlayera</span>,
  <tt class="filename">./configure</tt> wykryje
  <tt class="filename">/dev/mga_vid</tt> i zbuduje sterownik "mga".
  Używanie go w <span class="application">MPlayerze</span> uzyskuje się poprzez
  <tt class="option">-vo mga</tt> jeżeli masz konsolę matroxfb, lub
  <tt class="option">-vo xmga</tt> pod XFree86 3.x.x lub 4.x.x.
</p></li></ol></div><p>
Sterownik mga_vid współpracuje z Xv.
</p><p>
Plik urządzenia (device file) <tt class="filename">/dev/mga_vid</tt>
może być odczytywany aby uzyskać pewne informacje,
na przykład poprzez </p><pre class="screen">cat /dev/mga_vid</pre><p>
i można do niego pisać, by zmienić jasność:
</p><pre class="screen">echo "brightness=120" &gt; /dev/mga_vid</pre><p>
</p></div><div class="sect2" title="7.2.7. Obsługa 3dfx YUV"><div class="titlepage"><div><div><h3 class="title"><a name="tdfxfb"></a>7.2.7. Obsługa 3dfx YUV</h3></div></div></div><p>
Ten sterownik używa bufora ramki tdfx w jądrze aby odtwarzać filmy
z przyśpieszeniem YUV. Będziesz potrzebował jądra z obsługą tdfxfb. Będziesz
także musiał odpowiednio skompilować <span class="application">MPlayera</span>.
</p><pre class="screen">./configure --enable-tdfxfb</pre><p>
</p></div><div class="sect2" title="7.2.8. Wyjście OpenGL"><div class="titlepage"><div><div><h3 class="title"><a name="opengl"></a>7.2.8. Wyjście OpenGL</h3></div></div></div><p>
<span class="application">MPlayer</span> obsługuje wyświetlanie filmów używając
OpenGL, lecz jeśli Twoja platforma/sterownik obsługuje Xv,
jak powinno być w przypadku PeCetów z Linuksem, używaj Xv.
Wydajność OpenGL jest znacząco mniejsza.
Jeżeli masz implementację X11 bez obsługi Xv, OpenGL jest sensowną alternatywą.
</p><p>
Niestety nie wszystkie sterowniki to obsługują.
Sterowniki Utah-GLX (dla XFree86 3.3.6) obsługują to w każdej karcie.
Szczegóły ich instalacji dostępne są na stronie
<a class="ulink" href="http://utah-glx.sf.net" target="_top">http://utah-glx.sf.net</a>.
</p><p>
XFree86(DRI) 4.0.3 i nowsze obsługują OpenGL w kartach Matrox i Radeon,
4.2.0 i nowsze obsługują Rage128. Na <a class="ulink" href="http://dri.sf.net" target="_top">http://dri.sf.net</a>
znajdziesz instrukcję ściągania i instalacji.
</p><p>
Podpowiedź od jednego z naszych użytkowników: wyjście video GL może
być użyte aby uzyskać wyjście TV z vsync. Będziesz musiał ustawić
zmienną środowiskową (przynajmniej dla nVidia):
</p><p>
<span class="command"><strong>export __GL_SYNC_TO_VBLANK=1</strong></span>
</p></div><div class="sect2" title="7.2.9. AAlib - wyświetlanie w trybie tekstowym"><div class="titlepage"><div><div><h3 class="title"><a name="aalib"></a>7.2.9. AAlib - wyświetlanie w trybie tekstowym</h3></div></div></div><p>
AAlib jest biblioteką do wyświetlania grafiki w trybie tekstowym,
używając potężnego silnika renderującego ASCII. Istnieje
<span class="emphasis"><em>wiele</em></span> programów już ją obsługujących, takich jak Doom,
Quake, etc. <span class="application">MPlayer</span> zawiera świetnie działający
sterownik. Jeżeli <tt class="filename">./configure</tt> wykryje zainstalowane
aalib, zostanie zbudowany sterownik aalib libvo.
</p><p>
Możesz używać następujących klawiszy w oknie AA, aby zmienić opcje renderowania:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Klawisz</th><th>Akcja</th></tr></thead><tbody><tr><td><span class="keycap"><b>1</b></span></td><td>
  zmniejsz kontrast
</td></tr><tr><td><span class="keycap"><b>2</b></span></td><td>
  zwiększ kontrast
</td></tr><tr><td><span class="keycap"><b>3</b></span></td><td>
  zmniejsz jasność
</td></tr><tr><td><span class="keycap"><b>4</b></span></td><td>
  zwiększ jasność
</td></tr><tr><td><span class="keycap"><b>5</b></span></td><td>
  włącz/wyłącz szybkie renderowanie
</td></tr><tr><td><span class="keycap"><b>6</b></span></td><td>
  ustaw tryb ditheringu (brak, error distribution, Floyd Steinberg)
</td></tr><tr><td><span class="keycap"><b>7</b></span></td><td>
  odwróć obraz
</td></tr><tr><td><span class="keycap"><b>8</b></span></td><td>
  przełączanie kontroli między aa i <span class="application">MPlayerem</span>
</td></tr></tbody></table></div><div class="variablelist" title="Następujące opcje mogą być użyte w wierszu poleceń:"><p class="title"><b>Następujące opcje mogą być użyte w wierszu poleceń:</b></p><dl><dt><span class="term"><tt class="option">-aaosdcolor=<em class="replaceable"><code>V</code></em></tt></span></dt><dd><p>
    zmiana koloru OSD
  </p></dd><dt><span class="term"><tt class="option">-aasubcolor=<em class="replaceable"><code>V</code></em></tt></span></dt><dd><p>
    Zmiana koloru napisów
    </p><p>
    gdzie <em class="replaceable"><code>V</code></em> jest jednym z:
    <code class="literal">0</code> (normalny),
    <code class="literal">1</code> (ciemny),
    <code class="literal">2</code> (pogrubiony),
    <code class="literal">3</code> (pogrubiona czcionka),
    <code class="literal">4</code> (odwrócony),
    <code class="literal">5</code> (specjalny).
  </p></dd></dl></div><div class="variablelist" title="AAlib samo w sobie ma wiele opcji. Poniżej znajduje się kilka ważniejszych:"><p class="title"><b>AAlib samo w sobie ma wiele opcji. Poniżej znajduje się
kilka ważniejszych:</b></p><dl><dt><span class="term"><tt class="option">-aadriver</tt></span></dt><dd><p>
    Ustawia sugerowany sterownik aa (X11, curses, Linux)
  </p></dd><dt><span class="term"><tt class="option">-aaextended</tt></span></dt><dd><p>
    Używa wszystkich 256 znaków.
  </p></dd><dt><span class="term"><tt class="option">-aaeight</tt></span></dt><dd><p>
    Używa 8-bitowego ASCII
  </p></dd><dt><span class="term"><tt class="option">-aahelp</tt></span></dt><dd><p>
    Wyświetla wszystkie opcje aalib
  </p></dd></dl></div><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Renderowanie bardzo obciąża CPU, zwłaszcza przy użyciu AA-on-X (aalib w X),
a zajmuje mniej CPU na standardowej, nie-framebufferowej konsoli.
Użyj SVGATextMode, aby ustawić duży tryb tekstowy i baw się dobrze!
(drugi monitor z kartą Hercules wymiata:))
(ale moim skromnym zdaniem możesz użyć opcji
<tt class="option">-vf 1bpp</tt> aby uzyskać grafikę na hgafb:)
</p></div><p>
Użyj opcji <tt class="option">-framedrop</tt>, jeżeli Twój komputer nie jest na tyle
szybki, aby wyrenderować wszystkie ramki!
</p><p>
Odtwarzając w terminalu osiągniesz lepszą szybkość i jakość używając sterownika
Linux, a nie curses (<tt class="option">-aadriver linux</tt>).
Jednakże będziesz potrzebował praw zapisu na
<tt class="filename">/dev/vcsa<em class="replaceable"><code>&lt;terminal&gt;</code></em></tt>!
Nie jest to wykrywane automatycznie przez aalib, ale vo_aa próbuje
znaleźć najlepszy tryb. Spójrz na
<a class="ulink" href="http://aa-project.sf.net/tune" target="_top">http://aa-project.sf.net/tune</a>,
jest tam więcej informacji o dostrajaniu.
</p></div><div class="sect2" title="7.2.10. libcaca - Color ASCII Art library (biblioteka kolorowego ASCII-Art)"><div class="titlepage"><div><div><h3 class="title"><a name="caca"></a>7.2.10. <code class="systemitem">libcaca</code> - Color ASCII Art library (biblioteka kolorowego ASCII-Art)</h3></div></div></div><p>
Biblioteka <a class="ulink" href="http://sam.zoy.org/projects/libcaca/" target="_top"><code class="systemitem">libcaca</code></a>
jest bibiloteką produkującą tekst zamiast pikseli, może więc pracować na
starszych kartach graficznych oraz terminalach tekstowych. Jest podobna do
słynnej biblioteki <code class="systemitem">AAlib</code>.
<code class="systemitem">libcaca</code> potrzebuje do pracy terminalu,
powinna więc działać na wszystkich systemach Uniksowych (włącznie z Mac OS X),
używając biblioteki
<code class="systemitem">slang</code> lub biblioteki
<code class="systemitem">ncurses</code>, w DOSie używając biblioteki
<code class="systemitem">conio.h</code> i w systemach Windowsowych
używając <code class="systemitem">slang</code> lub
<code class="systemitem">ncurses</code> (poprzez emulację Cygwin) bądź
<code class="systemitem">conio.h</code>. Jeżeli
<tt class="filename">./configure</tt>
wykryje <code class="systemitem">libcaca</code>, to zostanie zbudowany
sterownik caca libvo.
</p><div class="itemizedlist" title="Różnice między AAlib są następujące:"><p class="title"><b>Różnice między <code class="systemitem">AAlib</code> są
  następujące:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  16 dostępnych kolorów na wyjściu znakowym (256 par kolorów)
</p></li><li class="listitem"><p>
  dirthering obrazu kolorowego
</p></li></ul></div><div class="itemizedlist" title="Lecz libcaca ma także następujące ograniczenia:"><p class="title"><b>Lecz <code class="systemitem">libcaca</code> ma także
  następujące ograniczenia:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  brak obsługi jasności, kontrastu, gammy
</p></li></ul></div><p>
Aby zmienić opcje renderowania, możesz użyć następujących klawiszy w oknie caca:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Klawisz</th><th>Akcja</th></tr></thead><tbody><tr><td><span class="keycap"><b>d</b></span></td><td>
  Przełączanie metod ditheringu <code class="systemitem">libcaca</code>.
</td></tr><tr><td><span class="keycap"><b>a</b></span></td><td>
  Przełączanie anyaliasingu (wygładzania)
  <code class="systemitem">libcaca</code>.
</td></tr><tr><td><span class="keycap"><b>b</b></span></td><td>
  Przełączanie tła <code class="systemitem">libcaca</code>.
</td></tr></tbody></table></div><div class="variablelist" title="libcaca będzie także szukać następujących zmiennych środowiskowych:"><p class="title"><b><code class="systemitem">libcaca</code> będzie także szukać
  następujących zmiennych środowiskowych:</b></p><dl><dt><span class="term"><tt class="option">CACA_DRIVER</tt></span></dt><dd><p>
    Ustawia zalecany sterownik caca, np. ncurses, slang, x11.
  </p></dd><dt><span class="term"><tt class="option">CACA_GEOMETRY (tylko X11)</tt></span></dt><dd><p>
    Określa liczbę wierszy i kolumn, np. 128x50.
  </p></dd><dt><span class="term"><tt class="option">CACA_FONT (tylko X11)</tt></span></dt><dd><p>
    Określa jakiej użyć czcionki, np. fixed, nexus.
  </p></dd></dl></div><p>
Jeżeli Twój komputer nie jest wystarczająco szybki, aby renderować
wszystkie ramki, użyj opcji <tt class="option">-framedrop</tt>.
</p></div><div class="sect2" title="7.2.11. VESA - wyjście na VESA BIOS"><div class="titlepage"><div><div><h3 class="title"><a name="vesa"></a>7.2.11. VESA - wyjście na VESA BIOS</h3></div></div></div><p>
Ten sterownik został zaprojektowany i napisany jako
<span class="bold"><strong>ogólny sterownik</strong></span> dla dowolnej karty,
która ma BIOS zgodny z VESA VBE 2.0. Inną zaletą tego sterownika jest to,
że próbuje on wymusić włączenie wyjścia TV.
<em class="citetitle">VESA BIOS EXTENSION (VBE) Version 3.0, z dnia 16 września 1998</em>
(Strona 70) mówi:
</p><div class="blockquote"><blockquote class="blockquote"><p title="Podwójne kontrolery (Dual-Controller Designs)"><b>Podwójne kontrolery (Dual-Controller Designs). </b>
VBE 3.0 obsługuje podwójne kontrolery zakładając, że zwykle obydwa kontrolery
są dostarczane przez tego samego OEM, pod kontrolą pojedynczego ROM BIOSu
na karcie graficznej. Jest możliwe ukrycie przed aplikacją,
że obecne są dwa kontrolery. Ograniczeniem tego jest brak możliwości
równoczesnego używania niezależnych kontrolerów, ale pozwala aplikacjom
wypuszczonym przed VBE 3.0 na normalne działanie.
Funkcja VBE 00h (zwróć informację o kontrolerze) zwraca połączone
informacje o obydwóch kontrolerach, włącznie z połączoną listą
dostępnych trybów.
Gdy aplikacja wybiera tryb, włączany jest odpowiedni kontroler.
Każda z pozostałych funkcji VBE operuje później na aktywnym kontrolerze.
</p></blockquote></div><p>
Są więc szanse, że używając tego sterownika uzyskasz działające wyjście TV.
(Zgaduję, że często wyjście TV jest samodzielnym układem (standalone head),
lub przynajmniej samodzielnym wyjściem.)
</p><div class="itemizedlist" title="ZALETY"><p class="title"><b>ZALETY</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Jest szansa, że będziesz mógł oglądać filmy
  <span class="bold"><strong>nawet, gdy Linux nie wie</strong></span>, jakiego sprzętu używasz.
</p></li><li class="listitem"><p>
  Nie ma potrzeby instalowania jakichkolwiek rzeczy związanych z grafiką
  (takich jak X11 (AKA XFree86), fbdev i tak dalej) na Twoim Linuksie.
  Ten sterownik można uruchamiać z <span class="bold"><strong>trybu tekstowego</strong></span>.
</p></li><li class="listitem"><p>
  Jest szansa że uzyskasz <span class="bold"><strong>działające wyjście TV</strong></span>.
  (Jest tak przynajmniej w przypadku kart ATI).
</p></li><li class="listitem"><p>
  Ten sterownik wywołuje procedurę obsługi przerwania 10h
  (<code class="function">int 10h</code> handler), nie jest więc emulatorem -
  odwołuje się do <span class="bold"><strong>rzeczywistych</strong></span> rzeczy
  <span class="emphasis"><em>rzeczywistego</em></span> BIOSu w
  <span class="emphasis"><em>trybie rzeczywistym (real-mode)</em></span>. (tak naprawdę,
  to w trybie vm86, ale działa równie szybko).
</p></li><li class="listitem"><p>
  Możesz używać VIDIX, uzyskując przez to przyśpieszone wyświetlanie video
  <span class="bold"><strong>oraz</strong></span> wyjście TV w tym samym czasie!
  (Zalecane dla kart ATI.)
</p></li><li class="listitem"><p>
  Jeżeli masz VESA VBE 3.0+ i określiłeś gdzieś
  <tt class="option">monitor-hfreq, monitor-vfreq, monitor-dotclock</tt>
  (w pliku konfiguracyjnym lub w wierszu poleceń), uzyskasz najwyższą możliwą
  częstotliwość odświeżania (Używając General Timing Formula
  (Ogólnej Formuły Taktowania)). Aby to włączyć, musisz określić
  <span class="bold"><strong>wszystkie</strong></span> opcje monitora.
</p></li></ul></div><div class="itemizedlist" title="WADY"><p class="title"><b>WADY</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Działa tylko na <span class="bold"><strong>systemach x86</strong></span>.
</p></li><li class="listitem"><p>
  Może być używane tylko przez użytkownika
  <code class="systemitem">root</code>.
</p></li><li class="listitem"><p>
  Obecnie jest dostępne tylko dla <span class="bold"><strong>Linuksa</strong></span>.
</p></li></ul></div><div class="important" title="WAŻNE" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">WAŻNE</h3><p>
Nie używaj tego sterownika wraz z <span class="bold"><strong>GCC 2.96</strong></span>!
Nie będzie działać!
</p></div><div class="variablelist" title="OPCJE WIERSZA POLECEŃ DLA VESA"><p class="title"><b>OPCJE WIERSZA POLECEŃ DLA VESA</b></p><dl><dt><span class="term"><tt class="option">-vo vesa:<em class="replaceable"><code>opts</code></em></tt></span></dt><dd><p>
    obecnie rozpoznawane: <code class="literal">dga</code>, aby wymusić tryb dga oraz
    <code class="literal">nodga</code>, aby wyłączyć tryb dga. W trybie dga możesz
    włączyć podwójne buforowanie
    opcją <tt class="option">-double</tt>. Informacja: możesz pominąć
    te parametry, aby włączyć <span class="bold"><strong>automatyczne wykrywanie
    </strong></span> trybu dga.
  </p></dd></dl></div><div class="itemizedlist" title="ZNANE PROBLEMY I ICH OBEJŚCIA"><p class="title"><b>ZNANE PROBLEMY I ICH OBEJŚCIA</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Jeżeli zainstalowałeś czcionkę <span class="bold"><strong>NLS
  (Native Language Support - Obsługa Języka Rodzimego)</strong></span>
  w swoim Linuksie i używasz sterownika VESA z trybu tekstowego to po
  zakończeniu <span class="application">MPlayera</span> będziesz miał załadowaną
  <span class="bold"><strong>czcionkę ROM</strong></span> zamiast narodowej.
  Możesz z powrotem załadować czcionkę narodową używając na przykład narzędzia
  <span class="command"><strong>setsysfont</strong></span> z dystrybucji Mandrake/Mandriva.
  (<span class="bold"><strong>Podpowiedź</strong></span>:
  To samo narzędzie jest używane do lokalizacji fbdev).
</p></li><li class="listitem"><p>
  Niektóre <span class="bold"><strong>Linuksowe sterowniki grafiki</strong></span>
  nie aktualizują aktywnego <span class="bold"><strong>trybu BIOS</strong></span>
  w pamięci DOS.  Więc jeżeli masz taki problem - zawsze używaj trybu VESA
  tylko z <span class="bold"><strong>trybu tekstowego</strong></span>.
  W przeciwnym wypadku tryb tekstowy (#03) i tak będzie włączany
  i będziesz musiał restartować komputer.
</p></li><li class="listitem"><p>
  Często po zakończeniu pracy sterownika VESA dostajesz
  <span class="bold"><strong>czarny</strong></span> ekran.
  Aby przywrócić ekran do stanu oryginalnego po prostu przełącz się na
  inną konsolę (wciskając <span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F&lt;x&gt;</b></span>)
  po czym przełącz się z powrotem na poprzednią konsolę w ten sam sposób.
</p></li><li class="listitem"><p>
  Aby uzyskać <span class="bold"><strong>działające wyjście TV</strong></span>
  musisz mieć podłączony odbiornik TV przed włączeniem swojego PC,
  ponieważ video BIOS inicjalizuje się tylko podczas procedury POST
</p></li></ul></div></div><div class="sect2" title="7.2.12. X11"><div class="titlepage"><div><div><h3 class="title"><a name="x11"></a>7.2.12. X11</h3></div></div></div><p>
Unikaj, jeśli to możliwe. Wyjście na X11 (używa rozszerzenia współdzielonej
pamięci) nie używa żadnego przyśpieszania sprzętowego.
Obsługuje (przyśpieszane przez MMX/3DNow/SSE, lecz ciągle wolne) skalowanie
programowe. Użyj opcji <tt class="option">-fs -zoom</tt>.
Większość kart ma obsługę sprzętowego skalowania, warto więc użyć dla nich
opcji <tt class="option">-vo xv</tt> lub
<tt class="option">-vo xmga</tt> dla kart Matrox.
</p><p>
Problemem jest to, że sterowniki do większości kart nie obsługują sprzętowego
przyśpieszenia na wyjściu na drugi monitor (second head)/TV.
W takim przypadku widać zielone/niebieskie okno zamiast filmu.
To tutaj przydaje się ten sterownik, lecz potrzebujesz potężnego
CPU aby używać programowego skalowania. Nie używaj programowego
wyjścia SDL + skalowania, jakość obrazu jest o wiele gorsza!
</p><p>
Skalowanie programowe jest bardzo wolne, lepiej spróbuj zmienić tryb video.
Jest to bardzo proste. Spójrz na
<a class="link" href="#dga-modelines" title="ZMIANA ROZDZIELCZOŚCI">wiersze trybów sekcji DGA</a>
i wstaw je do swojego <tt class="filename">XF86Config</tt>.

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Jeżeli masz 4.x.x: użyj opcji <tt class="option">-vm</tt>.
  Zmieni ona rozdzielczość na taką jaką ma twój film. Jeżeli nie:
</p></li><li class="listitem"><p>
  W XFree86 3.x.x: musisz poruszać się po dostępnych rozdzielczościach
  poprzez kombinacje klawiszy
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad +</b></span>
  oraz
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Keypad -</b></span>.
</p></li></ul></div><p>
</p><p>
Jeżeli nie możesz znaleźć trybów, które wstawiłeś, przeszukaj komunikaty
XFree86. Niektóre sterowniki nie mogą używać niskich pixelclock
(częstotliwości taktowania układu RAMDAC), które są wymagane dla trybów
o niskiej rozdzielczości.
</p></div><div class="sect2" title="7.2.13. VIDIX"><div class="titlepage"><div><div><h3 class="title"><a name="vidix"></a>7.2.13. VIDIX</h3></div></div></div><p title="WSTĘP"><b>WSTĘP. </b>
<acronym class="acronym">VIDIX</acronym> jest skrótem od
<span class="bold"><strong>VID</strong></span>eo
<span class="bold"><strong>I</strong></span>nterface
for *ni<span class="bold"><strong>X</strong></span>
(Interfejs VIDeo dla *niXów).
VIDIX został zaprojektowany i napisany jako interfejs dla szybkich
sterowników działających w przestrzeni
użytkownika (user-space), zapewniających taką samą wydajność, jak mga_vid
dla kart Matrox. Jest także wysoce przenośny (portable).
</p><p>
Ten interfejs został zaprojektowany jako próba dopasowania istniejących
interfejsów przyśpieszanego video
(znanych jako mga_vid, rage128_vidm radeon_vid, pm3_vid) do ustalonego
schematu. Zapewnia wysokopoziomowy interfejs dla układów znanych jako BES
(BackEnd Scalers)
lub OV (Video Overlay - nakładka video).
Nie zapewnia on niskopoziomowego interfejsu do tworów znanych jako serwery
grafiki. (nie chcę współzawodniczyć z zespołem X11 w przełączaniu trybów
graficznych). Innymi słowy,
głównym celem tego interfejsu jest maksymalizacja szybkości odtwarzania video.
</p><div class="itemizedlist" title="ZASTOSOWANIE"><p class="title"><b>ZASTOSOWANIE</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Możesz używać samodzielnego sterownika wyjścia video:
  <tt class="option">-vo xvidix</tt>. Ten sterownik został stworzony jako
  interfejs X11
  dla technologii VIDIX. Wymaga serwera X i może pracować tylko pod nim.
  Zwróć uwagę na to, że stosowany jest bezpośredni dostęp do sprzętu
  i omijany jest sterownik X, pixmapy przechowywane (cached) w pamięci karty
  mogą zostać uszkodzone. Możesz temu zapobiec ograniczając ilość używanej przez
  X pamięci poprzez opcję "VideoRam" w sekcji "device".
  Powinieneś ustawić to na rozmiar pamięci na karcie minus 4MB.
  Jeżeli masz mniej niż 8MB pamięci video (video RAM),
  możesz użyć zamiast tego opcji "XaaNoPixmapCache" w sekcji "screen".
</p></li><li class="listitem"><p>
  Istnieje konsolowy sterownik VIDIX: <tt class="option">-vo cvidix</tt>.
  Wymaga on dla większości kart działającego i zainicjalizowanego bufora ramki
  (albo po prostu zapaskudzisz sobie ekran). Otrzymasz podobny efekt jak przy
  <tt class="option">-vo mga</tt> lub <tt class="option">-vo fbdev</tt>. Jednakże karty nVidia
  są zdolne do wyświetlania w pełni graficznego obrazu w konsoli całkowicie
  tekstowej. Więcej informacji znajdziesz w sekcji
  <a class="link" href="#vidix-nvidia" title="7.2.13.5. Karty nVidia">nvidia_vid</a>.
  Żeby pozbyć się tekstu na ramkach i mrugającego kursora, wypróbuj coś w rodzaju
  </p><pre class="screen">setterm -cursor off &gt; /dev/tty9</pre><p>
  (zakładając, że do tej pory nie używałeś <code class="systemitem">tty9</code>)
  a potem przełącz się na <code class="systemitem">tty9</code>.
  Z drugiej strony, <tt class="option">-colorkey 0</tt> powinno dać video odtwarzające
  się "w tle", chociaż działanie tego zależy od prawidłowego funkcjonowania
  koloru kluczowego.
</p></li><li class="listitem"><p>
  Możesz użyć podurządzenia (subdevice) VIDIX, które zostało dodane
  do rozmaitych sterowników wyjścia video, takich jak:
  <tt class="option">-vo vesa:vidix</tt>
  (<span class="bold"><strong>tylko Linux</strong></span>)
  oraz <tt class="option">-vo fbdev:vidix</tt>.
</p></li></ul></div><p>
W rzeczywistości nie ma znaczenia, który sterownik wyjścia video jest używany z
<span class="bold"><strong>VIDIX</strong></span>.
</p><div class="itemizedlist" title="WYMAGANIA"><p class="title"><b>WYMAGANIA</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Karta graficzna powinna pracować w trybie graficznym (z wyjątkiem kart nVidia
  z w/w sterownikiem wyjścia <tt class="option">-vo cvidix</tt>).
</p></li><li class="listitem"><p>
  Sterownik wyjścia video <span class="application">MPlayera</span> powinien znać
  aktywny tryb video, a także powinien być w stanie przekazać podurządzeniu
  VIDIX niektóre cechy serwera.
</p></li></ul></div><p title="METODY UŻYWANIA"><b>METODY UŻYWANIA. </b>
Gdy VIDIX używany jest jako <span class="bold"><strong>podurządzenie</strong></span>
(<tt class="option">-vo vesa:vidix</tt>) konfiguracja trybu video jest dokonywana
przez urządzenie wyjścia video (w skrócie
<span class="bold"><strong>vo_server</strong></span>).
Możesz więc przekazać <span class="application">MPlayerowi</span>
takie same ustawienia jak dla vo_server.
Dodatkowo rozumie on ustawienie <tt class="option">-double</tt>
jako globalnie widoczny parametr.
(Zalecam używanie tego ustawienia z VIDIX przynajmniej dla kart ATI).
Jeżeli chodzi o <tt class="option">-vo xvidix</tt>, to obecnie rozpoznaje następujące
opcje <tt class="option">-fs -zoom -x -y -double</tt>.
</p><p>
Możesz także określić sterownik VIDIX jako trzeci podargument w wierszu poleceń:

</p><pre class="screen">mplayer -vo xvidix:mga_vid.so -fs -zoom -double <em class="replaceable"><code>plik.avi</code></em></pre><p>
lub
</p><pre class="screen">mplayer -vo vesa:vidix:radeon_vid.so -fs -zoom -double -bpp 32 <em class="replaceable"><code>plik.avi</code></em></pre><p>

Ale jest to niebezpieczne i nie powinieneś tego robić.
W tym przypadku podany sterownik zostanie wymuszony i rezultat może być
nieprzewidywalny (może <span class="bold"><strong>zawiesić</strong></span> Twój komputer).
Powinieneś to robić TYLKO, jeśli jesteś całkowicie pewien, że zadziała,
a <span class="application">MPlayer</span> nie robi tego automatycznie.
Proszę, powiadom o tym deweloperów. Prawidłowym sposobem jest używanie VIDIX
bez żadnych argumentów, aby umożliwić automatyczne wykrywanie sterownika.
</p><p>
Ponieważ VIDIX wymaga bezpośredniego dostępu do sprzętu, musisz uruchamiać
<span class="application">MPlayera</span> jako root lub ustawić bit SUID na binarce
<span class="application">MPlayera</span>
(<span class="bold"><strong>Ostrzeżenie: Jest to zagrożenie bezpieczeństwa!</strong></span>).
Alternatywnie możesz używać specjalnego modułu jądra, takiego jak ten:
</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="krok 1"><p>
  Ściągnij <a class="ulink" href="http://www.arava.co.il/matan/svgalib/" target="_top">rozwojową wersję</a>
  svgalib (na przykład 1.9.17) <span class="bold"><strong>LUB</strong></span> ściągnij
  <a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/svgalib/svgalib_helper-1.9.17-mplayer.tar.bz2" target="_top">stąd</a>
  wersję stworzoną przez Alexa specjalnie do użytku z <span class="application">MPlayerem</span>
  (nie potrzebuje ona do kompilacji źródeł svgalib)
</p></li><li class="step" title="krok 2"><p>
  Skompiluj moduł w katalogu <tt class="filename">svgalib_helper</tt>
  (jeżeli ściągnąłeś źródła ze strony svgalib to można go znaleźć wewnątrz katalogu
  <tt class="filename">svgalib-1.9.17/kernel/</tt>) i załaduj go (insmod).
</p></li><li class="step" title="krok 3"><p>
  Aby utworzyć odpowiednie urządzenia (devices) w katalogu <tt class="filename">/dev</tt>,
  wykonaj jako root </p><pre class="screen">make device</pre><p> w katalogu <tt class="filename">svgalib_helper</tt>.
</p></li><li class="step" title="krok 4"><p>
  Przenieś katalog <tt class="filename">svgalib_helper</tt> do
  <tt class="filename">mplayer/main/libdha/svgalib_helper</tt>.
</p></li><li class="step" title="krok 5"><p>
  Wymagane jeżeli ściągnąłeś źródła ze strony svgalib: usuń komentarz przed
  wierszem CFLAGS zawierający ciąg "svgalib_helper" z
  <tt class="filename">libdha/Makefile</tt>.
</p></li><li class="step" title="krok 6"><p>
  Przekompiluj i zainstaluj libdha
</p></li></ol></div><div class="sect3" title="7.2.13.1. Karty ATI"><div class="titlepage"><div><div><h4 class="title"><a name="vidix-ati"></a>7.2.13.1. Karty ATI</h4></div></div></div><p>
Obecnie większość kart ATI jest obsługiwana natywnie,
od Mach64 do najnowszych Radeonów.
</p><p>
Są dwie skompilowanie binarki: <tt class="filename">radeon_vid</tt> dla Radeonów
oraz <tt class="filename">rage128_vid</tt> dla kart Rage 128.
Możesz wymusić jedną z nich lub pozwolić systemowi VIDIX na autodetekcję
dostępnych sterowników.
</p></div><div class="sect3" title="7.2.13.2. Karty Matrox"><div class="titlepage"><div><div><h4 class="title"><a name="vidix-mga"></a>7.2.13.2. Karty Matrox</h4></div></div></div><p>
Matrox G200, G400, G450 i G550 zgłoszono jako działające.
</p><p>
Sterownik obsługuje korektory (equalizery) video i powinien być prawie tak
szybki jak <a class="link" href="#mga_vid" title="7.2.6. Bufor ramki Matrox (mga_vid)">bufor ramki Matrox</a>
</p></div><div class="sect3" title="7.2.13.3. Karty Trident"><div class="titlepage"><div><div><h4 class="title"><a name="vidix-trident"></a>7.2.13.3. Karty Trident</h4></div></div></div><p>
Jest dostępny sterownik dla układu Trident Cyberblade/i1, który można znaleźć
na płytach głównych VIA Epia.
</p><p>
Sterownik ten został napisany przez (i jest pod opieką)
<a class="ulink" href="http://www.blackfiveservices.co.uk/EPIAVidix.shtml" target="_top">Alastaira M. Robinsona</a>.
</p></div><div class="sect3" title="7.2.13.4. Karty 3DLabs"><div class="titlepage"><div><div><h4 class="title"><a name="vidix-3dlabs"></a>7.2.13.4. Karty 3DLabs</h4></div></div></div><p>
Chociaż istnieje sterownik dla układów 3DLabs GLINT R3 oraz Permedia3,
to nikt go nie testował (sprawozdania są mile widziane).
</p></div><div class="sect3" title="7.2.13.5. Karty nVidia"><div class="titlepage"><div><div><h4 class="title"><a name="vidix-nvidia"></a>7.2.13.5. Karty nVidia</h4></div></div></div><p>
Unikalną cechą sterownika nvidia_vid jest jego zdolność do wyświetlania obrazu
na <span class="bold"><strong>zwykłej, czysto tekstowej konsoli</strong></span> - bez
magicznych X, bufora ramki, czy czegokolwiek.
W tym celu będziemy musieli użyć wyjścia video <tt class="option">cvidix</tt>, jak
w pokazuje poniższy przykład:
  </p><pre class="screen">mplayer -vo cvidix <em class="replaceable"><code>przyklad.avi</code></em></pre><p>
</p></div><div class="sect3" title="7.2.13.6. Karty SiS"><div class="titlepage"><div><div><h4 class="title"><a name="vidix-sis"></a>7.2.13.6. Karty SiS</h4></div></div></div><p>
Jest to kod wysoce eksperymentalny, tak jak nvidia_vid.
</p><p>
Przetestowano go na SiS 650/651/740 (najczęściej używane układy w
minimalistycznych pecetach "Shuttle XPC" z płytami
SiS).
</p><p>
Czekamy na raporty!
</p></div></div><div class="sect2" title="7.2.14. DirectFB"><div class="titlepage"><div><div><h3 class="title"><a name="directfb"></a>7.2.14. DirectFB</h3></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>
"DirectFB jest biblioteką graficzną, która była tworzona z myślą o
systemach typu embedded.
Oferuje ona maksymalną przyśpieszaną sprzętowo wydajność przy minimalnym
zużyciu zasobów i minimalnym narzucie biblioteki.
" - cytat z <a class="ulink" href="http://www.directfb.org" target="_top">http://www.directfb.org</a>
</p></blockquote></div><p>Nie będę tu podawał cech DirectFB.</p><p>
Chociaż <span class="application">MPlayer</span> nie jest obsługiwany jako
"dostawca video" dla DirectFB,
ten sterownik wyjścia umożliwi odtwarzanie video poprzez DirectFB.
Będzie ono - oczywiście - przyśpieszane.
Na moim Matroksie G400 szybkość DirectFB była taka sama jak XVideo.
</p><p>
Zawsze próbuj używać najnowszej wersji DirectFB.
Możesz używać opcji DirectFB w wierszu poleceń, używając opcji
<tt class="option">-dfbopts</tt>. Wyboru warstwy można dokonać metodą podurządzenia.
Przykład: <tt class="option">-vo directfb:2</tt> (standardową jest warstwa -1 : autodetekcja)
</p></div><div class="sect2" title="7.2.15. DirectFB/Matrox (dfbmga)"><div class="titlepage"><div><div><h3 class="title"><a name="dfbmga"></a>7.2.15. DirectFB/Matrox (dfbmga)</h3></div></div></div><p>
Przeczytaj proszę <a class="link" href="#directfb" title="7.2.14. DirectFB">główną sekcję DirectFB</a>,
znajdziesz tam ogólne informacje.
</p><p>
Ten sterownik wyjścia video włączy CRTC2
(na drugim wyjściu z karty) w kartach Matrox G400/G450/G550,
wyświetlając obraz <span class="bold"><strong>niezależnie</strong></span>
od pierwszego wyjścia z karty.
</p><p>
Ville Syrjala ma na swojej stronie domowej
<a class="ulink" href="http://www.sci.fi/~syrjala/directfb/Matrox_TV-out_README.txt" target="_top">README</a>
oraz
<a class="ulink" href="http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto" target="_top">HOWTO</a>
wyjaśniające, jak uruchomić wyjście TV DirectFB w kartach Matrox.
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Pierwszą wersją DirectFB, jaką udało nam się uruchomić była 0.9.17
(wadliwa, potrzebuje łatki <code class="systemitem">surfacemanager</code>
z powyższego URL).
Port kodu CRTC2 do
<a class="link" href="#mga_vid" title="7.2.6. Bufor ramki Matrox (mga_vid)">mga_vid</a> jest od lat w planach.
Mile widziane są
<a class="ulink" href="../../tech/patches.txt" target="_top">łatki</a>.
</p></div></div></div><div class="sect1" title="7.3. Dekodery MPEG"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mpeg_decoders"></a>7.3. Dekodery MPEG</h2></div></div></div><div class="sect2" title="7.3.1. Wejście i wyjście DVB"><div class="titlepage"><div><div><h3 class="title"><a name="dvb"></a>7.3.1. Wejście i wyjście DVB</h3></div></div></div><p>
<span class="application">MPlayer</span> obsługuje karty z układem Siemens DVB,
od producentów takich, jak: Siemens, Technotrend, Galaxis czy Hauppauge.
Najnowsze sterowniki DVB są dostępne na
<a class="ulink" href="http://www.linuxtv.org" target="_top">stronie Linux TV</a>.
Jeżeli chcesz programowego transkodowania, powinieneś dysponować procesorem
z zegarem co najmniej 1GHz.
</p><p>
Configure powinien wykryć Twoją kartę DVB. Jeżeli tak się nie stało,
możesz wymusić obsługę DVB używając
</p><pre class="screen">./configure --enable-dvb</pre><p>Jeżeli Twoje nagłówki 'ost' znajdują się w niestandardowym miejscu,
ustaw ścieżkę przy pomocy</p><pre class="screen">./configure --with-extraincdir=<em class="replaceable"><code>katalog ze źródłami DVB</code></em>/ost/include</pre><p>Po czym skompiluj i zainstaluj jak zwykle.</p><p title="ZASTOSOWANIE"><b>ZASTOSOWANIE. </b>
Sprzętowego dekodowania (odtwarzanie standardowych plików MPEG-1/2)
można dokonać tą komendą:
</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes <em class="replaceable"><code>plik.mpg|vob</code></em></pre><p>
Programowe dekodowanie oraz transkodowanie różnych formatów do MPEG-1
można uzyskać używając polecenia podobnego do:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes <em class="replaceable"><code>twójplik.roz</code></em>
mplayer -ao mpegpes -vo mpegpes -vf expand <em class="replaceable"><code>twójplik.roz</code></em>
</pre><p>
Zauważ, że karty DVB obsługują tylko rozdzielczość pionową równą 288 i 576 dla
PAL oraz 240 i 480 dla NTSC.
<span class="bold"><strong>Musisz</strong></span> przeskalować obraz, dodając
<tt class="option">scale=szerokość:wysokość</tt>,
z wybraną wysokością i szerokością do opcji <tt class="option">-vf</tt>.
Karty DVB akceptują różne szerokości, takie jak 720, 704, 640, 512, 480, 352
itp. i dokonują sprzętowego skalowania w kierunku horyzontalnym,
więc w większości przypadków nie musisz skalować horyzontalnie.
Dla MPEG-4 (DivX) 512x384 (proporcje 4:3) wypróbuj:
</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes -vf scale=512:576</pre><p>Jeżeli masz film w formacie panoramicznym i nie chcesz go skalować
do pełnej wysokości, możesz użyć filtru <tt class="option">expand=szer:wys</tt>
aby dodać czarne paski. Aby wyświetlić MPEG-4 (DivX) 640x384, wypróbuj:
</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes -vf expand=640:576 <em class="replaceable"><code>plik.avi</code></em>
</pre><p>Jeżeli twój CPU jest za wolny na pełnowymiarowy MPEG-4 (DivX) 720x576,
spróbuj przeskalować w dół:</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes -vf scale=352:576 <em class="replaceable"><code>plik.avi</code></em>
</pre><p>Jeżeli to nie poprawiło szybkości, spróbuj także pionowego
skalowania w dół:</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes -vf scale=352:288 <em class="replaceable"><code>plik.avi</code></em>
</pre><p>
Dla OSD i napisów użyj cechy OSD filtru expand. Zamiast
<tt class="option">expand=wys:szer</tt> lub
<tt class="option">expand=wys:szer:x:y</tt>, użyj więc
<tt class="option">expand=wys:szer:x:y:1</tt> (piąty parametr <tt class="option">:1</tt>
na końcu umożliwi renderowanie (wyświetlanie) OSD).
Możesz chcieć przesunąć obraz trochę w górę, aby zyskać więcej miejsca na
napisy. Możesz także chcieć przesunąć napisy w górę, jeżeli znajdują się poza
ekranem TV, użyj opcji <tt class="option">-subpos &lt;0-100&gt;</tt>, aby to dopasować
(<tt class="option">-subpos 80</tt> jest dobrym wyborem).
</p><p>
Aby odtwarzać filmy z liczbą klatek na sekundę inną niż 25 na telewizorze PAL
lub na wolnym CPU, dodaj opcję <tt class="option">-framedrop</tt>.
</p><p>
Zachowanie proporcji plików MPEG-4 (DivX) oraz optymalne parametry skalowania
(sprzętowe poziome i programowe pionowe z zachowaniem odpowiednich proporcji),
można uzyskać przy użyciu nowego filtru dvbscale:
</p><pre class="screen">
dla TV  4:3: -vf dvbscale,scale=-1:0,expand=-1:576:-1:-1:1
dla TV 16:9: -vf dvbscale=1024,scale=-1:0,expand=-1:576:-1:-1:1
</pre><p title="Cyfrowa telewizja (moduł wejścia DVB)"><b>Cyfrowa telewizja (moduł wejścia DVB). </b>Możesz użyć swojej karty DVB do oglądania cyfrowej telewizji.</p><p>
  Powinieneś mieć zainstalowane programy <span class="command"><strong>scan</strong></span> oraz
  <span class="command"><strong>szap/tzap/czap/azap</strong></span>; wszystkie są w paczce ze sterownikami.
</p><p>
  Sprawdź czy Twoje sterowniki działają prawidłowo używając programu takiego jak
  <a class="ulink" href="http://sf.net/projects/dvbtools/" target="_top"><span class="command"><strong>dvbstream</strong></span></a>
  (jest on podstawą modułu wejścia DVB).
</p><p>
  Teraz powinieneś ułożyć plik <tt class="filename">~/.mplayer/channels.conf</tt>
  zgodnie ze składnią akceptowaną przez <span class="command"><strong>szap/tzap/czap/azap</strong></span>
  lub kazać <span class="command"><strong>scan</strong></span> zrobić to za Ciebie.
</p><p>
  Jeżeli masz kartę więcej niż jednego typu (np. ATSC, satelita, kablówka,
  z nadajnika naziemnego), to możesz zapisać swoje pliki kanałów jako:
  <tt class="filename">~/.mplayer/channels.conf.sat</tt> (satelita),
  <tt class="filename">~/.mplayer/channels.conf.ter</tt> (naziemna),
  <tt class="filename">~/.mplayer/channels.conf.cbl</tt> (kablówka),
  oraz <tt class="filename">~/.mplayer/channels.conf.atsc</tt>
  dając w ten sposób <span class="application">MPlayerowi</span> wskazówkę aby
  używał tych plików zamiast <tt class="filename">~/.mplayer/channels.conf</tt>,
  a Ty musisz tylko określić, której karty użyć.
</p><p>
  Upewnij się, że w <tt class="filename">channels.conf</tt> masz
  <span class="emphasis"><em>tylko</em></span> kanały niekodowane (Free to Air). W przeciwnym
  razie <span class="application">MPlayer</span> będzie próbował przeskoczyć do
  następnego widzialnego kanału, lecz może to zająć trochę czasu jeżeli
  wystąpuje po sobie wiele kanałów kodowanych.
</p><p>
  W polach audio i video możesz użyć rozszerzonej składni:
  <tt class="option">...:pid[+pid]:...</tt> (każdy maksymalnie dla 6 pidów);
  W tym przypadku <span class="application">MPlayer</span> uwzględni w strumieniu
  wszystkie podane pidy, plus pid 0 (zawierający PAT). Zachęcamy do
  uwzględnienia w każdym wierszu pidu PMT (jeżeli go znasz) dla określanego
  kanału. Inne możliwe zastosowania: pid televideo, druga ścieżka dźwiękowa,
  itp.
</p><p>
  Jeśli <span class="application">MPlayer</span> często uskarża się na
  </p><pre class="screen">Too many video/audio packets in the buffer</pre><p>
  (za dużo pakietów video/audio w buforze) albo jeśli zauważysz rosnący brak
  synchronizacji między audio a video spróbuj użyć demuksera MPEG-TS
  z libavformat, dodając
  <tt class="option">-demuxer lavf -lavfdopts probesize=128</tt>
  do wiersza poleceń.
</p><p>
  Aby wyświetlić pierwszy z kanałów obecnych na Twojej liście, uruchom
</p><pre class="screen">
  mplayer dvb://
</pre><p>
  Jeżeli chcesz oglądać określony kanał, na przykład R1, uruchom
</p><pre class="screen">
  mplayer dvb://R1
</pre><p>
  Jeżeli masz więcej niż jedną kartę, będziesz musiał określić numer
  karty, na której jest widoczny kanał (np. 2), korzystając z następującej
  składni:
</p><pre class="screen">
  mplayer dvb://2@R1
</pre><p>
  Aby przełączać kanały używaj klawiszy <span class="keycap"><b>h</b></span> (następny) oraz
  <span class="keycap"><b>k</b></span> (poprzedni) lub skorzystaj z
  <a class="link" href="#osdmenu" title="2.4.3. Menu OSD">menu OSD</a>).
</p><p>
  Jeżeli Twój <tt class="filename">~/.mplayer/menu.conf</tt> zawiera wpis
  <code class="literal">&lt;dvbsel&gt;</code>, taki jak ten w przykładowym pliku
  <tt class="filename">etc/dvb-menu.conf</tt> (którym możesz nadpisać
  <tt class="filename">~/.mplayer/menu.conf</tt>), w menu głównym pokaże się
  podmenu, które zezwoli Ci na wybór jednego kanału z obecnych w Twoim
  <tt class="filename">channels.conf</tt>, możliwe, że poprzedzone menu z listą
  dostępnych kart, jeżeli więcej niż jedna nadaje się do użytku
  <span class="application">MPlayerem</span>.
</p><p>
  Jeżeli chcesz zapisać program (audycję) na dysku, użyj
</p><pre class="screen">
  mplayer -dumpfile r1.ts -dumpstream dvb://R1
</pre><p>
  Jeżeli chcesz nagrać go w innym formacie (przekodowując go), możesz zamiast
  tego użyć polecenia podobnego do
</p><pre class="screen">
  mencoder -o r1.avi -ovc xvid -xvidencopts bitrate=800 -oac mp3lame -lameopts cbr:br=128 -pp=ci dvb://R1
</pre><p>
  Na stronie man znajdziesz listę opcji, które możesz przekazać modułowi wejścia
  DVB.
</p><p title="PRZYSZŁOŚĆ"><b>PRZYSZŁOŚĆ. </b>
Jeżeli masz pytania lub chcesz otrzymywać przyszłe ogłoszenia,
a także wziąć udział w dyskusjach na ten temat, przyłącz się do naszej
listy dyskusyjnej
<a class="ulink" href="http://mplayerhq.hu/mailman/listinfo/mplayer-dvb" target="_top">MPlayer-DVB</a>.
Proszę pamiętaj, że językiem listy jest angielski.
</p><p>
W przyszłości możesz się spodziewać zdolności wyświetlania OSD i napisów
przy użyciu wbudowanej obsługi OSD przez karty DVB, a także bardziej płynnego
odtwarzania filmów innych niż 25fps oraz transkodowania w czasie
rzeczywistym MPEG-2 i MPEG-4
(częściowa dekompresja).
</p></div><div class="sect2" title="7.3.2. DXR2"><div class="titlepage"><div><div><h3 class="title"><a name="dxr2"></a>7.3.2. DXR2</h3></div></div></div><p><span class="application">MPlayer</span> obsługuje sprzętowo przyśpieszane
odtwarzanie przy użyciu karty DXR2.</p><p>
Przede wszystkim będziesz potrzebował poprawnie zainstalowanych sterowników
DXR2. Sterowniki i instrukcję instalacji możesz znaleźć na stronie
<a class="ulink" href="http://dxr2.sf.net/" target="_top">Centrum zasobów DXR2 (DXR2 Resource Center)</a>.
</p><div class="variablelist" title="ZASTOSOWANIE"><p class="title"><b>ZASTOSOWANIE</b></p><dl><dt><span class="term"><tt class="option">-vo dxr2</tt></span></dt><dd><p>Włącz wyjście TV.</p></dd><dt><span class="term"><tt class="option">-vo dxr2:x11</tt> lub <tt class="option">-vo dxr2:xv</tt></span></dt><dd><p>Włącz wyjście nakładki w X11.</p></dd><dt><span class="term"><tt class="option">-dxr2 &lt;opcja1:opcja2:...&gt;</tt></span></dt><dd><p>Ta opcja używana jest do sterowania sterownikiem DXR2.</p></dd></dl></div><p>
Układ nakładki (overlay chipset) używany w DXR2 jest dość kiepskiej jakości,
ale standardowe ustawienia powinny działać u wszystkich.
OSD może być użyte z nakładką (nie na TV) poprzez rysowanie go kolorem
kluczowym (colorkey).
Ze standardowymi ustawieniami koloru kluczowego możesz uzyskać różne rezultaty,
zwykle będziesz widział kolor kluczowy dookoła znaków lub inny śmieszny efekt.
Jeżeli dobrze dostosujesz ustawienia koloru kluczowego, powinieneś uzyskać
akceptowalne wyniki.
</p><p>Listę dostępnych opcji znajdziesz na stronie man.</p></div><div class="sect2" title="7.3.3. DXR3/Hollywood+"><div class="titlepage"><div><div><h3 class="title"><a name="dxr3"></a>7.3.3. DXR3/Hollywood+</h3></div></div></div><p>
<span class="application">MPlayer</span> obsługuje sprzętowo przyśpieszane
odtwarzanie na kartach Creative DXR3 oraz Sigma Designs Hollywood Plus.
Obie te karty używają układu dekodującego em8300 firmy Sigma Designs.
</p><p>
Przede wszystkim będziesz potrzebował poprawnie zainstalowanych sterowników
DXR3/H+ w wersji 0.12.0 lub nowszej.
Sterowniki i instrukcję ich instalacji możesz znaleźć na stronie
<a class="ulink" href="http://dxr3.sf.net/" target="_top">DXR3 &amp; Hollywood Plus dla Linuksa</a>.
<tt class="filename">configure</tt> powinno wykryć Twoją kartę automatycznie,
kompilacja powinna przebiec bez problemu.
</p><div class="variablelist" title="ZASTOSOWANIE"><p class="title"><b>ZASTOSOWANIE</b></p><dl><dt><span class="term"><tt class="option">-vo dxr3:prebuf:sync:norm=x:<em class="replaceable"><code>device</code></em></tt></span></dt><dd><p>
<tt class="option">overlay</tt> włącza nakładkę zamiast wyjścia TV.
Do działania wymaga poprawnie skonfigurowanych ustawień nakładki.
Najłatwiejszym sposobem konfiguracji nakładki jest odpalenie autocal.
Następnie uruchom <span class="application">MPlayera</span> z wyjściem dxr3 oraz z
wyłączoną nakładką; uruchom dxr3view.
W dxr3view możesz dostrajać ustawienia nakładki i oglądać efekty na bieżąco,
być może będzie to w przyszłości obsługiwane przez GUI <span class="application">MPlayera</span>.
Po poprawnym ustawieniu nakładki nie będziesz już musiał używać dxr3view.
<tt class="option">prebuf</tt> włącza buforowanie z wyprzedzeniem (prebuffering).
Prebuffering jest możliwością układu em8300, która umożliwia przetrzymywanie
w pamięci więcej niż jednej ramki video na raz. Oznacza to, że
<span class="application">MPlayer</span>
uruchomiony z włączonym prebufferingiem będzie próbował cały czas utrzymywać
wypełniony bufor. Jeżeli masz wolną maszynę, <span class="application">MPlayer</span>
będzie używał prawie lub dokładnie 100% CPU. Jest to szczególnie powszechne
przy odtwarzaniu czystych strumieni MPEG (takich jak DVD, SVCD itd.).
<span class="application">MPlayer</span> wypełni bufor bardzo szybko, ponieważ nie
będzie musiał przekodowywać strumienia do MPEG.
Z prebufferingiem odtwarzanie video jest <span class="bold"><strong>dużo</strong></span>
mniej wrażliwe na inne programy wykorzystujące CPU. Nie będzie gubił ramek,
chyba że inne aplikacje będą wykorzystywały CPU przez dłuższy czas.
Uruchamiany bez prebufferingu, em8300 jest o wiele bardziej wrażliwy na
obciążenie CPU, włączenie opcji <tt class="option">-framedrop</tt> jest więc wysoce
wskazane aby uniknąć dalszej utraty synchronizacji.
<tt class="option">sync</tt> włączy nowy mechanizm synchronizacji (sync-engine). Jest
to na razie funkcja eksperymentalna. Z włączonym sync wewnętrzny zegar em8300
będzie cały czas monitorowany. Gdy zacznie się różnić od zegara
<span class="application">MPlayera</span> zostanie zresetowany, czego skutkiem będzie
opuszczenie przez em8300 wszystkich opóźnionych
ramek. <tt class="option">norm=x</tt> ustawi standard TV dla DXR3 bez potrzeby
używania zewnętrznych narzędzi, takich jak em8300setup. Poprawnymi
standardami są: 5 = NTSC, 4 = PAL-60, 3 = PAL. Specjalne standardy to
2 (automatyczne dostrojenie
używające PAL/PAL-60) oraz 1 (automatyczne dostrojenie używające PAL/NTSC);
decydują one, którego standardu użyć patrząc na ilość klatek na sekundę filmu.
norm = 0 (standardowe) nie zmienia bieżącego standardu.
<tt class="option"><em class="replaceable"><code>device</code></em></tt> = numer urządzenia, którego
możesz użyć, jeżeli masz więcej niż jedną kartę em8300.
Każda z tych opcji może być pominięta.
<tt class="option">:prebuf:sync</tt> spisuje się doskonale przy odtwarzaniu filmów
MPEG-4 (DivX). Niektórzy miewają problemy podczas odtwarzania plików
MPEG-1/2 korzystając
z opcji prebuf. Spróbuj najpierw bez żadnych opcji. Jeżeli będziesz miał
problemy z synchronizacją lub z napisami DVD, wypróbuj <tt class="option">:sync</tt>.
</p></dd><dt><span class="term"><tt class="option">-ao oss:/dev/em8300_ma-<em class="replaceable"><code>X</code></em></tt></span></dt><dd><p>
Ustawia wyjście audio, gdzie <em class="replaceable"><code>X</code></em> jest numerem
urządzenia (0 jeżeli pojedyncza karta).
</p></dd><dt><span class="term"><tt class="option">-af resample=<em class="replaceable"><code>xxxxx</code></em></tt></span></dt><dd><p>
em8300 nie potrafi odgrywać dźwięku o częstotliwości próbkowania niższej niż
44100Hz. Jeżeli częstotliwość próbkowania jest niższa niż 44100Hz wybierz
44100HZ lub 48000Hz w zależności, która bardziej pasuje. Na przykład jeżeli film
używa 22050Hz - wybierz 44100Hz (44100 / 2 = 22050), jeżeli używa 24000Hz -
wybierz 48000Hz (48000 / 2 = 24000) i tak dalej. Nie działa to z cyfrowym
wyjściem audio (<tt class="option">-ac hwac3</tt>).
</p></dd><dt><span class="term"><tt class="option">-vf lavc</tt></span></dt><dd><p>
Aby oglądać zawartość nie-MPEG na em8300 (np. MPEG-4 (DivX) lub RealVideo)
będziesz musiał określić filtr video MPEG-1 taki jak
<code class="systemitem">libavcodec</code> (lavc).
Spójrz na stronę man, aby uzyskać więcej informacji o <tt class="option">-vf lavc</tt>.
Obecnie nie istnieje sposób ustawienia współczynnika fps dla
em8300, co oznacza, że jest on zablokowany na 30000/1001fps. Z tego powodu jest
bardzo wskazane abyś używał
<tt class="option">-vf lavc=<em class="replaceable"><code>quality</code></em>:25</tt>, szczególnie
jeżeli używasz buforowania z wyprzedzeniem. Dlaczego 25 a nie 30000/1001? Cóż,
przy 30000/1001 odtwarzanie staje się nieco skokowe. Powód tego nie jest nam znany.
Jeżeli ustawisz fps pomiędzy 25 a 27 obraz stanie się stabilny. W chwili obecnej
nie możemy zrobić nic poza zaakceptowaniem tego faktu.
</p></dd><dt><span class="term"><tt class="option">-vf expand=-1:-1:-1:-1:1</tt></span></dt><dd><p>
Chociaż sterownik DXR3 może wstawić jakieś OSD w obraz MPEG-1/2/4, ma ono
o wiele niższą jakość niż tradycyjne OSD <span class="application">MPlayera</span>,
ma także liczne problemy z odświeżaniem. Powyższy wiersz najpierw zamieni
wejściowe video na MPEG-4 (jest to konieczne, przepraszamy),
następnie nałoży filtr expand (rozszerzenie), który
nic nie rozszerzy (-1: domyślne), ale doda normalne OSD do obrazu (robi to ta
jedynka na końcu).
</p></dd><dt><span class="term"><tt class="option">-ac hwac3</tt></span></dt><dd><p>
em8300 obsługuje odtwarzanie AC3 audio (dźwięk przestrzenny) poprzez cyfrowe
wyjście karty. Spójrz na opcję <tt class="option">-ao oss</tt> powyżej. Musi ona być
użyta aby określić wyjście DXR3 zamiast tego z karty dźwiękowej.
</p></dd></dl></div></div></div><div class="sect1" title="7.4. Inny sprzęt do wizualizacji"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="other"></a>7.4. Inny sprzęt do wizualizacji</h2></div></div></div><div class="sect2" title="7.4.1. Zr"><div class="titlepage"><div><div><h3 class="title"><a name="zr"></a>7.4.1. Zr</h3></div></div></div><p>
Jest to sterownik wyświetlania (<tt class="option">-vo zr</tt>) dla wielu kart
służących do przechwytywania/odtwarzania MJPEG (testowane z DC10+ i Buz,
powinien także działać dla LML33 oraz DC10). Sterownik koduje ramkę na JPEG i
wysyła ją do karty. Do konwersji na JPEG używany i wymagany jest
<code class="systemitem">libavcodec</code>. Korzystając ze specjalnego
trybu <span class="emphasis"><em>cinerama</em></span>
możesz oglądać filmy w formacie panoramicznym (wide screen), zakładając że masz
dwa ekrany i dwie karty MJPEG. W zależności od rozdzielczości i ustawień
jakości, sterownik ten może wymagać sporo mocy CPU. Pamiętaj, aby użyć
<tt class="option">-framedrop</tt>, jeżeli Twoja maszyna jest zbyt wolna. Info: Mój AMD
K6-2 350MHz jest (z <tt class="option">-framedrop</tt>) całkiem wystarczający do
oglądania materiałów o rozmiarach VCD, oraz przeskalowanych w dół filmów.
</p><p>
Sterownik ten "rozmawia" ze sterownikiem jądra dostępnym na
<a class="ulink" href="http://mjpeg.sf.net" target="_top">http://mjpeg.sf.net</a>, musisz więc go najpierw uruchomić.
Obecność karty MJPEG jest wykrywana automatycznie przez skrypt
<tt class="filename">configure</tt>. Jeżeli autodetekcja zawiedzie, wymuś wykrywanie
używając </p><pre class="screen">./configure --enable-zr</pre><p>
</p><p>
Wyjście można kontrolować licznymi opcjami. Obszerny opis opcji można znaleźć na
stronie man, krótki poprzez wywołanie
</p><pre class="screen">mplayer -zrhelp</pre><p>
</p><p>
Rzeczy takie, jak skalowanie i OSD (wyświetlanie na ekranie) nie są obsługiwane
przez ten sterownik, ale można je uzyskać poprzez filtry video. Załóżmy, że
masz film w rozdzielczości 512x272 i chciałbyś go wyświetlić na pełnym
ekranie, używając swojego DC10+. Istnieją trzy główne możliwości - możesz
przeskalować film do szerokości 768, 384 lub 192. Ze względu na wydajność i
jakość, wybrałbym przeskalowanie filmu do 384x204 używając szybkiego
programowego skalowania w trybie bilinear. Polecenie wygląda w ten sposób:
</p><pre class="screen">
mplayer -vo zr -sws 0 -vf scale=384:204 <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p><p>
Kadrowania można dokonać filtrem <tt class="option">crop</tt> albo tym
sterownikiem. Załóżmy, że Twój film jest zbyt szeroki, aby go wyświetlić na
Twoim Buz i chcesz użyć <tt class="option">-zrcrop</tt>, aby uczynić film mniej
szerokim.
Powinieneś użyć takiego polecenia:
</p><pre class="screen">
mplayer -vo zr -zrcrop 720x320+80+0 <em class="replaceable"><code>benhur.avi</code></em>
</pre><p>
</p><p>
Jeżeli chcesz użyć filtru <tt class="option">crop</tt>, wykonaj:
</p><pre class="screen">
mplayer -vo zr -vf crop=720:320:80:0 <em class="replaceable"><code>benhur.avi</code></em>
</pre><p>
</p><p>
Dodatkowe wystąpienia <tt class="option">-zrcrop</tt> wywołują tryb
<span class="emphasis"><em>cinerama</em></span>. Możesz na przykład rozdzielić obraz na kilka TV
lub projektorów, uzyskując w ten sposób większy ekran. Powiedzmy, że masz dwa
projektory, lewy podłączony do karty Buz na <tt class="filename">/dev/video1</tt>
a prawy do DC10+ na <tt class="filename">/dev/video0</tt>. Film jest w
rozdzielczości 704x288. Załóżmy także, że chcesz, aby obraz z prawego projektora
był czarno-biały oraz aby ramki jpeg wyświetlane z lewego projektora były
jakości 10. Aby uzyskać taki efekt powinieneś wydać następujące polecenie:
</p><pre class="screen">
mplayer -vo zr -zrdev /dev/video0 -zrcrop 352x288+352+0 -zrxdoff 0 -zrbw \
          -zrcrop 352x288+0+0 -zrdev /dev/video1 -zrquality 10 \
          <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p><p>
Jak pewnie zauważyłeś, opcje przed drugim <tt class="option">-zrcrop</tt> odnoszą się
tylko do DC10+, a opcje po drugim <tt class="option">-zrcrop</tt> odnoszą się do Buz.
Ilość kart uczestniczących w <span class="emphasis"><em>cinerama</em></span> ograniczona jest do
czterech, więc możesz zbudować ekran (ścianę video:) 2x2.
</p><p>
Na koniec - ważna uwaga: Nie włączaj ani nie wyłączaj XawTV na urządzeniu
odtwarzającym w trakcie odtwarzania - zawiesisz swój komputer. Można natomiast
<span class="bold"><strong>NAJPIERW</strong></span> włączyć XawTV,
<span class="bold"><strong>NASTĘPNIE</strong></span> włączyć <span class="application">MPlayera</span>,
poczekać, aż <span class="application">MPlayer</span> zakończy działanie i
<span class="bold"><strong>POTEM</strong></span> wyłączyć XawTV.
</p></div><div class="sect2" title="7.4.2. Blinkenlights"><div class="titlepage"><div><div><h3 class="title"><a name="blinkenlights"></a>7.4.2. Blinkenlights</h3></div></div></div><p>
Ten sterownik zdolny jest do odtwarzanie używając protokołu UDP Blinkenlights
(mrugające światła - przyp. tłum.). Jeżeli nie wiesz, czym jest
<a class="ulink" href="http://www.blinkenlights.de/" target="_top">Blinkenlights</a>
lub jego następca - <a class="ulink" href="http://www.blinkenlights.de/arcade/" target="_top">Arcade</a>,
dowiedz się. Pomimo, że prawdopodobnie jest to najrzadziej używane wyjście
video, z pewnością jest najfajniejszym jakie <span class="application">MPlayer</span>
ma do zaoferowania. Po prostu pooglądaj kilka
<a class="ulink" href="http://www.blinkenlights.de/video.en.html" target="_top">dokumentacyjnych filmów
Blinkenlights</a>. Na filmie Arcade możesz zobaczyć sterownik wyjściowy
Blinkenlights w akcji w 00:07:50.
</p></div></div><div class="sect1" title="7.5. Obsługa wyjścia TV"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tvout"></a>7.5. Obsługa wyjścia TV</h2></div></div></div><div class="sect2" title="7.5.1. Karty Matrox G400"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-mga-g400"></a>7.5.1. Karty Matrox G400</h3></div></div></div><p>
Pod Linuksem istnieją dwa sposoby uruchomienia wyjścia TV na karcie Matrox G400:
</p><div class="important" title="WAŻNE" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">WAŻNE</h3><p>
instrukcje dla Matrox G450/G550 znajdują się w następnej sekcji!
</p></div><div class="variablelist"><dl><dt><span class="term">XFree86</span></dt><dd><p>
    Używając sterownika oraz modułu HAL, dostępnego na
    <a class="ulink" href="http://www.matrox.com" target="_top">stronie Matroksa</a>. Będziesz miał X
    na TV.
    </p><p>
    <span class="bold"><strong>Ten sposób nie daje Ci przyśpieszanego
    odtwarzania</strong></span> jak pod Windowsami! Drugie wyjście ma tylko bufor
    ramki YUV, <span class="emphasis"><em>BES</em></span> (Back End Scaler, układ skalujący YUV na
    kartach G200/G400/G450/G550) tam nie działa. Windowsowy sterownik jakoś to
    obchodzi, prawdopodobnie używając silnika (engine) 3D do powiększania, a
    bufora ramki YUV do wyświetlania obrazu. Jeżeli na prawdę musisz używać X,
    użyj opcji <tt class="option">-vo x11 -fs -zoom</tt>. Ostrzegam, że będzie to
    <span class="bold"><strong>WOLNE</strong></span> i będzie miało włączone
    zabezpieczenie przed kopiowaniem <span class="bold"><strong>Macrovision</strong></span> (Macrovision copy protection).
    (możesz "obejść" Macrovision używając tego
    <a class="ulink" href="http://avifile.sf.net/mgamacro.pl" target="_top">skryptu perla</a>).
  </p></dd><dt><span class="term">Bufor ramki (framebuffer)</span></dt><dd><p>
    Używając <span class="bold"><strong>modułów matroxfb</strong></span> w jądrach 2.4.
    2.2 nie obsługują wyjścia TV, więc są do tego celu bezużyteczne. Musisz
    włączyć WSZYSTKIE specyficzne dla matroxfb podczas kompilacji (poza
    MultiHead) i skompilować je w <span class="bold"><strong>moduły</strong></span>!
    Będziesz także potrzebował włączonego I2C.
    </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="krok 1"><p>
      Wejdź do <tt class="filename">TVout</tt> i wpisz
      <span class="command"><strong>./compile.sh</strong></span>. Zainstaluj
      <tt class="filename">TVout/matroxset/matroxset</tt> w jakimś katalogu
      znajdującym się w zmiennej <code class="envar">PATH</code>.
    </p></li><li class="step" title="krok 2"><p>
      Jeżeli nie masz zainstalowanego <span class="command"><strong>fbset</strong></span>, umieść
      <tt class="filename">TVout/fbset/fbset</tt> gdzieś w
      swojej zmiennej <code class="envar">PATH</code>.
    </p></li><li class="step" title="krok 3"><p>
      Jeżeli nie masz zainstalowanego <span class="command"><strong>con2fb</strong></span>, umieść
      <tt class="filename">TVout/con2fb/con2fb</tt> gdzieś w
      swojej zmiennej <code class="envar">PATH</code>.
    </p></li><li class="step" title="krok 4"><p>
      Następnie wejdź do katalogu <tt class="filename">TVout/</tt>
      w źródłach <span class="application">MPlayera</span> i uruchom
      <tt class="filename">./modules</tt> jako root. Twoja konsola tekstowa wejdzie w
      tryb framebuffer (nie ma odwrotu!).
    </p></li><li class="step" title="krok 5"><p>
      Następnie, WYEDYTUJ i uruchom skrypt <tt class="filename">./matroxtv</tt>.
      Ukaże Ci się bardzo proste menu. Naciśnij <span class="keycap"><b>2</b></span> i
      <span class="keycap"><b>Enter</b></span>. Teraz powinieneś mieć ten sam obraz na monitorze i
      TV. Jeżeli na obrazie TV (standardowo PAL) są jakieś paski, znaczy to, że
      skrypt nie był w stanie poprawnie ustawić rozdzielczości (standardowo na
      640x512). Wypróbuj inne rozdzielczości z menu i/lub poeksperymentuj z
      fbset.
    </p></li><li class="step" title="krok 6"><p>
      Tiaa. Następnym zadaniem będzie sprawienie aby kursor na tty1 (lub innym)
      zniknął oraz aby wyłączyć wygaszanie ekranu. Wykonaj następujące
      polecenia:

      </p><pre class="screen">
echo -e '\033[?25l'
setterm -blank 0</pre><p>
      lub
      </p><pre class="screen">
setterm -cursor off
setterm -blank 0</pre><p>

      Możliwe, że chcesz umieścić to w skrypcie, a także wyczyścić ekran. Aby
      z powrotem włączyć kursor:
      </p><pre class="screen">echo -e '\033[?25h'</pre><p> lub
      </p><pre class="screen">setterm -cursor on</pre><p>
    </p></li><li class="step" title="krok 7"><p>
      Tiaa git. Rozpocznij odtwarzanie filmu przez:
      </p><pre class="screen">
mplayer -vo mga -fs -screenw 640 -screenh 512 <em class="replaceable"><code>nazwa_pliku</code></em></pre><p>

      (Jeżeli używasz X, przełącz się teraz na matroxfb używając np.
      <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F1</b></span>.)
      Zmień <code class="literal">640</code> oraz <code class="literal">512</code>, jeżeli chcesz
      ustawić inną rozdzielczość...
    </p></li><li class="step" title="krok 8"><p>
      <span class="bold"><strong>Ciesz się ultra-szybkim ultra-bajernym wyjściem TV
      Matroksa (lepsze niż Xv)!</strong></span>
      
    </p></li></ol></div></dd></dl></div><p title="Konstruowanie kabla TV-out do Matroksów"><b>Konstruowanie kabla TV-out do Matroksów. </b>
Nikt nie bierze na siebie żadnej odpowiedzialności za zniszczenia spowodowane tą
dokumentacją.
</p><p title="Kabel dla G400"><b>Kabel dla G400. </b>
W złączu CRTC2 na czwartej nóżce (pin) jest sygnał composite video.
Uziemienie jest na szóstej, siódmej i ósmej nóżce. (info dostarczone przez
Balázs Rácz)
</p><p title="Kabel dla G450"><b>Kabel dla G450. </b>
W złączu CTRC2 na pierwszej nóżce jest sygnał composite video. Ziemia jest na
piątej, szóstej, siódmej i pietnastej (5, 6, 7, 15) nóżce. (info dostarczone
przez Balázs Kerekes)
</p></div><div class="sect2" title="7.5.2. Karty Matrox G450/G550"><div class="titlepage"><div><div><h3 class="title"><a name="tv-out_matrox_g450"></a>7.5.2. Karty Matrox G450/G550</h3></div></div></div><p>
Obsługa wyjścia TV dla tych kart została dodana dopiero niedawno i nie
należy jeszcze do głównego drzewa jądra. . Z tego, co
wiem, moduł <span class="bold"><strong>mga_vid</strong></span> nie może być obecnie użyty
ponieważ sterownik G450/G550 pracuje tylko w jednej konfiguracji: pierwszy układ
CRTC (z wieloma możliwościami) na pierwszym ekranie (monitor) i drugi CRTC (bez
<span class="bold"><strong>BES</strong></span> - po objaśnienia do BES sięgnij do sekcji
G400 wyżej) na TV. W chwili obecnej możesz więc używać tylko sterownika wyjścia
<span class="emphasis"><em>fbdev</em></span> <span class="application">MPlayera</span>.
</p><p>
Obecnie pierwszy CRTC nie może być przekierowany na drugie wyjście. Autor
sterownika jądra matroxfb - Petr Vandrovec - być może zrobi obsługę tego poprzez
wyświetlanie wyjścia z pierwszego CRTC na obydwa złącza jednocześnie, jak to
jest w tej chwili zalecane dla G400, patrz sekcja wyżej.
</p><p>
Potrzebną łatkę na jądro i dokładne HOWTO można ściągnąć z
<a class="ulink" href="http://www.bglug.ca/matrox_tvout/" target="_top">http://www.bglug.ca/matrox_tvout/</a>
</p></div><div class="sect2" title="7.5.3. karty ATI"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-ati"></a>7.5.3. karty ATI</h3></div></div></div><p title="WSTĘP"><b>WSTĘP. </b>
Obecnie ATI nie chce obsługiwać pod Linuksem żadnego z układów TV-out, z powodu
ich licencjonowanej technologii Macrovision.
</p><div class="itemizedlist" title="STAN KART ATI Z TV-OUT POD LINUKSEM"><p class="title"><b>STAN KART ATI Z TV-OUT POD LINUKSEM</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>ATI Mach64</strong></span>:
  obsługiwane przez <a class="ulink" href="http://gatos.sf.net" target="_top">GATOS</a>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>ASIC Radeon VIVO</strong></span>:
  obsługiwane przez <a class="ulink" href="http://gatos.sf.net" target="_top">GATOS</a>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Radeon</strong></span> oraz <span class="bold"><strong>Rage128</strong></span>:
  obsługiwane przez <span class="application">MPlayera</span>!
  Sprawdź sekcje <a class="link" href="#vesa" title="7.2.11. VESA - wyjście na VESA BIOS">sterownik VESA</a> oraz
  <a class="link" href="#vidix" title="7.2.13. VIDIX">VIDIX</a>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Rage Mobility P/M, Radeon, Rage 128, Mobility M3/M4</strong></span>:
  obsługiwane przez <a class="ulink" href="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/" target="_top">atitvout</a>.
</p></li></ul></div><p>
Na innych kartach używaj sterownika <a class="link" href="#vesa" title="7.2.11. VESA - wyjście na VESA BIOS">VESA</a>, bez VIDIX.
Potrzebny jest jednak potężny CPU.
</p><p>
Jedyna rzecz, którą musisz zrobić to:
<span class="bold"><strong>Mieć podłączony odbiornik TV przez uruchomieniem swojego
PC</strong></span>, ponieważ video BIOS inicjalizuje się tylko podczas procedury
POST.
</p></div><div class="sect2" title="7.5.4. nVidia"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-nvidia"></a>7.5.4. nVidia</h3></div></div></div><p>
Najpierw MUSISZ ściągnąć sterowniki o zamkniętych źródłach z
<a class="ulink" href="http://nvidia.com" target="_top">http://nvidia.com</a>. Nie będę tutaj opisywał procesu instalacji i
konfiguracji ponieważ nie jest to celem tej dokumentacji.
</p><p>
Jeżeli XFree86, XVideo i przyśpieszanie 3D już działa prawidłowo, przerób
sekcję Device swojej karty w pliku <tt class="filename">XF86Config</tt> zgodnie z
poniższym wzorcem (dostosuj do swojej karty/TV):
</p><pre class="programlisting">
Section "Device"
        Identifier      "GeForce"
        VendorName      "ASUS"
        BoardName       "nVidia GeForce2/MX 400"
        Driver          "nvidia"
        #Option         "NvAGP" "1"
        Option          "NoLogo"
        Option          "CursorShadow"  "on"

        Option          "TwinView"
        Option          "TwinViewOrientation" "Clone"
        Option          "MetaModes" "1024x768,640x480"
        Option          "ConnectedMonitor" "CRT, TV"
        Option          "TVStandard" "PAL-B"
        Option          "TVOutFormat" "Composite"
EndSection
</pre><p>
</p><p>
Oczywiście najważniejsza jest część TwinView.
</p></div><div class="sect2" title="7.5.5. NeoMagic"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-neomagic"></a>7.5.5. NeoMagic</h3></div></div></div><p>
Układ NeoMagic można znaleźć w rożnych laptopach, niektóre wyposażone są w
prosty analogowy koder TV, inne mają bardziej zaawansowaną wersję.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Układ analogowy</strong></span>:
  Doniesiono nam, że dobre wyjście TV można uzyskać używając
  <tt class="option">-vo fbdev</tt> lub <tt class="option">-vo fbdev2</tt>. Potrzebujesz
  wkompilowanego w jądro vesafb i przekazane do poleceń jądra:
  <tt class="option">append="video=vesafb:ywrap,mtrr" vga=791</tt>.
  Powinieneś uruchomić <span class="application">X</span>, następnie przełączyć się do
  konsoli używając np.
  <span class="keycap"><b>CTRL</b></span>+<span class="keycap"><b>ALT</b></span>+<span class="keycap"><b>F1</b></span>.
  Jeżeli nie wystartujesz <span class="application">X</span> przed uruchomieniem
  <span class="application">MPlayera</span> z konsoli obraz będzie powolny i będzie
  się ciął (mile widziane wytłumaczenie).
  Zaloguj się na konsoli, a następnie wykonaj następujące polecenie:

  </p><pre class="screen">clear; mplayer -vo fbdev -zoom -cache 8192 dvd://</pre><p>

  Powinieneś ujrzeć odtwarzany w konsoli film zajmujący około połowę ekranu
  LCD Twojego laptopa.
  Aby przełączyć się na TV naciśnij <span class="keycap"><b>Fn</b></span>+<span class="keycap"><b>F5</b></span>
  trzy razy.
  Przetestowane na Tecra 800, jądro 2.6.15 z vesafb, ALSA v1.0.10.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Układ kodujący Chrontel 70xx</strong></span>:
  Obecny w IBM thinkpad 390E, a możliwe, że także w innych Thinkpadach lub notebookach.
  </p><p>
  Dla trybu PAL musisz użyć <tt class="option">-vo vesa:neotv_pal</tt>.
  Dla trybu NTSC - <tt class="option">-vo vesa:neotv_ntsc</tt>.
  Zapewni to funkcjonowanie wyjścia TV w następujących trybach 16 bpp i 8 bpp:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>NTSC 320x240, 640x480, być może także 800x600.</p></li><li class="listitem"><p>PAL  320x240, 400x300, 640x480, 800x600.</p></li></ul></div><p>Tryb 512x384 nie jest obsługiwany przez BIOS. Musisz przeskalować
  obraz do innej rozdzielczości aby aktywować wyjście TV. Jeżeli widzisz obraz
  na ekranie w rozdzielczości 640x480 lub 800x600, lecz nie w 320x240, lub
  w innych mniejszych rozdzielczościach, to musisz zamienić dwie tabele
  w <tt class="filename">vbelib.c</tt>.
  Więcej szczegółów znajdziesz w kodzie funkcji vbeSetTV. W tym przypadku
  skontaktuj się z autorem.
  </p><p>
  Znane problemy: Tylko VESA, nie są zaimplementowane ustawienia obrazu takie
  jak jasność, kontrast, poziom czerni (blacklevel) i filtr migotania
  (flickfilter).
  </p></li></ul></div><p>

</p></div></div></div><div class="chapter" title="Rozdział 8. Porty"><div class="titlepage"><div><div><h2 class="title"><a name="ports"></a>Rozdział 8. Porty</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#linux">8.1. Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#debian">8.1.1. Pakiety Debiana</a></span></dt><dt><span class="sect2"><a href="#rpm">8.1.2. Pakiety RPM</a></span></dt><dt><span class="sect2"><a href="#arm">8.1.3. ARM</a></span></dt></dl></dd><dt><span class="sect1"><a href="#bsd">8.2. *BSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#freebsd">8.2.1. FreeBSD</a></span></dt><dt><span class="sect2"><a href="#openbsd">8.2.2. OpenBSD</a></span></dt><dt><span class="sect2"><a href="#darwin">8.2.3. Darwin</a></span></dt></dl></dd><dt><span class="sect1"><a href="#unix">8.3. Komercyjny Unix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#solaris">8.3.1. Solaris</a></span></dt><dt><span class="sect2"><a href="#hp-ux">8.3.2. HP-UX</a></span></dt><dt><span class="sect2"><a href="#aix">8.3.3. AIX</a></span></dt><dt><span class="sect2"><a href="#qnx">8.3.4. QNX</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows">8.4. Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwin">8.4.1. <span class="application">Cygwin</span></a></span></dt><dt><span class="sect2"><a href="#mingw">8.4.2. <span class="application">MinGW</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="#macos">8.5. Mac OS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#osx_gui">8.5.1. MPlayer OS X GUI</a></span></dt></dl></dd></dl></div><div class="sect1" title="8.1. Linux"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="linux"></a>8.1. Linux</h2></div></div></div><p>
Główną platformą rozwojową jest Linux x86, chociaż
<span class="application">MPlayer</span> pracuje również na wielu innych portach
tego systemu. Pakiety binarne są dostępne z kilku źródeł, jednakże
<span class="bold"><strong>żaden z nich nie jest przez nas obsługiwany</strong></span>.
Zgłaszaj problemy do ich opiekunów, a nie do nas.
</p><div class="sect2" title="8.1.1. Pakiety Debiana"><div class="titlepage"><div><div><h3 class="title"><a name="debian"></a>8.1.1. Pakiety Debiana</h3></div></div></div><p>
Aby zbudować pakiet dla Debiana, wywołaj poniższe polecenie w katalogu ze źródłami
<span class="application">MPlayera</span>:

</p><pre class="screen">fakeroot debian/rules binary</pre><p>

Jeśli chcesz przekazać własne opcje do skryptu configure, możesz ustawić zmienną
środowiskową <code class="envar">DEB_BUILD_OPTIONS</code>. Na przykład, jeśli chcesz
obsługi menu i GUI, wyglądało by to tak:

</p><pre class="screen">DEB_BUILD_OPTIONS="--enable-gui --enable-menu" fakeroot debian/rules binary</pre><p>

Możesz przekazać również niektóre zmienne do Makefile. Na przykład, jeśli chcesz
kompilować przy pomocy gcc 3.4, nawet jeśli nie jest to domyślny kompilator:

</p><pre class="screen">CC=gcc-3.4 DEB_BUILD_OPTIONS="--enable-gui" fakeroot debian/rules binary</pre><p>

Aby wyczyściś katalog ze źródłami wykonaj poniższa komendę:

</p><pre class="screen">fakeroot debian/rules clean</pre><p>

Jako superużytkownik możesz zainstalować pakiet <tt class="filename">.deb</tt> tak, jak zwykle:

</p><pre class="screen">dpkg -i ../mplayer_<em class="replaceable"><code>wersja</code></em>.deb</pre><p>
</p><p>
Christian Marillat buduje dla Debiana nieoficjalne paczki
<span class="application">MPlayera</span>, <span class="application">MEncodera</span>
i naszych czcionek bitmapowych już od jakiegoś czasu, możesz je pobrać (apt-get)
z <a class="ulink" href="http://www.debian-multimedia.org/" target="_top">jego strony domowej</a>.
</p></div><div class="sect2" title="8.1.2. Pakiety RPM"><div class="titlepage"><div><div><h3 class="title"><a name="rpm"></a>8.1.2. Pakiety RPM</h3></div></div></div><p>
Dominik Mierzejewski opiekuje się oficjalnymi pakietami RPM
<span class="application">MPlayera</span> dla Fedora Core.
Są one dostępne w
<a class="ulink" href="http://rpm.livna.org/" target="_top">repozytorium Livna</a>.
</p><p>
RPMy dla Mandrake/Mandriva są dostępne na <a class="ulink" href="http://plf.zarb.org/" target="_top">P.L.F.</a>.
SuSE zawierał okrojoną wersję <span class="application">MPlayera</span> w dystrybucji.
Usunęli ją w swoich najnowszych wydaniach. W pełni funkcjonalne
pakiety możesz pobrać z
<a class="ulink" href="http://packman.links2linux.de/?action=128" target="_top">links2linux.de</a>.
</p></div><div class="sect2" title="8.1.3. ARM"><div class="titlepage"><div><div><h3 class="title"><a name="arm"></a>8.1.3. ARM</h3></div></div></div><p>
<span class="application">MPlayer</span> działa również na PDA z procesorami ARM
działających pod kontrolą Linuksa, np. Sharp Zaurus, Compaq iPAQ.
Najprostszym sposobem, żeby uzyskać <span class="application">MPlayera</span>,
jest pobranie go z odpowiedniego źródła pakietów (stable, testing, unstable)
z witryny <a class="ulink" href="http://www.openzaurus.org" target="_top">OpenZaurus</a>. Jeżeli chcesz
go skompilować samodzielnie, powinieneś przyjrzeć się katalogom
<a class="ulink" href="http://openzaurus.bkbits.net:8080/buildroot/src/packages/mplayer?nav=index.html%7Csrc/.%7Csrc/packages" target="_top">mplayera</a>
i biblioteki
<a class="ulink" href="http://openzaurus.bkbits.net:8080/buildroot/src/packages/libavcodec?nav=index.html%7Csrc/.%7Csrc/packages" target="_top">libavcodec</a>
w głównym katalogu źródłowym OpenZaurusa. Zawierają one najświeższe łatki
i pliki Makefile, służące do samodzielnej kompilacji
<span class="application">MPlayera</span> z <code class="systemitem">libavcodec</code>.
Jeżeli potrzebujesz interfejsu GUI, możesz użyć xmms-embedded.
</p></div></div><div class="sect1" title="8.2. *BSD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bsd"></a>8.2. *BSD</h2></div></div></div><p>
<span class="application">MPlayer</span> działa na FreeBSD, OpenBSD, NetBSD,
BSD/OS i Darwinie. Dostępne są wersje portów/pkgsrc/fink/itp., które
prawdopodobnie są łatwiejsze w instalacji, niż kompilacja ze źródeł.
</p><p>
Do zbudowania <span class="application">MPlayera</span> będziesz potrzebował
GNU make (gmake - rdzenne make BSD nie zadziała) i najnowszej wersji binutils.
</p><p>
Jeżeli <span class="application">MPlayer</span> nie może znaleźć
<tt class="filename">/dev/cdrom</tt> lub <tt class="filename">/dev/dvd</tt>,
stwórz odpowiednie dowiązanie symboliczne:
</p><pre class="screen">ln -s /dev/<em class="replaceable"><code>twoje_urządzenie_cdrom</code></em> /dev/cdrom</pre><p>
</p><p>
Aby używać bibliotek Win32 z <span class="application">MPlayerem</span>, będziesz
potrzebował przekompilować jądro z opcją "<code class="envar">USER_LDT</code>"
(chyba, że używasz FreeBSD-CURRENT, tam jest domyślnie włączona).
</p><div class="sect2" title="8.2.1. FreeBSD"><div class="titlepage"><div><div><h3 class="title"><a name="freebsd"></a>8.2.1. FreeBSD</h3></div></div></div><p>
Jeżeli Twój procesor ma rozszerzenie SSE, przekompiluj jądro z opcją
"<code class="envar">CPU_ENABLE_SSE</code>" (wymagany FreeBSD-STABLE lub łaty na jądro).
</p></div><div class="sect2" title="8.2.2. OpenBSD"><div class="titlepage"><div><div><h3 class="title"><a name="openbsd"></a>8.2.2. OpenBSD</h3></div></div></div><p>Ze względu na ograniczenia w różnych wersjach gas (GNU assemblera - przyp. tłumacza)
(dotyczące relokacji i MMX), będziesz musiał przeprowadzić kompilację w dwóch krokach:
Po pierwsze, upewnij się, że wersja nierdzenna występuje w zmiennej <code class="envar">$PATH</code>
i wykonaj <span class="command"><strong>gmake -k</strong></span>, a następnie upewnij się, że używana jest wersja rdzenna
i wykonaj <span class="command"><strong>gmake</strong></span>.
</p><p>
Powyższa metoda nie jest już potrzebna w OpenBSD 3.4.
</p></div><div class="sect2" title="8.2.3. Darwin"><div class="titlepage"><div><div><h3 class="title"><a name="darwin"></a>8.2.3. Darwin</h3></div></div></div><p>
Zobacz rozdział <a class="link" href="#macos" title="8.5. Mac OS">Mac OS</a>.
</p></div></div><div class="sect1" title="8.3. Komercyjny Unix"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="unix"></a>8.3. Komercyjny Unix</h2></div></div></div><p>
<span class="application">MPlayer</span> został przeportowany na wiele komercyjnych
wariantów Uniksa. Jako, że środowiska programistyczne przeważnie różnią się od tych
znajdowanych w wolnych Uniksach, być może będziesz musiał wprowadzić ręczne
poprawki, aby program skompilował się poprawnie.
</p><div class="sect2" title="8.3.1. Solaris"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>8.3.1. Solaris</h3></div></div></div><p>
<span class="application">MPlayer</span> powinien działać na Solarisie 2.6 lub nowszym.
Możesz skorzystać ze sterownika dźwięku SUN'a podająć opcję <tt class="option">-ao sun</tt>.
</p><p>
Na <span class="bold"><strong>UltraSPARCach</strong></span>,
<span class="application">MPlayer</span> korzysta z rozszerzenia
<span class="bold"><strong>VIS</strong></span> (odpowiednik MMX), obecnie tylko w
<span class="emphasis"><em><code class="systemitem">libmpeg2</code></em></span>,
<span class="emphasis"><em><code class="systemitem">libavo</code></em></span> i
<span class="emphasis"><em><code class="systemitem">libavcodec</code></em></span>,
ale nie w <code class="systemitem">mp3lib</code>. Możesz oglądać plik VOB na
procesorze z taktowaniem 400MHz. Będziesz potrzebował do tego biblioteki
<a class="ulink" href="http://www.sun.com/sparc/vis/mediaLib.html" target="_top">
<code class="systemitem">mLib</code></a>.
</p><p><span class="bold"><strong>Caveat:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>mediaLib</strong></span> jest
			<span class="bold"><strong>aktualnie wyłączone</strong></span> w domyślnej
			konfiguracji <span class="application">MPlayera</span>, z powodu błędów.
			Użytkownicy SPARC-ów, którzy budują MPlayera z obsługą mediaLib
			informowali o delikatnym, zielonymi miganiu wideo kodowane i dekodowanego
			przez libavcodec. Możesz włączyć mediaLib, jeżeli chcesz używając:
			</p><pre class="screen">
				$ ./configure --enable-mlib
				</pre><p>
			Robisz to na własne ryzyko. Użytkownicy x86 powinni
			<span class="bold"><strong>nigdy</strong></span> nie używać mediaLib,
			ponieważ w efekcie otrzymają kiepską wydajność MPlayera.
			</p></li></ul></div><p>
Aby zbudować pakiet, będziesz potrzebował GNU <span class="application">make</span>
(<tt class="filename">gmake</tt>, <tt class="filename">/opt/sfw/gmake</tt>), rdzenne make
Solarisa nie zadziała. Typowy błąd jaki otrzymujesz, budując tym drugim zamiast GNU
make, to:
</p><pre class="screen">
   % /usr/ccs/bin/make
   make: Fatal error in reader: Makefile, line 25: Unexpected end of line seen
</pre><p>
</p><p>
W Solarisie przeznaczonym dla SPARC, potrzebujesz kompilatora GNU C/C++; nie ma
znaczenia, czy jest on skonfigurowany z, czy bez GNU assemblera.
</p><p>
Na Solarisie x86, potrzebujesz GNU assemblera i kompilatora GNU C/C++,
skonfigurowanego do używania GNU assemblera! Kod
<span class="application">MPlayera</span>, na platformie x86, w znaczący sposób korzysta
z instrukcji MMX, SSE i 3DNOW!, które nie mogą być skompilowane przy pomocy
assemblera Sun <tt class="filename">/usr/ccs/bin/as</tt>.
</p><p>
Skrypt <tt class="filename">configure</tt> stara się określić, jaki assembler
wywoływany jest przez komendę "gcc" (jeżeli próba zakończy się fiaskiem,
użyj opcji <tt class="option">--as=<em class="replaceable"><code>/gdziekolwiek/zainstalowałeś/gnu-as</code></em></tt>,
żeby określić gdzie skrypt <tt class="filename">configure</tt> może znaleźć GNU "as" w Twoim
systemie).
</p><p>Rozwiązania najczęstszych problemów:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
			Błąd jaki wyświetli <tt class="filename">configure</tt> na Solarisie x86,
			używającym GCC bez GNU assemblera:
</p><pre class="screen">
   % configure
   ...
   Checking assembler (/usr/ccs/bin/as) ... , failed
   Please upgrade(downgrade) binutils to 2.10.1...
</pre><p>
(Rozwiązanie: Zainstaluj i używaj gcc skonfigurowanego z opcją <tt class="option">--with-as=gas</tt>)
</p><p>
Typowy błąd, jaki otrzymasz przy próbie budowy kompilatorem GNU C, który nie używa GNU as:
</p><pre class="screen">
   % gmake
   ...
   gcc -c -Iloader -Ilibvo -O4 -march=i686 -mcpu=i686 -pipe -ffast-math
        -fomit-frame-pointer  -I/usr/local/include   -o mplayer.o mplayer.c
   Assembler: mplayer.c
   "(stdin)", line 3567 : Illegal mnemonic
   "(stdin)", line 3567 : Syntax error
   ... more "Illegal mnemonic" and "Syntax error" errors ...
</pre><p>
</p></li><li class="listitem"><p><span class="application">MPlayer</span> może się wysypać
		podczas dekodowania i kodowania wideo używających win32codecs:
		</p><pre class="screen">
			...
			Trying to force audio codec driver family acm...
			Opening audio decoder: [acm] Win32/ACM decoders
			sysi86(SI86DSCR): Invalid argument
			Couldn't install fs segment, expect segfault


			MPlayer interrupted by signal 11 in module: init_audio_codec
			...
		</pre><p>
		Dzieje się tak z powodu zmian w sysi86() w Solaris 10 i wydaniach
		pre-Solaris Nevada b31. Zostało to naprawione w Solaris Nevada b32;
		jednak Sun nie przeniósł jeszcze poprawki do Solarisa 10. Projekt
		MPlayer poinformował o tym problemie Sun i łatka jest aktualnie
		wprowadzana do Solarisa 10. Więcej informacji o tym błędzie może
		zostać znaleziona  na stronie:
		<a class="ulink" href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413" target="_top">http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413</a>.
		</p></li><li class="listitem"><p>
		Ze względu na błędy występujące w Solarisie 8, możesz nie być w stanie odtwarzać
		płyt DVD o pojemności większej niż 4 GB:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
Sterownik sd(7D) dla Solarisa 8 x86 ma błąd ujawniający się przy próbie dostępu do
bloku dyskowego &gt;4GB urządzenia korzystającego z logicznego rozmiaru bloku !=DEV_BSIZE
(np. nośnik CD-ROM i DVD). Ze względu na przepełnienie 32bitowych liczb całkowitych,
odczytywany jest adres dysku modulo 4GB
(<a class="ulink" href="http://groups.yahoo.com/group/solarisonintel/message/22516" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22516</a>).
Ten problem nie występuje na Solarisie 8 przeznaczonym dla procesorów SPARC.
</p></li><li class="listitem"><p>
Podobny błąd występuje w kodzie systemu plików hsfs(7FS) (znanym jako ISO9660),
hsfs może nie obsługiwać partycji/dysków większych niż 4GB, wszystkie dane są
odczytywane z bloku modulo 4GB
(<a class="ulink" href="http://groups.yahoo.com/group/solarisonintel/message/22592" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22592</a>).
Problem może być rozwiązany przy pomocy łatki 109764-04 (sparc) / 109765-04 (x86).
</p></li></ul></div></li></ul></div></div><div class="sect2" title="8.3.2. HP-UX"><div class="titlepage"><div><div><h3 class="title"><a name="hp-ux"></a>8.3.2. HP-UX</h3></div></div></div><p>
Joe Page umieścił na swojej stronie domowej
<a class="ulink" href="http://users.rcn.com/joepage/mplayer_on_hpux11.htm" target="_top">dokument
HOWTO</a> stworzony przez Martina Gansser'a dotyczący <span class="application">MPlayera</span>
na HP-UX. Korzystając z zawartych tam intrukcji program powinien się skompilować bez
najmniejszych problemów. Poniższe informacje są zaczerpnięte z tego opracowania.
</p><p>
Do budowy będziesz potrzebował GCC 3.4.0, GNU make 3.80, i SDL 1.2.7 lub ich
nowszych wersji. Kompilator HP cc nie wyprodukuje działającego programu,
a wcześniejsze wersje GCC są pełne błędów.
Aby moć skorzystać z OpenGL, musisz zainstalować biblioteki Mesa, wtedy
sterowniki wyjścia video gl i gl2 powinny działać. Ich wydajność może być
tragiczna, jednak zależne jest to od mocy obliczeniowej procesora. Dobrym
zamiennikiem, raczej kiepskiego, systemu dźwiękowego HP-UX jest GNU esound.
</p><p>
Stwórz urządzenie DVD, przeskanuj magistralę SCSI komendą:
</p><pre class="screen">
# ioscan -fn

Class          I            H/W   Path          Driver    S/W State    H/W Type        Description
...
ext_bus 1    8/16/5      c720  CLAIMED INTERFACE  Built-in SCSI
target  3    8/16/5.2    tgt   CLAIMED DEVICE
disk    4    8/16/5.<span class="bold"><strong>2</strong></span>.<span class="bold"><strong>0</strong></span>  sdisk CLAIMED DEVICE     <span class="bold"><strong>PIONEER DVD-ROM DVD-305</strong></span>
                         /dev/dsk/c1t2d0 <span class="bold"><strong>/dev/rdsk/c1t2d0</strong></span>
target  4    8/16/5.7    tgt   CLAIMED DEVICE
ctl     <span class="bold"><strong>1</strong></span>    8/16/5.7.0  sctl  CLAIMED DEVICE     Initiator
                         /dev/rscsi/c1t7d0 /dev/rscsi/c1t7l0 /dev/scsi/c1t7l0
...
</pre><p>
Z rezultatów działania komendy możemy odczytać, że na adresie 2 SCSI znajduje
się Pioneer DVD-ROM. Instancja karty dla ścieżki sprzętowej 8/16 to 1.
</p><p>
Stwórz dowiązanie surowego urządzenia do urządzenia DVD.
</p><pre class="screen">
# ln -s /dev/rdsk/c<em class="replaceable"><code>&lt;instancja magistrali SCSI&gt;</code></em>t<em class="replaceable"><code>&lt;ID docelowego SCSI&gt;</code></em>d<em class="replaceable"><code>&lt;LUN&gt;</code></em> /dev/<em class="replaceable"><code>&lt;urządzenie&gt;</code></em>
</pre><p>
Przykład:
</p><pre class="screen">
# ln -s /dev/rdsk/c1t2d0 /dev/dvd
</pre><p>
Poniżej znajdują się rozwiązania kilku najczęstszych problemów:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Wysypanie się programu przy uruchamianiu z komunikatem błędu:
</p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: finite (code) from /usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.00/3.2/../../../libGL.sl
</pre><p>
</p><p>
Oznacza to, że funkcja <code class="systemitem">.finite().</code> jest niedostępna
w standardowej bibliotece math HP-UX.
Zamiast niej dostępna jest <code class="systemitem">.isfinite().</code>.
Rozwiązanie: Skorzystaj z najnowszego pliku składowego Mesa.
</p></li><li class="listitem"><p>
Wysypanie się programu przy odtwarzaniu z komunikatem:
</p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: sem_init (code) from /usr/local/lib/libSDL-1.2.sl.0
</pre><p>
</p><p>
Rozwiązanie: Skorzystaj z opcji extralibdir skryptu configure
<tt class="option">--with-extralibdir="/usr/lib -lrt"</tt>
</p></li><li class="listitem"><p>
MPlayer powoduje błąd naruszenia ochrony pamięci (segfault) z komunikatem:
</p><pre class="screen">
Pid 10166 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space, or stack size exceeded maxssiz.
Segmentation fault
</pre><p>
</p><p>
Rozwiazanie:
Jądro HP-UX ma domyślnie zdefiniowany rozmiar stosu przeznaczonego na każdy
proces i jest to 8MB(?).(11.0 i nowsze łatki 10.20 pozwalają Ci zwiększyć
parametr <code class="systemitem">maxssiz</code> do 350MB dla 32-bitowych programów).
Musisz rozszerzyć <code class="systemitem">maxssiz</code> i przekompilować jądro
(i uruchomić ponownie komputer). Możesz wykorzystać do tego celu SAM. (Kiedy
w nim będziesz, sprawdź wartość <code class="systemitem">maxdsiz</code>. Określa ona
maksymalny rozmiar danych, jaką program może użyć. To czy domyślne 64MB wystarczy
czy nie, zależy wyłącznie od wymagań Twoich aplikacji.)
</p></li></ul></div></div><div class="sect2" title="8.3.3. AIX"><div class="titlepage"><div><div><h3 class="title"><a name="aix"></a>8.3.3. AIX</h3></div></div></div><p>
<span class="application">MPlayer</span> kompiluje się z powodzenie na AIX 5.1,
5.2 i 5.3, korzystając z GCC 3.3 lub wyższego. Budowanie
<span class="application">MPlayer</span> na AIX 4.3.3 i niższych nie
było sprawdzane. Zaleca się, abyś budowal <span class="application">MPlayera</span>
używając GCC 3.4 lub wyższego lub jeżeli kompilujesz na POWER5 - GCC 4.0.
</p><p>
Upenij się, że używasz GNU make (<tt class="filename">/opt/freeware/bin/gmake</tt>), aby
kompilować <span class="application">MPlayera</span>, jako że możesz napotkać na problemy
przy korzystaniu z <tt class="filename">/usr/ccs/bin/make</tt>.
</p><p>
Wykrywanie CPU jest ciągle dopracowywane.
Poniższe architektury zostały przetestowane:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>604e</p></li><li class="listitem"><p>POWER3</p></li><li class="listitem"><p>POWER4</p></li></ul></div><p>
Poniższe architektury nie były testowane, ale i tak powinny działać:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POWER</p></li><li class="listitem"><p>POWER2</p></li><li class="listitem"><p>POWER5</p></li></ul></div><p>
Dźwięk przez Ultimedia Services nie jest obsługiwany, jako że ta technologia
została porzucona w AIX 5.1; dlatego też, jedynym wyjściem jest korzystanie
ze sterowników AIX Open Sound System (OSS) tworzonych przez 4Front Technologies,
znajdziesz je na
<a class="ulink" href="http://www.opensound.com/aix.html" target="_top">http://www.opensound.com/aix.html
</a>.
4Front Technologies udostępnia swoje sterowniki OSS za darmo do niekomercyjnego
zastosowania; jednakże, nie ma aktualnie sterowników wyjścia audio dla AIX 5.2 lub 5.3.
Oznacza to, że <span class="bold"><strong>AIX 5.2 i 5.3 nie potrafią aktualnie używać
	wyjścia audio MPlayera.</strong></span>
</p><p>Rozwiązania częstych problemów:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
			Jeżeli otrzymujesz od <tt class="filename">configure</tt> taki komunikat błędu:
			</p><pre class="screen">
				$ ./configure
				...
				Checking for iconv program ... no
				No working iconv program found, use
				--charset=US-ASCII to continue anyway.
				Messages in the GTK-2 interface will be broken then.
				</pre><p>
				To dzieje się tak dlatego, że AIX używa nie standardowych
				zestawów nazw znaków; dlatego też, konwersja wyjścia MPlayera
				do innego zestawu znaków (kodowania) nie jest aktualnie obsługiwana.
				Rozwiązaniem jest użycie:
			</p><pre class="screen">
				$ ./configure --charset=noconv
				</pre><p>
			</p></li></ul></div></div><div class="sect2" title="8.3.4. QNX"><div class="titlepage"><div><div><h3 class="title"><a name="qnx"></a>8.3.4. QNX</h3></div></div></div><p>
Będziesz musiał ściągnąć bibliotekę SDL dla QNX i zainstalować ją. Wtedy
uruchom <span class="application">MPlayera</span> z opcją
<tt class="option">-vo sdl:driver=photon</tt>
i <tt class="option">-ao sdl:nto</tt>, powinno działać szybko.
</p><p>
Wyjście <tt class="option">-vo x11</tt> będzie nawet wolniejsze niż na Linuksie,
ponieważ QNX ma tylko <span class="emphasis"><em>emulację</em></span> X'ów, która jest bardzo
wolna.
</p></div></div><div class="sect1" title="8.4. Windows"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="windows"></a>8.4. Windows</h2></div></div></div><p>Tak, <span class="application">MPlayer</span> działa na Windowsie pod
  <a class="ulink" href="http://www.cygwin.com/" target="_top"><span class="application">Cygwinem</span></a> i
  <a class="ulink" href="http://www.mingw.org/" target="_top"><span class="application">MinGW</span></a>.
  Nie ma jeszcze oficjalnego interfejsu GUI, ale wersja dla wiersza poleceń jest już w pełni
  funkcjonalna. Powinieneś sprawdzić listę
  <a class="ulink" href="http://mplayerhq.hu/mailman/listinfo/mplayer-cygwin/" target="_top">MPlayer-cygwin</a>,
  aby uzyskać pomoc albo otrzymać najnowsze informacje.
  Oficjalne paczki z binariami dla Windowsa znajdziesz na
  <a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">stronie pobierania</a>.
  Pakiety zawierające instalatory i proste nakładki GUI dostępne są z zewnętrznych
  źródeł, informacje o nich zebraliśmy w sekcji poświęconej Windowsowi na
  <a class="ulink" href="http://www.mplayerhq.hu/design7/projects.html#windows" target="_top">stronie projektów</a>.
</p><p>Jeżeli chcesz uniknąć korzystania z wiersza poleceń, prostym sposobem
      na jego ominięcie jest umieszczenie skrótu na pulpicie, który będzie
      zawierał podobny wpis w części odpowiedzialnej za wykonanie
      komendy:
      </p><pre class="screen"><em class="replaceable"><code>c:\ścieżka\do\</code></em>mplayer.exe %1</pre><p>
      Spowoduje to, że <span class="application">MPlayer</span> będzie odtwarzał
      film, który zostanie przeciągnięty na jego skrót. Dodaj opcję
      <tt class="option">-fs</tt>, aby korzystać z trybu pełnoekranowego.
</p><p>Najlepsze wyniki są osiągane ze sterownikami wyjściowymi video DirectX
  (<tt class="option">-vo directx</tt>). Możesz skorzystać również z OpenGL lub SDL, jednak
  wydajność OpenGL w znacznym stopniu zależy od systemu, a SDL może powodować powstanie
  zakłóceń w obrazie albo wywołać błąd, i zakończyć działanie programu.
  Jeżeli występują zakłócenia obrazu, spróbuj
  wyłączyć sprzętową akcelerację przez opcję <tt class="option">-vo directx:noaccel</tt>. Ściągnij
  <a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/contrib/dx7headers.tgz" target="_top">pliki
  nagłówkowe DirectX 7</a>, żeby skompilować sterownik do wyjścia video
  DirectX. Co więcej, musisz mieć zainstalowany DirectX 7 lub nowszy,
  aby to wyjście zadziałało.</p><p><a class="link" href="#vidix" title="7.2.13. VIDIX">VIDIX</a> działa teraz również pod Windowsem jako
  <tt class="option">-vo winvidix</tt>, chociaż jego obsługa jest eksperymentalna i wymaga
  trochę ręcznego przygotowania. Pobierz
  <a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/dhahelperwin/dhahelper.sys" target="_top">dhahelper.sys</a>
  lub
  <a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/dhahelperwin/withmtrr/dhahelper.sys" target="_top">dhahelper.sys
  (z obsługą MTRR)</a>
  i skopiuj go do
  <tt class="filename">libdha/dhahelperwin</tt> w drzewie źródłowym
  <span class="application">MPlayera</span>. Uruchom konsolę, następnie przejdź do tego katalogu i wykonaj

  </p><pre class="screen">gcc -o dhasetup.exe dhasetup.c</pre><p>

  i

  </p><pre class="screen">dhasetup.exe install</pre><p>

  jako Administrator. Będziesz musiał ponownie uruchomić komputer. Teraz, skopiuj wszystkie pliki
  z rozszerzeniem <code class="systemitem">.so</code> z katalogu
  <tt class="filename">vidix/drivers</tt> do
  <tt class="filename">mplayer/vidix</tt>
  względem położnia pliku <tt class="filename">mplayer.exe</tt>.</p><p>Żeby osiągnąć najlepsze wyniki <span class="application">MPlayer</span> powinien
  korzystać z przestrzeni kolorów, którą Twoja karta wspomaga sprzętowo. Niestety
  wiele sterowników graficznych Windowsa źle informuje o obsługiwanych przez kartę
  przestrzeniach. Aby sprawdzić które są źle obsługiwane, wykonaj poniższą komendę:

  </p><pre class="screen">mplayer -benchmark -nosound -frames 100 -vf format=<em class="replaceable"><code>przestrzeń</code></em> <em class="replaceable"><code>film</code></em></pre><p>

  gdzie <em class="replaceable"><code>przestrzeń</code></em> może być jakąkolwiek
  wartością spośród tych uzyskanych przez opcję <tt class="option">-vf format=fmt=help</tt>.
  Jeśli któraś z nich działa szczególnie źle, opcja
  <tt class="option">-vf noformat=<em class="replaceable"><code>przestrzeń</code></em></tt>
  zapobiegnie jej używaniu. Możesz to na stałe dodać do Twojego pliku konfiguracyjnego.</p><p>Dostępne są specjalne zbiory z kodekami przeznaczone dla systemu Windows, znajdziesz je na
  <a class="ulink" href="http://mplayerhq.hu/design7/codecs.html" target="_top">stronie kodeków</a>.
  Pozwolą Ci one na odtwarzanie formatów, które nie są jeszcze bezpośrednio obsługiwane w
  <span class="application">MPlayerze</span>. Umieść je, gdzieś w swojej ścieżce (w katalogu podanym w
  zmiennej PATH - przyp. tłumacza) lub przekaż opcję
  <tt class="option">--codecsdir=<em class="replaceable"><code>c:/ścieżka/do/Twoich/kodeków</code></em></tt>
  (lub, tylko w środowkisku Cygwin,
  <tt class="option">--codecsdir=<em class="replaceable"><code>/ścieżka/do/Twoich/kodeków</code></em></tt>)
  do skryptu <tt class="filename">configure</tt>.
  Mieliśmy doniesienia, że biblioteki Real, muszą być zapisywalne dla użytkownika, który
  uruchamia <span class="application">MPlayera</span>, ale tylko na niektórych systemach (NT4).
  Spróbuj nadać im atrybut zapisywalności.</p><p>Możesz odtwarzać VCD, odtwarzając pliki <tt class="filename">.DAT</tt> lub <tt class="filename">.MPG</tt>,
  które Windows pokazuje na VCD. To działa mniej więcej tak (dopasuj literę dysku do Twojego
  CD-ROMu):</p><pre class="screen">mplayer <em class="replaceable"><code>d:/mpegav/avseq01.dat</code></em></pre><p>DVD również działa, podaj literę Twojego DVD-ROMu przez
  opcję <tt class="option">-dvd-device</tt>:</p><pre class="screen">mplayer dvd://<em class="replaceable"><code>&lt;tytuł&gt;</code></em> -dvd-device <em class="replaceable"><code>d</code></em>:</pre><p>Konsola <span class="application">Cygwin</span>/<span class="application">MinGW</span>
  jest raczej wolna. Zgłoszono, że przekierowywanie wyjścia albo używanie
  opcji <tt class="option">-quiet</tt> poprawia wydajność na
  niektórych systemach. Bezpośrednie renderowanie (<tt class="option">-dr</tt>) również
  może pomóc. Jeżeli odtwarzanie jest nierówne, spróbuj użyć
  <tt class="option">-autosync 100</tt>. Jeżeli którakolwiek z tych opcji Ci pomogła,
  może będziesz chciał umieścić ją w swoim pliku konfiguracyjnym.</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>Na Windowsie automatyczne wykrywanie typu procesora
	wyłącza rozszerzenie SSE z powodu okazjonalnych i ciężkich
	do wyśledzenia błędów powodujących zakończenie aplikacji. Jeżeli
	nadal chesz mieć obsługę SSE pod Windowsem, będziesz musiał
	skompilować program bez wykrywania typu CPU w trakcie działania.
</p><p>Jeżeli masz Pentium 4 i program wysypuje Ci się podczas używania
	kodeków RealPlayer'a, prawdopodobnie będziesz musiał wyłączyć
	obsługę hyperthreading'u.
</p></div><div class="sect2" title="8.4.1. Cygwin"><div class="titlepage"><div><div><h3 class="title"><a name="cygwin"></a>8.4.1. <span class="application">Cygwin</span></h3></div></div></div><p>Aby skompilować <span class="application">MPlayera</span> wymagana jest wersja
    <span class="application">Cygwina</span> 1.5.0 lub późniejsza.</p><p>Pliki nagłówkowe DirectX muszą być rozpakowane do
  <tt class="filename">/usr/include/</tt> lub
  <tt class="filename">/usr/local/include/</tt>.</p><p>Instrukcje i pliki potrzebne do kompilacji SDLa dla <span class="application">Cygwin</span>
  są dostępne na
  <a class="ulink" href="http://www.libsdl.org/extras/win32/cygwin/" target="_top">stronie libsdl</a>.</p></div><div class="sect2" title="8.4.2. MinGW"><div class="titlepage"><div><div><h3 class="title"><a name="mingw"></a>8.4.2. <span class="application">MinGW</span></h3></div></div></div><p>Zainstalowanie <span class="application">MinGW</span>, który umożliwiłby
  kompilację <span class="application">MPlayera</span> było zawiłe,
  ale teraz składa się tylko z trzech prostych kroków i niedługo powinno
  działać "prosto z pudełka". Zainstaluj <span class="application">MinGW</span>
  3.0.0 lub nowszy. Zainstaluj MSYS 1.0.9 lub nowszy i wskaż systemowi poinstalacyjnemu
  MSYSa, że <span class="application">MinGW</span> jest zainstalowane.</p><p>Rozpakuj pliki nagłówkowe DirectX do <tt class="filename">/mingw/include/</tt>.</p><p>Do obsługi skompresowanych nagłówków MOV wymagana jest biblioteka
  <a class="ulink" href="http://www.gzip.org/zlib/" target="_top">zlib</a>, która nie jest
  domyślnie dostępna w <span class="application">MinGW</span>.
  Skonfiguruj ją z opcją <tt class="option">--prefix=/mingw</tt> i zainstaluj
  przed kompilacją <span class="application">MPlayera</span>.</p><p>Pełną instrukcję jak zbudować <span class="application">MPlayera</span>
  i wszystkie potrzebne biblioteki znajdziesz w
  <a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/contrib/MPlayer-MinGW-Howto.txt" target="_top">MPlayer MinGW HOWTO</a>.</p></div></div><div class="sect1" title="8.5. Mac OS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="macos"></a>8.5. Mac OS</h2></div></div></div><p>
"Surowe" źródła <span class="application">MPlayera</span> obsługują
tylko Mac OS X w wersjach 10.2 i wyższych. Możesz spróbować umożliwić
obsługę starszych wersji Mac OS oraz przysłać nam łaty!
<span class="application">MPlayer</span> nie działa na Mac OS w wersjach niższych niż
10, jednak powinien skompilować się bez problemu na systemie Mac OS X 10.2 i
wyższym. Zalecanym kompilatorem jest GCC 3.x w wersji Apple.
Możesz otrzymać podstawowe środowisko do kompilacji, instalując
<a class="ulink" href="http://developer.apple.com/tools/download/" target="_top">Xcode</a> od Apple.
Jeżeli masz Mac OS X 10.3.9 lub późniejszy i QuickTime 7, możesz
skorzystać ze sterownika wyjścia video <tt class="option">corevideo</tt>.
</p><p>
	Niestety, to podstawowe środowisko ni epozwoli ci na skorzystanie ze
	wszystkich fajnych możliwości <span class="application">MPlayera</span>.
	Przykładowo, żeby uzyskać wkompilowaną obsługę OSD, będziesz
	potrzebował bibliotek <code class="systemitem">fontconfig</code>
	i <code class="systemitem">freetype</code>
	zainstalowanych na swojej maszynie.
	W przeciwieństwie do innych Uniksów, takich jak większość odmian
	Linuksa i BSD, OS X nie ma systemu pakietów dostarczanego razem
	z systemem.
	</p><p>
	Można wybierać spośród co najmniej dwóch systemów pakietów:
	<a class="ulink" href="http://fink.sourceforge.net/" target="_top">Fink</a> i
	<a class="ulink" href="http://darwinports.opendarwin.org/" target="_top">DarwinPorts</a>.\
	Oba dostarczają takie same usługi (np. dużo pakietów do wyboru,
	rozwiązywanie zależności, możliwość łatwego dodania/aktualizacji/usunięcia
	pakietów itp.).
	Fink oferuje zarówno binarne pakiety, jak i możliwość zbudowania wszystkiego
	ze źródeł. Natomiast DarwinPorts pozwala tylko na budowanie ze źródeł.
	Autorzy tego przewodnika wybrali DarwinPorts z powodu tej prostej przyczyny,
	że jego podstawowa wersja była lżejsza.
	Podane przykłady będą oparte na DarwinPorts.
	</p><p>
	Przykładowo, żeby skomilować <span class="application">MPlayera</span> z obsługą
	OSD:
	</p><pre class="screen">sudo port install pkgconfig</pre><p>
	Zainstaluje to <span class="application">pkg-config</span>, który jest systemem
	do zarządzania flagami kompilacji/dowiązań bibliotek.
	<span class="application">MPlayerowy</span> skrypt
	<code class="systemitem">configure</code>używa go do prawidłowego
	wykrywania bibliotek.
	Następnie możesz zainstalować <span class="application">fontconfig</span>
	w podobny sposób:
	</p><pre class="screen">sudo port install fontconfig</pre><p>
	Następnie możesz uruchomić <span class="application">MPlayerowy</span> skrypt
	<code class="systemitem">configure</code> (zapisz zmienne systemowe
	<code class="systemitem">PKG_CONFIG_PATH</code>
	i <code class="systemitem">PATH</code>, żeby
	<code class="systemitem">configure</code> znalazł biblioteki zainstalowane
	przez DarwinPorts):
	</p><pre class="screen">PKG_CONFIG_PATH=/opt/local/lib/pkgconfig/ PATH=$PATH:/opt/local/bin/ ./configure</pre><p>
	</p><div class="sect2" title="8.5.1. MPlayer OS X GUI"><div class="titlepage"><div><div><h3 class="title"><a name="osx_gui"></a>8.5.1. MPlayer OS X GUI</h3></div></div></div><p>
Możesz pobrać natywne GUI dla <span class="application">MPlayera</span> razem
z prekompilowanymi binariami <span class="application">MPlayera</span> dla
Mac OS X ze strony projektu
<a class="ulink" href="http://mplayerosx.sf.net/" target="_top">MPlayerOSX</a>, ale uwaga:
projekt nie jest już aktywny.
</p><p>
Na szczęście, <span class="application">MPlayerOSX</span> został przejęty
przez członka załogi <span class="application">MPlayera</span>.
Wersje testowe są dostępne na stronie z
<a class="ulink" href="http://mplayerhq.hu/dload.html" target="_top">materiałami do
pobrania</a>, a oficjalne wydanie powinno pojawić się już
niedługo.
</p><p>
Aby zbudować <span class="application">MPlayerOSX</span> bezpośrednio
ze źródeł, potrzebujesz modułu <code class="systemitem">mplayerosx</code>,
<code class="systemitem">main</code> i kopii modułu CVS
<code class="systemitem">main</code> o nazwie
<code class="systemitem">main_noaltivec</code>.
<code class="systemitem">mplayerosx</code> to graficzna nakładka,
<code class="systemitem">main</code> to MPlayer, a
<code class="systemitem">main_noaltivec</code> to MPlayer zbudowany bez obsługi
AltiVec.

</p><p>
Aby pobrać moduł z repozytorium SVN wykonaj polecenia:
</p><pre class="screen">
	svn checkout svn://svn.mplayerhq.hu/mplayerosx/trunk/ mplayerosx
	svn checkout svn://svn.mplayerhq.hu/mplayer/trunk/ main
</pre><p>
</p><p>
W celu zbudowania <span class="application">MPlayerOSX</span> będziesz musiał
utowrzyć podobną strukturę katalogów:
</p><pre class="screen">
katalog_źródłowy_MPlayera
   |
   |---&gt;main           (źródła MPlayera z Subversion)
   |
   |---&gt;main_noaltivec (źródła MPlayera z Subversion skonfigurowane z opcją --disable-altivec)
   |
   |---&gt;mplayerosx     (źródła MPlayer OS X z Subversion)
</pre><p>

Najpierw musisz zbudować main i main_noaltivec.
</p><p>
Następnie ustaw globalną zmienną:

</p><pre class="screen">export MACOSX_DEPLOYMENT_TARGET=10.3</pre><p>
</p><p>
Potem skonfiguruj:
</p><p>
Jeżeli konfigurujesz dla maszyny G4 lub lepszej z obsługą AltiVec,
postępuj jak poniżej:
</p><pre class="screen">
./configure --with-termcaplib=ncurses.5 --disable-gl --disable-x11
</pre><p>

Jeżeli konfigurujesz dla maszyny z procesorem G3 bez AltiVec,
postępuj jak ponieżej:
</p><pre class="screen">
./configure --with-termcaplib=ncurses.5 --disable-gl --disable-x11
--disable-altivec
</pre><p>
Być może będziesz musiał wyedytować plik <tt class="filename">config.mak</tt>
i zmienić wartości <code class="systemitem">-mcpu</code>
<code class="systemitem">-mtune</code> z <code class="systemitem">-74XX</code> na
<code class="systemitem">-G3</code>.
</p><p>
Następnie wykonaj
</p><pre class="screen">
make
</pre><p>
przejdź do katalogu mplayerosx i wpisz

</p><pre class="screen">
make dist
</pre><p>
Zostanie utworzony skompresowany obraz <code class="systemitem">.dmg</code>
zawierający gotowy do uruchomienia program.
</p><p>
Możes również skorzystać z projektu <span class="application">Xcode</span> 2.1;
stary projekt dla <span class="application">Xcode</span> 1.x już nie działa.

</p></div></div></div><div class="chapter" title="Rozdział 9. Podstawy używania MEncodera"><div class="titlepage"><div><div><h2 class="title"><a name="mencoder"></a>Rozdział 9. Podstawy używania <span class="application">MEncodera</span></h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#menc-feat-selecting-codec">9.1. Wybieranie kodeka i formatu</a></span></dt><dt><span class="sect1"><a href="#menc-feat-selecting-input">9.2. Wybieranie źródłowego zbioru lub urządzenia</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg4">9.3. Kodowanie dwuprzebiegowe MPEG-4 ("DivX")</a></span></dt><dt><span class="sect1"><a href="#menc-feat-handheld-psp">9.4. Kodowanie do formatu video Sony PSP</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg">9.5. Kodowanie do formatu MPEG</a></span></dt><dt><span class="sect1"><a href="#menc-feat-rescale">9.6. Przeskalowywanie filmów</a></span></dt><dt><span class="sect1"><a href="#menc-feat-streamcopy">9.7. Kopiowanie strumieni</a></span></dt><dt><span class="sect1"><a href="#menc-feat-enc-images">9.8. Kodowanie z wielu wejściowych plików obrazkowych
  (JPEG, PNG, TGA itp.)</a></span></dt><dt><span class="sect1"><a href="#menc-feat-extractsub">9.9. Wydobywanie napisów z DVD do pliku VOBsub</a></span></dt><dt><span class="sect1"><a href="#aspect">9.10. Utrzymywanie proporcji obrazu (aspect ratio)</a></span></dt></dl></div><p>
Pełna lista dostępnych opcji <span class="application">MEncodera</span> oraz
przykłady znajdują się na stronie man. W pliku
<a class="ulink" href="../../tech/encoding-tips.txt" target="_top">encoding-tips</a>
znajduje się dużo przykładów i przewodników skompletowanych z wielu wątków
listy dyskusyjnej MPlayer-users.
W <a class="ulink" href="http://mplayerhq.hu/pipermail/mplayer-users/" target="_top">archiwum</a>
znajdziesz mnóstwo dyskusji o aspektach i problemach związanych z kodowaniem
przy pomocy <span class="application">MEncodera</span>.
</p><div class="sect1" title="9.1. Wybieranie kodeka i formatu"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-selecting-codec"></a>9.1. Wybieranie kodeka i formatu</h2></div></div></div><p>
Kodeki audio i video stosowane przy kodowaniu są wybierane odpowiednio
opcjami <tt class="option">-oac</tt> i <tt class="option">-ovc</tt>.
Napisz na przykład:
</p><pre class="screen">mencoder -ovc help</pre><p>
by uzyskać listę wszystkich kodeków video obsługiwanych przez
<span class="application">MEncodera</span> na Twoim komputerze.
Dostępne są następujące:
</p><p>
Kodeki audio:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Nazwa kodeka audio</th><th>Opis</th></tr></thead><tbody><tr><td>mp3lame</td><td>kodowanie na MP3 VBR, ABR lub przy użyciu LAME</td></tr><tr><td>lavc</td><td>używa jednego z <a class="link" href="#menc-feat-enc-libavcodec-audio-codecs" title="10.3.2. libavcodec's audio codecs">kodeków audio z <code class="systemitem">libavcodec</code></a></td></tr><tr><td>faac</td><td>koder audio FAAC AAC</td></tr><tr><td>toolame</td><td>koder MPEG Audio Layer 2</td></tr><tr><td>twolame</td><td>koder MPEG Audio Layer 2 encoder oparty na tooLAME</td></tr><tr><td>pcm</td><td>nieskompresowany dźwięk PCM</td></tr><tr><td>copy</td><td>nie przekodowywuj, tylko przekopiuj zakodowane ramki</td></tr></tbody></table></div><p>
</p><p>
Kodeki video:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Nazwa kodeka video</th><th>Opis</th></tr></thead><tbody><tr><td>lavc</td><td>używa jednego z <a class="link" href="#menc-feat-enc-libavcodec-video-codecs" title="10.3.1. libavcodec's video codecs">kodeków video z <code class="systemitem">libavcodec</code></a></td></tr><tr><td>xvid</td><td>Xvid, kodek MPEG-4 Advanced Simple Profile (ASP)</td></tr><tr><td>x264</td><td>x264, MPEG-4 Advanced Video Coding (AVC), zwany kodekiem H.264</td></tr><tr><td>nuv</td><td>nuppel video, używany przez niektóre aplikacje czasu rzeczywistego</td></tr><tr><td>raw</td><td>nieskompresowane klatki video</td></tr><tr><td>copy</td><td>nie przekodowywuj, tylko przekopiuj zakodowane ramki</td></tr><tr><td>frameno</td><td>używany do kodowania trójprzebiegowego (nie zalecane)</td></tr></tbody></table></div><p>
</p><p>
Format wyjściowy wybiera się opcją <tt class="option">-of</tt>.
Napisz:
</p><pre class="screen">mencoder -of help</pre><p>
by otrzymać listę wszystkich formatów obsługiwanych przez
<span class="application">MEncodera</span> na Twoim komputerze.
</p><p>
Formaty przechowywania:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Nazwa formatu</th><th>Opis</th></tr></thead><tbody><tr><td>lavf</td><td>jeden z formatów obsługiwanych przez
  <code class="systemitem">libavformat</code></td></tr><tr><td>avi</td><td>Audio-Video Interleaved (Przeplecione Audio-Video)</td></tr><tr><td>mpeg</td><td>MPEG-1 i MPEG-2 PS</td></tr><tr><td>rawvideo</td><td>surowy strumień video (bez muxowania - tylko jeden strumień video)</td></tr><tr><td>rawaudio</td><td>surowy strumień audio (bez muxowania - tylko jeden strumień audio)</td></tr></tbody></table></div><p>
Format AVI jest podstawowym formatem <span class="application">MEncodera</span>,
co oznacza że jest najlepiej obsługiwany i że
<span class="application">MEncoder</span> był projektowany z myślą o nim.
Jak napisano wcześniej, można używać innych formatów, ale możesz napotkać
przy tym problemy.
</p><p>
Formaty z <code class="systemitem">libavformat</code>:
</p><p>
Jeśli chcesz żeby <code class="systemitem">libavformat</code>
dokonywał muksowania zbioru wyjściowego (przy użyciu opcji
<tt class="option">-of lavf</tt>), stosowny format zostanie ustalony na podstawie
rozszerzenia pliku wyjściowego.
Możesz wymusić konkretny format opcją <tt class="option">format</tt> biblioteki
<code class="systemitem">libavformat</code>.

</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>nazwa formatu <code class="systemitem">libavformat</code></th><th>Opis</th></tr></thead><tbody><tr><td>mpg</td><td>MPEG-1 i MPEG-2 PS</td></tr><tr><td>asf</td><td>Advanced Streaming Format (Zaawansowany format strumieniowy)</td></tr><tr><td>avi</td><td>Audio-Video Interleaved</td></tr><tr><td>wav</td><td>Waveform Audio</td></tr><tr><td>swf</td><td>Macromedia Flash</td></tr><tr><td>flv</td><td>Macromedia Flash video</td></tr><tr><td>rm</td><td>RealMedia</td></tr><tr><td>au</td><td>SUN AU</td></tr><tr><td>nut</td><td>otwarty format NUT (eksperymentalny i jeszcze bez specyfikacji)</td></tr><tr><td>mov</td><td>QuickTime</td></tr><tr><td>mp4</td><td>MPEG-4 format</td></tr><tr><td>dv</td><td>format Sony Digital Video</td></tr></tbody></table></div><p>
Jak widzisz, <code class="systemitem">libavformat</code> pozwala
<span class="application">MEncoderowi</span> tworzyć sporą ilość różnych formatów.
Niestety, ponieważ <span class="application">MEncoder</span> nie był tworzony
z myślą o innych formatach niż AVI, powinieneś mieć paranoidalne podejście do
wynikowych plików.
Dokładnie sprawdź czy jest prawidłowa synchronizacja audio/video i czy plik
może zostać prawidłowo odtworzony przez odtwarzacze inne niż
<span class="application">MPlayer</span>.
</p><div class="example"><a name="encode_to_macromedia_flash_format"></a><p class="title"><b>Przykład 9.1. kodowanie do formatu Macromedia Flash</b></p><div class="example-contents"><p>
Tworzenie zbioru Macromedia Flash video, nadającego się do odtwarzania
w przeglądarce sieciowej z wtyczką Macromedia Flash:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejście.avi</code></em> -o <em class="replaceable"><code>wyjście.flv</code></em> -of lavf \
    -oac mp3lame -lameopts abr:br=56 -srate 22050 -ovc lavc \
    -lavcopts vcodec=flv:vbitrate=500:mbd=2:mv0:trell:v4mv:cbp:last_pred=3
</pre><p>
</p></div></div><br class="example-break"></div><div class="sect1" title="9.2. Wybieranie źródłowego zbioru lub urządzenia"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-selecting-input"></a>9.2. Wybieranie źródłowego zbioru lub urządzenia</h2></div></div></div><p>
<span class="application">MEncoder</span> może kodoważ ze zbiorów lub bezpośrednio
z dysku DVD lub VCD.
Po prostu podaj nazwę zbioru w wierszu poleceń żeby kodować ze zbioru, albo
<tt class="option">dvd://</tt><em class="replaceable"><code>numertytułu</code></em> lub
<tt class="option">vcd://</tt><em class="replaceable"><code>numerścieżki</code></em> by nagrywać
z tytułu DVD albo ścieżki VCD.
Jeśli już skopiowałeś DVD na twardy dysk (możesz na przykład użyć narzędzia
takiego jak <span class="application">dvdbackup</span>, dostępnego na większości
systemów), wciąż powinieneś używać składni <tt class="option">dvd://</tt>, razem
z opcją <tt class="option">-dvd-device</tt> po której następuje ścieżka do
skopiowanego DVD.

Opcji <tt class="option">-dvd-device</tt> i <tt class="option">-cdrom-device</tt> możesz
też używać by podać własne ścieżki do węzłów urządzeń, jeśli domyślne
<tt class="filename">/dev/dvd</tt> i <tt class="filename">/dev/cdrom</tt> nie są
właściwe w Twoim systemie.
</p><p>
Przy kodowaniu z DVD, często pożądanym jest wybranie do kodowania rozdziału
lub zasięgu rozdziałów.
Możesz w tym celu użyć opcji <tt class="option">-chapters</tt>, na przykład
<tt class="option">-chapters</tt> <em class="replaceable"><code>1-4</code></em> zakoduje z DVD
tylko rozdziały od 1 do 4.
Jest to zwłaszcza użyteczne gdy robisz kodowanie do wielkości 1400 MB,
przeznaczone na 2 CD, ponieważ możesz się upewnić że przerwa nastąpi
dokładnie na granicy rozdziałów a nie w środku sceny.
</p><p>
Jeśli masz obsługiwaną kartę przechwytywania TV, możesz też kodować z jej
urządzenia wejściowego.
Użyj opcji <tt class="option">tv://</tt><em class="replaceable"><code>numerkanału</code></em> jako
nazwy pliku, a opcją <tt class="option">-tv</tt> skonfiguruj rozmaite ustawienia
przechwytywania.
Podobnie działa wejście z DVB.
</p></div><div class="sect1" title='9.3. Kodowanie dwuprzebiegowe MPEG-4 ("DivX")'><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-mpeg4"></a>9.3. Kodowanie dwuprzebiegowe MPEG-4 ("DivX")</h2></div></div></div><p>
Nazwa związana jest z faktem, iż przy użyciu tej metody plik kodowany jest
<span class="emphasis"><em>dwa razy</em></span>.
Pierwsze kodowanie (dubbed pass) tworzy pliki tymczasowe
(<tt class="filename">*.log</tt>) o rozmiarze kilku megabajtów, nie kasuj ich od
razu (możesz natomiast skasować plik AVI a jeszcze lepiej nie tworzyć go
w ogóle poprzez zapisywanie w <tt class="filename">/dev/null</tt>).
W drugim przebiegu przy pomocy danych o bitrate z plików tymczasowych tworzony
jest plik wyjściowy drugiego przebiegu. Plik końcowy będzie miał o wiele lepszą
jakość w porównaniu ze standardowym 1-przebiegowym kodowaniem.
Jeżeli pierwszy raz o tym słyszysz, powinieneś zajrzeć do któregoś z wielu
przewodników dostępnych w sieci.
</p><div class="example"><a name="copy_audio_track"></a><p class="title"><b>Przykład 9.2. kopiowanie ścieżki dźwiękowej</b></p><div class="example-contents"><p>
Dwuprzebiegowe kodowanie DVD do MPEG-4 ("DivX") AVI z kopiowaniem ścieżki dźwiękowej.
</p><pre class="screen">
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o /dev/null
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -oac copy -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div></div><br class="example-break"><div class="example"><a name="encode_audio_track"></a><p class="title"><b>Przykład 9.3. kodowanie ścieżki dźwiękowej</b></p><div class="example-contents"><p>
Dwuprzebiegowe kodowanie DVD do MPEG-4 ("DivX") AVI z kodowaniem ścieżki dźwiękowej do MP3.
Uważaj stosując tę metodę, ponieważ w niektórych przypadkach może zaowocować
desynchronizacją audio/video.
</p><pre class="screen">
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 \
    -oac mp3lame -lameopts vbr=3 -o /dev/null
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -oac mp3lame -lameopts vbr=3 -o <em class="replaceable"><code>output.avi</code></em>
</pre><p>
</p></div></div><br class="example-break"></div><div class="sect1" title="9.4. Kodowanie do formatu video Sony PSP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-handheld-psp"></a>9.4. Kodowanie do formatu video Sony PSP</h2></div></div></div><p>
<span class="application">MEncoder</span> obsługuje kodowanie do formatu video Sony
PSP, ale, w zależności od wersji oprogramowania PSP, wymaga różnych
ograniczeń.
Powinieneś byś bezpieczny, jeśli respektujesz poniższe ograniczenia:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Bitrate</strong></span>: nie powinno przekraczać 1500kbps,
  jednakże poprzednie wersje obsługiwały praktycznie dowolny bitrate jeśli
  tylko nagłówek twierdził że nie jest za wysokie.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Wymiary</strong></span>: wysokość i szerokość filmu PSP
  powinny być wielokrotnościami 16, a iloczyn szerokość * wysokość musi być
  &lt;= 64000.
  W niektórych okolicznościach może być możliwe że PSP odtworzy wyższe
  rozdzielczości.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Audio</strong></span>: powinno mieć częstotliwość
  próbkowania 24kHz dla MPEG-4 i 48kHz dla H.264.
</p></li></ul></div><p>
</p><div class="example"><a name="encode_for_psp"></a><p class="title"><b>Przykład 9.4. kodowanie dla PSP</b></p><div class="example-contents"><p>
</p><pre class="screen">
mencoder -ofps 30000/1001 -af lavcresample=24000 -vf harddup -of lavf \
    -oac lavc -ovc lavc -lavcopts aglobal=1:vglobal=1:vcodec=mpeg4:acodec=aac \
    -lavfopts format=psp:i_certify_that_my_video_stream_does_not_use_b_frames \
    <em class="replaceable"><code>wejściowe.video</code></em> -o <em class="replaceable"><code>wyjście.psp</code></em>
</pre><p>
Możesz też ustawić tytuł filmu dzięki
<tt class="option">-info name=<em class="replaceable"><code>TytułFilmu</code></em></tt>.
</p></div></div><br class="example-break"></div><div class="sect1" title="9.5. Kodowanie do formatu MPEG"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-mpeg"></a>9.5. Kodowanie do formatu MPEG</h2></div></div></div><p>
<span class="application">MEncoder</span> może tworzyć pliki formatu MPEG (MPEG-PS).
Zazwyczaj, jeśli używasz filmu MPEG-1 albo MPEG-2, to jest tak ponieważ
kodujesz na ograniczony format, taki jak SVCD, VCD albo DVD.
Specyficzne ograniczenia tych formatów są wyjaśnione w
<a class="link" href="#menc-feat-vcd-dvd" title="10.8. Using MEncoder to create VCD/SVCD/DVD-compliant files">przewodniku tworzenia VCD i DVD</a>.
</p><p>
Aby zmienić wyjściowy format plików <span class="application">MEncodera</span>, użyj opcji <tt class="option">-of mpeg</tt>.
</p><div class="informalexample"><p>
Przykład:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejscie.avi</code></em> -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video \
    -oac copy <em class="replaceable"><code>inne_opcje</code></em> -o <em class="replaceable"><code>wyjście.mpg</code></em>
</pre><p>
Tworzenie pliku MPEG-1, który można odtworzyć na systemach z minimalną obsługą
multimedialną, taką jak domyślne instalacje Windows:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejscie.avi</code></em> -of mpeg -mpegopts format=mpeg1:tsaf:muxrate=2000 \
    -o <em class="replaceable"><code>wyjście.mpg</code></em> -oac lavc -lavcopts acodec=mp2:abitrate=224 -ovc lavc \
    -lavcopts vcodec=mpeg1video:vbitrate=1152:keyint=15:mbd=2:aspect=4/3
</pre><p>
To samo, ale używając muxera MPEG z <code class="systemitem">libavformat</code>:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejście.avi</code></em> -o <em class="replaceable"><code>VCD.mpg</code></em> -ofps 25 -vf scale=352:288,harddup -of lavf \
    -lavfopts format=mpg:i_certify_that_my_video_stream_does_not_use_b_frames \
    -oac lavc -lavcopts acodec=mp2:abitrate=224 -ovc lavc \
    -lavcopts vcodec=mpeg1video:vrc_buf_size=327:keyint=15:vrc_maxrate=1152:vbitrate=1152:vmax_b_frames=0
</pre><p>
</p></div><div class="note" title="Wskazówka:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Wskazówka:</h3><p>
Jeżeli z jakiegoś powodu nie satysfakcjonuje Cię jakość video
z drugiego przebiegu, możesz ponownie uruchomić kodowanie
swojego video z inną docelową szybkością transmisji (bitrate),
zakładając, że zapisałeś statystyki pliku z poprzedniego przebiegu.
Jest to możliwe, ponieważ głównym celem pliku ze statystykami jest
zapamiętanie złożoności każdej z ramek, co nie zależy zbyt mocno
od szybkości transmisji. Weź jednak pod uwagę, że uzyskasz najlepsze
wyniki, jeżeli wszystkie przebiegi będą uruchomione z nieróżniącymi
się za bardzo docelowymi szybkościami transmisji.
</p></div></div><div class="sect1" title="9.6. Przeskalowywanie filmów"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-rescale"></a>9.6. Przeskalowywanie filmów</h2></div></div></div><p>
Często zachodzi potrzeba zmiany wielkości obrazu. Powodów tego może być wiele:
zmniejszenie rozmiaru pliku, przepustowość sieci, itd. Większość ludzi stosuje
przeskalowywanie nawet przy konwertowaniu płyt DVD, SVCD do DivX AVI. Jeżeli
chcesz przeskalowywać, przeczytaj sekcję o <a class="link" href="#aspect" title="9.10. Utrzymywanie proporcji obrazu (aspect ratio)">zachowywaniu proporcji obrazu</a>.
</p><p>
Proces skalowania obsługiwany jest przez filtr video <code class="literal">scale</code>:
<tt class="option">-vf scale=<em class="replaceable"><code>szerokość</code></em>:<em class="replaceable"><code>wysokość</code></em></tt>.
Jego jakość może być ustawiona parametrem <tt class="option">-sws</tt>.
Jeśli nie jest on podany <span class="application">MEncoder</span> użyje wartości 2: bicubic.
</p><p>
Sposób użycia:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejscie.mpg</code></em> -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell \
    -vf scale=640:480 -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><div class="sect1" title="9.7. Kopiowanie strumieni"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-streamcopy"></a>9.7. Kopiowanie strumieni</h2></div></div></div><p>
<span class="application">MEncoder</span> obsługuje strumienie wejściowe na dwa
sposoby: <span class="bold"><strong>koduje</strong></span> lub
<span class="bold"><strong>kopiuje</strong></span> je.
Ta sekcja jest o <span class="bold"><strong>kopiowaniu</strong></span>.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Strumień video</strong></span> (opcja <tt class="option">-ovc copy</tt>):
  ładne rzeczy można wyczyniać:) Jak wstawianie (nie konwertowanie) FLI, VIDO
  lub MPEG-1 video w plik AVI! Oczywiście tylko
  <span class="application">MPlayer</span> potrafi odtwarzać takie pliki :)
  I prawdopodobnie nie ma dla tego żadnego sensownego zastosowania.
  Poważniej: kopiowanie strumieni video może być przydatne wtedy, gdy np. tylko
  strumień audio ma być zakodowany (np. nieskompresowane PCM do MP3).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Strumień audio</strong></span> (opcja <tt class="option">-oac copy</tt>):
  prosto i przystępnie. Możliwe jest wmiksowanie zewnętrznego źródła (MP3, WAV)
  do strumienia wyjściowego. Użyj w tym celu opcji
  <tt class="option">-audiofile <em class="replaceable"><code>nazwa_pliku</code></em></tt>.
</p></li></ul></div><p>
Używanie <tt class="option">-oac copy</tt> do kopiowania z jednego formatu
przechowywania do innego może wymagać użycia <tt class="option">-fafmttag</tt> żeby
utrzymać znacznik formatu audio z oryginalnego zbioru.
Na przykład jeśli konwertujesz zbiór NSV z audio zakodowanym AAC do formatu
AVI, to znacznik formatu audio będzie nieprawidłowy i musi zostać zmieniony.
Listę znaczników formatów audio znajdziesz w pliku
<tt class="filename">codecs.conf</tt>.
</p><p>
Przykład:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejście.nsv</code></em> -oac copy -fafmttag 0x706D \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><div class="sect1" title="9.8. Kodowanie z wielu wejściowych plików obrazkowych (JPEG, PNG, TGA itp.)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-images"></a>9.8. Kodowanie z wielu wejściowych plików obrazkowych
  (JPEG, PNG, TGA itp.)</h2></div></div></div><p>
<span class="application">MEncoder</span> jest w stanie stworzyć film z jednego
lub wielu plików JPEG, PNG, TGA albo innych obrazków.
Poprzez proste kopiowanie ramek może stworzyć pliki MJPEG
(Motion (ruchomy - przypis tłumacza) JPEG), MPNG (Motion PNG) lub MTGA (Motion TGA).
</p><div class="orderedlist" title="Jak to działa:"><p class="title"><b>Jak to działa:</b></p><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="application">MEncoder</span> <span class="emphasis"><em>dekoduje</em></span> wejściowy
  obrazek/obrazki z pomocą biblioteki
  <code class="systemitem">libjpeg</code> (w przypadku dekodowania
  PNG, skorzysta z <code class="systemitem">libpng</code>).
</p></li><li class="listitem"><p>
  Potem <span class="application">MEncoder</span> kompresuje zdekodowane pliki
  podanym kompresorem (DivX4, Xvid, FFmpeg msmpeg4, itd.).
</p></li></ol></div><p title="Przykłady"><b>Przykłady. </b>
Opis i sposób działania funkcji <tt class="option">-mf</tt> znajdują się na stronie man.

</p><div class="informalexample"><p>
Tworzenie pliku MPEG-4 ze wszystkich plików JPEG w aktualnym katalogu:
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>*.jpg</code></em> -mf w=800:h=600:fps=25:type=jpg -ovc lavc\
    -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><p title="Przykłady">

</p><div class="informalexample"><p>
Tworzenie pliku MPEG-4 z niektórych plików JPEG w aktualnym katalogu:
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>ramka001.jpg,ramka002.jpg</code></em> -mf w=800:h=600:fps=25:type=jpg \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><p title="Przykłady">

</p><div class="informalexample"><p>
Tworzenie plików MPEG-4 z jawnie podanej listy plików JPEG (list.txt w aktualnym
katalogu, zawiera listę plików, które mają zostać użyte jako źródło, po jednym
w każdym wierszu):
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>@list.txt</code></em> -mf w=800:h=600:fps=25:type=jpg \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><p title="Przykłady">

Możesz mieszać rózne typy obrazków, niezależnie od używanej metody
— wymieniane pliki, znaki globalne czy plik z listą — o ile
oczywiście wszystkie mają te same wymiary.
Możesz więc n.p. zrobić klatkę tytułową z obrazka PNG a potem umieścić pokaz
swoich zdjęć JPEG.

</p><div class="informalexample"><p>
Tworzenie pliku Motion JPEG (MJPEG) ze wszystkich plików JPEG w aktualnym katalogu:
</p><pre class="screen">
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -ovc copy -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><p title="Przykłady">

</p><div class="informalexample"><p>
Tworzenie nieskompresowanego pliku ze wszystkich plików PNG w aktualnym katalogu:
</p><pre class="screen">
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div><p title="Przykłady">

</p><div class="note" title="Informacja:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Informacja:</h3><p>
Szerokość musi być liczbą podzielną przez 4, takie są ograniczenia formatu RAW RGB AVI.
</p></div><p title="Przykłady">

</p><div class="informalexample"><p>
Tworzenie pliku Motion PNG (MPNG) ze wszystkich plików PNG w aktualnym katalogu:
</p><pre class="screen">mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em></pre><p>
</p></div><p title="Przykłady">

</p><div class="informalexample"><p>
Tworzenie pliku Motion TGA (MTGA) ze wszystkich plików TGA w aktualnym katalogu:
</p><pre class="screen">
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em></pre><p>
</p></div><p title="Przykłady">

</p></div><div class="sect1" title="9.9. Wydobywanie napisów z DVD do pliku VOBsub"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-extractsub"></a>9.9. Wydobywanie napisów z DVD do pliku VOBsub</h2></div></div></div><p>
<span class="application">MEncoder</span> jest w stanie wyciągnąć napisy z DVD do
pliku w formacie VOBsub. Tworzy je para plików z rozszerzeniem
<tt class="filename">.idx</tt> i <tt class="filename">.sub</tt>, które są zazwyczaj
spakowane do pojedyńczego archiwum <tt class="filename">.rar</tt>.
<span class="application">MPlayer</span> może je odtwarzać z opcjami
<tt class="option">-vobsub</tt> i <tt class="option">-vobsubid</tt>.
</p><p>
Podajesz nazwę bazową (tzn. bez rozszerzenia <tt class="filename">.idx</tt> lub
<tt class="filename">.sub</tt>) pliku wyjściowego opcją <tt class="option">-vobsubout</tt>
oraz indeks dla tego pliku opcją <tt class="option">-vobsuboutindex</tt>.
</p><p>
Jeżeli źródłem nie jest DVD powinieneś użyć opcji <tt class="option">-ifo</tt>, aby
wskazać plik <tt class="filename">.ifo</tt> potrzebny do stworzenia pliku wynikowego
<tt class="filename">.idx</tt>.
</p><p>
Jeżeli źródłem nie jest DVD i nie masz pliku <tt class="filename">.ifo</tt>,
będziesz musiał użyć opcji <tt class="option">-vobsubid</tt>, aby podać id języka,
które będzie umieszczone w pliku <tt class="filename">.idx</tt>.
</p><p>
Każde uruchomienie dołączy do istniejących napisów, jeżeli pliki
<tt class="filename">.idx</tt> i <tt class="filename">.sub</tt> istnieją.
Powinieneś więc usunąć je przed uruchomieniem.
</p><div class="example"><a name="copying_two_subtitles_from_a_dvd_while_doing_two_pass_encoding"></a><p class="title"><b>Przykład 9.5. Kopiowanie dwóch napisów z DVD podczas dwu-przebiegowego kodowania</b></p><div class="example-contents"><pre class="screen">
rm <em class="replaceable"><code>napisy.idx</code></em> <em class="replaceable"><code>napisy.sub</code></em>
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 \
    -vobsubout <em class="replaceable"><code>napisy</code></em> -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -vobsubout <em class="replaceable"><code>napisy</code></em> -vobsuboutindex 1 -sid 5</pre></div></div><br class="example-break"><div class="example"><a name="copying_a_french_subtitle_from_an_mpeg_file"></a><p class="title"><b>Przykład 9.6. Kopiowanie francuskich napisów z pliku MPEG</b></p><div class="example-contents"><pre class="screen">
rm <em class="replaceable"><code>napisy.idx</code></em> <em class="replaceable"><code>napisy.sub</code></em>
mencoder <em class="replaceable"><code>film.mpg</code></em> -ifo <em class="replaceable"><code>film.ifo</code></em> -vobsubout <em class="replaceable"><code>napisy</code></em> -vobsuboutindex 0 \
    -vobsuboutid fr -sid 1 -nosound -ovc copy</pre></div></div><br class="example-break"></div><div class="sect1" title="9.10. Utrzymywanie proporcji obrazu (aspect ratio)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aspect"></a>9.10. Utrzymywanie proporcji obrazu (aspect ratio)</h2></div></div></div><p>
Pliki DVD i SVCD (tzn. MPEG-1/2) zawierają informacje o proporcji obrazu, która
opisuje, jak odtwarzacz ma skalować strumień video, żeby ludzie nie byli
jajogłowi (np.: 480x480 + 4:3 = 640x480).
Jednak przy kodowaniu plików AVI (DivX) musisz być świadom, że nagłówek AVI nie
przechowuje tej wartości.
Przeskalowywanie jest obrzydliwe i czasochłonne, musi być jakiś lepszy sposób!
</p><p>Jest</p><p>
MPEG-4 posiada unikalną cechę: strumień video może posiadać swoją wartość
proporcji obrazu.  Tak, dokładnie jak pliki MPEG-1/2 (DVD, SVCD) i H.263.
Niestety, istnieje tylko kilka odtwarzaczy video, pomijając
<span class="application">MPlayera</span>, które obsługują tę cechę MPEG-4.
</p><p>
Możliwość ta może być jedynie używana z kodekiem <code class="systemitem">mpeg4</code>
z biblioteki
<code class="systemitem">libavcodec</code>.
Pamiętaj: chociaż <span class="application">MPlayer</span> poprawnie odtworzy
stworzone pliki, inne odtwarzacze mogą użyć złych proporcji obrazu
(aspect ratio).
</p><p>
Z pewnością powinieneś wyciąć czarne pasy nad i pod obrazem.
Zobacz jak używać filtrów <code class="systemitem">cropdetect</code>
i <code class="systemitem">crop</code> na stronie man.
</p><p>
Sposób użycia:
</p><pre class="screen">
mencoder <em class="replaceable"><code>przykładowy-svcd.mpg</code></em> -vf crop=714:548:0:14 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:mbd=2:trell:autoaspect -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
</p></div></div><div class="chapter" title="Rozdział 10. Kodowanie przy użyciu MEncodera"><div class="titlepage"><div><div><h2 class="title"><a name="encoding-guide"></a>Rozdział 10. Kodowanie przy użyciu <span class="application">MEncodera</span></h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#menc-feat-dvd-mpeg4">10.1. Rippowanie DVD do wysokiej jakości pliku MPEG-4 ("DivX")</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-preparing-encode">10.1.1. Przygotowanie do kodowania: Identyfikowanie materiału źródłowego
i framerate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-fps">10.1.1.1. Ustalanie źródłowego framerate</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-material">10.1.1.2. Identyfikowanie materiału źródłowego</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-2pass">10.1.2. Stały kwantyzator a tryb wieloprzebiegowy</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-constraints">10.1.3. Ograniczenia efektywnego kodowania</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-crop">10.1.4. Kadrowanie i skalowanie</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate">10.1.5. Dobieranie rozdzielczości i bitrate</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate-compute">10.1.5.1. Obliczanie rozdzielczości</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-filtering">10.1.6. Filtrowanie</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-interlacing">10.1.7. Przeplot i telecine</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-encoding-interlaced">10.1.8. Encoding interlaced video</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-av-sync">10.1.9. Notes on Audio/Video synchronization</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-codec">10.1.10. Choosing the video codec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-audio">10.1.11. Audio</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-muxing">10.1.12. Muxing</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-filter-issues">10.1.12.1. Improving muxing and A/V sync reliability</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-avi-limitations">10.1.12.2. Limitations of the AVI container</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-matroska">10.1.12.3. Muxing into the Matroska container</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#menc-feat-telecine">10.2. How to deal with telecine and interlacing within NTSC DVDs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-telecine-intro">10.2.1. Introduction</a></span></dt><dt><span class="sect2"><a href="#menc-feat-telecine-ident">10.2.2. How to tell what type of video you have</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-ident-progressive">10.2.2.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-telecined">10.2.2.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-interlaced">10.2.2.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpt">10.2.2.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpi">10.2.2.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-encode">10.2.3. How to encode each category</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-encode-progressive">10.2.3.1. Progressive</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-telecined">10.2.3.2. Telecined</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-interlaced">10.2.3.3. Interlaced</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpt">10.2.3.4. Mixed progressive and telecine</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpi">10.2.3.5. Mixed progressive and interlaced</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-footnotes">10.2.4. Footnotes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-enc-libavcodec">10.3. Encoding with the <code class="systemitem">libavcodec</code>
  codec family</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-video-codecs">10.3.1. <code class="systemitem">libavcodec</code>'s
  video codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-audio-codecs">10.3.2. <code class="systemitem">libavcodec</code>'s
  audio codecs</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-enc-libavcodec-audio-codecs-pcmadpcm">10.3.2.1. PCM/ADPCM format supplementary table</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-lavc-encoding-options">10.3.3. Encoding options of libavcodec</a></span></dt><dt><span class="sect2"><a href="#menc-feat-mpeg4-lavc-example-settings">10.3.4. Encoding setting examples</a></span></dt><dt><span class="sect2"><a href="#custommatrices">10.3.5. Custom inter/intra matrices</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-example">10.3.6. Example</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-xvid">10.4. Encoding with the <code class="systemitem">Xvid</code>
  codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-xvid-intro">10.4.1. What options should I use to get the best results?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-options">10.4.2. Encoding options of <code class="systemitem">Xvid</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-profiles">10.4.3. Encoding profiles</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-example-settings">10.4.4. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-x264">10.5. Encoding with the
  <code class="systemitem">x264</code> codec</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-x264-encoding-options">10.5.1. Encoding options of x264</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-intro">10.5.1.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-speedvquality">10.5.1.2. Options which primarily affect speed and quality</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-misc-preferences">10.5.1.3. Options pertaining to miscellaneous preferences</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-x264-example-settings">10.5.2. Encoding setting examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-video-for-windows">10.6. 
  Encoding with the <code class="systemitem">Video For Windows</code>
  codec family
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-vfw-video-codecs">10.6.1. Video for Windows supported codecs</a></span></dt><dt><span class="sect2"><a href="#menc-feat-video-for-windows-bitrate-settings">10.6.2. Using vfw2menc to create a codec settings file.</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-quicktime-7">10.7. Using <span class="application">MEncoder</span> to create
<span class="application">QuickTime</span>-compatible files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-quicktime-7-why-use-it">10.7.1. Why would one want to produce <span class="application">QuickTime</span>-compatible Files?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-constraints">10.7.2. <span class="application">QuickTime</span> 7 limitations</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-crop">10.7.3. Cropping</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-scale">10.7.4. Scaling</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-avsync">10.7.5. A/V sync</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-bitrate">10.7.6. Bitrate</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-example">10.7.7. Encoding example</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-remux">10.7.8. Remuxing as MP4</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-metadata">10.7.9. Adding metadata tags</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-vcd-dvd">10.8. Using <span class="application">MEncoder</span>
  to create VCD/SVCD/DVD-compliant files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-constraints">10.8.1. Format Constraints</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-resolution">10.8.1.1. Format Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-gop">10.8.1.2. GOP Size Constraints</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-bitrate">10.8.1.3. Bitrate Constraints</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-output">10.8.2. Output Options</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-aspect">10.8.2.1. Aspect Ratio</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-a-v-sync">10.8.2.2. Maintaining A/V sync</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-srate">10.8.2.3. Sample Rate Conversion</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-lavc">10.8.3. Using libavcodec for VCD/SVCD/DVD Encoding</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-intro">10.8.3.1. Introduction</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-options">10.8.3.2. lavcopts</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-examples">10.8.3.3. Examples</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-advanced">10.8.3.4. Advanced Options</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-audio">10.8.4. Encoding Audio</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-toolame">10.8.4.1. toolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-twolame">10.8.4.2. twolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-lavc">10.8.4.3. libavcodec</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-all">10.8.5. Putting it all Together</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-dvd">10.8.5.1. PAL DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-dvd">10.8.5.2. NTSC DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-ac3-copy">10.8.5.3. PAL AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-ac3-copy">10.8.5.4. NTSC AVI Containing AC-3 Audio to DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-svcd">10.8.5.5. PAL SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-svcd">10.8.5.6. NTSC SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-vcd">10.8.5.7. PAL VCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-vcd">10.8.5.8. NTSC VCD</a></span></dt></dl></dd></dl></dd></dl></div><div class="sect1" title='10.1. Rippowanie DVD do wysokiej jakości pliku MPEG-4 ("DivX")'><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-dvd-mpeg4"></a>10.1. Rippowanie DVD do wysokiej jakości pliku MPEG-4 ("DivX")</h2></div></div></div><p>
  Jednym z często zadawanych pytań jest "Jak zrobić rip najlepszej jakości
  przy danej objętości?". Innym pytaniem jest "Jak zrobić najlepszy możliwy
  rip? Nie ważne jaka będzie objętość, chcę najlepszej jakości."
</p><p>
  To drugie pytanie jest przynajmniej źle postawione. W końcu, jeśli nie
  przejmujesz się wielkością pliku, mógłbyć po prostu skopiować strumień
  MPEG-2 z DVD. Pewnie, dostaniesz AVI wielkości około 5GB, ale jeśli chcesz
  najlepszej jakości i nie przejmujesz się wielkością to jest to najlepsze
  wyjście.
</p><p>
  Tak na prawdę, powodem dla którego chcesz przekodować DVD na MPEG-4 jest to,
  że <span class="bold"><strong>przejmujesz</strong></span> się wielkością pliku.
</p><p>
  Ciężko jest pokazać książkowy przepis na tworzenie ripu DVD bardzo wysokiej
  jakości. Trzeba wziąć pod uwagę kilka czynników, i powinieneś rozumieć
  szczegóły procesu, albo jest duża szansa że nie będziesz zadowolony z wyników.
  Poniżej zbadamy niektóre problemy i pokażemy przykład. Zakładamy że używasz
  <code class="systemitem">libavcodec</code> do kodowania obrazu,
  chociaż ta sama teoria działą też przy innych kodekach.
</p><p>
  Jeśli to wydaje Ci się za dużo, to pewnie powinieneś użyć jednej z wielu
  nakładek dostępnych w
  <a class="ulink" href="http://mplayerhq.hu/homepage/design7/projects.html#mencoder_frontends" target="_top">sekcji MEncodera</a>
  naszej strony z powiązanymi projektami.
  W ten sposób, powinno się udać otrzymać ripy wysokiej jakości bez zbyt
  myślenia za dużo, ponieważ te narzędzia są projektowane by podejmować za
  Ciebie mądre decyzje.
</p><div class="sect2" title="10.1.1. Przygotowanie do kodowania: Identyfikowanie materiału źródłowego i framerate"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode"></a>10.1.1. Przygotowanie do kodowania: Identyfikowanie materiału źródłowego
i framerate</h3></div></div></div><p>
  Zanim w ogóle zaczniesz myśleć o kodowaniu filmu, musisz przejść kilka
  wstępnych kroków.
</p><p>
  Pierwszym i najważniejszym krokiem przed kodowaniem powinno być
  ustalenie jakim typem filmu się zajmujesz.
  Jeśli Twój film jest z DVD albo telewizji (zwykłej, kablowej czy
  satelitarnej), będzie w jednym z dwóch formatów: NTSC w Ameryce Północnej
  i Japonii, PAL w Europie itp.
  Trzeba sobie jednak zdawać sprawę z tego, że jest to tylko format do
  prezentacji w telewizji, i często <span class="bold"><strong>nie</strong></span> jest
  oryginalnym formatem filmu.
  Doświadczenie pokazuje że filmy NTSC są trudniejsze do kodowania, ponieważ
  jest więcej elementów do zidentyfikowania w źródle.
  Żeby zrobić odpowienie kodowanie musisz znać oryginalny format filmu.
  Nieuwzględnienie tego skutkuje wieloma wadami wynikowego pliku, na przykład
  brzydkie artefakty przeplotu i powtórzone albo zagubione klatki.
  Poza tym że są brzydkie, artefakty są też szkodliwe dla kodowania:
  Dostaniesz gorszą jakość na jednostkę bitrate.
</p><div class="sect3" title="10.1.1.1. Ustalanie źródłowego framerate"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode-fps"></a>10.1.1.1. Ustalanie źródłowego framerate</h4></div></div></div><p>
  Poniżej jest lista popularnych typów materiału źródłowego, gdzie można je
  najczęściej znaleźć i ich własności:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Typowy film</strong></span>: Tworzony do wyświetlania przy
  24fps.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Film PAL</strong></span>: Nagrywany kamerą video PAL
  z prędkością 50 pól na sekundę.
  Pole składa się tylko z parzystych albo nieparzystych linii klatki.
  Telewizja była projektowana by odświerzać je naprzemiennie, w charakterze
  taniej formy analogowej kompresji.
  Ludzkie oko podobno kompensuje ten efekt, ale jeśli zrozumiesz przeplot
  nauczysz się go widzieć też w telewizji i nigdy już nie będziesz z niej
  ZADOWOLONY.
  Dwa pola <span class="bold"><strong>nie</strong></span> dają pełnej klatki, ponieważ
  są uchwycone co 1/50 sekundy, więc nie pasują do siebie, chyba że nie ma
  ruchu.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Film NTSC</strong></span>: Nagrany kamerą NTSC z prędkością
  60000/1001 pól na sekundę, albo 60 pól na sekundę w erze przedkolorowej.
  Poza tym podobny do PAL.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Animacja</strong></span>: Zazwyczaj rysowana przy 24fps,
  ale zdarzają się też z mieszanym framerate.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Grafika komputerowa (CG)</strong></span>: Może być dowolny
  framerate, ale niektóre są częstsze niż inne; wartości 24 i 30 klatek na
  sekundę są typowe dla NTSC, a 25fps jest typowe dla PAL.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Stary film</strong></span>: Rozmaite niższe framerate.
</p></li></ul></div></div><div class="sect3" title="10.1.1.2. Identyfikowanie materiału źródłowego"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode-material"></a>10.1.1.2. Identyfikowanie materiału źródłowego</h4></div></div></div><p>
  Filmy składające się z klatek nazywa się progresywnymi,
  podczas gdy te składające się z niezależnych pól nazywa się
  z przeplotem, albo filmem - chociaż ten drugi termin jest niejasny.
</p><p>
  Żeby nie było za łatwo, niektóre filmy są kombinacją kilku powyższych typów.
</p><p>
  Najważniejszą różnicą między tymi formatami, jest to że niektóre są oparte
  na klatkach a inne na polach.
  <span class="bold"><strong>Zawsze</strong></span> gdy film jest przygotowywany do
  wyświetlania w telewizji jest przekształcany na format oparty na polach.
  Rozliczne metody którymi się tego dokonuje są wspólnie nazywane "telecine",
  a niesławne "3:2 pulldown" z NTSC jest jednym z jego rodzajów.
  Jeżeli oryginał nie był też oparty na polach (z tą samą prędkością),
  dostajesz film w innym formacie niż oryginał.
</p><div class="itemizedlist" title="Jest kilka popularnych typów pulldown:"><p class="title"><b>Jest kilka popularnych typów pulldown:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>pulldown PAL 2:2</strong></span>: Najprzyjemniejszy z nich
  wszystkich.
  Każda klatka jest pokazywana przez czas dwóch pól, poprzez wydobycie
  parzystych i nieparzystych linii i pokazywanie ich na przemian.
  Jeśli oryginalny materiał miał 24fps, ten proces przyspiesza film o 4%.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>pulldown PAL 2:2:2:2:2:2:2:2:2:2:2:3</strong></span>:
  Każda 12ta klatka jest pokazywana przez czas trzech pól zamiast tylko dwóch.
  Dzięki temu nie ma przyspieszenia o 4%, ale proces jest o wiele trudniejszy
  do odtworzenia.
  Zazwyczaj występuje w produkcjach muzycznych, gdzie zmiana prędkości o 4%
  poważnie by uszkodziła muzykę.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC 3:2 telecine</strong></span>: Klatki są pokazywane na
  przemian przez czas 3ch albo 2ch pól.
  To daje częstotliwość pól 2.5 raza większą niż oryginalna częstotliwość
  klatek. Rezultat jest też lekko zwolniony z 60 pól na sekundę do 60000/1001
  pól na sekundę by utrzymać częstotliwość pól w NTSC.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC 2:2 pulldown</strong></span>: Używane do pokazywania
  materiałów 30fps na NTSC.
  Przyjemne, tak jak pulldown 2:2 PAL.
</p></li></ul></div><p>
  Są też metody konwersji między filmami PAL i NTSC, ale ten temat
  wykracza poza zakres tego podręcznika.
  Jeśli natkniesz się na taki film i chcesz go zakodować, to największe
  szanse masz robiąc kopię w oryginalnym formacie.
  Konwersja między tymi dwoma formatami jest wysoce destrukcyjna i nie może
  zostać ładnie odwrócona, więc kodowanie będzie o wiele gorszej jakości jeśli
  jest robione z przekonwertowanego źródła.
</p><p>
  Gdy film jest zapisywany na DVD, kolejne pary pól są zapisywane jako klatka,
  pomimo tego że nie są przezaczone do wyświetlania razem.
  Standard MPEG-2 używany na DVD i w cyfrowej TV pozwala na zakodowanie
  oryginalnej progresywnej klatki i na przechowanie w nagłówku klatki ilości
  pól przez które ta klatka powinna być pokazana.
  Filmy zrobione przy użyciu tej metody są często określane mianem "miękkiego
  telecine" (soft-telecine), ponieważ proces ten tylko informuje odtwarzacz że
  ma on zastosować pulldown, a nie stosuje go samemu.
  Tak jest o wiele lepiej, ponieważ może to zostać łatwo odwrócone (a tak na
  prawdę zignorowane) przez koder i ponieważ zachowuje możliwie najwyższą
  jakość.
  Niestety, wielu producentów DVD i stacji nadawczych nie stosuje prawidłowych
  technik kodowania ale w zamian produkuje filmy przy użyciu "twardego
  telecine" (hard-telecine), gdzie pola są faktycznie powtórzone
  w zakodowanym MPEG-2.
</p><p>
  Procedury radzenia sobie z takimi przypadkami będą omówione
  <a class="link" href="#menc-feat-telecine" title="10.2. How to deal with telecine and interlacing within NTSC DVDs">w dalszej części przewodnika</a>.
  Teraz podamy tylko kilka wskazówek jak identyfikować z jakim typem materiału
  mamy do czynienia.
</p><div class="itemizedlist" title="Regiony NTSC:"><p class="title"><b>Regiony NTSC:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Jeśli <span class="application">MPlayer</span> wyświetla w trakcie oglądania filmu
  że framerate zostało zmienione na 24000/1001 i nigdy nie powraca, to jest
  to prawie na pewno progresywny materiał na którym zastosowano "miękkie
  telecine".
</p></li><li class="listitem"><p>
  Jeśli <span class="application">MPlayer</span> pokazuje że framerate zmienia się
  między 24000/1001 i 30000/1001 i czasami widzisz "grzebienie" to jest kilka
  możliwości.
  
  Kawałki 24000/1001fps są prawie na pewno progresywne, poddane "miękkiemu
  telecine", ale fragmenty  30000/1001 fps mogą albo być 24000/1001 poddanym
  "twardemu telecine" albo filmem NTCS o 60000/1001 polach na sekundę.
  Używaj tych samych metod co w następnych dwóch przypadkach żeby je odróżnić.
</p></li><li class="listitem"><p>
  Jeśli <span class="application">MPlayer</span> nigdy nie pokazuje informacji
  o zmianie framerate i każda klatka z ruchem wygląda jak grzebień, to masz
  film NTSC z 60000/1001 polami na sekundę.
</p></li><li class="listitem"><p>
  Jeśli <span class="application">MPlayer</span> nigdy nie pokazuje informacji
  o zmianie framerate i dwie klatki z każdych pięciu mają grzebienie, to film
  jest 24000/1001 fps poddanym "twardemu telecine".
</p></li></ul></div><div class="itemizedlist" title="Regiony PAL:"><p class="title"><b>Regiony PAL:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Jeśli nie widzisz grzebieni, to jest to 2:2 pulldown.
</p></li><li class="listitem"><p>
  Jeśli na przemian przez pół sekundy widzisz grzebienie a potem nie, to masz
  2:2:2:2:2:2:2:2:2:2:2:3 pulldown.
</p></li><li class="listitem"><p>
  Jeśli zawsze widzisz grzebienie w trakcie ruchu, to film jest filmem PAL
  wyświetlanym z 50 polami na sekundę.
  
</p></li></ul></div><div class="note" title="Podpowiedź:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Podpowiedź:</h3><p>
  <span class="application">MPlayer</span> może zwolnić odtwarzanie filmu opcją
  -speed albo odtwarzać klatka po klatce.
  Spróbuj użyć opcji <tt class="option">-speed</tt> 0.2 żeby oglądać film bardzo
  wolno, albo naciskaj wielokrotnie klawisz "<span class="keycap"><b>.</b></span>" żeby
  wyświetlać klatka po klatce.
  Może to pomóc zidentyfikować wzorzec jeśli
  nie możesz go dostrzec przy pełnej prędkości.
</p></div></div></div><div class="sect2" title="10.1.2. Stały kwantyzator a tryb wieloprzebiegowy"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-2pass"></a>10.1.2. Stały kwantyzator a tryb wieloprzebiegowy</h3></div></div></div><p>
  Jest możliwe zakodowanie filmu z szeroką gamą jakości.
  Z nowoczesnymi koderami i odrobiną kompresji przed kodekiem (zmniejszenie
  rozdzielczości i usuwanie szumu), możliwe jest osiągnięcie bardzo dobrej
  jakości przy 700 MB, dla 90-110 minutowego filmu kinowego.
  Dodatkowo tylko najdłuższe filmy nie dają się zakodować na 1400 MB z prawie
  doskonałą jakością.
</p><p>
  Są trzy podejścia do kodowania video: stały bitrate (CBR),
  stały kwantyzator i tryb wieloprzebiegowy (ABR, uśrednione bitrate).
</p><p>
  Złożoność klatek filmu, a zatem i ilość bitów potrzebna na ich zakodowanie,
  może się bardzo mocno zmieniać w zależności od sceny.
  Nowoczesne kodery potrafią się dostosowywać do tych zmian i zmieniać
  bitrate.
  Jednak w prostych trybach, takich jak CBR, kodery nie znają zapotrzebowania
  na bitrate w przyszłych scenach, więc nie mogą na długo przekraczać
  wymaganego bitrate.
  Bardziej zaawansowane tryby, takie jak kodowanie wieloprzebiegowe, potrafią
  wziąć pod uwagę statystyki z poprzednich przebiegów, co naprawia ten problem.
</p><div class="note" title="Uwaga:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Uwaga:</h3><p>
  Większość kodeków obsługujących kodowanie ABR obsługuje tylko kodowanie
  dwuprzebiegowe, podczas gdy niektóre inne, na przykład
  <code class="systemitem">x264</code> albo
  <code class="systemitem">Xvid</code> potrafią wykonywać wiele
  przebiegów, z lekką poprawą jakości po każdym przebiegu. Jednak ta poprawa
  nie jest zauważalna ani mierzalna po około 4tym przebiegu.
  Dlatego też, w tej części, tryb dwuprzebiegowy i wieloprzebiegowy będą
  używane zamiennie.
</p></div><p>
  W każdym z tych trybów, kodek video (na przykład
  <code class="systemitem">libavcodec</code>)
  dzieli klatkę obrazu na makrobloki 16x16 pikseli i stosuje do każdego z nich
  kwantyzator. Im niższy kwantyzator, tym lepsza jakość i tym wyższe bitrate.
  Metody jakiej koder używa do ustalenia kwantyzatora są różne i można nimi
  sterować. (Jest to straszliwe uproszczenie, ale wystarcza do zrozumienia
  podstaw.)
</p><p>
  Kiedy podajesz stałe bitrate, kodek koduje usuwając tyle szczegółów ile musi
  i tak mało jak to tylko możliwe żeby pozostać poniżej podanego bitrate.
  Jeśli na prawdę nie obchodzi cię wielkość pliku, możesz użyć CBR i podać
  nieskończone bitrate (W praktyce oznacza to bitrate na tyle wysokie że nie
  stanowi bariery, na przykład 10000Kbit.) Bez żadnego ograniczenia na bitrate
  kodek użyje najniższego możliwego kwantyzatora do każdej klatki (ustalonego
  dla <code class="systemitem">libavcodec</code> opcją
  <tt class="option">vqmin</tt>, domyślnie 2).
  Gdy tylko podasz bitrate na tyle niskie że kodek musi używać wyższego
  kwantyzatora, to prawie na pewno niszczysz film.
  Żeby tego uniknąć, powinieneś pewnie zmniejszyć rozdzielczość filmu, metodą
  opisaną dalej.
  Ogólnie, jeśli zależy Ci na jakości, powinieneś unikać CBR.
</p><p>
  Przy stałym kwantyzatorze, kodek używa na każdym makrobloku tego samego
  kwantyzatora, podanego opcją <tt class="option">vqscale</tt>
  (w przypadku <code class="systemitem">libavcodec</code>).
  Jeśli chcesz możliwie najlepszy efekt, znów ignorując bitrate, możesz użyć
  <tt class="option">vqscale=2</tt>. Da to ten sam bitrate i PSNR (peak
  signal-to-noise ratio, szczytowa proporcja sygnału do szumu) co CBR
  z <tt class="option">vbitrate</tt>=nieskończoność i domyślnym
  <tt class="option">vqmin</tt>.
</p><p>
  Problemem przy stałym kwantyzatorze jest to, że używa podanego kwantyzatora
  niezależnie od tego czy makroblok tego wymaga czy nie. To znaczy że można by
  było zastosować do makrobloku wyższy kwantyzator bez utraty postrzegalnej
  jakości. Dlaczego marnować bity na niepotrzebnie niski kwantyzator?
  Mikroprocesor ma tyle cykli ile jest czasu, ale jest tylko ograniczona ilość
  bitów na twardym dysku.
</p><p>
  Przy kodowaniu dwuprzebiegowym, pierwszy przebieg potraktuje film jak przu
  ustawieniu CBR, ale zachowa informacje o własnościach każdej klatki. Te dane
  są później używane przy drugim przebiegu do podejmowania słusznych decyzji
  o używanym kwantyzatorze. Przy szybkich scenach albo niewielu szczegółach
  pewnie użyje większego kwantyzatora, podczas gdy dla powolnych,
  szczegółowych scen będzie niższy kwantyzator.
</p><p>
  Jeśli używasz <tt class="option">vqscale=2</tt> to marnujesz bity. Jeśli używasz
  <tt class="option">vqscale=3</tt> to nie dostajesz najlepszej możliwej jakości.
  Załóżmy że zakodowałeś swoje DVD przy <tt class="option">vqscale=3</tt>
  i dostałeś bitrate 1800Kbit. Jeśli zrobisz dwa przebiegi
  z <tt class="option">vbitrate=1800</tt> ostateczny wynik będzie miał
  <span class="bold"><strong>wyższą jakość</strong></span> przy
  <span class="bold"><strong>tym samym bitrate</strong></span>.
</p><p>
  Ponieważ jesteś już przekonany że prawidłowym wyborem są dwa przebiegi,
  prawdziwym pytaniem jest jakiego bitrate użyć. Nie ma jednej odpowiedzi.
  Idealnie chcesz wybrać bitrate będący najlepszym kompromisem między jakością
  a wielkością pliku. To się zmienia w zależności od filmu.
</p><p>
  Jeśli wielkość nie ma znaczenia, dobrym punktem wyjściowym do bardzo
  wysokiej jakości jest około 2000Kbit plus minus 200Kbit.
  Jeśli jest dużo akcji albo szczegółów, albo po prostu masz bardzo wrażliwe
  oko, możesz się zdecydować na 2400 albo 2600.
  Przy niektórych DVD możesz nie zauważyć różnicy przy 1400Kbit. Dobrym
  pomysłem jest poeksperymentowanie z kilkoma scenami i różnymi wartościami
  bitrate żeby nabrać wyczucia.
</p><p>
  Jeśli chcesz konkretnej wielkości, musisz jakoś obliczyć bitrare.
  Ale zanim to zrobisz, musisz wiedzieć ile miejsca potrzebujesz na dźwięk,
  więc powinieneś <a class="link" href="#menc-feat-dvd-mpeg4-audio" title="10.1.11. Audio">ściągnąć go</a>
  najpierw.
  Możesz wyliczyć bitrate z następującego równania:
  <code class="systemitem">bitrate = (wielkość_docelowa_w_MBajtach - wielkość_dźwięku_w_MBajtach)
  * 1024 * 1024 / długość_w_sekundach * 8 / 1000</code>
  Na przykład by wcisnąć dwugodzinny film na płytkę 702MB, z 60MB ścieżki
  dźwiękowej, bitrate video musi być:
  <code class="systemitem">(702 - 60) * 1024 * 1024 / (120*60) * 8 / 1000
  = 740kbps</code>
</p></div><div class="sect2" title="10.1.3. Ograniczenia efektywnego kodowania"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-constraints"></a>10.1.3. Ograniczenia efektywnego kodowania</h3></div></div></div><p>
Ze względu na naturę kodowania typu MPEG istnieją różne ograniczenia których
warto się trzymać żeby osiągnąć najlepszą jakość.
MPEG dzieli obraz na kwadraty 16x16 pikseli nazywane makroblokami,
każdy z nich składa się z 4 bloków 8x8 informacji o jasności (luminancja, luma)
i dwóch 8x8 z połową rozdzielczości (jeden na składową czerwono-morską, drugi
na niebiesko-żółtą).
Nawet jeśli wysokość i szerokość filmu nie są wielokrotnościami 16,
koder użyje tyle makrobloków żeby przykryć cały obszar obrazu,
dodatkowa przestrzeń zostanie zmarnowana.
Zatem w interesie zwiększenai jakości przy utrzymaniu wielkości pliku kiepskim
pomysłem jest używanie wymiarów które nie są wielokrotnością 16.
</p><p>
Większość DVD ma też jakieś czarne ramki na brzegach.
Zostawienie ich tam <span class="bold"><strong>mocno</strong></span> zaszkodzi jakości
na kilka sposobów.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Kompresje typu MPEG są zależne od transformat przestrzeni częstotliwości,
  a dokładniej Dyskretnej Transformaty Cosinusowej (DCT), która jest podobna do
  transformaty Fouriera.
  Ten sposób kodowania jest efektywny przy wzorach i gładkich przejściach, ale
  kiepsko sobie radzi z ostrymi krawędziami.
  Żeby je zakoować, musi używać o wiele większej liczby bitów, albo wystąpią
  artefakty znane jako pierścienie.
  </p><p>
  Transformacja częstotliwości (DCT) jest stosowana osobno do każdego
  makrobloku (tak na prawdę do każdego bloku), więc ten problem istnieje tylko
  gdy ostra krawędź jest wewnątrz bloku.
  Jeśli czarna ramka zaczyna się dokładnie na krawędzi 16-pikselowego bloku,
  nie stwarza problemów.
  Jednakże, rzadko kiedy takie ramki są ładnie wyrównane, więc zazwyczaj będzie
  trzeba przyciąć obraz żeby tego uniknąć.
  </p></li></ol></div><p>
Poza transformatami przestrzeni częstotliwości, kompresje typu MPEG używają
wektorów ruchu, by reprezentować zmiany między sąsiednimi klatkami.
Oczywiście wektory ruchu są mniej efektywne w stosunku do nowej treści
przychodzącej z brzegów obrazka, ponieważ nie było jej na poprzedniej klatce.
Jeśli obraz rozciąga się do krawędzi zakodowanego regionu,
wektory ruchu radzą sobie z treścią wychodzącą poza krawędzie.
Jednak jeśli są ramki, mogą być kłopoty:
</p><div class="orderedlist"><ol class="orderedlist" start="2" type="1"><li class="listitem"><p>
  Dla każdego makrobloku, kompresja typu MPEG przechowuje wektor opisujący
  która część poprzedniej klatki powinna być skopiowana do tego makrobloku jako
  podstawa do przewidzenia następnej klatki.
  Zakodowane wtedy muszą być tylko różnice.
  Jeśli makroblok zawiera fragment ramki, to wektory ruchu z pozostałych cześci
  obrazu zamażą obramowanie.
  Oznacza to że dużo bitów będzie zużytych albo na jej powtórne zaczernienie
  albo (co bardziej prawdopodobne), wektor ruchu w ogóle nie będzie użyty
  i wszystkie zmiany w tym makrobloku będzie trzeba zakodować bezpośrednio.
  W obu przypadkach, bardzo cierpi na tym efektywność kodowania.
  </p><p>
  Powtórnie, ten problem występuje tylko jeśli ramki nie są na krawędziach
  16-pikselowych bloków.
  </p></li><li class="listitem"><p>
  W końcu, przypuśćmy że mamy makroblok wewnątrz obrazu i obiekt dostaje się do
  niego z okolic krawędzi.
  Kodowanie typu MPEG nie potrafi powiedzieć "skopiuj część która jeest
  wewnątrz obraka, ale nie czarne obramowanie." Dlatego obramowanie też
  zostanie skopiowane i trzeba będzie zużyć sporo bitów żeby zakodować fragment
  obrazu który powinien tam być.
  </p><p>
  Jeśli obraz sięga do krawędzi zakodowanego obszaru, MPEG ma specjalne
  optymalizacje do wielokrotnego kopiowania ostatniego rzędu pikseli jeśli
  wektor ruchu przychodzi z poza zakodoanego obszaru.
  Staje się to bezużyteczne gry obraz ma czarne obramowanie.
  W odróżnieniu od problemów 1 i 2 tutaj nic nie pomoże ustawienie obramowania
  w odpowiednim miejscu.
  </p></li><li class="listitem"><p>
  Mimo tego, że obramowanie jest całkowicie czarne i nigdy się nie zmienia,
  zawsze jest pewien narzut związany z większą ilością makrobloków.
</p></li></ol></div><p>
Ze wszystkich tych powodów zalecane jest całkowite wycięcie czarnych obramowań.
Dodatkowo, jeśli przy krawędziach jest obszar zakłóceń/zniekształceń, obcięcie
go również poprawi efektywność kodowania.
Puryści, którzy chcą możliwie dokładnie zachować oryginał mogą się sprzeciwiać,
ale jeśli nie planujesz używać stałego kwantyzatora to jakość uzyskana dzięki
skadrowaniu znacząco przewyższy utratę informacji przy brzegach.
</p></div><div class="sect2" title="10.1.4. Kadrowanie i skalowanie"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-crop"></a>10.1.4. Kadrowanie i skalowanie</h3></div></div></div><p>
Przypomnijmy z poprzedniej części że ostateczna wielkość (wysokość i szerokość)
obrazu do kodowania powinna być wielokrotnością 16.
Można to osiągnąć kadrowaniem, skalowaniem albo kombinacją obydwu.
</p><p>
Przy kadrowaniu, jest kilka reguł których musimy przestrzegać by uniknąć
uszkodzenia filmu.
Zwykły format YUV, 4:2:0, przechowuje wartości koloru podpróbkowane, czyli
kolor jest próbkowany o połowę rzadziej w każdym kierunku niż jasność.
Spójrzmy na diagram, na którym L oznacza punkty próbkowania jasności (luma)
a C koloru (chroma).
</p><div class="informaltable"><table border="1" width="40%"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr></tbody></table></div><p>
Jak widać, wiersze i kolumny obrazu w sposób naturalny łączą się w pary.
Dlatego przesunięcia i wymiary kadrowania <span class="emphasis"><em>muszą</em></span> być
liczbami parzystymi.
Jeśli nie są, barwa nie będzie już dobrze dopasowana do jasności.
Teoretycznie możliwe jest kadrowanie z nieparzystym przesunięciem, ale wymaga
to przepróbkowania kolorów, co jest potencjalnie stratną operacją nie
obsługiwaną przez filtr kadrowania.
</p><p>
Dalej, film z przeplotem jest kodowany jak poniżej:
</p><div class="informaltable"><table border="1" width="80%"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td colspan="8" align="center">Górne pole</td><td colspan="8" align="center">Dolne pole</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr></tbody></table></div><p>
Jak widać, wzór powtarza się dopiero po 4 liniach.
Dlatego przy filmie z przeplotem, pionowa współrzędna i wysokość kadrowania
muszą być wielokrotnościami 4.
</p><p>
Podstawową rozdzielczością DVD jest 720x480 dla NTSC i 720x576 dla PAL, ale
jest też flaga proporcji, która określa czy obraz jest ekranowy (4:3) czy
panoramiczny (16:9).
Wiele (jeśli nie większość) panoramicznych DVD nie jest dokładnie 16:9 tylko
raczej 1,85:1 lub 2,35:1 (cinescope).
Oznacza to że będzie czarne obramowanie na filmie, które trzeba usunąć.
</p><p>
<span class="application">MPlayer</span> dostarcza filtr wykrywania kadrowania
(<tt class="option">-vf cropdetect</tt>), który określi prostokąt kadrowania.
Uruchom <span class="application">MPlayera</span> z opcją <tt class="option">-vf
cropdetect</tt> a wydrukuje on ustawienia kadrowania potrzebne do usunięcia
obramowania.
Powinieneś puścić film wystarczająco długo żeby został użyty cały obszar
obrazu, inaczej wartości będą niedokładne.
</p><p>
Potem przetestuj otrzymane wartości z użyciem
<span class="application">MPlayera</span>, przekazując opcje podane przez
<tt class="option">cropdetect</tt> i dostosowując prostokąt według potrzeb.
Filtr <tt class="option">rectangle</tt> może w tym pomóc, pozwalając na interaktywne
ustawienie prostokąta kadrowania na filmie.
Pamiętaj, by trzymać się powyższych reguł podzielności, żeby nie przestawić
płaszczyzny koloru.
</p><p>
W pewnych przypadkach skalowanie może być niepożądane.
Skalowanie w kierunku pionowym jest trudne przy filmie z przeplotem, a jeśli
chcesz zachować przeplot, zazwyczaj powinieneś się wstrzymać od skalowania.
Jeśl nie chcesz skalować, ale nadal chcesz używać wymiarów będących wielokrotnościami 16 to musisz przekadrować.
NIe należy niedokadrowywać, bo obramowania są bardzo szkodliwe przy kodowaniu!
</p><p>
Ponieważ MPEG-4 używa makrobloków 16x16, powinieneś się upewnić,
że każdy wymiar kodowanego filmu jest wielokrotnością 16, inaczej
degradujemy jakość, zwłaszcza przy niższych bitrate.
Można tego dokonać zaokrąglając wysokość i szerokość prostokąta kadrowania do
najbliższej wielokrotności 16.
Jak powiedziano wcześniej, trzeba zwiększyć przesunięcie
pionowe o połowę różnicy między starą a nową wysokością,
żeby wynikowy film był brany ze środka klatki.
A ze względu na sposób w jaki próbkowane jest DVD, upewnij się że przesunięcie
jest parzyste (w zasadzie, stosuj się do reguły, żeby nigdy nie używać
nieparzystych wartości przy przycinaniu i skalowaniu obrazu).
Jeśli nie czujesz się dobrze odrzucając dodatkowe piksele,
może wolisz przeskalować video.
Przyjżymy się temu w przykładzie poniżej.
Możesz też pozwolić filtrowi <tt class="option">cropdetect</tt> zrobić to wszystko za
Ciebie, jako że ma on opcjonalny parametr <tt class="option">round</tt>
(zaokrąglenie), domyślnie równy 16.
</p><p>
Uważaj też na "poł-czarne" piksele na przegach. Też je wykadruj, albo będziesz
na nie marnował bity któ?e przydadzą się gdzie indziej.
</p><p>
Po tym wszystkim prawdopodobnie dostaniesz film który nie ma dokładnie
proporcji 1,85:1 ani 2,35:1 tylko coś podobnego.
Mógłbyś samemu policzyć nowe proporcje, ale <span class="application">MEncoder</span>
ma pocję do <code class="systemitem">libavcodec</code> nazywaną
<tt class="option">autoaspect</tt> która zrobi to za Ciebie.
Nie powinieneś przeskalowywać video żeby wyrównać piksele, chyba że chcesz
marnować miejsce na dysku.
Skalowanie powinno być robione przy odtwarzaniu, a odtwarzacz używa informacji
o proporcjach zapisanych w AVI żeby określić prawidłową rozdzielczość.
Niestety, nie wszystkie odtwarzacze uznają te informacje,
dlatego mimo wszystko możesz chcieć przeskalować.
</p></div><div class="sect2" title="10.1.5. Dobieranie rozdzielczości i bitrate"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-resolution-bitrate"></a>10.1.5. Dobieranie rozdzielczości i bitrate</h3></div></div></div><p>
Jeśli nie kodujesz w trybie stałego kwantyzatora, musisz wybrać bitrate.
Jest to dość prosta rzecz – to (średnia) ilość bitów jaka będzie
używana do zakodowania jednej sekundy filmu.
Zazwyczaj bitrate mierzy się w kilobitach (1000 bitów) na sekundę.
Wielkość filmu na dysku to bitrate razy długość filmu,
plus drobne "dodatki" (patrz na przykład sekcja o
<a class="link" href="#menc-feat-dvd-mpeg4-muxing-avi-limitations" title="10.1.12.2. Limitations of the AVI container">kontenerze AVI</a>
).
Pozostałe parametry, takie jak skalowanie, kadrowanie itp.
<span class="bold"><strong>nie</strong></span> zmienią wielkości pliku jeśli nie
zmienisz też bitrate!
</p><p>
Bitrate <span class="bold"><strong>nie</strong></span> skaluje się proporcjonalnie do
rozdzielczości.
To znaczy, film 320x240 w 200 kbit/s nie będzie tej samej jakości co ten sam
film w 640x480 i 800 kbit/s!
Są ku temu dwie przyczyny:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="bold"><strong>Wizualna</strong></span>: Łatwiej zauważyć artefakty MPEG
  jeśli są bardziej powiększone!
  Artefakty powstają na poziomie bloków (8x8).
  Ludzkie oko trudniej dostrzega błędy w 4800 małych blokach niż w 1200 dużych
  (zakładając że skalujesz na pełny ekran).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Teoretyczna</strong></span>: Kiedy zmniejszasz obraz ale
  nadal używasz tych samych bloków 8x8 do transformacji przestrzeni
  częstotliwości. masz więcej danych w pasmach wyższych częstotliwości.
  W pewien sposób każdy piksel ma więcej szczegółów niż poprzednio.
  Dlatego, mimo że przeskalowany obraz zawiera 1/4 informacji jeśli chodzi
  o wielkość, to nadal może zawierać większość informacji w przestrzeni
  częstotliwości (zakładając że wysokie częstotliwości były mało używane
  w oryginalnym filmie 640x480).
</p></li></ol></div><p>
</p><p>
Poprzednie podręczniki zalecały dobranie bitrate i rozdzielczości w sposób
bazujący na podejściu "bity na piksel", ale z powyższych powodów zazwyczaj nie
jest to prawidłowe.
Lepszym przybliżeniem zdaje się skalowanie bitrate proporcjonalnie do
pierwiastka kwadratowego z rozdzielczości, czyli film 320x240 i 400 kbit/s
powinien być podobny do 640x480 i 800 kbit/s.
Nie zostało to jednak zweryfikowane ani teoretycznie ani empirycznie.
Dodatkowo, ponieważ filmy są bardzo zróżnicowane jeśli chodzi o szum,
szczegóły, ilość ruchu itp. bezsensowne jest podawanie ogólnych zaleceń na bity
na przekątą (analogia bitów na piksel używająca pierwiastka).
</p><p>
Omówiliśmy więc problemy z wyborem bitrate i rozdzielczości.
</p><div class="sect3" title="10.1.5.1. Obliczanie rozdzielczości"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-resolution-bitrate-compute"></a>10.1.5.1. Obliczanie rozdzielczości</h4></div></div></div><p>
Następne kroki przeprowadzą Cię przez obliczenie rozdzielczości dla Twojego
filmu bez zniekształcania go za bardzo, biorąc pod uwagę kilka typów informacji
o źródłowym filmie.
Najpierw powinieneś policzyć zakodowane proporcje:
<code class="systemitem">ARc = (Wc x (ARa / PRdvd )) / Hc</code>

</p><div class="itemizedlist" title="gdzie:"><p class="title"><b>gdzie:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Hc i Wc to wysokość i szerokość skadrowanego filmu.
</p></li><li class="listitem"><p>
  ARa do wyświetlane proporcje, zazwyczaj 4/3 lub 16/9.
</p></li><li class="listitem"><p>
  PRdvd to proporcje na DVD równe 1,25=(720*576) dla DVD PAL i 1,5=(720/480) dla
  VD NTSC.
</p></li></ul></div><p>
</p><p>
Potem możesz policzyć rozdzielczość X i Y, zgodnie z dobranym wskażnikiem
Jakości Kompresji (Compression Quality, CQ):
<code class="systemitem">RozY = INT(Pierw( 1000*Bitrate/25/ARc/CQ )/16) * 16</code>
i
<code class="systemitem">RozX = INT( ResY * ARc / 16) * 16</code>,
gdzie INT oznacza zaokrąglenie do liczby całkowitej.
</p><p>
Dobrze, ale co to jest CQ?
CQ reprezentuje ilość bitów na piksel i klatkę kodowania.
Z grubsza biorąc, im większe CQ tym mniejsza szansa na zobaczenie artefaktów
kodowania.
Jednakże, jeśli masz docelową wielkość filmu (na przykład 1 lub 2 płyty CD),
masz ograniczoną ilość bitów do zużycia; dlatego musisz znaleźć równowagę
między poziomem kompresji i jakością.
</p><p>
CQ zależy od bitrate, efektywności kodeka video i rozdzielczości filmu.
Żeby podnieść CQ zazwyczej zmniejszysz film, ponieważ bitrate jest funkcją docelowej wielkości i długości filmu, które są stałe.
Przy użyciu kodeków MPEG-4 ASP, takich jak
<code class="systemitem">Xvid</code> i
<code class="systemitem">libavcodec</code>, CQ niższe niż 0,18
zazwyczaj daje kiepski obraz, ponieważ nie ma dość bitów by zakodować
informacje z każdego makrobloku.
(MPEG4, jak wiele innych kodeków, grupuje piksele w bloki żeby
skompresować obraz. Jeśli nie ma dość bitów widać krawędzie tych bloków.)
Dlatego też mądrze jest wybrać CQ w zakresie 0,20 do 0,22 na film jednopłytkowy
i 0,26-0,28 na dwupłytkowy przy standardowych opcjach kodowania.
Bardziej zaawansowane opcje kodowania, takie jak te podane tutaj dla
<a class="link" href="#menc-feat-mpeg4-lavc-example-settings" title="10.3.4. Encoding setting examples"><code class="systemitem">libavcodec</code></a>
i
<a class="link" href="#menc-feat-xvid-example-settings" title="10.4.4. Encoding setting examples"><code class="systemitem">Xvid</code></a>
powinny umożliwić otrzymanie takiej samej jakości z CQ w zakresie 0,18 do 0,20
na 1 CD i 0,24 do 0,26 na 2 CD.
Z kodekami MPEG-4 AVC, takimi jak
<code class="systemitem">x264</code>, możesz używać CQ w zakresie
0,14 do 0,16 przy standardowych opcjach
a powinno się też udać zejść do 0,10 do 0,12 z
<a class="link" href="#menc-feat-x264-example-settings" title="10.5.2. Encoding setting examples">zaawansowanymi opcjami kodowania <code class="systemitem">x264</code></a>.
</p><p>
Pamiętajmy, że CQ jest tylko przydatnym odnośnikiem, zależnym od kodowanego
filmu. CQ równe ,018 może wyglądać dobrze przy Bergmanie, w przeciwieństwie do
filmu takiego jak Martix, który zaawiera wiele bardzo ruchliwych scen.
Z drugiej strony, bezsensowne jest podnoszenie CQ powyżej 0,30 jako że marnuje się bity bez zauważalnej poprawy jakości.
Pamiętajmy też że, jak było wspomniane wcześniej, filmy w niższej
rozdzielczości potrzebują większego CQ (w porównaniu do na przykład
rozdzielczości DVD) żeby dobrze wyglądać.
</p></div></div><div class="sect2" title="10.1.6. Filtrowanie"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-filtering"></a>10.1.6. Filtrowanie</h3></div></div></div><p>
Bardzo ważne do robienia dobrych kodowań jest nauczenie się posługiwania
systemem filtrów <span class="application">MEncodera</span>.
Całe przetwarzanie video jest wykonywane przez filtry – kadrowanie, skalowanie,
dopasowywanie kolorów, usuwanie szumu, telecine, odwrócone telecine, usuwanie
bloków żeby wymienić choć część.
Poza dużą ilością obsługiwanych formatów wejściowych to właśnie zakres
dostępnych filtrów jest jedną z głównych przewag
<span class="application">MEncodera</span> nad podobnymi programami.
</p><p>
Filtry są ładowane do łańcucha przy pomocy opcji -vf:

</p><pre class="screen">-vf filtr1=opcje,filtr2=opcje,...</pre><p>

Większość filtrów przyjmuje kilka parametrów numerycznych oddzielanych
dwukropkami, ale dokładna składnia zależy od filtru więc szczegóły odnośnie
filtrów, które chcesz zastosować, znajdziesz na stronie man.
</p><p>
Filtry działają na filmie w kolejnoścy w jakiej zostały załadowane.
Na przykład następujący łańcuch:

</p><pre class="screen">-vf crop=688:464:12:4,scale=640:464</pre><p>

najpierw skadruje fragment 688x464 filmu z lewym górnym rogiem na pozycji
(12,4) a potem zmniejszy rozdzielczość wyniku do 640x464.
</p><p>
Niektóre filtry trzeba ładować na początku lub blisko początku łańcucha,
ponieważ korzystają one z informacji którą następne filtry mogą zgubić lub
unieważnić.
Sztandarowym przykłądem jest <tt class="option">pp</tt> (postprocessing, tylko gdy
wykonuje operacje usuwania bloków lub pierścieni),
<tt class="option">spp</tt> (inny postprocessor do usuwania artefaktów MPEG),
<tt class="option">pullup</tt> (odwrócone telecine) i
<tt class="option">softpulldown</tt> (konwertuje miękkie telecine na twarde).
</p><p>
W ogólności chcesz przeprowadzać jak najmniej filtrowania żeby film pozostał
możliwie bliski oryginałowi.
Kadrowanie często jest niezbęne (jak opisano powyżej) ale staraj się uniknąć
skalowania.
Chociaż czasami zmniejszenie rozdzielczości jest lepszym wyjściem niż użycie
wyższego kwantyzatora, chcemy uniknąć obu: pamiętajmy, że od początku
zdecydowaliśmy się wybrać jakość kosztem wielkości.
</p><p>
Nie należy też dostosowywać gammy, kontrastu, jasności itp.
Co wygląda dobrze na Twoim ekranie może nie być tak dobre na innych.
Takie dostrojenia powinny być wykonywane tylko przy odtwarzaniu.
</p><p>
Jedną rzeczą którą możesz chcieć zrobić, jest przepuszczenie filmu przez bardzo
lekkie usuwanie szumów, takie jak <tt class="option">-vf hqdn3d=2:1:2</tt>.
Znów, to kwestia lepszego zastosowania bitów: po co marnować je na zakodowanie
szumu skoro można dodać ten szum przy odtwarzaniu?
Zwiększenie parametrów dla <tt class="option">hqdn3d</tt> jeszcze bardziej poprawi
kompresowalność, ale jeśli przesadzisz to zauważalnie zniekształcisz obraz.
Wartości sugerowane powyżej (<tt class="option">2:1:2</tt>) są dość konserwatywne; nie
bój się eksperymentować z wyższymi wartościami i samemu oceniać wyniki.
</p></div><div class="sect2" title="10.1.7. Przeplot i telecine"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-interlacing"></a>10.1.7. Przeplot i telecine</h3></div></div></div><p>
Prawie wszystkie filmy są kręcone przy 24 fps.
Ponieważ NTSC ma 30000/1001 fps potrzebna jest pewna przeróbka żeby film 24 fps
mógł być wyświetlany z prawidłową szybkością NTSC.
Ten proces nazywa się 3:2 pulldown, często zwany też telecine (ponieważ jest
używany przy konwersji z kina do telewizji) i, w uproszczeniu, jest to
spowolnienie filmu do 24000/1001 fps i powtórzenie co czwartej klatki.
</p><p>
Filmy DVD PAL, odtwarzanie przy 25 fps, nie wymagają żadnego specjalnego
traktowania.
(Technicznie rzecz ujmując, PAL może być poddany telecine, nazywanemu 2:2
pulldown, ale w praktyce nie jest to problemem.)
Po prostu film 24 fps jest odtwarzany przy 25 fps.
W wyniku tego film jest odtwarzany odrobinkę szybciej, ale jeśli nie masz
nieziemskich zmysłów to tego nie zauważysz.
Większość DVD PAL ma skorygowaną wysokość dźwięku, więc kiedy są odtwarzane
przy 25 fps dźwięk będzie brzmiał poprawnie, mimo tego że ścieżka dźwiekowa
(jak i cały film) jest o 4% krótsza niż DVD NTSC.
</p><p>
Ponieważ film na DVD PAL nie został zmieniony, nie ma powodu za bardzo
przejmować się framerate.
Oryginał ma 25 fps i Twój rip też będzie miał 25 fps.
Jednak jeśli ripujesz film z DVD NTSC możesz być zmuszony do zastosowania
odwrotnego telecine.
</p><p>
Dla filmów nagrywanych przy 24 fps obraz na DVD NTSC jest albo poddany telecine
na 30000/1001 albo jest progresywny przy 24000/1001 i przeznaczony do poddania
telecine w locie przez odtwarzacz DVD.
Z drugiej strony seriale telewizyjne zazwyczaj mają tylko przeplot, nie są poddane telecine.
Nie jest to reguła: Niektóre seriale (na przykład Buffy Łowca Wampirów) mają
przeplot, a inne są mieszanką progresywnego i przeplotu (Angel, 24).
</p><p>
Jest wysoce zalecane żebyś przeczytał sekcję

<a class="link" href="#menc-feat-telecine" title="10.2. How to deal with telecine and interlacing within NTSC DVDs">How to deal with telecine and interlacing in NTSC DVDs</a>
żeby dowiedzieć się jak sobie radzić z różnymi możliwościami.
</p><p>
Jednak jeśli zazwyczaj tylko ripujesz filmy, prawdopodobnie masz doczynienia
z filmem 24 fps progresywnym lub poddanym telecine, a w takim przypadku możesz
użyć filtra <tt class="option">pullup</tt> podając parametr
<tt class="option">-vf pullup,softskip</tt>.
</p></div><div class="sect2" title="10.1.8. Encoding interlaced video"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-encoding-interlaced"></a>10.1.8. Encoding interlaced video</h3></div></div></div><p>
If the movie you want to encode is interlaced (NTSC video or
PAL video), you will need to choose whether you want to
deinterlace or not.
While deinterlacing will make your movie usable on progressive
scan displays such a computer monitors and projectors, it comes
at a cost: The fieldrate of 50 or 60000/1001 fields per second
is halved to 25 or 30000/1001 frames per second, and roughly half of
the information in your movie will be lost during scenes with
significant motion.
</p><p>
Therefore, if you are encoding for high quality archival purposes,
it is recommended not to deinterlace.
You can always deinterlace the movie at playback time when
displaying it on progressive scan devices.
The power of currently available computers forces players to use a
deinterlacing filter, which results in a slight degradation in
image quality.
But future players will be able to mimic the interlaced display of
a TV, deinterlacing to full fieldrate and interpolating 50 or
60000/1001 entire frames per second from the interlaced video.
</p><p>
Special care must be taken when working with interlaced video:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Crop height and y-offset must be multiples of 4.
</p></li><li class="listitem"><p>
  Any vertical scaling must be performed in interlaced mode.
</p></li><li class="listitem"><p>
  Postprocessing and denoising filters may not work as expected
  unless you take special care to operate them a field at a time,
  and they may damage the video if used incorrectly.
</p></li></ol></div><p>
With these things in mind, here is our first example:
</p><pre class="screen">
mencoder <em class="replaceable"><code>capture.avi</code></em> -mc 0 -oac lavc -ovc lavc -lavcopts \
    vcodec=mpeg2video:vbitrate=6000:ilme:ildct:acodec=mp2:abitrate=224
</pre><p>
Note the <tt class="option">ilme</tt> and <tt class="option">ildct</tt> options.
</p></div><div class="sect2" title="10.1.9. Notes on Audio/Video synchronization"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-av-sync"></a>10.1.9. Notes on Audio/Video synchronization</h3></div></div></div><p>
<span class="application">MEncoder</span>'s audio/video synchronization
algorithms were designed with the intention of recovering files with
broken sync.
However, in some cases they can cause unnecessary skipping and duplication of
frames, and possibly slight A/V desync, when used with proper input
(of course, A/V sync issues apply only if you process or copy the
audio track while transcoding the video, which is strongly encouraged).
Therefore, you may have to switch to basic A/V sync with
the <tt class="option">-mc 0</tt> option, or put this in your
<code class="systemitem">~/.mplayer/mencoder</code> config file, as long as
you are only working with good sources (DVD, TV capture, high quality
MPEG-4 rips, etc) and not broken ASF/RM/MOV files.
</p><p>
If you want to further guard against strange frame skips and
duplication, you can use both <tt class="option">-mc 0</tt> and
<tt class="option">-noskip</tt>.
This will prevent <span class="emphasis"><em>all</em></span> A/V sync, and copy frames
one-to-one, so you cannot use it if you will be using any filters that
unpredictably add or drop frames, or if your input file has variable
framerate!
Therefore, using <tt class="option">-noskip</tt> is not in general recommended.
</p><p>
The so-called "three-pass" audio encoding which
<span class="application">MEncoder</span> supports has been reported to cause A/V
desync.
This will definitely happen if it is used in conjunction with certain
filters, therefore, it is now recommended <span class="emphasis"><em>not</em></span> to
use three-pass audio mode.
This feature is only left for compatibility purposes and for expert
users who understand when it is safe to use and when it is not.
If you have never heard of three-pass mode before, forget that we
even mentioned it!
</p><p>
There have also been reports of A/V desync when encoding from stdin
with <span class="application">MEncoder</span>.
Do not do this! Always use a file or CD/DVD/etc device as input.
</p></div><div class="sect2" title="10.1.10. Choosing the video codec"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-codec"></a>10.1.10. Choosing the video codec</h3></div></div></div><p>
Which video codec is best to choose depends on several factors,
like size, quality, streamability, usability and popularity, some of
which widely depend on personal taste and technical constraints.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Compression efficiency</strong></span>:
  It is quite easy to understand that most newer-generation codecs are
  made to increase quality and compression.
  Therefore, the authors of this guide and many other people suggest that
  you cannot go wrong
  <sup>[<a name="fn-menc-feat-dvd-mpeg4-codec-cpu" href="#ftn.fn-menc-feat-dvd-mpeg4-codec-cpu" class="footnote">1</a>]</sup>
  when choosing MPEG-4 AVC codecs like
  <code class="systemitem">x264</code> instead of MPEG-4 ASP codecs
  such as <code class="systemitem">libavcodec</code> MPEG-4 or
  <code class="systemitem">Xvid</code>.
  (Advanced codec developers may be interested in reading Michael
  Niedermayer's opinion on
  "<a class="ulink" href="http://guru.multimedia.cx/?p=10" target="_top">why MPEG4-ASP sucks</a>".)
  Likewise, you should get better quality using MPEG-4 ASP than you
  would with MPEG-2 codecs.
  </p><p>
  However, newer codecs which are in heavy development can suffer from
  bugs which have not yet been noticed and which can ruin an encode.
  This is simply the tradeoff for using bleeding-edge technology.
  </p><p>
  What is more, beginning to use a new codec requires that you spend some
  time becoming familiar with its options, so that you know what
  to adjust to achieve a desired picture quality.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Hardware compatibility</strong></span>:
  It usually takes a long time for standalone video players to begin to
  include support for the latest video codecs.
  As a result, most only support MPEG-1 (like VCD, XVCD and KVCD), MPEG-2
  (like DVD, SVCD and KVCD) and MPEG-4 ASP (like DivX,
  <code class="systemitem">libavcodec</code>'s LMP4 and
  <code class="systemitem">Xvid</code>)
  (Beware: Usually, not all MPEG-4 ASP features are supported).
  Please refer to the technical specs of your player (if they are available),
  or google around for more information.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Best quality per encoding time</strong></span>:
  Codecs that have been around for some time (such as
  <code class="systemitem">libavcodec</code> MPEG-4 and
  <code class="systemitem">Xvid</code>) are usually heavily
  optimized with all kinds of smart algorithms and SIMD assembly code.
  That is why they tend to yield the best quality per encoding time ratio.
  However, they may have some very advanced options that, if enabled,
  will make the encode really slow for marginal gains.
  </p><p>
  If you are after blazing speed you should stick around the default
  settings of the video codec (although you should still try the other
  options which are mentioned in other sections of this guide).
  </p><p>
  You may also consider choosing a codec which can do multi-threaded
  processing, though this is only useful for users of machines with
  several CPUs.
  <code class="systemitem">libavcodec</code> MPEG-4 does
  allow that, but speed gains are limited, and there is a slight
  negative effect on picture quality.
  <code class="systemitem">Xvid</code>'s multi-threaded encoding,
  activated by the <tt class="option">threads</tt> option, can be used to
  boost encoding speed — by about 40-60% in typical cases —
  with little if any picture degradation.
  <code class="systemitem">x264</code> also allows multi-threaded
  encoding, which currently speeds up encoding by 94% per CPU core while
  lowering PSNR between 0.005dB and 0.01dB on a typical setup.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Personal taste</strong></span>:
  This is where it gets almost irrational: For the same reason that some
  hung on to DivX 3 for years when newer codecs were already doing wonders,
  some folks will prefer <code class="systemitem">Xvid</code>
  or <code class="systemitem">libavcodec</code> MPEG-4 over
  <code class="systemitem">x264</code>.
  </p><p>
  You should make your own judgement; do not take advice from people who
  swear by one codec.
  Take a few sample clips from raw sources and compare different
  encoding options and codecs to find one that suits you best.
  The best codec is the one you master, and the one that looks
  best to your eyes on your display
  <sup>[<a name="fn-menc-feat-dvd-mpeg4-codec-playback" href="#ftn.fn-menc-feat-dvd-mpeg4-codec-playback" class="footnote">2</a>]</sup>!
  </p></li></ul></div><p>
Please refer to the section
<a class="link" href="#menc-feat-selecting-codec" title="9.1. Wybieranie kodeka i formatu">selecting codecs and container formats</a>
to get a list of supported codecs.
</p></div><div class="sect2" title="10.1.11. Audio"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-audio"></a>10.1.11. Audio</h3></div></div></div><p>
Audio is a much simpler problem to solve: if you care about quality, just
leave it as is.
Even AC-3 5.1 streams are at most 448Kbit/s, and they are worth every bit.
You might be tempted to transcode the audio to high quality Vorbis, but
just because you do not have an A/V receiver for AC-3 pass-through today
does not mean you will not have one tomorrow. Future-proof your DVD rips by
preserving the AC-3 stream.
You can keep the AC-3 stream either by copying it directly into the video
stream <a class="link" href="#menc-feat-mpeg4" title='9.3. Kodowanie dwuprzebiegowe MPEG-4 ("DivX")'>during the encoding</a>.
You can also extract the AC-3 stream in order to mux it into containers such
as NUT or Matroska.
</p><pre class="screen">
mplayer <em class="replaceable"><code>source_file.vob</code></em> -aid 129 -dumpaudio -dumpfile <em class="replaceable"><code>sound.ac3</code></em>
</pre><p>
will dump into the file <em class="replaceable"><code>sound.ac3</code></em> the
audio track number 129 from the file
<em class="replaceable"><code>source_file.vob</code></em> (NB: DVD VOB files
usually use a different audio numbering,
which means that the VOB audio track 129 is the 2nd audio track of the file).
</p><p>
But sometimes you truly have no choice but to further compress the
sound so that more bits can be spent on the video.
Most people choose to compress audio with either MP3 or Vorbis audio codecs.
While the latter is a very space-efficient codec, MP3 is better supported
by hardware players, although this trend is changing.
</p><p>
Do <span class="emphasis"><em>not</em></span> use <tt class="option">-nosound</tt> when encoding
a file with audio, even if you will be encoding and muxing audio
separately later.
Though it may work in ideal cases, using <tt class="option">-nosound</tt> is
likely to hide some problems in your encoding command line setting.
In other words, having a soundtrack during your encode assures you that,
provided you do not see messages such as
<span class="quote">„<span class="quote">Too many audio packets in the buffer</span>”</span>, you will be able
to get proper sync.
</p><p>
You need to have <span class="application">MEncoder</span> process the sound.
You can for example copy the original soundtrack during the encode with
<tt class="option">-oac copy</tt> or convert it to a "light" 4 kHz mono WAV
PCM with <tt class="option">-oac pcm -channels 1 -srate 4000</tt>.
Otherwise, in some cases, it will generate a video file that will not sync
with the audio.
Such cases are when the number of video frames in the source file does
not match up to the total length of audio frames or whenever there
are discontinuities/splices where there are missing or extra audio frames.
The correct way to handle this kind of problem is to insert silence or
cut audio at these points.
However <span class="application">MPlayer</span> cannot do that, so if you
demux the AC-3 audio and encode it with a separate app (or dump it to PCM with
<span class="application">MPlayer</span>), the splices will be left incorrect
and the only way to correct them is to drop/duplicate video frames at the
splice.
As long as <span class="application">MEncoder</span> sees the audio when it is
encoding the video, it can do this dropping/duping (which is usually OK
since it takes place at full black/scene change), but if
<span class="application">MEncoder</span> cannot see the audio, it will just
process all frames as-is and they will not fit the final audio stream when
you for example merge your audio and video track into a Matroska file.
</p><p>
First of all, you will have to convert the DVD sound into a WAV file that the
audio codec can use as input.
For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>source_file.vob</code></em> -ao pcm:file=<em class="replaceable"><code>destination_sound.wav</code></em> \
    -vc dummy -aid 1 -vo null
</pre><p>
will dump the second audio track from the file
<em class="replaceable"><code>source_file.vob</code></em> into the file
<em class="replaceable"><code>destination_sound.wav</code></em>.
You may want to normalize the sound before encoding, as DVD audio tracks
are commonly recorded at low volumes.
You can use the tool <span class="application">normalize</span> for instance,
which is available in most distributions.
If you are using Windows, a tool such as <span class="application">BeSweet</span>
can do the same job.
You will compress in either Vorbis or MP3.
For example:
</p><pre class="screen">oggenc -q1 <em class="replaceable"><code>destination_sound.wav</code></em></pre><p>
will encode <em class="replaceable"><code>destination_sound.wav</code></em> with
the encoding quality 1, which is roughly equivalent to 80Kb/s, and
is the minimum quality at which you should encode if you care about
quality.
Please note that <span class="application">MEncoder</span> currently cannot
mux Vorbis audio tracks
into the output file because it only supports AVI and MPEG
containers as an output, each of which may lead to audio/video
playback synchronization problems with some players when the AVI file
contain VBR audio streams such as Vorbis.
Do not worry, this document will show you how you can do that with third
party programs.
</p></div><div class="sect2" title="10.1.12. Muxing"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-muxing"></a>10.1.12. Muxing</h3></div></div></div><p>
Now that you have encoded your video, you will most likely want
to mux it with one or more audio tracks into a movie container, such
as AVI, MPEG, Matroska or NUT.
<span class="application">MEncoder</span> is currently only able to natively output
audio and video into MPEG and AVI container formats.
for example:
</p><pre class="screen">
mencoder -oac copy -ovc copy  -o <em class="replaceable"><code>output_movie.avi</code></em> \
    -audiofile <em class="replaceable"><code>input_audio.mp2</code></em> <em class="replaceable"><code>input_video.avi</code></em>
</pre><p>
This would merge the video file <em class="replaceable"><code>input_video.avi</code></em>
and the audio file <em class="replaceable"><code>input_audio.mp2</code></em>
into the AVI file <em class="replaceable"><code>output_movie.avi</code></em>.
This command works with MPEG-1 layer I, II and III (more commonly known
as MP3) audio, WAV and a few other audio formats too.
</p><p>
<span class="application">MEncoder</span> features experimental support for
<code class="systemitem">libavformat</code>, which is a
library from the FFmpeg project that supports muxing and demuxing
a variety of containers.
For example:
</p><pre class="screen">
mencoder -oac copy -ovc copy -o <em class="replaceable"><code>output_movie.asf</code></em> -audiofile <em class="replaceable"><code>input_audio.mp2</code></em> \
    <em class="replaceable"><code>input_video.avi</code></em> -of lavf -lavfopts format=asf
</pre><p>
This will do the same thing as the previous example, except that
the output container will be ASF.
Please note that this support is highly experimental (but getting
better every day), and will only work if you compiled
<span class="application">MPlayer</span> with the support for
<code class="systemitem">libavformat</code> enabled (which
means that a pre-packaged binary version will not work in most cases).
</p><div class="sect3" title="10.1.12.1. Improving muxing and A/V sync reliability"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-filter-issues"></a>10.1.12.1. Improving muxing and A/V sync reliability</h4></div></div></div><p>
You may experience some serious A/V sync problems while trying to mux
your video and some audio tracks, where no matter how you adjust the
audio delay, you will never get proper sync.
That may happen when you use some video filters that will drop or
duplicate some frames, like the inverse telecine filters.
It is strongly encouraged to append the <tt class="option">harddup</tt> video
filter at the end of the filter chain to avoid this kind of problem.
</p><p>
Without <tt class="option">harddup</tt>, if <span class="application">MEncoder</span>
wants to duplicate a frame, it relies on the muxer to put a mark on the
container so that the last frame will be displayed again to maintain
sync while writing no actual frame.
With <tt class="option">harddup</tt>, <span class="application">MEncoder</span>
will instead just push the last frame displayed again into the filter
chain.
This means that the encoder receives the <span class="emphasis"><em>exact</em></span>
same frame twice, and compresses it.
This will result in a slightly bigger file, but will not cause problems
when demuxing or remuxing into other container formats.
</p><p>
You may also have no choice but to use <tt class="option">harddup</tt> with
container formats that are not too tightly linked with
<span class="application">MEncoder</span> such as the ones supported through
<code class="systemitem">libavformat</code>, which may not
support frame duplication at the container level.
</p></div><div class="sect3" title="10.1.12.2. Limitations of the AVI container"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-avi-limitations"></a>10.1.12.2. Limitations of the AVI container</h4></div></div></div><p>
Although it is the most widely-supported container format after MPEG-1,
AVI also has some major drawbacks.
Perhaps the most obvious is the overhead.
For each chunk of the AVI file, 24 bytes are wasted on headers and index.
This translates into a little over 5 MB per hour, or 1-2.5%
overhead for a 700 MB movie. This may not seem like much, but it could
mean the difference between being able to use 700 kbit/sec video or
714 kbit/sec, and every bit of quality counts.
</p><p>
In addition this gross inefficiency, AVI also has the following major
limitations:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Only fixed-fps content can be stored. This is particularly limiting
  if the original material you want to encode is mixed content, for
  example a mix of NTSC video and film material.
  Actually there are hacks that can be used to store mixed-framerate
  content in AVI, but they increase the (already huge) overhead
  fivefold or more and so are not practical.
</p></li><li class="listitem"><p>
  Audio in AVI files must be either constant-bitrate (CBR) or
  constant-framesize (i.e. all frames decode to the same number of
  samples).
  Unfortunately, the most efficient codec, Vorbis, does not meet
  either of these requirements.
  Therefore, if you plan to store your movie in AVI, you will have to
  use a less efficient codec such as MP3 or AC-3.
</p></li></ol></div><p>
Having said all that, <span class="application">MEncoder</span> does not
currently support variable-fps output or Vorbis encoding.
Therefore, you may not see these as limitations if
<span class="application">MEncoder</span> is the
only tool you will be using to produce your encodes.
However, it is possible to use <span class="application">MEncoder</span>
only for video encoding, and then use external tools to encode
audio and mux it into another container format.
</p></div><div class="sect3" title="10.1.12.3. Muxing into the Matroska container"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-matroska"></a>10.1.12.3. Muxing into the Matroska container</h4></div></div></div><p>
Matroska is a free, open standard container format, aiming
to offer a lot of advanced features, which older containers
like AVI cannot handle.
For example, Matroska supports variable bitrate audio content
(VBR), variable framerates (VFR), chapters, file attachments,
error detection code (EDC) and modern A/V Codecs like "Advanced Audio
Coding" (AAC), "Vorbis" or "MPEG-4 AVC" (H.264), next to nothing
handled by AVI.
</p><p>
The tools required to create Matroska files are collectively called
<span class="application">mkvtoolnix</span>, and are available for most
Unix platforms as well as <span class="application">Windows</span>.
Because Matroska is an open standard you may find other
tools that suit you better, but since mkvtoolnix is the most
common, and is supported by the Matroska team itself, we will
only cover its usage.
</p><p>
Probably the easiest way to get started with Matroska is to use
<span class="application">MMG</span>, the graphical frontend shipped with
<span class="application">mkvtoolnix</span>, and follow the
<a class="ulink" href="http://www.bunkus.org/videotools/mkvtoolnix/doc/mkvmerge-gui.html" target="_top">guide to mkvmerge GUI (mmg)</a>
</p><p>
You may also mux audio and video files using the command line:
</p><pre class="screen">
mkvmerge -o <em class="replaceable"><code>output.mkv</code></em> <em class="replaceable"><code>input_video.avi</code></em> <em class="replaceable"><code>input_audio1.mp3</code></em> <em class="replaceable"><code>input_audio2.ac3</code></em>
</pre><p>
This would merge the video file <em class="replaceable"><code>input_video.avi</code></em>
and the two audio files <em class="replaceable"><code>input_audio1.mp3</code></em>
and <em class="replaceable"><code>input_audio2.ac3</code></em> into the Matroska
file <em class="replaceable"><code>output.mkv</code></em>.
Matroska, as mentioned earlier, is able to do much more than that, like
multiple audio tracks (including fine-tuning of audio/video
synchronization), chapters, subtitles, splitting, etc...
Please refer to the documentation of those applications for
more details.
</p></div></div></div><div class="sect1" title="10.2. How to deal with telecine and interlacing within NTSC DVDs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-telecine"></a>10.2. How to deal with telecine and interlacing within NTSC DVDs</h2></div></div></div><div class="sect2" title="10.2.1. Introduction"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-intro"></a>10.2.1. Introduction</h3></div></div></div><p title="What is telecine?"><b>What is telecine? </b>
If you do not understand much of what is written in this document, read the
<a class="ulink" href="http://en.wikipedia.org/wiki/Telecine" target="_top">Wikipedia entry on telecine</a>.
It is an understandable and reasonably comprehensive
description of what telecine is.
</p><p title="A note about the numbers."><b>A note about the numbers. </b>
Many documents, including the article linked above, refer to the fields
per second value of NTSC video as 59.94 and the corresponding frames
per second values as 29.97 (for telecined and interlaced) and 23.976
(for progressive). For simplicity, some documents even round these
numbers to 60, 30, and 24.
</p><p>
Strictly speaking, all those numbers are approximations. Black and
white NTSC video was exactly 60 fields per second, but 60000/1001
was later chosen to accommodate color data while remaining compatible
with contemporary black and white televisions. Digital NTSC video
(such as on a DVD) is also 60000/1001 fields per second. From this,
interlaced and telecined video are derived to be 30000/1001 frames
per second; progressive video is 24000/1001 frames per second.
</p><p>
Older versions of the <span class="application">MEncoder</span> documentation
and many archived mailing list posts refer to 59.94, 29.97, and 23.976.
All <span class="application">MEncoder</span> documentation has been updated
to use the fractional values, and you should use them too.
</p><p>
<tt class="option">-ofps 23.976</tt> is incorrect.
<tt class="option">-ofps 24000/1001</tt> should be used instead.
</p><p title="How telecine is used."><b>How telecine is used. </b>
All video intended to be displayed on an NTSC
television set must be 60000/1001 fields per second. Made-for-TV movies
and shows are often filmed directly at 60000/1001 fields per second, but
the majority of cinema is filmed at 24 or 24000/1001 frames per
second. When cinematic movie DVDs are mastered, the video is then
converted for television using a process called telecine.
</p><p>
On a DVD, the video is never actually stored as 60000/1001 fields per
second. For video that was originally 60000/1001, each pair of fields is
combined to form a frame, resulting in 30000/1001 frames per
second. Hardware DVD players then read a flag embedded in the video
stream to determine whether the odd- or even-numbered lines should
form the first field.
</p><p>
Usually, 24000/1001 frames per second content stays as it is when
encoded for a DVD, and the DVD player must perform telecining
on-the-fly. Sometimes, however, the video is telecined
<span class="emphasis"><em>before</em></span> being stored on the DVD; even though it
was originally 24000/1001 frames per second, it becomes 60000/1001 fields per
second. When it is stored on the DVD, pairs of fields are combined to form
30000/1001 frames per second.
</p><p>
When looking at individual frames formed from 60000/1001 fields per
second video, telecined or otherwise, interlacing is clearly visible
wherever there is any motion, because one field (say, the
even-numbered lines) represents a moment in time 1/(60000/1001)
seconds later than the other. Playing interlaced video on a computer
looks ugly both because the monitor is higher resolution and because
the video is shown frame-after-frame instead of field-after-field.
</p><div class="itemizedlist" title="Notes:"><p class="title"><b>Notes:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  This section only applies to NTSC DVDs, and not PAL.
</p></li><li class="listitem"><p>
  The example <span class="application">MEncoder</span> lines throughout the
  document are <span class="bold"><strong>not</strong></span> intended for
  actual use. They are simply the bare minimum required to encode the
  pertaining video category. How to make good DVD rips or fine-tune
  <code class="systemitem">libavcodec</code> for maximal
  quality is not within the scope of this section; refer to other
  sections within the <a class="link" href="#encoding-guide" title="Rozdział 10. Kodowanie przy użyciu MEncodera">MEncoder encoding
  guide</a>.
</p></li><li class="listitem"><p>
  There are a couple footnotes specific to this guide, linked like this:
  <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Footnotes">[1]</a>
</p></li></ul></div></div><div class="sect2" title="10.2.2. How to tell what type of video you have"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-ident"></a>10.2.2. How to tell what type of video you have</h3></div></div></div><div class="sect3" title="10.2.2.1. Progressive"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-progressive"></a>10.2.2.1. Progressive</h4></div></div></div><p>
Progressive video was originally filmed at 24000/1001 fps, and stored
on the DVD without alteration.
</p><p>
When you play a progressive DVD in <span class="application">MPlayer</span>,
<span class="application">MPlayer</span> will print the following line as
soon as the movie begins to play:
</p><pre class="screen">
demux_mpg: 24000/1001 fps progressive NTSC content detected, switching framerate.
</pre><p>
From this point forward, demux_mpg should never say it finds
"30000/1001 fps NTSC content."
</p><p>
When you watch progressive video, you should never see any
interlacing. Beware, however, because sometimes there is a tiny bit
of telecine mixed in where you would not expect. I have encountered TV
show DVDs that have one second of telecine at every scene change, or
at seemingly random places. I once watched a DVD that had a
progressive first half, and the second half was telecined. If you
want to be <span class="emphasis"><em>really</em></span> thorough, you can scan the
entire movie:
</p><pre class="screen">mplayer dvd://1 -nosound -vo null -benchmark</pre><p>
Using <tt class="option">-benchmark</tt> makes
<span class="application">MPlayer</span> play the movie as quickly as it
possibly can; still, depending on your hardware, it can take a
while. Every time demux_mpg reports a framerate change, the line
immediately above will show you the time at which the change
occurred.
</p><p>
Sometimes progressive video on DVDs is referred to as
"soft-telecine" because it is intended to
be telecined by the DVD player.
</p></div><div class="sect3" title="10.2.2.2. Telecined"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-telecined"></a>10.2.2.2. Telecined</h4></div></div></div><p>
Telecined video was originally filmed at 24000/1001, but was telecined
<span class="emphasis"><em>before</em></span> it was written to the DVD.
</p><p>
<span class="application">MPlayer</span> does not (ever) report any
framerate changes when it plays telecined video.
</p><p>
Watching a telecined video, you will see interlacing artifacts that
seem to "blink": they repeatedly appear and disappear.
You can look closely at this by
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><pre class="screen">mplayer dvd://1</pre></li><li class="listitem"><p>
  Seek to a part with motion.
</p></li><li class="listitem"><p>
  Use the <span class="keycap"><b>.</b></span> key to step forward one frame at a time.
</p></li><li class="listitem"><p>
  Look at the pattern of interlaced-looking and progressive-looking
  frames. If the pattern you see is PPPII,PPPII,PPPII,... then the
  video is telecined. If you see some other pattern, then the video
  may have been telecined using some non-standard method;
  <span class="application">MEncoder</span> cannot losslessly convert
  non-standard telecine to progressive. If you do not see any
  pattern at all, then it is most likely interlaced.
</p></li></ol></div><p>
</p><p>
Sometimes telecined video on DVDs is referred to as
"hard-telecine". Since hard-telecine is already 60000/1001 fields
per second, the DVD player plays the video without any manipulation.
</p><p>
Another way to tell if your source is telecined or not is to play
the source with the <tt class="option">-vf pullup</tt> and <tt class="option">-v</tt>
command line options to see how <tt class="option">pullup</tt> matches frames.
If the source is telecined, you should see on the console a 3:2 pattern
with <code class="systemitem">0+.1.+2</code> and <code class="systemitem">0++1</code>
alternating.
This technique has the advantage that you do not need to watch the
source to identify it, which could be useful if you wish to automate
the encoding procedure, or to carry out said procedure remotely via
a slow connection.
</p></div><div class="sect3" title="10.2.2.3. Interlaced"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-interlaced"></a>10.2.2.3. Interlaced</h4></div></div></div><p>
Interlaced video was originally filmed at 60000/1001 fields per second,
and stored on the DVD as 30000/1001 frames per second. The interlacing effect
(often called "combing") is a result of combining pairs of
fields into frames. Each field is supposed to be 1/(60000/1001) seconds apart,
and when they are displayed simultaneously the difference is apparent.
</p><p>
As with telecined video, <span class="application">MPlayer</span> should
not ever report any framerate changes when playing interlaced content.
</p><p>
When you view an interlaced video closely by frame-stepping with the
<span class="keycap"><b>.</b></span> key, you will see that every single frame is interlaced.
</p></div><div class="sect3" title="10.2.2.4. Mixed progressive and telecine"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-mixedpt"></a>10.2.2.4. Mixed progressive and telecine</h4></div></div></div><p>
All of a "mixed progressive and telecine" video was originally
24000/1001 frames per second, but some parts of it ended up being telecined.
</p><p>
When <span class="application">MPlayer</span> plays this category, it will
(often repeatedly) switch back and forth between "30000/1001 fps NTSC"
and "24000/1001 fps progressive NTSC". Watch the bottom of
<span class="application">MPlayer</span>'s output to see these messages.
</p><p>
You should check the "30000/1001 fps NTSC" sections to make sure
they are actually telecine, and not just interlaced.
</p></div><div class="sect3" title="10.2.2.5. Mixed progressive and interlaced"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-mixedpi"></a>10.2.2.5. Mixed progressive and interlaced</h4></div></div></div><p>
In "mixed progressive and interlaced" content, progressive
and interlaced video have been spliced together.
</p><p>
This category looks just like "mixed progressive and telecine",
until you examine the 30000/1001 fps sections and see that they do not have the
telecine pattern.
</p></div></div><div class="sect2" title="10.2.3. How to encode each category"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-encode"></a>10.2.3. How to encode each category</h3></div></div></div><p>
As I mentioned in the beginning, example <span class="application">MEncoder</span>
lines below are <span class="bold"><strong>not</strong></span> meant to actually be used;
they only demonstrate the minimum parameters to properly encode each category.
</p><div class="sect3" title="10.2.3.1. Progressive"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-progressive"></a>10.2.3.1. Progressive</h4></div></div></div><p>
Progressive video requires no special filtering to encode. The only
parameter you need to be sure to use is <tt class="option">-ofps 24000/1001</tt>.
Otherwise, <span class="application">MEncoder</span>
will try to encode at 30000/1001 fps and will duplicate frames.
</p><p>
</p><pre class="screen">mencoder dvd://1 -oac copy -ovc lavc -ofps 24000/1001</pre><p>
</p><p>
It is often the case, however, that a video that looks progressive
actually has very short parts of telecine mixed in. Unless you are
sure, it is safest to treat the video as
<a class="link" href="#menc-feat-telecine-encode-mixedpt" title="10.2.3.4. Mixed progressive and telecine">mixed progressive and telecine</a>.
The performance loss is small
<a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Footnotes">[3]</a>.
</p></div><div class="sect3" title="10.2.3.2. Telecined"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-telecined"></a>10.2.3.2. Telecined</h4></div></div></div><p>
Telecine can be reversed to retrieve the original 24000/1001 content,
using a process called inverse-telecine.
<span class="application">MPlayer</span> contains several filters to
accomplish this; the best filter, <tt class="option">pullup</tt>, is described
in the <a class="link" href="#menc-feat-telecine-encode-mixedpt" title="10.2.3.4. Mixed progressive and telecine">mixed
progressive and telecine</a> section.
</p></div><div class="sect3" title="10.2.3.3. Interlaced"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-interlaced"></a>10.2.3.3. Interlaced</h4></div></div></div><p>
For most practical cases it is not possible to retrieve a complete
progressive video from interlaced content. The only way to do so
without losing half of the vertical resolution is to double the
framerate and try to "guess" what ought to make up the
corresponding lines for each field (this has drawbacks - see method 3).
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Encode the video in interlaced form. Normally, interlacing wreaks
  havoc with the encoder's ability to compress well, but
  <code class="systemitem">libavcodec</code> has two
  parameters specifically for dealing with storing interlaced video a
  bit better: <tt class="option">ildct</tt> and <tt class="option">ilme</tt>. Also,
  using <tt class="option">mbd=2</tt> is strongly recommended
  <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Footnotes">[2] </a> because it
  will encode macroblocks as non-interlaced in places where there is
  no motion. Note that <tt class="option">-ofps</tt> is NOT needed here.
  </p><pre class="screen">mencoder dvd://1 -oac copy -ovc lavc -lavcopts ildct:ilme:mbd=2</pre><p>
</p></li><li class="listitem"><p>
  Use a deinterlacing filter before encoding. There are several of
  these filters available to choose from, each with its own advantages
  and disadvantages. Consult <tt class="option">mplayer -pphelp</tt> and
  <tt class="option">mplayer -vf help</tt> to see what is available
  (grep for "deint"), read Michael Niedermayer's
  <a class="ulink" href="http://guru.multimedia.cx/deinterlacing-filters/" target="_top">Deinterlacing filters comparison</a>,
  and search the
  <a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">
  MPlayer mailing lists</a> to find many discussions about the
  various filters.
  Again, the framerate is not changing, so no
  <tt class="option">-ofps</tt>. Also, deinterlacing should be done after
  cropping <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Footnotes">[1]</a> and
  before scaling.
  </p><pre class="screen">mencoder dvd://1 -oac copy -vf yadif -ovc lavc</pre><p>
</p></li><li class="listitem"><p>
  Unfortunately, this option is buggy with
  <span class="application">MEncoder</span>; it ought to work well with
  <span class="application">MEncoder G2</span>, but that is not here yet. You
  might experience crashes. Anyway, the purpose of <tt class="option"> -vf
  tfields</tt> is to create a full frame out of each field, which
  makes the framerate 60000/1001. The advantage of this approach is that no
  data is ever lost; however, since each frame comes from only one
  field, the missing lines have to be interpolated somehow. There are
  no very good methods of generating the missing data, and so the
  result will look a bit similar to when using some deinterlacing
  filters. Generating the missing lines creates other issues, as well,
  simply because the amount of data doubles. So, higher encoding
  bitrates are required to maintain quality, and more CPU power is
  used for both encoding and decoding. tfields has several different
  options for how to create the missing lines of each frame. If you
  use this method, then Reference the manual, and chose whichever
  option looks best for your material. Note that when using
  <tt class="option">tfields</tt> you
  <span class="bold"><strong>have to</strong></span> specify both
  <tt class="option">-fps</tt> and <tt class="option">-ofps</tt> to be twice the
  framerate of your original source.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf tfields=2 -ovc lavc \
    -fps 60000/1001 -ofps 60000/1001</pre><p>
</p></li><li class="listitem"><p>
  If you plan on downscaling dramatically, you can extract and encode
  only one of the two fields. Of course, you will lose half the vertical
  resolution, but if you plan on downscaling to at most 1/2 of the
  original, the loss will not matter much. The result will be a
  progressive 30000/1001 frames per second file. The procedure is to use
  <tt class="option">-vf field</tt>, then crop
  <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Footnotes">[1]</a> and scale
  appropriately. Remember that you will have to adjust the scale to
  compensate for the vertical resolution being halved.
  </p><pre class="screen">mencoder dvd://1 -oac copy -vf field=0 -ovc lavc</pre><p>
</p></li></ol></div></div><div class="sect3" title="10.2.3.4. Mixed progressive and telecine"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-mixedpt"></a>10.2.3.4. Mixed progressive and telecine</h4></div></div></div><p>
In order to turn mixed progressive and telecine video into entirely
progressive video, the telecined parts have to be
inverse-telecined. There are three ways to accomplish this,
described below. Note that you should
<span class="bold"><strong>always</strong></span> inverse-telecine before any
rescaling; unless you really know what you are doing,
inverse-telecine before cropping, too
<a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Footnotes">[1]</a>.
<tt class="option">-ofps 24000/1001</tt> is needed here because the output video
will be 24000/1001 frames per second.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <tt class="option">-vf pullup</tt> is designed to inverse-telecine
  telecined material while leaving progressive data alone. In order to
  work properly, <tt class="option">pullup</tt> <span class="bold"><strong>must</strong></span>
  be followed by the <tt class="option">softskip</tt> filter or
  else <span class="application">MEncoder</span> will crash.
  <tt class="option">pullup</tt> is, however, the cleanest and most
  accurate method available for encoding both telecine and
  "mixed progressive and telecine".
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf pullup,softskip
    -ovc lavc -ofps 24000/1001</pre><p>
</p></li><li class="listitem"><p>
  <tt class="option">-vf filmdint</tt> is similar to
  <tt class="option">-vf pullup</tt>: both filters attempt to match a pair of
  fields to form a complete frame. <tt class="option">filmdint</tt> will
  deinterlace individual fields that it cannot match, however, whereas
  <tt class="option">pullup</tt> will simply drop them. Also, the two filters
  have separate detection code, and <tt class="option">filmdint</tt> may tend to match fields a
  bit less often. Which filter works better may depend on the input
  video and personal taste; feel free to experiment with fine-tuning
  the filters' options if you encounter problems with either one (see
  the man page for details). For most well-mastered input video,
  however, both filters work quite well, so either one is a safe choice
  to start with.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf filmdint -ovc lavc -ofps 24000/1001</pre><p>
</p></li><li class="listitem"><p>
  An older method
  is to, rather than inverse-telecine the telecined parts, telecine
  the non-telecined parts and then inverse-telecine the whole
  video. Sound confusing? softpulldown is a filter that goes through
  a video and makes the entire file telecined. If we follow
  softpulldown with either <tt class="option">detc</tt> or
  <tt class="option">ivtc</tt>, the final result will be entirely
  progressive. <tt class="option">-ofps 24000/1001</tt> is needed.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf softpulldown,ivtc=1 -ovc lavc -ofps 24000/1001
  </pre><p>
</p></li></ul></div></div><div class="sect3" title="10.2.3.5. Mixed progressive and interlaced"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-mixedpi"></a>10.2.3.5. Mixed progressive and interlaced</h4></div></div></div><p>
There are two options for dealing with this category, each of
which is a compromise. You should decide based on the
duration/location of each type.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Treat it as progressive. The interlaced parts will look interlaced,
  and some of the interlaced fields will have to be dropped, resulting
  in a bit of uneven jumpiness. You can use a postprocessing filter if
  you want to, but it may slightly degrade the progressive parts.
  </p><p>
  This option should definitely not be used if you want to eventually
  display the video on an interlaced device (with a TV card, for
  example). If you have interlaced frames in a 24000/1001 frames per
  second video, they will be telecined along with the progressive
  frames. Half of the interlaced "frames" will be displayed for three
  fields' duration (3/(60000/1001) seconds), resulting in a flicking
  "jump back in time" effect that looks quite bad. If you
  even attempt this, you <span class="bold"><strong>must</strong></span> use a
  deinterlacing filter like <tt class="option">lb</tt> or
  <tt class="option">l5</tt>.
  </p><p>
  It may also be a bad idea for progressive display, too. It will drop
  pairs of consecutive interlaced fields, resulting in a discontinuity
  that can be more visible than with the second method, which shows
  some progressive frames twice. 30000/1001 frames per second interlaced
  video is already a bit choppy because it really should be shown at
  60000/1001 fields per second, so the duplicate frames do not stand out as
  much.
  </p><p>
  Either way, it is best to consider your content and how you intend to
  display it. If your video is 90% progressive and you never intend to
  show it on a TV, you should favor a progressive approach. If it is
  only half progressive, you probably want to encode it as if it is all
  interlaced.
  </p></li><li class="listitem"><p>
  Treat it as interlaced. Some frames of the progressive parts will
  need to be duplicated, resulting in uneven jumpiness. Again,
  deinterlacing filters may slightly degrade the progressive parts.
</p></li></ul></div></div></div><div class="sect2" title="10.2.4. Footnotes"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-footnotes"></a>10.2.4. Footnotes</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p title="About cropping:"><b>About cropping: </b>
  Video data on DVDs are stored in a format called YUV 4:2:0. In YUV
  video, luma ("brightness") and chroma ("color")
  are stored separately. Because the human eye is somewhat less
  sensitive to color than it is to brightness, in a YUV 4:2:0 picture
  there is only one chroma pixel for every four luma pixels. In a
  progressive picture, each square of four luma pixels (two on each
  side) has one common chroma pixel. You must crop progressive YUV
  4:2:0 to even resolutions, and use even offsets. For example,
  <tt class="option">crop=716:380:2:26</tt> is OK but
  <tt class="option">crop=716:380:3:26 </tt> is not.
  </p><p>
  When you are dealing with interlaced YUV 4:2:0, the situation is a
  bit more complicated. Instead of every four luma pixels in the
  <span class="emphasis"><em>frame</em></span> sharing a chroma pixel, every four luma
  pixels in each <span class="emphasis"><em> field</em></span> share a chroma
  pixel. When fields are interlaced to form a frame, each scanline is
  one pixel high. Now, instead of all four luma pixels being in a
  square, there are two pixels side-by-side, and the other two pixels
  are side-by-side two scanlines down. The two luma pixels in the
  intermediate scanline are from the other field, and so share a
  different chroma pixel with two luma pixels two scanlines away. All
  this confusion makes it necessary to have vertical crop dimensions
  and offsets be multiples of four. Horizontal can stay even.
  </p><p>
  For telecined video, I recommend that cropping take place after
  inverse telecining. Once the video is progressive you only need to
  crop by even numbers. If you really want to gain the slight speedup
  that cropping first may offer, you must crop vertically by multiples
  of four or else the inverse-telecine filter will not have proper data.
  </p><p>
  For interlaced (not telecined) video, you must always crop
  vertically by multiples of four unless you use <tt class="option">-vf
  field</tt> before cropping.
  </p></li><li class="listitem"><p title="About encoding parameters and quality:"><b>About encoding parameters and quality: </b>
  Just because I recommend <tt class="option">mbd=2</tt> here does not mean it
  should not be used elsewhere. Along with <tt class="option">trell</tt>,
  <tt class="option">mbd=2</tt> is one of the two
   <code class="systemitem">libavcodec</code> options that
  increases quality the most, and you should always use at least those
  two unless the drop in encoding speed is prohibitive (e.g. realtime
  encoding). There are many other options to
  <code class="systemitem">libavcodec</code> that increase
  encoding quality (and decrease encoding speed) but that is beyond
  the scope of this document.
  </p></li><li class="listitem"><p title="About the performance of pullup:"><b>About the performance of pullup: </b>
  It is safe to use <tt class="option">pullup</tt> (along with <tt class="option">softskip
  </tt>) on progressive video, and is usually a good idea unless
  the source has been definitively verified to be entirely progressive.
  The performance loss is small for most cases. On a bare-minimum encode,
  <tt class="option">pullup</tt> causes <span class="application">MEncoder</span> to
  be 50% slower. Adding sound processing and advanced <tt class="option">lavcopts
  </tt> overshadows that difference, bringing the performance
  decrease of using <tt class="option">pullup</tt> down to 2%.
  </p></li></ol></div></div></div><div class="sect1" title="10.3. Encoding with the libavcodec codec family"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-libavcodec"></a>10.3. Encoding with the <code class="systemitem">libavcodec</code>
  codec family</h2></div></div></div><p>
<code class="systemitem">libavcodec</code>
provides simple encoding to a lot of interesting video and audio formats.
You can encode to the following codecs (more or less up to date):
</p><div class="sect2" title="10.3.1. libavcodec's video codecs"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-video-codecs"></a>10.3.1. <code class="systemitem">libavcodec</code>'s
  video codecs</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Video codec name</th><th>Description</th></tr></thead><tbody><tr><td>mjpeg</td><td>Motion JPEG</td></tr><tr><td>ljpeg</td><td>lossless JPEG</td></tr><tr><td>jpegls</td><td>JPEG LS</td></tr><tr><td>targa</td><td>Targa image</td></tr><tr><td>gif</td><td>GIF image</td></tr><tr><td>bmp</td><td>BMP image</td></tr><tr><td>png</td><td>PNG image</td></tr><tr><td>h261</td><td>H.261</td></tr><tr><td>h263</td><td>H.263 </td></tr><tr><td>h263p</td><td>H.263+</td></tr><tr><td>mpeg4</td><td>ISO standard MPEG-4 (DivX, Xvid compatible)</td></tr><tr><td>msmpeg4</td><td>pre-standard MPEG-4 variant by MS, v3 (AKA DivX3)</td></tr><tr><td>msmpeg4v2</td><td>pre-standard MPEG-4 by MS, v2 (used in old ASF files)</td></tr><tr><td>wmv1</td><td>Windows Media Video, version 1 (AKA WMV7)</td></tr><tr><td>wmv2</td><td>Windows Media Video, version 2 (AKA WMV8)</td></tr><tr><td>rv10</td><td>RealVideo 1.0</td></tr><tr><td>rv20</td><td>RealVideo 2.0</td></tr><tr><td>mpeg1video</td><td>MPEG-1 video</td></tr><tr><td>mpeg2video</td><td>MPEG-2 video</td></tr><tr><td>huffyuv</td><td>lossless compression</td></tr><tr><td>ffvhuff</td><td>FFmpeg modified huffyuv lossless</td></tr><tr><td>asv1</td><td>ASUS Video v1</td></tr><tr><td>asv2</td><td>ASUS Video v2</td></tr><tr><td>ffv1</td><td>FFmpeg's lossless video codec</td></tr><tr><td>svq1</td><td>Sorenson video 1</td></tr><tr><td>flv</td><td>Sorenson H.263 used in Flash Video</td></tr><tr><td>flashsv</td><td>Flash Screen Video</td></tr><tr><td>dvvideo</td><td>Sony Digital Video</td></tr><tr><td>snow</td><td>FFmpeg's experimental wavelet-based codec</td></tr><tr><td>zmbv</td><td>Zip Motion Blocks Video</td></tr><tr><td>dnxhd</td><td>AVID DNxHD</td></tr></tbody></table></div><p>

The first column contains the codec names that should be passed after the
<code class="literal">vcodec</code> config,
like: <tt class="option">-lavcopts vcodec=msmpeg4</tt>
</p><div class="informalexample"><p>
An example with MJPEG compression:
</p><pre class="screen">
mencoder dvd://2 -o <em class="replaceable"><code>title2.avi</code></em> -ovc lavc -lavcopts vcodec=mjpeg -oac copy
</pre><p>
</p></div></div><div class="sect2" title="10.3.2. libavcodec's audio codecs"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs"></a>10.3.2. <code class="systemitem">libavcodec</code>'s
  audio codecs</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Audio codec name</th><th>Description</th></tr></thead><tbody><tr><td>ac3</td><td>Dolby Digital (AC-3)</td></tr><tr><td>adpcm_*</td><td>Adaptive PCM formats - see supplementary table</td></tr><tr><td>flac</td><td>Free Lossless Audio Codec (FLAC)</td></tr><tr><td>g726</td><td>G.726 ADPCM</td></tr><tr><td>libamr_nb</td><td>3GPP Adaptive Multi-Rate (AMR) narrow-band</td></tr><tr><td>libamr_wb</td><td>3GPP Adaptive Multi-Rate (AMR) wide-band</td></tr><tr><td>libfaac</td><td>Advanced Audio Coding (AAC) - using FAAC</td></tr><tr><td>libgsm</td><td>ETSI GSM 06.10 full rate</td></tr><tr><td>libgsm_ms</td><td>Microsoft GSM</td></tr><tr><td>libmp3lame</td><td>MPEG-1 audio layer 3 (MP3) - using LAME</td></tr><tr><td>mp2</td><td>MPEG-1 audio layer 2 (MP2)</td></tr><tr><td>pcm_*</td><td>PCM formats - see supplementary table</td></tr><tr><td>roq_dpcm</td><td>Id Software RoQ DPCM</td></tr><tr><td>sonic</td><td>experimental FFmpeg lossy codec</td></tr><tr><td>sonicls</td><td>experimental FFmpeg lossless codec</td></tr><tr><td>vorbis</td><td>Vorbis</td></tr><tr><td>wmav1</td><td>Windows Media Audio v1</td></tr><tr><td>wmav2</td><td>Windows Media Audio v2</td></tr></tbody></table></div><p>

The first column contains the codec names that should be passed after the
<code class="literal">acodec</code> option, like: <tt class="option">-lavcopts acodec=ac3</tt>
</p><div class="informalexample"><p>
An example with AC-3 compression:
</p><pre class="screen">
mencoder dvd://2 -o <em class="replaceable"><code>title2.avi</code></em> -oac lavc -lavcopts acodec=ac3 -ovc copy
</pre><p>
</p></div><p>
Contrary to <code class="systemitem">libavcodec</code>'s video
codecs, its audio codecs do not make a wise usage of the bits they are
given as they lack some minimal psychoacoustic model (if at all)
which most other codec implementations feature.
However, note that all these audio codecs are very fast and work
out-of-the-box everywhere <span class="application">MEncoder</span> has been
compiled with <code class="systemitem">libavcodec</code> (which
is the case most of time), and do not depend on external libraries.
</p><div class="sect3" title="10.3.2.1. PCM/ADPCM format supplementary table"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs-pcmadpcm"></a>10.3.2.1. PCM/ADPCM format supplementary table</h4></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>PCM/ADPCM codec name</th><th>Description</th></tr></thead><tbody><tr><td>pcm_s32le</td><td>signed 32-bit little-endian</td></tr><tr><td>pcm_s32be</td><td>signed 32-bit big-endian</td></tr><tr><td>pcm_u32le</td><td>unsigned 32-bit little-endian</td></tr><tr><td>pcm_u32be</td><td>unsigned 32-bit big-endian</td></tr><tr><td>pcm_s24le</td><td>signed 24-bit little-endian</td></tr><tr><td>pcm_s24be</td><td>signed 24-bit big-endian</td></tr><tr><td>pcm_u24le</td><td>unsigned 24-bit little-endian</td></tr><tr><td>pcm_u24be</td><td>unsigned 24-bit big-endian</td></tr><tr><td>pcm_s16le</td><td>signed 16-bit little-endian</td></tr><tr><td>pcm_s16be</td><td>signed 16-bit big-endian</td></tr><tr><td>pcm_u16le</td><td>unsigned 16-bit little-endian</td></tr><tr><td>pcm_u16be</td><td>unsigned 16-bit big-endian</td></tr><tr><td>pcm_s8</td><td>signed 8-bit</td></tr><tr><td>pcm_u8</td><td>unsigned 8-bit</td></tr><tr><td>pcm_alaw</td><td>G.711 A-LAW </td></tr><tr><td>pcm_mulaw</td><td>G.711 μ-LAW</td></tr><tr><td>pcm_s24daud</td><td>signed 24-bit D-Cinema Audio format</td></tr><tr><td>pcm_zork</td><td>Activision Zork Nemesis</td></tr><tr><td>adpcm_ima_qt</td><td>Apple QuickTime</td></tr><tr><td>adpcm_ima_wav</td><td>Microsoft/IBM WAVE</td></tr><tr><td>adpcm_ima_dk3</td><td>Duck DK3</td></tr><tr><td>adpcm_ima_dk4</td><td>Duck DK4</td></tr><tr><td>adpcm_ima_ws</td><td>Westwood Studios</td></tr><tr><td>adpcm_ima_smjpeg</td><td>SDL Motion JPEG</td></tr><tr><td>adpcm_ms</td><td>Microsoft</td></tr><tr><td>adpcm_4xm</td><td>4X Technologies</td></tr><tr><td>adpcm_xa</td><td>Phillips Yellow Book CD-ROM eXtended Architecture</td></tr><tr><td>adpcm_ea</td><td>Electronic Arts</td></tr><tr><td>adpcm_ct</td><td>Creative 16-&gt;4-bit</td></tr><tr><td>adpcm_swf</td><td>Adobe Shockwave Flash</td></tr><tr><td>adpcm_yamaha</td><td>Yamaha</td></tr><tr><td>adpcm_sbpro_4</td><td>Creative VOC SoundBlaster Pro 8-&gt;4-bit</td></tr><tr><td>adpcm_sbpro_3</td><td>Creative VOC SoundBlaster Pro 8-&gt;2.6-bit</td></tr><tr><td>adpcm_sbpro_2</td><td>Creative VOC SoundBlaster Pro 8-&gt;2-bit</td></tr><tr><td>adpcm_thp</td><td>Nintendo GameCube FMV THP</td></tr><tr><td>adpcm_adx</td><td>Sega/CRI ADX</td></tr></tbody></table></div><p>
</p></div></div><div class="sect2" title="10.3.3. Encoding options of libavcodec"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-lavc-encoding-options"></a>10.3.3. Encoding options of libavcodec</h3></div></div></div><p>
Ideally, you would probably want to be able to just tell the encoder to switch
into "high quality" mode and move on.
That would probably be nice, but unfortunately hard to implement as different
encoding options yield different quality results depending on the source
material. That is because compression depends on the visual properties of the
video in question.
For example, Anime and live action have very different properties and
thus require different options to obtain optimum encoding.
The good news is that some options should never be left out, like
<tt class="option">mbd=2</tt>, <tt class="option">trell</tt>, and <tt class="option">v4mv</tt>.
See below for a detailed description of common encoding options.
</p><div class="itemizedlist" title="Options to adjust:"><p class="title"><b>Options to adjust:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>vmax_b_frames</strong></span>: 1 or 2 is good, depending on
  the movie.
  Note that if you need to have your encode be decodable by DivX5, you
  need to activate closed GOP support, using
  <code class="systemitem">libavcodec</code>'s <tt class="option">cgop</tt>
  option, but you need to deactivate scene detection, which
  is not a good idea as it will hurt encode efficiency a bit.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vb_strategy=1</strong></span>: helps in high-motion scenes.
  On some videos, vmax_b_frames may hurt quality, but vmax_b_frames=2 along
  with vb_strategy=1 helps.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>dia</strong></span>: motion search range. Bigger is better
  and slower.
  Negative values are a completely different scale.
  Good values are -1 for a fast encode, or 2-4 for slower.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>predia</strong></span>: motion search pre-pass.
  Not as important as dia. Good values are 1 (default) to 4. Requires preme=2
  to really be useful.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cmp, subcmp, precmp</strong></span>: Comparison function for
  motion estimation.
  Experiment with values of 0 (default), 2 (hadamard), 3 (dct), and 6 (rate
  distortion).
  0 is fastest, and sufficient for precmp.
  For cmp and subcmp, 2 is good for Anime, and 3 is good for live action.
  6 may or may not be slightly better, but is slow.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>last_pred</strong></span>: Number of motion predictors to
  take from the previous frame.
  1-3 or so help at little speed cost.
  Higher values are slow for no extra gain.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cbp, mv0</strong></span>: Controls the selection of
  macroblocks. Small speed cost for small quality gain.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qprd</strong></span>: adaptive quantization based on the
  macroblock's complexity.
  May help or hurt depending on the video and other options.
  This can cause artifacts unless you set vqmax to some reasonably small value
  (6 is good, maybe as low as 4); vqmin=1 should also help.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qns</strong></span>: very slow, especially when combined
  with qprd.
  This option will make the encoder minimize noise due to compression
  artifacts instead of making the encoded video strictly match the source.
  Do not use this unless you have already tweaked everything else as far as it
  will go and the results still are not good enough.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vqcomp</strong></span>: Tweak ratecontrol.
  What values are good depends on the movie.
  You can safely leave this alone if you want.
  Reducing vqcomp puts more bits on low-complexity scenes, increasing it puts
  them on high-complexity scenes (default: 0.5, range: 0-1. recommended range:
  0.5-0.7).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vlelim, vcelim</strong></span>: Sets the single coefficient
  elimination threshold for luminance and chroma planes.
  These are encoded separately in all MPEG-like algorithms.
  The idea behind these options is to use some good heuristics to determine
  when the change in a block is less than the threshold you specify, and in
  such a case, to just  encode the block as "no change".
  This saves bits and perhaps speeds up encoding. vlelim=-4 and vcelim=9
  seem to be good for live movies, but seem not to help with Anime;
  when encoding animation, you should probably leave them unchanged.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>: Quarter pixel motion estimation.
  MPEG-4 uses half pixel precision for its motion search by default,
  therefore this option comes with an overhead as more information will be
  stored in the encoded file.
  The compression gain/loss depends on the movie, but it is usually not very
  effective on Anime.
  qpel always incurs a significant cost in CPU decode time (+25% in
  practice).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>psnr</strong></span>: does not affect the actual encoding,
  but writes a log file giving the type/size/quality of each frame, and
  prints a summary of PSNR (Peak Signal to Noise Ratio) at the end.
</p></li></ul></div><div class="itemizedlist" title="Options not recommended to play with:"><p class="title"><b>Options not recommended to play with:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>vme</strong></span>: The default is best.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask, dark_mask</strong></span>: Psychovisual adaptive
  quantization.
  You do not want to play with those options if you care about quality.
  Reasonable values may be effective in your case, but be warned this is very
  subjective.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>scplx_mask</strong></span>: Tries to prevent blocky
  artifacts, but postprocessing is better.
</p></li></ul></div></div><div class="sect2" title="10.3.4. Encoding setting examples"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-mpeg4-lavc-example-settings"></a>10.3.4. Encoding setting examples</h3></div></div></div><p>
The following settings are examples of different encoding
option combinations that affect the speed vs quality tradeoff
at the same target bitrate.
</p><p>
All the encoding settings were tested on a 720x448 @30000/1001 fps
video sample, the target bitrate was 900kbps, and the machine was an
AMD-64 3400+ at 2400 MHz in 64 bits mode.
Each encoding setting features the measured encoding speed (in
frames per second) and the PSNR loss (in dB) compared to the "very
high quality" setting.
Please understand that depending on your source, your machine type
and development advancements, you may get very different results.
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Encoding options</th><th>speed (in fps)</th><th>Relative PSNR loss (in dB)</th></tr></thead><tbody><tr><td>Very high quality</td><td><tt class="option">vcodec=mpeg4:mbd=2:mv0:trell:v4mv:cbp:last_pred=3:predia=2:dia=2:vmax_b_frames=2:vb_strategy=1:precmp=2:cmp=2:subcmp=2:preme=2:qns=2</tt></td><td>6fps</td><td>0dB</td></tr><tr><td>High quality</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:last_pred=2:dia=-1:vmax_b_frames=2:vb_strategy=1:cmp=3:subcmp=3:precmp=0:vqcomp=0.6:turbo</tt></td><td>15fps</td><td>-0.5dB</td></tr><tr><td>Fast</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:turbo</tt></td><td>42fps</td><td>-0.74dB</td></tr><tr><td>Realtime</td><td><tt class="option">vcodec=mpeg4:mbd=2:turbo</tt></td><td>54fps</td><td>-1.21dB</td></tr></tbody></table></div><p>
</p></div><div class="sect2" title="10.3.5. Custom inter/intra matrices"><div class="titlepage"><div><div><h3 class="title"><a name="custommatrices"></a>10.3.5. Custom inter/intra matrices</h3></div></div></div><p>
With this feature of
<code class="systemitem">libavcodec</code>
you are able to set custom inter (I-frames/keyframes) and intra
(P-frames/predicted frames) matrices. It is supported by many of the codecs:
<code class="systemitem">mpeg1video</code> and <code class="systemitem">mpeg2video</code>
are reported as working.
</p><p>
A typical usage of this feature is to set the matrices preferred by the
<a class="ulink" href="http://www.kvcd.net/" target="_top">KVCD</a> specifications.
</p><p>
The <span class="bold"><strong>KVCD "Notch" Quantization Matrix:</strong></span>
</p><p>
Intra:
</p><pre class="screen">
 8  9 12 22 26 27 29 34
 9 10 14 26 27 29 34 37
12 14 18 27 29 34 37 38
22 26 27 31 36 37 38 40
26 27 29 36 39 38 40 48
27 29 34 37 38 40 48 58
29 34 37 38 40 48 58 69
34 37 38 40 48 58 69 79
</pre><p>

Inter:
</p><pre class="screen">
16 18 20 22 24 26 28 30
18 20 22 24 26 28 30 32
20 22 24 26 28 30 32 34
22 24 26 30 32 32 34 36
24 26 28 32 34 34 36 38
26 28 30 32 34 36 38 40
28 30 32 34 36 38 42 42
30 32 34 36 38 40 42 44
</pre><p>
</p><p>
Usage:
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -o <em class="replaceable"><code>output.avi</code></em> -oac copy -ovc lavc \
    -lavcopts inter_matrix=...:intra_matrix=...
</pre><p>
</p><p>
</p><pre class="screen">
mencoder <em class="replaceable"><code>input.avi</code></em> -ovc lavc -lavcopts \
vcodec=mpeg2video:intra_matrix=8,9,12,22,26,27,29,34,9,10,14,26,27,29,34,37,\
12,14,18,27,29,34,37,38,22,26,27,31,36,37,38,40,26,27,29,36,39,38,40,48,27,\
29,34,37,38,40,48,58,29,34,37,38,40,48,58,69,34,37,38,40,48,58,69,79\
:inter_matrix=16,18,20,22,24,26,28,30,18,20,22,24,26,28,30,32,20,22,24,26,\
28,30,32,34,22,24,26,30,32,32,34,36,24,26,28,32,34,34,36,38,26,28,30,32,34,\
36,38,40,28,30,32,34,36,38,42,42,30,32,34,36,38,40,42,44 -oac copy -o svcd.mpg
</pre><p>
</p></div><div class="sect2" title="10.3.6. Example"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-example"></a>10.3.6. Example</h3></div></div></div><p>
So, you have just bought your shiny new copy of Harry Potter and the Chamber
of Secrets (widescreen edition, of course), and you want to rip this DVD
so that you can add it to your Home Theatre PC. This is a region 1 DVD,
so it is NTSC. The example below will still apply to PAL, except you will
omit <tt class="option">-ofps 24000/1001</tt> (because the output framerate is the
same as the input framerate), and of course the crop dimensions will be
different.
</p><p>
After running <tt class="option">mplayer dvd://1</tt>, we follow the process
detailed in the section <a class="link" href="#menc-feat-telecine" title="10.2. How to deal with telecine and interlacing within NTSC DVDs">How to deal
with telecine and interlacing in NTSC DVDs</a> and discover that it is
24000/1001 fps progressive video, which means that we need not use an inverse
telecine filter, such as <tt class="option">pullup</tt> or
<tt class="option">filmdint</tt>.
</p><p><a name="menc-feat-dvd-mpeg4-example-crop"></a>
Next, we want to determine the appropriate crop rectangle, so we use the
cropdetect filter:
</p><pre class="screen">mplayer dvd://1 -vf cropdetect</pre><p>
Make sure you seek to a fully filled frame (such as a bright scene,
past the opening credits and logos), and
you will see in <span class="application">MPlayer</span>'s console output:
</p><pre class="screen">crop area: X: 0..719  Y: 57..419  (-vf crop=720:362:0:58)</pre><p>
We then play the movie back with this filter to test its correctness:
</p><pre class="screen">mplayer dvd://1 -vf crop=720:362:0:58</pre><p>
And we see that it looks perfectly fine. Next, we ensure the width and
height are a multiple of 16. The width is fine, however the height is
not. Since we did not fail 7th grade math, we know that the nearest
multiple of 16 lower than 362 is 352.
</p><p>
We could just use <tt class="option">crop=720:352:0:58</tt>, but it would be nice
to take a little off the top and a little off the bottom so that we
retain the center. We have shrunk the height by 10 pixels, but we do not
want to increase the y-offset by 5-pixels since that is an odd number and
will adversely affect quality. Instead, we will increase the y-offset by
4 pixels:
</p><pre class="screen">mplayer dvd://1 -vf crop=720:352:0:62</pre><p>
Another reason to shave pixels from both the top and the bottom is that we
ensure we have eliminated any half-black pixels if they exist. Note that if
your video is telecined, make sure the <tt class="option">pullup</tt> filter (or
whichever inverse telecine filter you decide to use) appears in the filter
chain before you crop. If it is interlaced, deinterlace before cropping.
(If you choose to preserve the interlaced video, then make sure your
vertical crop offset is a multiple of 4.)
</p><p>
If you are really concerned about losing those 10 pixels, you might
prefer instead to scale the dimensions down to the nearest multiple of 16.
The filter chain would look like:
</p><pre class="screen">-vf crop=720:362:0:58,scale=720:352</pre><p>
Scaling the video down like this will mean that some small amount of
detail is lost, though it probably will not be perceptible. Scaling up will
result in lower quality (unless you increase the bitrate). Cropping
discards those pixels altogether. It is a tradeoff that you will want to
consider for each circumstance. For example, if the DVD video was made
for television, you might want to avoid vertical scaling, since the line
sampling corresponds to the way the content was originally recorded.
</p><p>
On inspection, we see that our movie has a fair bit of action and high
amounts of detail, so we pick 2400Kbit for our bitrate.
</p><p>
We are now ready to do the two pass encode. Pass one:
</p><pre class="screen">
mencoder dvd://1 -ofps 24000/1001 -oac copy -o <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -ovc lavc \
    -lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:autoaspect:vpass=1 \
    -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2
</pre><p>
And pass two is the same, except that we specify <tt class="option">vpass=2</tt>:
</p><pre class="screen">
mencoder dvd://1 -ofps 24000/1001 -oac copy -o <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -ovc lavc \
    -lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:autoaspect:vpass=2 \
    -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2
</pre><p>
</p><p>
The options <tt class="option">v4mv:mbd=2:trell</tt> will greatly increase the
quality at the expense of encoding time. There is little reason to leave
these options out when the primary goal is quality. The options
<tt class="option">cmp=3:subcmp=3</tt> select a comparison function that
yields higher quality than the defaults. You might try experimenting with
this parameter (refer to the man page for the possible values) as
different functions can have a large impact on quality depending on the
source material. For example, if you find
<code class="systemitem">libavcodec</code> produces too much
blocky artifacts, you could try selecting the experimental NSSE as
comparison function via <tt class="option">*cmp=10</tt>.
</p><p>
For this movie, the resulting AVI will be 138 minutes long and nearly
3GB. And because you said that file size does not matter, this is a
perfectly acceptable size. However, if you had wanted it smaller, you
could try a lower bitrate. Increasing bitrates have diminishing
returns, so while we might clearly see an improvement from 1800Kbit to
2000Kbit, it might not be so noticeable above 2000Kbit. Feel
free to experiment until you are happy.
</p><p>
Because we passed the source video through a denoise filter, you may want
to add some of it back during playback. This, along with the
<tt class="option">spp</tt> post-processing filter, drastically improves the
perception of quality and helps eliminate blocky artifacts in the video.
With <span class="application">MPlayer</span>'s <tt class="option">autoq</tt> option,
you can vary the amount of post-processing done by the spp filter
depending on available CPU. Also, at this point, you may want to apply
gamma and/or color correction to best suit your display. For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -vf spp,noise=9ah:5ah,eq2=1.2 -autoq 3
</pre><p>
</p></div></div><div class="sect1" title="10.4. Encoding with the Xvid codec"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-xvid"></a>10.4. Encoding with the <code class="systemitem">Xvid</code>
  codec</h2></div></div></div><p>
<code class="systemitem">Xvid</code> is a free library for
encoding MPEG-4 ASP video streams.
Before starting to encode, you need to <a class="link" href="#xvid" title="2.5.1. Xvid">
set up <span class="application">MEncoder</span> to support it</a>.
</p><p>
This guide mainly aims at featuring the same kind of information
as x264's encoding guide.
Therefore, please begin by reading
<a class="link" href="#menc-feat-x264-encoding-options-intro" title="10.5.1.1. Introduction">the first part</a>
of that guide.
</p><div class="sect2" title="10.4.1. What options should I use to get the best results?"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-intro"></a>10.4.1. What options should I use to get the best results?</h3></div></div></div><p>
Please begin by reviewing the
<code class="systemitem">Xvid</code> section of
<span class="application">MPlayer</span>'s man page.
This section is intended to be a supplement to the man page.
</p><p>
The Xvid default settings are already a good tradeoff between
speed and quality, therefore you can safely stick to them if
the following section puzzles you.
</p></div><div class="sect2" title="10.4.2. Encoding options of Xvid"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-options"></a>10.4.2. Encoding options of <code class="systemitem">Xvid</code></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>vhq</strong></span>
  This setting affects the macroblock decision algorithm, where the
  higher the setting, the wiser the decision.
  The default setting may be safely used for every encode, while
  higher settings always help PSNR but are significantly slower.
  Please note that a better PSNR does not necessarily mean
  that the picture will look better, but tells you that it is
  closer to the original.
  Turning it off will noticeably speed up encoding; if speed is
  critical for you, the tradeoff may be worth it.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bvhq</strong></span>
  This does the same job as vhq, but does it on B-frames.
  It has a negligible impact on speed, and slightly improves quality
  (around +0.1dB PSNR).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>max_bframes</strong></span>
  A higher number of consecutive allowed B-frames usually improves
  compressibility, although it may also lead to more blocking artifacts.
  The default setting is a good tradeoff between compressibility and
  quality, but you may increase it up to 3 if you are bitrate-starved.
  You may also decrease it to 1 or 0 if you are aiming at perfect
  quality, though in that case you should make sure your
  target bitrate is high enough to ensure that the encoder does not
  have to increase quantizers to reach it.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bf_threshold</strong></span>
  This controls the B-frame sensitivity of the encoder, where a higher
  value leads to more B-frames being used (and vice versa).
  This setting is to be used together with <tt class="option">max_bframes</tt>;
  if you are bitrate-starved, you should increase both
  <tt class="option">max_bframes</tt> and <tt class="option">bf_threshold</tt>,
  while you may increase <tt class="option">max_bframes</tt> and reduce
  <tt class="option">bf_threshold</tt> so that the encoder may use more
  B-frames in places that only <span class="bold"><strong>really</strong></span>
  need them.
  A low number of <tt class="option">max_bframes</tt> and a high value of
  <tt class="option">bf_threshold</tt> is probably not a wise choice as it
  will force the encoder to put B-frames in places that would not
  benefit from them, therefore reducing visual quality.
  However, if you need to be compatible with standalone players that
  only support old DivX profiles (which only supports up to 1
  consecutive B-frame), this would be your only way to
  increase compressibility through using B-frames.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>trellis</strong></span>
  Optimizes the quantization process to get an optimal tradeoff
  between PSNR and bitrate, which allows significant bit saving.
  These bits will in return be spent elsewhere on the video,
  raising overall visual quality.
  You should always leave it on as its impact on quality is huge.
  Even if you are looking for speed, do not disable it until you
  have turned down <tt class="option">vhq</tt> and all other more
  CPU-hungry options to the minimum.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>hq_ac</strong></span>
  Activates a better coefficient cost estimation method, which slightly
  reduces file size by around 0.15 to 0.19% (which corresponds to less
  than 0.01dB PSNR increase), while having a negligible impact on speed.
  It is therefore recommended to always leave it on.
</p></li><li class="listitem"><p>
 <span class="bold"><strong>cartoon</strong></span>
  Designed to better encode cartoon content, and has no impact on
  speed as it just tunes the mode decision heuristics for this type
  of content.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>me_quality</strong></span>
  This setting is to control the precision of the motion estimation.
  The higher <tt class="option">me_quality</tt>, the more
  precise the estimation of the original motion will be, and the
  better the resulting clip will capture the original motion.
  </p><p>
  The default setting is best in all cases;
  thus it is not recommended to turn it down unless you are
  really looking for speed, as all the bits saved by a good motion
  estimation would be spent elsewhere, raising overall quality.
  Therefore, do not go any lower than 5, and even that only as a last
  resort.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_me</strong></span>
  Improves motion estimation by also taking the chroma (color)
  information into account, whereas <tt class="option">me_quality</tt>
  alone only uses luma (grayscale).
  This slows down encoding by 5-10% but improves visual quality
  quite a bit by reducing blocking effects and reduces file size by
  around 1.3%.
  If you are looking for speed, you should disable this option before
  starting to consider reducing <tt class="option">me_quality</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_opt</strong></span>
  Is intended to increase chroma image quality around pure
  white/black edges, rather than improving compression.
  This can help to reduce the "red stairs" effect.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask</strong></span>
  Tries to give less bitrate to part of the picture that the
  human eye cannot see very well, which should allow the encoder
  to spend the saved bits on more important parts of the picture.
  The quality of the encode yielded by this option highly depends
  on personal preferences and on the type and monitor settings
  used to watch it (typically, it will not look as good if it is
  bright or if it is a TFT monitor).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>
  Raise the number of candidate motion vectors by increasing
  the precision of the motion estimation from halfpel to
  quarterpel.
  The idea is to find better motion vectors which will in return
  reduce bitrate (hence increasing quality).
  However, motion vectors with quarterpel precision require a
  few extra bits to code, but the candidate vectors do not always
  give (much) better results.
  Quite often, the codec still spends bits on the extra precision,
  but little or no extra quality is gained in return.
  Unfortunately, there is no way to foresee the possible gains of
  <tt class="option">qpel</tt>, so you need to actually encode with and
  without it to know for sure.
  </p><p>
  <tt class="option">qpel</tt> can be almost double encoding time, and
  requires as much as 25% more processing power to decode.
  It is not supported by all standalone players.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>gmc</strong></span>
  Tries to save bits on panning scenes by using a single motion
  vector for the whole frame.
  This almost always raises PSNR, but significantly slows down
  encoding (as well as decoding).
  Therefore, you should only use it when you have turned
  <tt class="option">vhq</tt> to the maximum.
  <code class="systemitem">Xvid</code>'s GMC is more
  sophisticated than DivX's, but is only supported by few
  standalone players.
</p></li></ul></div></div><div class="sect2" title="10.4.3. Encoding profiles"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-profiles"></a>10.4.3. Encoding profiles</h3></div></div></div><p>
Xvid supports encoding profiles through the <tt class="option">profile</tt> option,
which are used to impose restrictions on the properties of the Xvid video
stream such that it will be playable on anything which supports the
chosen profile.
The restrictions relate to resolutions, bitrates and certain MPEG-4
features.
The following table shows what each profile supports.
</p><div class="informaltable"><table border="1"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td align="center"> </td><td colspan="4" align="center">Simple</td><td colspan="6" align="center">Advanced Simple</td><td colspan="6" align="center">DivX</td></tr><tr><td align="center">Profile name</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">Handheld</td><td align="center">Portable NTSC</td><td align="center">Portable PAL</td><td align="center">Home Theater NTSC</td><td align="center">Home Theater PAL</td><td align="center">HDTV</td></tr><tr><td align="center">Width [pixels]</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">720</td><td align="center">1280</td></tr><tr><td align="center">Height [pixels]</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">576</td><td align="center">576</td><td align="center">144</td><td align="center">240</td><td align="center">288</td><td align="center">480</td><td align="center">576</td><td align="center">720</td></tr><tr><td align="center">Frame rate [fps]</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">25</td><td align="center">30</td><td align="center">25</td><td align="center">30</td></tr><tr><td align="center">Max average bitrate [kbps]</td><td align="center">64</td><td align="center">64</td><td align="center">128</td><td align="center">384</td><td align="center">128</td><td align="center">128</td><td align="center">384</td><td align="center">768</td><td align="center">3000</td><td align="center">8000</td><td align="center">537.6</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">9708.4</td></tr><tr><td align="center">Peak average bitrate over 3 secs [kbps]</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">800</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">16000</td></tr><tr><td align="center">Max. B-frames</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">2</td></tr><tr><td align="center">MPEG quantization</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Adaptive quantization</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Interlaced encoding</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Quarterpixel</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Global motion compensation</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="sect2" title="10.4.4. Encoding setting examples"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-example-settings"></a>10.4.4. Encoding setting examples</h3></div></div></div><p>
The following settings are examples of different encoding
option combinations that affect the speed vs quality tradeoff
at the same target bitrate.
</p><p>
All the encoding settings were tested on a 720x448 @30000/1001 fps
video sample, the target bitrate was 900kbps, and the machine was an
AMD-64 3400+ at 2400 MHz in 64 bits mode.
Each encoding setting features the measured encoding speed (in
frames per second) and the PSNR loss (in dB) compared to the "very
high quality" setting.
Please understand that depending on your source, your machine type
and development advancements, you may get very different results.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Encoding options</th><th>speed (in fps)</th><th>Relative PSNR loss (in dB)</th></tr></thead><tbody><tr><td>Very high quality</td><td><tt class="option">chroma_opt:vhq=4:bvhq=1:quant_type=mpeg</tt></td><td>16fps</td><td>0dB</td></tr><tr><td>High quality</td><td><tt class="option">vhq=2:bvhq=1:chroma_opt:quant_type=mpeg</tt></td><td>18fps</td><td>-0.1dB</td></tr><tr><td>Fast</td><td><tt class="option">turbo:vhq=0</tt></td><td>28fps</td><td>-0.69dB</td></tr><tr><td>Realtime</td><td><tt class="option">turbo:nochroma_me:notrellis:max_bframes=0:vhq=0</tt></td><td>38fps</td><td>-1.48dB</td></tr></tbody></table></div></div></div><div class="sect1" title="10.5. Encoding with the x264 codec"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-x264"></a>10.5. Encoding with the
  <code class="systemitem">x264</code> codec</h2></div></div></div><p>
<code class="systemitem">x264</code> is a free library for
encoding H.264/AVC video streams.
Before starting to encode, you need to
<a class="link" href="#x264" title="2.5.2. x264">set up <span class="application">MEncoder</span> to support it</a>.
</p><div class="sect2" title="10.5.1. Encoding options of x264"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-x264-encoding-options"></a>10.5.1. Encoding options of x264</h3></div></div></div><p>
Please begin by reviewing the
<code class="systemitem">x264</code> section of
<span class="application">MPlayer</span>'s man page.
This section is intended to be a supplement to the man page.
Here you will find quick hints about which options are most
likely to interest most people. The man page is more terse,
but also more exhaustive, and it sometimes offers much better
technical detail.
</p><div class="sect3" title="10.5.1.1. Introduction"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-intro"></a>10.5.1.1. Introduction</h4></div></div></div><p>
This guide considers two major categories of encoding options:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Options which mainly trade off encoding time vs. quality
</p></li><li class="listitem"><p>
  Options which may be useful for fulfilling various personal
  preferences and special requirements
</p></li></ol></div><p>
Ultimately, only you can decide which options are best for your
purposes. The decision for the first class of options is the simplest:
you only have to decide whether you think the quality differences
justify the speed differences. For the second class of options,
preferences may be far more subjective, and more factors may be
involved. Note that some of the "personal preferences and special
requirements" options can still have large impacts on speed or quality,
but that is not what they are primarily useful for. A couple of the
"personal preference" options may even cause changes that look better
to some people, but look worse to others.
</p><p>
Before continuing, you need to understand that this guide uses only one
quality metric: global PSNR.
For a brief explanation of what PSNR is, see
<a class="ulink" href="http://en.wikipedia.org/wiki/PSNR" target="_top">the Wikipedia article on PSNR</a>.
Global PSNR is the last PSNR number reported when you include
the <tt class="option">psnr</tt> option in <tt class="option">x264encopts</tt>.
Any time you read a claim about PSNR, one of the assumptions
behind the claim is that equal bitrates are used.
</p><p>
Nearly all of this guide's comments assume you are using two pass.
When comparing options, there are two major reasons for using
two pass encoding.
First, using two pass often gains around 1dB PSNR, which is a
very big difference.
Secondly, testing options by doing direct quality comparisons
with one pass encodes introduces a major confounding
factor: bitrate often varies significantly with each encode.
It is not always easy to tell whether quality changes are due
mainly to changed options, or if they mostly reflect essentially
random differences in the achieved bitrate.
</p></div><div class="sect3" title="10.5.1.2. Options which primarily affect speed and quality"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-speedvquality"></a>10.5.1.2. Options which primarily affect speed and quality</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>subq</strong></span>:
  Of the options which allow you to trade off speed for quality,
  <tt class="option">subq</tt> and <tt class="option">frameref</tt> (see below) are usually
  by far the most important.
  If you are interested in tweaking either speed or quality, these
  are the first options you should consider.
  On the speed dimension, the <tt class="option">frameref</tt> and
  <tt class="option">subq</tt> options interact with each other fairly
  strongly.
  Experience shows that, with one reference frame,
  <tt class="option">subq=5</tt> (the default setting) takes about 35% more time than
  <tt class="option">subq=1</tt>.
  With 6 reference frames, the penalty grows to over 60%.
  <tt class="option">subq</tt>'s effect on PSNR seems fairly constant
  regardless of the number of reference frames.
  Typically, <tt class="option">subq=5</tt> achieves 0.2-0.5 dB higher global
  PSNR in comparison <tt class="option">subq=1</tt>.
  This is usually enough to be visible.
  </p><p>
  <tt class="option">subq=6</tt> is slower and yields better quality at a reasonable
  cost.
  In comparison to <tt class="option">subq=5</tt>, it usually gains 0.1-0.4 dB
  global PSNR with speed costs varying from 25%-100%.
  Unlike other levels of <tt class="option">subq</tt>, the behavior of
  <tt class="option">subq=6</tt> does not depend much on <tt class="option">frameref</tt>
  and <tt class="option">me</tt>.  Instead, the effectiveness of <tt class="option">subq=6
  </tt> depends mostly upon the number of B-frames used. In normal
  usage, this means <tt class="option">subq=6</tt> has a large impact on both speed
  and quality in complex, high motion scenes, but it may not have much effect
  in low-motion scenes. Note that it is still recommended to always set
  <tt class="option">bframes</tt> to something other than zero (see below).
  </p><p>
  <tt class="option">subq=7</tt> is the slowest, highest quality mode.
  In comparison to <tt class="option">subq=6</tt>, it usually gains 0.01-0.05 dB
  global PSNR with speed costs varying from 15%-33%.
  Since the tradeoff encoding time vs. quality is quite low, you should
  only use it if you are after every bit saving and if encoding time is
  not an issue.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>frameref</strong></span>:
  <tt class="option">frameref</tt> is set to 1 by default, but this
  should not be taken to imply that it is reasonable to set it to 1.
  Merely raising <tt class="option">frameref</tt> to 2 gains around
  0.15dB PSNR with a 5-10% speed penalty; this seems like a good tradeoff.
  <tt class="option">frameref=3</tt> gains around 0.25dB PSNR over
  <tt class="option">frameref=1</tt>, which should be a visible difference.
  <tt class="option">frameref=3</tt> is around 15% slower than
  <tt class="option">frameref=1</tt>.
  Unfortunately, diminishing returns set in rapidly.
  <tt class="option">frameref=6</tt> can be expected to gain only
  0.05-0.1 dB over <tt class="option">frameref=3</tt> at an additional
  15% speed penalty.
  Above <tt class="option">frameref=6</tt>, the quality gains are
  usually very small (although you should keep in mind throughout
  this whole discussion that it can vary quite a lot depending on your source).
  In a fairly typical case, <tt class="option">frameref=12</tt>
  will improve global PSNR by a tiny 0.02dB over
  <tt class="option">frameref=6</tt>, at a speed cost of 15%-20%.
  At such high <tt class="option">frameref</tt> values, the only really
  good thing that can be said is that increasing it even further will
  almost certainly never <span class="bold"><strong>harm</strong></span>
  PSNR, but the additional quality benefits are barely even
  measurable, let alone perceptible.
  </p><div class="note" title="Note:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note:</h3><p>
  Raising <tt class="option">frameref</tt> to unnecessarily high values
  <span class="bold"><strong>can</strong></span> and
  <span class="bold"><strong>usually does</strong></span>
  hurt coding efficiency if you turn CABAC off.
  With CABAC on (the default behavior), the possibility of setting
  <tt class="option">frameref</tt> "too high" currently seems too remote
  to even worry about, and in the future, optimizations may remove
  the possibility altogether.
  </p></div><p>
  If you care about speed, a reasonable compromise is to use low
  <tt class="option">subq</tt> and <tt class="option">frameref</tt> values on
  the first pass, and then raise them on the second pass.
  Typically, this has a negligible negative effect on the final
  quality: You will probably lose well under 0.1dB PSNR, which
  should be much too small of a difference to see.
  However, different values of <tt class="option">frameref</tt> can
  occasionally affect frame type decision.
  Most likely, these are rare outlying cases, but if you want to
  be pretty sure, consider whether your video has either
  fullscreen repetitive flashing patterns or very large temporary
  occlusions which might force an I-frame.
  Adjust the first-pass <tt class="option">frameref</tt> so it is large
  enough to contain the duration of the flashing cycle (or occlusion).
  For example, if the scene flashes back and forth between two images
  over a duration of three frames, set the first pass
  <tt class="option">frameref</tt> to 3 or higher.
  This issue is probably extremely rare in live action video material,
  but it does sometimes come up in video game captures.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>me</strong></span>:
  This option is for choosing the motion estimation search method.
  Altering this option provides a straightforward quality-vs-speed
  tradeoff. <tt class="option">me=dia</tt> is only a few percent faster than
  the default search, at a cost of under 0.1dB global PSNR. The
  default setting (<tt class="option">me=hex</tt>) is a reasonable tradeoff
  between speed and quality. <tt class="option">me=umh</tt> gains a little under
  0.1dB global PSNR, with a speed penalty that varies depending on
  <tt class="option">frameref</tt>.  At high values of
  <tt class="option">frameref</tt> (e.g. 12 or so), <tt class="option">me=umh</tt>
  is about 40% slower than the default <tt class="option"> me=hex</tt>. With
  <tt class="option">frameref=3</tt>, the speed penalty incurred drops to
  25%-30%.
  </p><p>
  <tt class="option">me=esa</tt> uses an exhaustive search that is too slow for
  practical use.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>partitions=all</strong></span>:
  This option enables the use of 8x4, 4x8 and 4x4 subpartitions in
  predicted macroblocks (in addition to the default partitions).
  Enabling it results in a fairly consistent
  10%-15% loss of speed. This option is rather useless in source
  containing only low motion, however in some high-motion source,
  particularly source with lots of small moving objects, gains of
  about 0.1dB can be expected.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bframes</strong></span>:
  If you are used to encoding with other codecs, you may have found
  that B-frames are not always useful.
  In H.264, this has changed: there are new techniques and block
  types that are possible in B-frames.
  Usually, even a naive B-frame choice algorithm can have a
  significant PSNR benefit.
  It is interesting to note that using B-frames usually speeds up
  the second pass somewhat, and may also speed up a single
  pass encode if adaptive B-frame decision is turned off.
  </p><p>
  With adaptive B-frame decision turned off
  (<tt class="option">x264encopts</tt>'s <tt class="option">nob_adapt</tt>),
  the optimal value for this setting is usually no more than
  <tt class="option">bframes=1</tt>, or else high-motion scenes can suffer.
  With adaptive B-frame decision on (the default behavior), it is
  safe to use higher values; the encoder will reduce the use of
  B-frames in scenes where they would hurt compression.
  The encoder rarely chooses to use more than 3 or 4 B-frames;
  setting this option any higher will have little effect.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>b_adapt</strong></span>:
  Note: This is on by default.
  </p><p>
  With this option enabled, the encoder will use a reasonably fast
  decision process to reduce the number of B-frames used in scenes that
  might not benefit from them as much.
  You can use <tt class="option">b_bias</tt> to tweak how B-frame-happy
  the encoder is.
  The speed penalty of adaptive B-frames is currently rather modest,
  but so is the potential quality gain.
  It usually does not hurt, however.
  Note that this only affects speed and frame type decision on the
  first pass.
  <tt class="option">b_adapt</tt> and <tt class="option">b_bias</tt> have no
  effect on subsequent passes.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>b_pyramid</strong></span>:
  You might as well enable this option if you are using &gt;=2 B-frames;
  as the man page says, you get a little quality improvement at no
  speed cost.
  Note that these videos cannot be read by libavcodec-based decoders
  older than about March 5, 2005.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>weight_b</strong></span>:
  In typical cases, there is not much gain with this option.
  However, in crossfades or fade-to-black scenes, weighted
  prediction gives rather large bitrate savings.
  In MPEG-4 ASP, a fade-to-black is usually best coded as a series
  of expensive I-frames; using weighted prediction in B-frames
  makes it possible to turn at least some of these into much smaller
  B-frames.
  Encoding time cost is minimal, as no extra decisions need to be made.
  Also, contrary to what some people seem to guess, the decoder
  CPU requirements are not much affected by weighted prediction,
  all else being equal.
  </p><p>
  Unfortunately, the current adaptive B-frame decision algorithm
  has a strong tendency to avoid B-frames during fades.
  Until this changes, it may be a good idea to add
  <tt class="option">nob_adapt</tt> to your x264encopts, if you expect
  fades to have a large effect in your particular video
  clip.
  </p></li><li class="listitem"><p><a name="menc-feat-x264-encoding-options-speedvquality-threads"></a>
  <span class="bold"><strong>threads</strong></span>:
  This option allows to spawn threads to encode in parallel on multiple CPUs.
  You can manually select the number of threads to be created or, better, set
  <tt class="option">threads=auto</tt> and let
  <code class="systemitem">x264</code> detect how many CPUs are
  available and pick an appropriate number of threads.
  If you have a multi-processor machine, you should really consider using it
  as it can to increase encoding speed linearly with the number of CPU cores
  (about 94% per CPU core), with very little quality reduction (about 0.005dB
  for dual processor, about 0.01dB for a quad processor machine).
  </p></li></ul></div></div><div class="sect3" title="10.5.1.3. Options pertaining to miscellaneous preferences"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-misc-preferences"></a>10.5.1.3. Options pertaining to miscellaneous preferences</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Two pass encoding</strong></span>:
  Above, it was suggested to always use two pass encoding, but there
  are still reasons for not using it. For instance, if you are capturing
  live TV and encoding in realtime, you are forced to use single-pass.
  Also, one pass is obviously faster than two passes; if you use the
  exact same set of options on both passes, two pass encoding is almost
  twice as slow.
  </p><p>
  Still, there are very good reasons for using two pass encoding. For
  one thing, single pass ratecontrol is not psychic, and it often makes
  unreasonable choices because it cannot see the big picture. For example,
  suppose you have a two minute long video consisting of two distinct
  halves.  The first half is a very high-motion scene lasting 60 seconds
  which, in isolation, requires about 2500kbps in order to look decent.
  Immediately following it is a much less demanding 60-second scene
  that looks good at 300kbps. Suppose you ask for 1400kbps on the theory
  that this is enough to accommodate both scenes. Single pass ratecontrol
  will make a couple of "mistakes" in such a case. First of all, it
  will target 1400kbps in both segments. The first segment may end up
  heavily overquantized, causing it to look unacceptably and unreasonably
  blocky. The second segment will be heavily underquantized; it may look
  perfect, but the bitrate cost of that perfection will be completely
  unreasonable. What is even harder to avoid is the problem at the
  transition between the two scenes. The first seconds of the low motion
  half will be hugely over-quantized, because the ratecontrol is still
  expecting the kind of bitrate requirements it met in the first half
  of the video. This "error period" of heavily over-quantized low motion
  will look jarringly bad, and will actually use less than the 300kbps
  it would have taken to make it look decent. There are ways to
  mitigate the pitfalls of single-pass encoding, but they may tend to
  increase bitrate misprediction.
  </p><p>
  Multipass ratecontrol can offer huge advantages over a single pass.
  Using the statistics gathered from the first pass encode, the encoder
  can estimate, with reasonable accuracy, the "cost" (in bits) of
  encoding any given frame, at any given quantizer. This allows for
  a much more rational, better planned allocation of bits between the
  expensive (high-motion) and cheap (low-motion) scenes. See
  <tt class="option">qcomp</tt> below for some ideas on how to tweak this
  allocation to your liking.
  </p><p>
  Moreover, two passes need not take twice as long as one pass. You can
  tweak the options in the first pass for higher speed and lower quality.
  If you choose your options well, you can get a very fast first pass.
  The resulting quality in the second pass will be slightly lower because size
  prediction is less accurate, but the quality difference is normally much
  too small to be visible. Try, for example, adding
  <tt class="option">subq=1:frameref=1</tt> to the first pass
  <tt class="option">x264encopts</tt>. Then, on the second pass, use slower,
  higher-quality options:
  <tt class="option">subq=6:frameref=15:partitions=all:me=umh</tt>
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Three pass encoding</strong></span>?
  x264 offers the ability to make an arbitrary number of consecutive
  passes. If you specify <tt class="option">pass=1</tt> on the first pass,
  then use <tt class="option">pass=3</tt> on a subsequent pass, the subsequent
  pass will both read the statistics from the previous pass, and write
  its own statistics. An additional pass following this one will have
  a very good base from which to make highly accurate predictions of
  frame sizes at a chosen quantizer. In practice, the overall quality
  gain from this is usually close to zero, and quite possibly a third
  pass will result in slightly worse global PSNR than the pass before
  it. In typical usage, three passes help if you get either bad bitrate
  prediction or bad looking scene transitions when using only two passes.
  This is somewhat likely to happen on extremely short clips. There are
  also a few special cases in which three (or more) passes are handy
  for advanced users, but for brevity, this guide omits discussing those
  special cases.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qcomp</strong></span>:
  <tt class="option">qcomp</tt> trades off the number of bits allocated
  to "expensive" high-motion versus "cheap" low-motion frames. At
  one extreme, <tt class="option">qcomp=0</tt> aims for true constant
  bitrate. Typically this would make high-motion scenes look completely
  awful, while low-motion scenes would probably look absolutely
  perfect, but would also use many times more bitrate than they
  would need in order to look merely excellent. At the other extreme,
  <tt class="option">qcomp=1</tt> achieves nearly constant quantization parameter
  (QP). Constant QP does not look bad, but most people think it is more
  reasonable to shave some bitrate off of the extremely expensive scenes
  (where the loss of quality is not as noticeable) and reallocate it to
  the scenes that are easier to encode at excellent quality.
  <tt class="option">qcomp</tt> is set to 0.6 by default, which may be slightly
  low for many peoples' taste (0.7-0.8 are also commonly used).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>keyint</strong></span>:
  <tt class="option">keyint</tt> is solely for trading off file seekability against
  coding efficiency. By default, <tt class="option">keyint</tt> is set to 250. In
  25fps material, this guarantees the ability to seek to within 10 seconds
  precision. If you think it would be important and useful to be able to
  seek within 5 seconds of precision, set <tt class="option">keyint=125</tt>;
  this will hurt quality/bitrate slightly. If you care only about quality
  and not about seekability, you can set it to much higher values
  (understanding that there are diminishing returns which may become
  vanishingly low, or even zero). The video stream will still have seekable
  points as long as there are some scene changes.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>deblock</strong></span>:
  This topic is going to be a bit controversial.
  </p><p>
  H.264 defines a simple deblocking procedure on I-blocks that uses
  pre-set strengths and thresholds depending on the QP of the block
  in question.
  By default, high QP blocks are filtered heavily, and low QP blocks
  are not deblocked at all.
  The pre-set strengths defined by the standard are well-chosen and
  the odds are very good that they are PSNR-optimal for whatever
  video you are trying to encode.
  The <tt class="option">deblock</tt> allow you to specify offsets to the preset
  deblocking thresholds.
  </p><p>
  Many people seem to think it is a good idea to lower the deblocking
  filter strength by large amounts (say, -3).
  This is however almost never a good idea, and in most cases,
  people who are doing this do not understand very well how
  deblocking works by default.
  </p><p>
  The first and most important thing to know about the in-loop
  deblocking filter is that the default thresholds are almost always
  PSNR-optimal.
  In the rare cases that they are not optimal, the ideal offset is
  plus or minus 1.
  Adjusting deblocking parameters by a larger amount is almost
  guaranteed to hurt PSNR.
  Strengthening the filter will smear more details; weakening the
  filter will increase the appearance of blockiness.
  </p><p>
  It is definitely a bad idea to lower the deblocking thresholds if
  your source is mainly low in spacial complexity (i.e., not a lot
  of detail or noise).
  The in-loop filter does a rather excellent job of concealing
  the artifacts that occur.
  If the source is high in spacial complexity, however, artifacts
  are less noticeable.
  This is because the ringing tends to look like detail or noise.
  Human visual perception easily notices when detail is removed,
  but it does not so easily notice when the noise is wrongly
  represented.
  When it comes to subjective quality, noise and detail are somewhat
  interchangeable.
  By lowering the deblocking filter strength, you are most likely
  increasing error by adding ringing artifacts, but the eye does
  not notice because it confuses the artifacts with detail.
  </p><p>
  This <span class="bold"><strong>still</strong></span> does not justify
  lowering the deblocking filter strength, however.
  You can generally get better quality noise from postprocessing.
  If your H.264 encodes look too blurry or smeared, try playing with
  <tt class="option">-vf noise</tt> when you play your encoded movie.
  <tt class="option">-vf noise=8a:4a</tt> should conceal most mild
  artifacts.
  It will almost certainly look better than the results you
  would have gotten just by fiddling with the deblocking filter.
  </p></li></ul></div></div></div><div class="sect2" title="10.5.2. Encoding setting examples"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-x264-example-settings"></a>10.5.2. Encoding setting examples</h3></div></div></div><p>
The following settings are examples of different encoding
option combinations that affect the speed vs quality tradeoff
at the same target bitrate.
</p><p>
All the encoding settings were tested on a 720x448 @30000/1001 fps
video sample, the target bitrate was 900kbps, and the machine was an
AMD-64 3400+ at 2400 MHz in 64 bits mode.
Each encoding setting features the measured encoding speed (in
frames per second) and the PSNR loss (in dB) compared to the "very
high quality" setting.
Please understand that depending on your source, your machine type
and development advancements, you may get very different results.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Description</th><th>Encoding options</th><th>speed (in fps)</th><th>Relative PSNR loss (in dB)</th></tr></thead><tbody><tr><td>Very high quality</td><td><tt class="option">subq=6:partitions=all:8x8dct:me=umh:frameref=5:bframes=3:b_pyramid:weight_b</tt></td><td>6fps</td><td>0dB</td></tr><tr><td>High quality</td><td><tt class="option">subq=5:8x8dct:frameref=2:bframes=3:b_pyramid:weight_b</tt></td><td>13fps</td><td>-0.89dB</td></tr><tr><td>Fast</td><td><tt class="option">subq=4:bframes=2:b_pyramid:weight_b</tt></td><td>17fps</td><td>-1.48dB</td></tr></tbody></table></div></div></div><div class="sect1" title="10.6. Encoding with the Video For Windows codec family"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-video-for-windows"></a>10.6. 
  Encoding with the <code class="systemitem">Video For Windows</code>
  codec family
</h2></div></div></div><p>
Video for Windows provides simple encoding by means of binary video codecs.
You can encode with the following codecs (if you have more, please tell us!)
</p><p>
Note that support for this is very experimental and some codecs may not work
correctly. Some codecs will only work in certain colorspaces, try
<tt class="option">-vf format=bgr24</tt> and <tt class="option">-vf format=yuy2</tt>
if a codec fails or gives wrong output.
</p><div class="sect2" title="10.6.1. Video for Windows supported codecs"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-vfw-video-codecs"></a>10.6.1. Video for Windows supported codecs</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Video codec file name</th><th>Description (FourCC)</th><th>md5sum</th><th>Comment</th></tr></thead><tbody><tr><td>aslcodec_vfw.dll</td><td>Alparysoft lossless codec vfw (ASLC)</td><td>608af234a6ea4d90cdc7246af5f3f29a</td><td> </td></tr><tr><td>avimszh.dll</td><td>AVImszh (MSZH)</td><td>253118fe1eedea04a95ed6e5f4c28878</td><td>needs <tt class="option">-vf format</tt></td></tr><tr><td>avizlib.dll</td><td>AVIzlib (ZLIB)</td><td>2f1cc76bbcf6d77d40d0e23392fa8eda</td><td> </td></tr><tr><td>divx.dll</td><td>DivX4Windows-VFW</td><td>acf35b2fc004a89c829531555d73f1e6</td><td> </td></tr><tr><td>huffyuv.dll</td><td>HuffYUV (lossless) (HFYU)</td><td>b74695b50230be4a6ef2c4293a58ac3b</td><td> </td></tr><tr><td>iccvid.dll</td><td>Cinepak Video (cvid)</td><td>cb3b7ee47ba7dbb3d23d34e274895133</td><td> </td></tr><tr><td>icmw_32.dll</td><td>Motion Wavelets (MWV1)</td><td>c9618a8fc73ce219ba918e3e09e227f2</td><td> </td></tr><tr><td>jp2avi.dll</td><td>ImagePower MJPEG2000 (IPJ2)</td><td>d860a11766da0d0ea064672c6833768b</td><td><tt class="option">-vf flip</tt></td></tr><tr><td>m3jp2k32.dll</td><td>Morgan MJPEG2000 (MJ2C)</td><td>f3c174edcbaef7cb947d6357cdfde7ff</td><td> </td></tr><tr><td>m3jpeg32.dll</td><td>Morgan Motion JPEG Codec (MJPEG)</td><td>1cd13fff5960aa2aae43790242c323b1</td><td> </td></tr><tr><td>mpg4c32.dll</td><td>Microsoft MPEG-4 v1/v2</td><td>b5791ea23f33010d37ab8314681f1256</td><td> </td></tr><tr><td>tsccvid.dll</td><td>TechSmith Camtasia Screen Codec (TSCC)</td><td>8230d8560c41d444f249802a2700d1d5</td><td>shareware error on windows</td></tr><tr><td>vp31vfw.dll</td><td>On2 Open Source VP3 Codec (VP31)</td><td>845f3590ea489e2e45e876ab107ee7d2</td><td> </td></tr><tr><td>vp4vfw.dll</td><td>On2 VP4 Personal Codec (VP40)</td><td>fc5480a482ccc594c2898dcc4188b58f</td><td> </td></tr><tr><td>vp6vfw.dll</td><td>On2 VP6 Personal Codec (VP60)</td><td>04d635a364243013898fd09484f913fb</td><td> </td></tr><tr><td>vp7vfw.dll</td><td>On2 VP7 Personal Codec (VP70)</td><td>cb4cc3d4ea7c94a35f1d81c3d750bc8d</td><td><tt class="option">-ffourcc VP70</tt></td></tr><tr><td>ViVD2.dll</td><td>SoftMedia ViVD V2 codec VfW (GXVE)</td><td>a7b4bf5cac630bb9262c3f80d8a773a1</td><td> </td></tr><tr><td>msulvc06.DLL</td><td>MSU Lossless codec (MSUD)</td><td>294bf9288f2f127bb86f00bfcc9ccdda</td><td>
  Decodable by <span class="application">Window Media Player</span>,
  not <span class="application">MPlayer</span> (yet).
  </td></tr><tr><td>camcodec.dll</td><td>CamStudio lossless video codec (CSCD)</td><td>0efe97ce08bb0e40162ab15ef3b45615</td><td>sf.net/projects/camstudio</td></tr></tbody></table></div><p>

The first column contains the codec names that should be passed after the
<code class="literal">codec</code> parameter,
like: <tt class="option">-xvfwopts codec=divx.dll</tt>
The FourCC code used by each codec is given in the parentheses.
</p><div class="informalexample"><p>
An example to convert an ISO DVD trailer to a VP6 flash video file
using compdata bitrate settings:
</p><pre class="screen">
mencoder -dvd-device <em class="replaceable"><code>zeiram.iso</code></em> dvd://7 -o <em class="replaceable"><code>trailer.flv</code></em> \
-ovc vfw -xvfwopts codec=vp6vfw.dll:compdata=onepass.mcf -oac mp3lame \
-lameopts cbr:br=64 -af lavcresample=22050 -vf yadif,scale=320:240,flip \
-of lavf
</pre><p>
</p></div></div><div class="sect2" title="10.6.2. Using vfw2menc to create a codec settings file."><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-video-for-windows-bitrate-settings"></a>10.6.2. Using vfw2menc to create a codec settings file.</h3></div></div></div><p>
To encode with the Video for Windows codecs, you will need to set bitrate
and other options. This is known to work on x86 on both *NIX and Windows.
</p><p>
First you must build the <span class="application">vfw2menc</span> program.
It is located in the <tt class="filename">TOOLS</tt> subdirectory
of the MPlayer source tree.
To build on Linux, this can be done using <span class="application">Wine</span>:
</p><pre class="screen">winegcc vfw2menc.c -o vfw2menc -lwinmm -lole32</pre><p>

To build on Windows in <span class="application">MinGW</span> or
<span class="application">Cygwin</span> use:
</p><pre class="screen">gcc vfw2menc.c -o vfw2menc.exe -lwinmm -lole32</pre><p>

To build on <span class="application">MSVC</span> you will need getopt.
Getopt can be found in the original <span class="application">vfw2menc</span>
archive available at:
The <a class="ulink" href="http://oss.netfarm.it/mplayer-win32.php" target="_top">MPlayer on win32</a> project.
</p><div class="informalexample"><p>
Below is an example with the VP6 codec.
</p><pre class="screen">
vfw2menc -f VP62 -d vp6vfw.dll -s firstpass.mcf
</pre><p>
This will open the VP6 codec dialog window.
Repeat this step for the second pass
and use <tt class="option">-s <em class="replaceable"><code>secondpass.mcf</code></em></tt>.
</p></div><p>
Windows users can use
<tt class="option">-xvfwopts codec=vp6vfw.dll:compdata=dialog</tt> to have
the codec dialog display before encoding starts.
</p></div></div><div class="sect1" title="10.7. Using MEncoder to create QuickTime-compatible files"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-quicktime-7"></a>10.7. Using <span class="application">MEncoder</span> to create
<span class="application">QuickTime</span>-compatible files</h2></div></div></div><div class="sect2" title="10.7.1. Why would one want to produce QuickTime-compatible Files?"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-why-use-it"></a>10.7.1. Why would one want to produce <span class="application">QuickTime</span>-compatible Files?</h3></div></div></div><p>
  There are several reasons why producing
  <span class="application">QuickTime</span>-compatible files can be desirable.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  You want any computer illiterate to be able to watch your encode on
  any major platform (Windows, Mac OS X, Unices …).
</p></li><li class="listitem"><p>
  <span class="application">QuickTime</span> is able to take advantage of more
  hardware and software acceleration features of Mac OS X than
  platform-independent players like <span class="application">MPlayer</span>
  or <span class="application">VLC</span>.
  That means that your encodes have a chance to be played smoothly by older
  G4-powered machines.
</p></li><li class="listitem"><p>
  <span class="application">QuickTime</span> 7 supports the next-generation codec H.264,
  which yields significantly better picture quality than previous codec
  generations (MPEG-2, MPEG-4 …).
</p></li></ul></div></div><div class="sect2" title="10.7.2. QuickTime 7 limitations"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-constraints"></a>10.7.2. <span class="application">QuickTime</span> 7 limitations</h3></div></div></div><p>
  <span class="application">QuickTime</span> 7 supports H.264 video and AAC audio,
  but it does not support them muxed in the AVI container format.
  However, you can use <span class="application">MEncoder</span> to encode
  the video and audio, and then use an external program such as
  <span class="application">mp4creator</span> (part of the
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a>)
  to remux the video and audio tracks into an MP4 container.
</p><p>
  <span class="application">QuickTime</span>'s support for H.264 is limited,
  so you will need to drop some advanced features.
  If you encode your video with features that
  <span class="application">QuickTime</span> 7 does not support,
  <span class="application">QuickTime</span>-based players will show you a pretty
  white screen instead of your expected video.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>B-frames</strong></span>:
  <span class="application">QuickTime</span> 7 supports a maximum of 1 B-frame, i.e.
  <tt class="option">-x264encopts bframes=1</tt>. This means that
  <tt class="option">b_pyramid</tt> and <tt class="option">weight_b</tt> will have no
  effect, since they require <tt class="option">bframes</tt> to be greater than 1.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Macroblocks</strong></span>:
  <span class="application">QuickTime</span> 7 does not support 8x8 DCT macroblocks.
  This option (<tt class="option">8x8dct</tt>) is off by default, so just be sure
  not to explicitly enable it. This also means that the <tt class="option">i8x8</tt>
  option will have no effect, since it requires <tt class="option">8x8dct</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Aspect ratio</strong></span>:
  <span class="application">QuickTime</span> 7 does not support SAR (sample
  aspect ratio) information in MPEG-4 files; it assumes that SAR=1. Read
  <a class="link" href="#menc-feat-quicktime-7-scale" title="10.7.4. Scaling">the section on scaling</a>
  for a workaround.
</p></li></ul></div></div><div class="sect2" title="10.7.3. Cropping"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-crop"></a>10.7.3. Cropping</h3></div></div></div><p>
  Suppose you want to rip your freshly bought copy of "The Chronicles of
  Narnia". Your DVD is region 1,
  which means it is NTSC. The example below would still apply to PAL,
  except you would omit <tt class="option">-ofps 24000/1001</tt> and use slightly
  different <tt class="option">crop</tt> and <tt class="option">scale</tt> dimensions.
</p><p>
  After running <tt class="option">mplayer dvd://1</tt>, you follow the process
  detailed in the section <a class="link" href="#menc-feat-telecine" title="10.2. How to deal with telecine and interlacing within NTSC DVDs">How to deal
  with telecine and interlacing in NTSC DVDs</a> and discover that it is
  24000/1001 fps progressive video. This simplifies the process somewhat,
  since you do not need to use an inverse telecine filter such as
  <tt class="option">pullup</tt> or a deinterlacing filter such as
  <tt class="option">yadif</tt>.
</p><p>
  Next, you need to crop out the black bars from the top and bottom of the
  video, as detailed in <a class="link" href="#menc-feat-dvd-mpeg4-example-crop">this</a>
  previous section.
</p></div><div class="sect2" title="10.7.4. Scaling"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-scale"></a>10.7.4. Scaling</h3></div></div></div><p>
  The next step is truly heartbreaking.
  <span class="application">QuickTime</span> 7 does not support MPEG-4 videos
  with a sample aspect ratio other than 1, so you will need to upscale
  (which wastes a lot of disk space) or downscale (which loses some
  details of the source) the video to square pixels.
  Either way you do it, this is highly inefficient, but simply cannot
  be avoided if you want your video to be playable by
  <span class="application">QuickTime</span> 7.
  <span class="application">MEncoder</span> can apply the appropriate upscaling
  or downscaling by specifying respectively <tt class="option">-vf scale=-10:-1</tt>
  or <tt class="option">-vf scale=-1:-10</tt>.
  This will scale your video to the correct width for the cropped height,
  rounded to the closest multiple of 16 for optimal compression.
  Remember that if you are cropping, you should crop first, then scale:

  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1</pre><p>
</p></div><div class="sect2" title="10.7.5. A/V sync"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-avsync"></a>10.7.5. A/V sync</h3></div></div></div><p>
  Because you will be remuxing into a different container, you should
  always use the <tt class="option">harddup</tt> option to ensure that duplicated
  frames are actually duplicated in the video output. Without this option,
  <span class="application">MEncoder</span> will simply put a marker in the video
  stream that a frame was duplicated, and rely on the client software to
  show the same frame twice. Unfortunately, this "soft duplication" does
  not survive remuxing, so the audio would slowly lose sync with the video.
</p><p>
  The final filter chain looks like this:
  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1,harddup</pre><p>
</p></div><div class="sect2" title="10.7.6. Bitrate"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-bitrate"></a>10.7.6. Bitrate</h3></div></div></div><p>
  As always, the selection of bitrate is a matter of the technical properties
  of the source, as explained
  <a class="link" href="#menc-feat-dvd-mpeg4-resolution-bitrate" title="10.1.5. Dobieranie rozdzielczości i bitrate">here</a>, as
  well as a matter of taste.
  This movie has a fair bit of action and lots of detail, but H.264 video
  looks good at much lower bitrates than XviD or other MPEG-4 codecs.
  After much experimentation, the author of this guide chose to encode
  this movie at 900kbps, and thought that it looked very good.
  You may decrease bitrate if you need to save more space, or increase
  it if you need to improve quality.
</p></div><div class="sect2" title="10.7.7. Encoding example"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-example"></a>10.7.7. Encoding example</h3></div></div></div><p>
  You are now ready to encode the video. Since you care about
  quality, of course you will be doing a two-pass encode. To shave off
  some encoding time, you can specify the <tt class="option">turbo</tt> option
  on the first pass; this reduces <tt class="option">subq</tt> and
  <tt class="option">frameref</tt> to 1. To save some disk space, you can
  use the <tt class="option">ss</tt> option to strip off the first few seconds
  of the video. (I found that this particular movie has 32 seconds of
  credits and logos.)  <tt class="option">bframes</tt> can be 0 or 1.
  The other options are documented in <a class="link" href="#menc-feat-x264-encoding-options-speedvquality" title="10.5.1.2. Options which primarily affect speed and quality">Encoding with
  the <code class="systemitem">x264</code> codec</a> and
  the man page.

  </p><pre class="screen">mencoder dvd://1 -o /dev/null -ss 32 -ovc x264 \
-x264encopts pass=1:turbo:bitrate=900:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>

  If you have a multi-processor machine, don't miss the opportunity to
  dramatically speed-up encoding by enabling
  <a class="link" href="#menc-feat-x264-encoding-options-speedvquality-threads">
  <code class="systemitem">x264</code>'s multi-threading mode</a>
  by adding <tt class="option">threads=auto</tt> to your <tt class="option">x264encopts</tt>
  command-line.
</p><p>
  The second pass is the same, except that you specify the output file
  and set <tt class="option">pass=2</tt>.

  </p><pre class="screen">mencoder dvd://1 <span class="bold"><strong>-o narnia.avi</strong></span> -ss 32 -ovc x264 \
-x264encopts <span class="bold"><strong>pass=2</strong></span>:turbo:bitrate=900:frameref=5:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>
</p><p>
  The resulting AVI should play perfectly in
  <span class="application">MPlayer</span>, but of course
  <span class="application">QuickTime</span> can not play it because it does
  not support H.264 muxed in AVI.
  So the next step is to remux the video into an MP4 container.
</p></div><div class="sect2" title="10.7.8. Remuxing as MP4"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-remux"></a>10.7.8. Remuxing as MP4</h3></div></div></div><p>
  There are several ways to remux AVI files to MP4. You can use
  <span class="application">mp4creator</span>, which is part of the
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a>.
</p><p>
  First, demux the AVI into separate audio and video streams using
  <span class="application">MPlayer</span>.

  </p><pre class="screen">mplayer narnia.avi -dumpaudio -dumpfile narnia.aac
mplayer narnia.avi -dumpvideo -dumpfile narnia.h264</pre><p>

  The file names are important; <span class="application">mp4creator</span>
  requires that AAC audio streams be named <code class="systemitem">.aac</code>
  and H.264 video streams be named <code class="systemitem">.h264</code>.
</p><p>
  Now use <span class="application">mp4creator</span> to create a new
  MP4 file out of the audio and video streams.

  </p><pre class="screen">mp4creator -create=narnia.aac narnia.mp4
mp4creator -create=narnia.h264 -rate=23.976 narnia.mp4</pre><p>

  Unlike the encoding step, you must specify the framerate as a
  decimal (such as 23.976), not a fraction (such as 24000/1001).
</p><p>
  This <code class="systemitem">narnia.mp4</code> file should now be playable
  with any <span class="application">QuickTime</span> 7 application, such as
  <span class="application">QuickTime Player</span> or
  <span class="application">iTunes</span>. If you are planning to view the
  video in a web browser with the <span class="application">QuickTime</span>
  plugin, you should also hint the movie so that the
  <span class="application">QuickTime</span> plugin can start playing it
  while it is still downloading.  <span class="application">mp4creator</span>
  can create these hint tracks:

  </p><pre class="screen">mp4creator -hint=1 narnia.mp4
mp4creator -hint=2 narnia.mp4
mp4creator -optimize narnia.mp4</pre><p>

  You can check the final result to ensure that the hint tracks were
  created successfully:

  </p><pre class="screen">mp4creator -list narnia.mp4</pre><p>

  You should see a list of tracks: 1 audio, 1 video, and 2 hint tracks.

</p><pre class="screen">Track   Type    Info
1       audio   MPEG-4 AAC LC, 8548.714 secs, 190 kbps, 48000 Hz
2       video   H264 Main@5.1, 8549.132 secs, 899 kbps, 848x352 @ 23.976001 fps
3       hint    Payload mpeg4-generic for track 1
4       hint    Payload H264 for track 2
</pre><p>
</p></div><div class="sect2" title="10.7.9. Adding metadata tags"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-metadata"></a>10.7.9. Adding metadata tags</h3></div></div></div><p>
  If you want to add tags to your video that show up in iTunes, you can use
  <a class="ulink" href="http://atomicparsley.sourceforge.net/" target="_top">AtomicParsley</a>.

  </p><pre class="screen">AtomicParsley narnia.mp4 --metaEnema --title "The Chronicles of Narnia" --year 2005 --stik Movie --freefree --overWrite</pre><p>

  The <tt class="option">--metaEnema</tt> option removes any existing metadata
  (<span class="application">mp4creator</span> inserts its name in the
  "encoding tool" tag), and <tt class="option">--freefree</tt> reclaims the
  space from the deleted metadata.
  The <tt class="option">--stik</tt> option sets the type of video (such as Movie
  or TV Show), which iTunes uses to group related video files.
  The <tt class="option">--overWrite</tt> option overwrites the original file;
  without it, <span class="application">AtomicParsley</span> creates a new
  auto-named file in the same directory and leaves the original file
  untouched.
</p></div></div><div class="sect1" title="10.8. Using MEncoder to create VCD/SVCD/DVD-compliant files"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-vcd-dvd"></a>10.8. Using <span class="application">MEncoder</span>
  to create VCD/SVCD/DVD-compliant files</h2></div></div></div><div class="sect2" title="10.8.1. Format Constraints"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-constraints"></a>10.8.1. Format Constraints</h3></div></div></div><p>
<span class="application">MEncoder</span> is capable of creating VCD, SCVD
and DVD format MPEG files using the
<code class="systemitem">libavcodec</code> library.
These files can then be used in conjunction with
<a class="ulink" href="http://www.gnu.org/software/vcdimager/vcdimager.html" target="_top">vcdimager</a>
or
<a class="ulink" href="http://dvdauthor.sourceforge.net/" target="_top">dvdauthor</a>
to create discs that will play on a standard set-top player.
</p><p>
The DVD, SVCD, and VCD formats are subject to heavy constraints.
Only a small selection of encoded picture sizes and aspect ratios are
available.
If your movie does not already meet these requirements, you may have
to scale, crop or add black borders to the picture to make it
compliant.
</p><div class="sect3" title="10.8.1.1. Format Constraints"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-resolution"></a>10.8.1.1. Format Constraints</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>Format</th><th>Resolution</th><th>V. Codec</th><th>V. Bitrate</th><th>Sample Rate</th><th>A. Codec</th><th>A. Bitrate</th><th>FPS</th><th>Aspect</th></tr></thead><tbody><tr><td>NTSC DVD</td><td>720x480, 704x480, 352x480, 352x240</td><td>MPEG-2</td><td>9800 kbps</td><td>48000 Hz</td><td>AC-3,PCM</td><td>1536 kbps (max)</td><td>30000/1001, 24000/1001</td><td>4:3, 16:9 (only for 720x480)</td></tr><tr><td>NTSC DVD</td><td>352x240<sup>[<a name="fn-rare-resolutions" href="#ftn.fn-rare-resolutions" class="footnote">a</a>]</sup></td><td>MPEG-1</td><td>1856 kbps</td><td>48000 Hz</td><td>AC-3,PCM</td><td>1536 kbps (max)</td><td>30000/1001, 24000/1001</td><td>4:3, 16:9</td></tr><tr><td>NTSC SVCD</td><td>480x480</td><td>MPEG-2</td><td>2600 kbps</td><td>44100 Hz</td><td>MP2</td><td>384 kbps (max)</td><td>30000/1001</td><td>4:3</td></tr><tr><td>NTSC VCD</td><td>352x240</td><td>MPEG-1</td><td>1150 kbps</td><td>44100 Hz</td><td>MP2</td><td>224 kbps</td><td>24000/1001, 30000/1001</td><td>4:3</td></tr><tr><td>PAL DVD</td><td>720x576, 704x576, 352x576, 352x288</td><td>MPEG-2</td><td>9800 kbps</td><td>48000 Hz</td><td>MP2,AC-3,PCM</td><td>1536 kbps (max)</td><td>25</td><td>4:3, 16:9 (only for 720x576)</td></tr><tr><td>PAL DVD</td><td>352x288<sup>[<a href="#ftn.fn-rare-resolutions" class="footnoteref">a</a>]</sup></td><td>MPEG-1</td><td>1856 kbps</td><td>48000 Hz</td><td>MP2,AC-3,PCM</td><td>1536 kbps (max)</td><td>25</td><td>4:3, 16:9</td></tr><tr><td>PAL SVCD</td><td>480x576</td><td>MPEG-2</td><td>2600 kbps</td><td>44100 Hz</td><td>MP2</td><td>384 kbps (max)</td><td>25</td><td>4:3</td></tr><tr><td>PAL VCD</td><td>352x288</td><td>MPEG-1</td><td>1152 kbps</td><td>44100 Hz</td><td>MP2</td><td>224 kbps</td><td>25</td><td>4:3</td></tr></tbody><tbody class="footnotes"><tr><td colspan="9"><div class="footnote"><p><sup>[<a name="ftn.fn-rare-resolutions" href="#fn-rare-resolutions" class="para">a</a>] </sup>
  These resolutions are rarely used for DVDs because
  they are fairly low quality.</p></div></td></tr></tbody></table></div><p>
If your movie has 2.35:1 aspect (most recent action movies), you will
have to add black borders or crop the movie down to 16:9 to make a DVD or VCD.
If you add black borders, try to align them at 16-pixel boundaries in
order to minimize the impact on encoding performance.
Thankfully DVD has sufficiently excessive bitrate that you do not have
to worry too much about encoding efficiency, but SVCD and VCD are
highly bitrate-starved and require effort to obtain acceptable quality.
</p></div><div class="sect3" title="10.8.1.2. GOP Size Constraints"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-gop"></a>10.8.1.2. GOP Size Constraints</h4></div></div></div><p>
DVD, VCD, and SVCD also constrain you to relatively low
GOP (Group of Pictures) sizes.
For 30 fps material the largest allowed GOP size is 18.
For 25 or 24 fps, the maximum is 15.
The GOP size is set using the <tt class="option">keyint</tt> option.
</p></div><div class="sect3" title="10.8.1.3. Bitrate Constraints"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-bitrate"></a>10.8.1.3. Bitrate Constraints</h4></div></div></div><p>
VCD video is required to be CBR at 1152 kbps.
This highly limiting constraint also comes along with an extremely low vbv
buffer size of 327 kilobits.
SVCD allows varying video bitrates up to 2500 kbps, and a somewhat less
restrictive vbv buffer size of 917 kilobits is allowed.
DVD video bitrates may range anywhere up to 9800 kbps (though typical
bitrates are about half that), and the vbv buffer size is 1835 kilobits.
</p></div></div><div class="sect2" title="10.8.2. Output Options"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-output"></a>10.8.2. Output Options</h3></div></div></div><p>
<span class="application">MEncoder</span> has options to control the output
format.
Using these options we can instruct it to create the correct type of
file.
</p><p>
The options for VCD and SVCD are called xvcd and xsvcd, because they
are extended formats.
They are not strictly compliant, mainly because the output does not
contain scan offsets.
If you need to generate an SVCD image, you should pass the output file to
<a class="ulink" href="http://www.gnu.org/software/vcdimager/vcdimager.html" target="_top">vcdimager</a>.
</p><p>
VCD:
</p><pre class="screen">-of mpeg -mpegopts format=xvcd</pre><p>
</p><p>
SVCD:
</p><pre class="screen">-of mpeg -mpegopts format=xsvcd</pre><p>
</p><p>
DVD (with timestamps on every frame, if possible):
</p><pre class="screen">-of mpeg -mpegopts format=dvd:tsaf</pre><p>
</p><p>
DVD with NTSC Pullup:
</p><pre class="screen">-of mpeg -mpegopts format=dvd:tsaf:telecine -ofps 24000/1001</pre><p>
This allows 24000/1001 fps progressive content to be encoded at 30000/1001
fps whilst maintaining DVD-compliance.
</p><div class="sect3" title="10.8.2.1. Aspect Ratio"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-output-aspect"></a>10.8.2.1. Aspect Ratio</h4></div></div></div><p>
The aspect argument of <tt class="option">-lavcopts</tt> is used to encode
the aspect ratio of the file.
During playback the aspect ratio is used to restore the video to the
correct size.
</p><p>
16:9 or "Widescreen"
</p><pre class="screen">-lavcopts aspect=16/9</pre><p>
</p><p>
4:3 or "Fullscreen"
</p><pre class="screen">-lavcopts aspect=4/3</pre><p>
</p><p>
2.35:1 or "Cinemascope" NTSC
</p><pre class="screen">-vf scale=720:368,expand=720:480 -lavcopts aspect=16/9</pre><p>
To calculate the correct scaling size, use the expanded NTSC width of
854/2.35 = 368
</p><p>
2.35:1 or "Cinemascope" PAL
</p><pre class="screen">-vf scale=720:432,expand=720:576 -lavcopts aspect=16/9</pre><p>
To calculate the correct scaling size, use the expanded PAL width of
1024/2.35 = 432
</p></div><div class="sect3" title="10.8.2.2. Maintaining A/V sync"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-a-v-sync"></a>10.8.2.2. Maintaining A/V sync</h4></div></div></div><p>
In order to maintain audio/video synchronization throughout the encode,
<span class="application">MEncoder</span> has to drop or duplicate frames.
This works rather well when muxing into an AVI file, but is almost
guaranteed to fail to maintain A/V sync with other muxers such as MPEG.
This is why it is necessary to append the
<tt class="option">harddup</tt> video filter at the end of the filter chain
to avoid this kind of problem.
You can find more technical information about <tt class="option">harddup</tt>
in the section
<a class="link" href="#menc-feat-dvd-mpeg4-muxing-filter-issues" title="10.1.12.1. Improving muxing and A/V sync reliability">Improving muxing and A/V sync reliability</a>
or in the manual page.
</p></div><div class="sect3" title="10.8.2.3. Sample Rate Conversion"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-output-srate"></a>10.8.2.3. Sample Rate Conversion</h4></div></div></div><p>
If the audio sample rate in the original file is not the same as
required by the target format, sample rate conversion is required.
This is achieved using the <tt class="option">-srate</tt> option and
the <tt class="option">-af lavcresample</tt> audio filter together.
</p><p>
DVD:
</p><pre class="screen">-srate 48000 -af lavcresample=48000</pre><p>
</p><p>
VCD and SVCD:
</p><pre class="screen">-srate 44100 -af lavcresample=44100</pre><p>
</p></div></div><div class="sect2" title="10.8.3. Using libavcodec for VCD/SVCD/DVD Encoding"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-lavc"></a>10.8.3. Using libavcodec for VCD/SVCD/DVD Encoding</h3></div></div></div><div class="sect3" title="10.8.3.1. Introduction"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-intro"></a>10.8.3.1. Introduction</h4></div></div></div><p>
<code class="systemitem">libavcodec</code> can be used to
create VCD/SVCD/DVD compliant video by using the appropriate options.
</p></div><div class="sect3" title="10.8.3.2. lavcopts"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-options"></a>10.8.3.2. lavcopts</h4></div></div></div><p>
This is a list of fields in <tt class="option">-lavcopts</tt> that you may
be required to change in order to make a complaint movie for VCD, SVCD,
or DVD:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>acodec</strong></span>:
  <tt class="option">mp2</tt> for VCD, SVCD, or PAL DVD;
  <tt class="option">ac3</tt> is most commonly used for DVD.
  PCM audio may also be used for DVD, but this is mostly a big waste of
  space.
  Note that MP3 audio is not compliant for any of these formats, but
  players often have no problem playing it anyway.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>abitrate</strong></span>:
  224 for VCD; up to 384 for SVCD; up to 1536 for  DVD, but commonly
  used values range from 192 kbps for stereo to 384 kbps for 5.1 channel
  sound.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vcodec</strong></span>:
  <tt class="option">mpeg1video</tt> for VCD;
  <tt class="option">mpeg2video</tt> for SVCD;
  <tt class="option">mpeg2video</tt> is usually used for DVD but you may also use
  <tt class="option">mpeg1video</tt> for CIF resolutions.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>keyint</strong></span>:
  Used to set the GOP size.
  18 for 30fps material, or 15 for 25/24 fps material.
  Commercial producers seem to prefer keyframe intervals of 12.
  It is possible to make this much larger and still retain compatibility
  with most players.
  A <tt class="option">keyint</tt> of 25 should never cause any problems.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_buf_size</strong></span>:
  327 for VCD, 917 for SVCD, and 1835 for DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_minrate</strong></span>:
  1152, for VCD. May be left alone for SVCD and DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_maxrate</strong></span>:
  1152 for VCD; 2500 for SVCD; 9800 for DVD.
  For SVCD and DVD, you might wish to use lower values depending on your
  own personal preferences and requirements.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vbitrate</strong></span>:
  1152 for VCD;
  up to 2500 for SVCD;
  up to 9800 for DVD.
  For the latter two formats, vbitrate should be set based on personal
  preference.
  For instance, if you insist on fitting 20 or so hours on a DVD, you
  could use vbitrate=400.
  The resulting video quality would probably be quite bad.
  If you are trying to squeeze out the maximum possible quality on a DVD,
  use vbitrate=9800, but be warned that this could constrain you to less
  than an hour of video on a single-layer DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vstrict</strong></span>:
  <tt class="option">vstrict</tt>=0 should be used to create DVDs.
  Without this option, <span class="application">MEncoder</span> creates a
  stream that cannot be correctly decoded by some standalone DVD
  players.
</p></li></ul></div></div><div class="sect3" title="10.8.3.3. Examples"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-examples"></a>10.8.3.3. Examples</h4></div></div></div><p>
This is a typical minimum set of <tt class="option">-lavcopts</tt> for
encoding video:
</p><p>
VCD:
</p><pre class="screen">
-lavcopts vcodec=mpeg1video:vrc_buf_size=327:vrc_minrate=1152:\
vrc_maxrate=1152:vbitrate=1152:keyint=15:acodec=mp2
</pre><p>
</p><p>
SVCD:
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=917:vrc_maxrate=2500:vbitrate=1800:\
keyint=15:acodec=mp2
</pre><p>
</p><p>
DVD:
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:acodec=ac3
</pre><p>
</p></div><div class="sect3" title="10.8.3.4. Advanced Options"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-advanced"></a>10.8.3.4. Advanced Options</h4></div></div></div><p>
For higher quality encoding, you may also wish to add quality-enhancing
options to lavcopts, such as <tt class="option">trell</tt>,
<tt class="option">mbd=2</tt>, and others.
Note that <tt class="option">qpel</tt> and <tt class="option">v4mv</tt>, while often
useful with MPEG-4, are not usable with MPEG-1 or MPEG-2.
Also, if you are trying to make a very high quality DVD encode, it may
be useful to add <tt class="option">dc=10</tt> to lavcopts.
Doing so may help reduce the appearance of blocks in flat-colored areas.
Putting it all together, this is an example of a set of lavcopts for a
higher quality DVD:
</p><p>
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=8000:\
keyint=15:trell:mbd=2:precmp=2:subcmp=2:cmp=2:dia=-10:predia=-10:cbp:mv0:\
vqmin=1:lmin=1:dc=10:vstrict=0
</pre><p>
</p></div></div><div class="sect2" title="10.8.4. Encoding Audio"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-audio"></a>10.8.4. Encoding Audio</h3></div></div></div><p>
VCD and SVCD support MPEG-1 layer II audio, using one of
<code class="systemitem">toolame</code>,
<code class="systemitem">twolame</code>,
or <code class="systemitem">libavcodec</code>'s MP2 encoder.
The libavcodec MP2 is far from being as good as the other two libraries,
however it should always be available to use.
VCD only supports constant bitrate audio (CBR) whereas SVCD supports
variable bitrate (VBR), too.
Be careful when using VBR because some bad standalone players might not
support it too well.
</p><p>
For DVD audio, <code class="systemitem">libavcodec</code>'s
AC-3 codec is used.
</p><div class="sect3" title="10.8.4.1. toolame"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-toolame"></a>10.8.4.1. toolame</h4></div></div></div><p>
For VCD and SVCD:
</p><pre class="screen">-oac toolame -toolameopts br=224</pre><p>
</p></div><div class="sect3" title="10.8.4.2. twolame"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-twolame"></a>10.8.4.2. twolame</h4></div></div></div><p>
For VCD and SVCD:
</p><pre class="screen">-oac twolame -twolameopts br=224</pre><p>
</p></div><div class="sect3" title="10.8.4.3. libavcodec"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-lavc"></a>10.8.4.3. libavcodec</h4></div></div></div><p>
For DVD with 2 channel sound:
</p><pre class="screen">-oac lavc -lavcopts acodec=ac3:abitrate=192</pre><p>
</p><p>
For DVD with 5.1 channel sound:
</p><pre class="screen">-channels 6 -oac lavc -lavcopts acodec=ac3:abitrate=384</pre><p>
</p><p>
For VCD and SVCD:
</p><pre class="screen">-oac lavc -lavcopts acodec=mp2:abitrate=224</pre><p>
</p></div></div><div class="sect2" title="10.8.5. Putting it all Together"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-all"></a>10.8.5. Putting it all Together</h3></div></div></div><p>
This section shows some complete commands for creating VCD/SVCD/DVD
compliant videos.
</p><div class="sect3" title="10.8.5.1. PAL DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-dvd"></a>10.8.5.1. PAL DVD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:576,harddup -srate 48000 -af lavcresample=48000 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:acodec=ac3:abitrate=192:aspect=16/9 -ofps 25 \
  -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.2. NTSC DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-dvd"></a>10.8.5.2. NTSC DVD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:480,harddup -srate 48000 -af lavcresample=48000 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=18:vstrict=0:acodec=ac3:abitrate=192:aspect=16/9 -ofps 30000/1001 \
  -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.3. PAL AVI Containing AC-3 Audio to DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-ac3-copy"></a>10.8.5.3. PAL AVI Containing AC-3 Audio to DVD</h4></div></div></div><p>
If the source already has AC-3 audio, use -oac copy instead of re-encoding it.
</p><pre class="screen">
mencoder -oac copy -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:576,harddup -ofps 25 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:aspect=16/9 -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.4. NTSC AVI Containing AC-3 Audio to DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-ac3-copy"></a>10.8.5.4. NTSC AVI Containing AC-3 Audio to DVD</h4></div></div></div><p>
If the source already has AC-3 audio, and is NTSC @ 24000/1001 fps:
</p><pre class="screen">
mencoder -oac copy -ovc lavc -of mpeg -mpegopts format=dvd:tsaf:telecine \
  -vf scale=720:480,harddup -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:\
  vrc_maxrate=9800:vbitrate=5000:keyint=15:vstrict=0:aspect=16/9 -ofps 24000/1001 \
  -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.5. PAL SVCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-svcd"></a>10.8.5.5. PAL SVCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xsvcd -vf \
    scale=480:576,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg2video:mbd=2:keyint=15:vrc_buf_size=917:vrc_minrate=600:\
vbitrate=2500:vrc_maxrate=2500:acodec=mp2:abitrate=224:aspect=16/9 -ofps 25 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
  </pre><p>
</p></div><div class="sect3" title="10.8.5.6. NTSC SVCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-svcd"></a>10.8.5.6. NTSC SVCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xsvcd  -vf \
    scale=480:480,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg2video:mbd=2:keyint=18:vrc_buf_size=917:vrc_minrate=600:\
vbitrate=2500:vrc_maxrate=2500:acodec=mp2:abitrate=224:aspect=16/9 -ofps 30000/1001 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.7. PAL VCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-vcd"></a>10.8.5.7. PAL VCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xvcd -vf \
    scale=352:288,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg1video:keyint=15:vrc_buf_size=327:vrc_minrate=1152:\
vbitrate=1152:vrc_maxrate=1152:acodec=mp2:abitrate=224:aspect=16/9 -ofps 25 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.8. NTSC VCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-vcd"></a>10.8.5.8. NTSC VCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xvcd -vf \
    scale=352:240,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg1video:keyint=18:vrc_buf_size=327:vrc_minrate=1152:\
vbitrate=1152:vrc_maxrate=1152:acodec=mp2:abitrate=224:aspect=16/9 -ofps 30000/1001 \
    -o <em class="replaceable"><code>movie.mpg</code></em> <em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p></div></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.fn-menc-feat-dvd-mpeg4-codec-cpu" href="#fn-menc-feat-dvd-mpeg4-codec-cpu" class="para">1</a>] </sup>
  Be careful, however: Decoding DVD-resolution MPEG-4 AVC videos
  requires a fast machine (i.e. a Pentium 4 over 1.5GHz or a Pentium M
  over 1GHz).
  </p></div><div class="footnote"><p><sup>[<a name="ftn.fn-menc-feat-dvd-mpeg4-codec-playback" href="#fn-menc-feat-dvd-mpeg4-codec-playback" class="para">2</a>] </sup>
  The same encode may not look the same on someone else's monitor or
  when played back by a different decoder, so future-proof your encodes by
  playing them back on different setups.
  </p></div></div></div><div class="chapter" title="Rozdział 11. FAQ - Często Zadawane Pytania"><div class="titlepage"><div><div><h2 class="title"><a name="faq"></a>Rozdział 11. FAQ - Często Zadawane Pytania</h2></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="id2600138"></a><dl><dt>11.1.  <a href="#faq-development">Rozwój</a></dt><dd><dl><dt>Pyt: <a href="#id2600152">
Jak mam stworzyć poprawną łatkę do MPlayera?
</a></dt><dt>Pyt: <a href="#id2600748">
Jak mogę przetłumaczyć MPlayera na nowy język?
</a></dt><dt>Pyt: <a href="#id2600783">
Jak mogę wesprzeć rozwój MPlayera?
</a></dt><dt>Pyt: <a href="#id2600818">
Jak mogę zostać deweloperem MPlayera?
</a></dt><dt>Pyt: <a href="#id2600866">
Czemu nie używacie autoconf/automake?
</a></dt></dl></dd><dt>11.2.  <a href="#faq-compilation-installation">Kompilacja i instalacja</a></dt><dd><dl><dt>Pyt: <a href="#id2600906">
Kompilacja nie udaje się z powodu błędu i gcc
wyskakuje z tajemniczą wiadomością zawierającą zwrot
internal compiler error lub
unable to find a register to spill.
</a></dt><dt>Pyt: <a href="#id2600969">
Czy istnieją binarne (RPM/Debian) paczki z MPlayerem?
</a></dt><dt>Pyt: <a href="#id2601004">
Jak mogę zbudować 32 bitowego MPlayera na 64
bitowym Athlonie?
</a></dt><dt>Pyt: <a href="#id2601032">
Konfiguracja kończy się takim komunikatem i MPlayer
nie chce się skompilować!
Your gcc does not support even i386 for '-march' and '-mcpu'
(Twój gcc nie obsługuje nawet i386 dla '-march' oraz '-mcpu')
</a></dt><dt>Pyt: <a href="#id2601069">
Mam Matroksa G200/G400/G450/G550, jak skompilować/używać sterownika
mga_vid?
</a></dt><dt>Pyt: <a href="#id2601097">
Podczas 'make', MPlayer narzeka na brakujące
biblioteki X11. Nie rozumiem, mam zainstalowane X11!?
</a></dt><dt>Pyt: <a href="#id2601164">
Kompilowanie pod Mac OS 10.3 prowadzi do kilku błędów konsolidacji (linkowania)
</a></dt></dl></dd><dt>11.3.  <a href="#faq-general">Pytania ogólne</a></dt><dd><dl><dt>Pyt: <a href="#id2601303">
Czy są jakieś listy dyskusyjne o MPlayerze?
</a></dt><dt>Pyt: <a href="#id2601329">
Znalazłem paskudny błąd przy próbie odtworzenia mojego ulubionego filmu! Kogo
powinienem poinformować?
</a></dt><dt>Pyt: <a href="#id2601356">
Mam problemy z odtwarzaniem plików przy użyciu kodeka ... Czy mogę ich używać?
</a></dt><dt>Pyt: <a href="#id2601388">
Gdy zaczynam odtwarzanie wyświetla się następujący komunikat lecz wszystko
wydaje się być wporządku.
Linux RTC init: ioctl (rtc_pie_on): Permission denied
</a></dt><dt>Pyt: <a href="#id2601422">
Jak mogę zrobić zrzut ekranu?
</a></dt><dt>Pyt: <a href="#id2601474">
Co oznaczają te liczby w wierszu stanu?
</a></dt><dt>Pyt: <a href="#id2601724">
Dostaję komunikaty błędów o nie znalezionym pliku
/usr/local/lib/codecs/ ...
</a></dt><dt>Pyt: <a href="#id2601751">
Jak zmusić MPlayera do zapamiętania opcji
użytych dla określonego pliku, np film.avi?
</a></dt><dt>Pyt: <a href="#id2601794">
Napisy są bardzo ładne, najpiękniejsze jakie widziałem, ale spowalniają
odtwarzanie! Wiem, że to jest niezwykłe...
</a></dt><dt>Pyt: <a href="#id2601836">
Nie mogę się dostać do menu GUI. Klikam prawym przyciskiem myszy lecz
nie mogę dostać się do żadnych elementów menu!
</a></dt><dt>Pyt: <a href="#id2601909">
Jak uruchomić MPlayera w tle?
</a></dt></dl></dd><dt>11.4.  <a href="#faq-playback">Problemy z odtwarzaniem</a></dt><dd><dl><dt>Pyt: <a href="#id2601955">
Nie mogę zidentyfikować powodu dziwnego problemu z odtwarzaniem.
</a></dt><dt>Pyt: <a href="#id2602022">
W jaki sposób sprawić by napisy pojawiały się na czarnym pasku pod filmem?
</a></dt><dt>Pyt: <a href="#id2602053">
Jak mogę określić ścieżkę audio/napisów z pliku OGM, Matroska, NUT lub DVD?
</a></dt><dt>Pyt: <a href="#id2602115">
Próbuję odtworzyć jakiś strumień z internetu, ale nie udaje mi się.
</a></dt><dt>Pyt: <a href="#id2602135">
Ściągnąłem film z sieci P2P i nie chce się odtworzyć!
</a></dt><dt>Pyt: <a href="#id2602160">
Mam problem z wyświetlaniem napisów. Pomocy!
</a></dt><dt>Pyt: <a href="#id2602202">
Dlaczego MPlayer nie działa w Fedora Core?
</a></dt><dt>Pyt: <a href="#id2602367">
MPlayer przerywa działanie z komunikatem
MPlayer interrupted by signal 4 in module: decode_video
(MPlayer przerwany przez sygnał 4 w module: decode_video).
</a></dt><dt>Pyt: <a href="#id2602411">
Gry próbuję przechwycić obraz z mojego tunera kolory są dziwne. Działa OK
pod innymi aplikacjami.
</a></dt><dt>Pyt: <a href="#id2602439">
Otrzymuję bardzo dziwne wartości procentowe (dużo za duże) podczas odtwarzania
plików na moim notebooku.
</a></dt><dt>Pyt: <a href="#id2602475">
Audio/video całowicie wychodzi z synchronizacji gdy uruchamiam
MPlayera jako root na moim notebooku. Działa OK
gdy robię to jako zwykły użytkownik.
</a></dt><dt>Pyt: <a href="#id2602511">
Podczas odtwarzania filmu nagle się tnie i wyświetlany jest następujący
komunikat:
Badly interleaved AVI file detected - switching to -ni mode...
(Plik AVI ze złym przeplotem - przełączam się w tryb -ni)
</a></dt></dl></dd><dt>11.5.  <a href="#faq-driver">Problemy ze sterownikiem video/audio (vo/ao)</a></dt><dd><dl><dt>Pyt: <a href="#id2602558">
Gdy przechodzę w tryb pełnoekranowy wyświetlana jest czarna ramka
okalająca obraz. Obraz nie jest w ogóle skalowany.
</a></dt><dt>Pyt: <a href="#id2602619">
Właśnie zainstalowałem MPlayera. W momencie gdy chcę
otworzyć plik video wyskakuje błąd:
Error opening/initializing the selected video_out (-vo) device.
(Błąd przy otwarciu/inicjalizacji wybranego urządzenia video_out (-vo).)
Jak mogę rozwiązać mój problem?
</a></dt><dt>Pyt: <a href="#id2602696">
Mam problemy z [Twój manager okien] i pełnoekranowymi trybami xv/xmga/sdl/x11...
</a></dt><dt>Pyt: <a href="#id2602726">
Dźwięk gubi synchronizację przy odtwarzaniu pliku AVI.
</a></dt><dt>Pyt: <a href="#id2602758">
Mój komputer odtwarza zbyt wolno pliki AVI MS DivX w rozdzielczości ~ 640x300 i
z dźwiękiem mp3 stereo. Gdy użyję opcji -nosound, wszystko jest
OK (lecz bez dźwięku).
</a></dt><dt>Pyt: <a href="#id2602784">
Jak użyć dmix z
MPlayerem?
</a></dt><dt>Pyt: <a href="#id2602819">
Podczas odtwarzania filmu nie ma dźwięku i dostaję komunikat podobny do tego:

AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
audio_setup: Can't open audio device /dev/dsp: Device or resource busy
couldn't open/init audio device -&gt; NOSOUND
Audio: no sound!!!
Start playing...

</a></dt><dt>Pyt: <a href="#id2602871">
Gdy uruchamiam MPlayera pod KDE, pojawia się
czarny ekran i nic się nie dzieje. Po około minucie zaczyna się odtwarzanie
filmu.
</a></dt><dt>Pyt: <a href="#id2602922">
Mam problemy z synchronizacją A/V. Niektóre moje AVI są odtwarzane dobrze, a
niektóre z podwójną szybkością.
</a></dt><dt>Pyt: <a href="#id2602951">
Podczas odtwarzania filmu pojawia się brak synchronizacji video-audio i/lub
MPlayer wywala się z następującym komunikatem:

DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!

(DEMUXER: Za dużo (945 w 8390980 bajtach) pakietów video w buforze!)
</a></dt><dt>Pyt: <a href="#id2603039">
Jak pozbyć się braku synchronizacji audio/video przy przewijaniu strumieni
RealMedia?
</a></dt></dl></dd><dt>11.6.  <a href="#faq-dvd">Odtwarzanie DVD</a></dt><dd><dl><dt>Pyt: <a href="#id2603071">
Co z nawigacją/menu DVD?
</a></dt><dt>Pyt: <a href="#id2603127">
Nie mogę obejrzeć żadnego nowego DVD od Sony Pictures/BMG.
</a></dt><dt>Pyt: <a href="#id2603164">
Co z napisami? Czy MPlayer może je wyświetlać?
</a></dt><dt>Pyt: <a href="#id2603191">
Jak mogę ustawić kod regionu w moim napędzie DVD? Nie mam Windowsów!
</a></dt><dt>Pyt: <a href="#id2603212">
Nie mogę odtworzyć DVD, MPlayer
się zawiesza bądź wyrzuca błędy "Encrypted VOB file!"
(Zaszyfrowany plik VOB!).
</a></dt><dt>Pyt: <a href="#id2603239">
Czy muszę mieć uprawnienia (lub setuid) użytkownika root, aby móc odtwarzać DVD?
</a></dt><dt>Pyt: <a href="#id2603265">
Czy jest możliwe odtwarzanie/kodowanie tylko wybranych rozdziałów?
</a></dt><dt>Pyt: <a href="#id2603284">
Odtwarzanie DVD jest bardzo wolne!
</a></dt><dt>Pyt: <a href="#id2603317">
Skopiowałem DVD używając vobcopy.
Jak mogę je odtworzyć/zakodować z dysku twardego?
</a></dt></dl></dd><dt>11.7.  <a href="#faq-features">Prośby o wprowadzenie nowych możliwości</a></dt><dd><dl><dt>Pyt: <a href="#id2603364">
Jeżeli MPlayer jest zatrzymany i próbuję przewijać lub
nacisnę jakikolwiek klawisz, MPlayer z powrotem wraca
do odtwarzania. Chciałbym móc przwijać zatrzymany film.
</a></dt><dt>Pyt: <a href="#id2603398">
Chciałbym przewijać o +/- 1 klatkę zamiast 10 sekund.
</a></dt></dl></dd><dt>11.8.  <a href="#faq-encoding">Kodowanie</a></dt><dd><dl><dt>Pyt: <a href="#id2603439">
Jak mogę kodować?
</a></dt><dt>Pyt: <a href="#id2603462">
Jak zrzucić całą pozycję DVD do pliku?
</a></dt><dt>Pyt: <a href="#id2603503">
Jak mogę tworzyć automatycznie (S)VCD?
</a></dt><dt>Pyt: <a href="#id2603536">
Jak mogę stworzyć (S)VCD?
</a></dt><dt>Pyt: <a href="#id2603575">
Jak mogę połączyć dwa pliki video?
</a></dt><dt>Pyt: <a href="#id2603639">
Jak mogę naprawić pliki AVI z popsutym indeksem lub złym przeplotem?
</a></dt><dt>Pyt: <a href="#id2603687">
Jak mogę naprawić proporcje pliku AVI?
</a></dt><dt>Pyt: <a href="#id2603728">
Jak mogę zapisać i kodować plik VOB z popsutym początkiem?
</a></dt><dt>Pyt: <a href="#id2603803">
Nie mogę zakodować napisów z DVD do AVI!
</a></dt><dt>Pyt: <a href="#id2603821">
Jak mogę zakodować tylko wybrane rozdziały z DVD?
</a></dt><dt>Pyt: <a href="#id2603843">
Próbuję pracować z plikami 2GB+ na systemie plików VFAT. Czy to działa?
</a></dt><dt>Pyt: <a href="#id2603859">
Co oznaczają te liczby w wierszu stanu w czasie procesu kodowania?
</a></dt><dt>Pyt: <a href="#id2604010">
Dlaczego zalecany bitrate wypisywany przez MEncodera
jest ujemny?
</a></dt><dt>Pyt: <a href="#id2604035">
Nie mogę zakodować pliku ASF do AVI/DivX, ponieważ ma on 1000 fps.
</a></dt><dt>Pyt: <a href="#id2604058">
Jak mogę wstawić napisy do pliku wynikowego?
</a></dt><dt>Pyt: <a href="#id2604087">
Jak zakodować wyłącznie dźwięk z teledysku?
</a></dt><dt>Pyt: <a href="#id2604161">
Dlaczego zewnętrzne odtwarzacze nieodtwarzają filmów MPEG-4 zakodowanych
MEncoderem w wersji nowszej niż 1.0pre7?
</a></dt><dt>Pyt: <a href="#id2604294">
Jak mogę kodować plik zawierający tylko dźwięk?
</a></dt><dt>Pyt: <a href="#id2604329">
Jak mogę odtwarzać napisy wbudowane w AVI?
</a></dt><dt>Pyt: <a href="#id2604366">
MPlayer nie...
</a></dt></dl></dd></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-development"></a>11.1. Rozwój</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2600152">
Jak mam stworzyć poprawną łatkę do MPlayera?
</a></dt><dt>Pyt: <a href="#id2600748">
Jak mogę przetłumaczyć MPlayera na nowy język?
</a></dt><dt>Pyt: <a href="#id2600783">
Jak mogę wesprzeć rozwój MPlayera?
</a></dt><dt>Pyt: <a href="#id2600818">
Jak mogę zostać deweloperem MPlayera?
</a></dt><dt>Pyt: <a href="#id2600866">
Czemu nie używacie autoconf/automake?
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600152"></a><a name="id2600154"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mam stworzyć poprawną łatkę do <span class="application">MPlayera</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przygotowaliśmy <a class="ulink" href="../../tech/patches.txt" target="_top">krótki dokument</a>
opisujący wszystkie potrzebne szczegóły. Kieruj się zawartymi w nim wskazówkami.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600748"></a><a name="id2600750"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę przetłumaczyć <span class="application">MPlayera</span> na nowy język?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przeczytaj <a class="ulink" href="../../tech/translations.txt" target="_top">HOWTO tłumaczenia</a>,
powinno wszystko wyjaśnić. Dalszą pomoc uzyskasz na liście dyskusyjnej
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-translations" target="_top">MPlayer-translations</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600783"></a><a name="id2600785"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę wesprzeć rozwój <span class="application">MPlayera</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Jesteśmy bardziej niż szczęśliwi, gdy ofiarowujecie nam sprzęt i oprogramowanie
w formie <a class="ulink" href="http://www.mplayerhq.hu/donations.html" target="_top">darowizn</a>.
Pomagają one nam ciągle ulepszać <span class="application">MPlayera</span>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600818"></a><a name="id2600820"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę zostać deweloperem <span class="application">MPlayera</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Programiści i dokumentatorzy zawsze są mile widziani.
Na początek przeczytaj <a class="ulink" href="../../tech/" target="_top">dokumentację techniczną</a>
żeby złapać ogólny zarys.
Następnie powinieneś zapisać się na listę dyskusyjną
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dev-eng" target="_top">MPlayer-dev-eng</a>
i zacząć pisać.
Jeżeli chcesz pomóc przy dokumentacji, zapisz się na listę dyskusyjną
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-docs" target="_top">MPlayer-docs</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600866"></a><a name="id2600868"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Czemu nie używacie autoconf/automake?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Mamy modularny, ręcznie napisany system budowania. Sprawuje się on całkiem
nieźle, więc po co zmieniać? Poza tym nie lubimy narzędzi auto* tak jak i
<a class="ulink" href="http://freshmeat.net/articles/view/889/" target="_top">inni ludzie</a>.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-compilation-installation"></a>11.2. Kompilacja i instalacja</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2600906">
Kompilacja nie udaje się z powodu błędu i gcc
wyskakuje z tajemniczą wiadomością zawierającą zwrot
internal compiler error lub
unable to find a register to spill.
</a></dt><dt>Pyt: <a href="#id2600969">
Czy istnieją binarne (RPM/Debian) paczki z MPlayerem?
</a></dt><dt>Pyt: <a href="#id2601004">
Jak mogę zbudować 32 bitowego MPlayera na 64
bitowym Athlonie?
</a></dt><dt>Pyt: <a href="#id2601032">
Konfiguracja kończy się takim komunikatem i MPlayer
nie chce się skompilować!
Your gcc does not support even i386 for '-march' and '-mcpu'
(Twój gcc nie obsługuje nawet i386 dla '-march' oraz '-mcpu')
</a></dt><dt>Pyt: <a href="#id2601069">
Mam Matroksa G200/G400/G450/G550, jak skompilować/używać sterownika
mga_vid?
</a></dt><dt>Pyt: <a href="#id2601097">
Podczas 'make', MPlayer narzeka na brakujące
biblioteki X11. Nie rozumiem, mam zainstalowane X11!?
</a></dt><dt>Pyt: <a href="#id2601164">
Kompilowanie pod Mac OS 10.3 prowadzi do kilku błędów konsolidacji (linkowania)
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600906"></a><a name="id2600908"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Kompilacja nie udaje się z powodu błędu i <span class="application">gcc</span>
wyskakuje z tajemniczą wiadomością zawierającą zwrot
<code class="systemitem">internal compiler error</code> lub
<code class="systemitem">unable to find a register to spill</code>.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Natknąłeś się na błąd w <span class="application">gcc</span>. Proszę
<a class="ulink" href="http://gcc.gnu.org/bugs.html" target="_top">zgłoś go zespołowi gcc</a>
ale nie nam. Z jakichś przyczyn <span class="application">MPlayer</span> często
wywołuje błędy kompilatora. Jednak nie możemy ich naprawić i nie dodajemy do
naszych źródeł obejść błędów kompilatora. Żeby uniknąć problemu albo trzymaj
się wersji kompilatora o której wiadomo że jest stabilna i pewna, albo często
aktualizuj.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2600969"></a><a name="id2600971"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Czy istnieją binarne (RPM/Debian) paczki z <span class="application">MPlayerem</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Więcej informacji na ten temat znajdziesz w sekcjach
<a class="link" href="#debian" title="8.1.1. Pakiety Debiana">Debian</a> oraz <a class="link" href="#rpm" title="8.1.2. Pakiety RPM">RPM</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601004"></a><a name="id2601006"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę zbudować 32 bitowego <span class="application">MPlayera</span> na 64
bitowym Athlonie?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Zastosuj następujące opcje konfiguracyjne.
</p><pre class="screen">
./configure --target=i386-linux --cc="gcc -m32" --as="as --32" --with-extralibdir=/usr/lib
</pre><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601032"></a><a name="id2601034"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Konfiguracja kończy się takim komunikatem i <span class="application">MPlayer</span>
nie chce się skompilować!
</p><pre class="screen">Your gcc does not support even i386 for '-march' and '-mcpu'</pre><p>
(Twój gcc nie obsługuje nawet i386 dla '-march' oraz '-mcpu')
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Twój gcc nie jest poprawnie zainstalowany. Sprawdź szczegóły
w <tt class="filename">configure.log</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601069"></a><a name="id2601072"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Mam Matroksa G200/G400/G450/G550, jak skompilować/używać sterownika
<code class="systemitem">mga_vid</code>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przeczytaj sekcję <a class="link" href="#mga_vid" title="7.2.6. Bufor ramki Matrox (mga_vid)">mga_vid</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601097"></a><a name="id2601099"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Podczas 'make', <span class="application">MPlayer</span> narzeka na brakujące
biblioteki X11. Nie rozumiem, <span class="emphasis"><em>mam</em></span> zainstalowane X11!?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
...ale nie masz zainstalowanej paczki X11 development lub jest ona źle
zainstalowana. Nazywa się ona <tt class="filename">XFree86-devel*</tt> w Red Hacie,
<tt class="filename">xlibs-dev</tt> w Debianie Woody i
<tt class="filename">libx11-dev</tt> w Debianie Sarge. Sprawdź także czy istnieją
dowiązania symboliczne do
<tt class="filename">/usr/X11</tt> oraz
<tt class="filename">/usr/include/X11</tt>
(problem może wystąpić w systemach Mandrake).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601164"></a><a name="id2601166"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Kompilowanie pod Mac OS 10.3 prowadzi do kilku błędów konsolidacji (linkowania)
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Błąd konsolidacji, który się pojawia, wygląda najprawdopodobniej tak:
</p><pre class="screen">
ld: Undefined symbols:
_LLCStyleInfoCheckForOpenTypeTables referenced from QuartzCore expected to be defined in ApplicationServices
_LLCStyleInfoGetUserRunFeatures referenced from QuartzCore expected to be defined in ApplicationServices
</pre><p>
Problem ten wynika z faktu, że deweloperzy Apple używają MacOS 10.4 do
kompilowania swojego oprogramowania i dostarczają binaria
użytkownikom 10.3 poprzez Uaktualnienia Oprogramowania.
Niezdefiniowane symbole obecne są pod Mac OS 10.4,
ale nie pod 10.3.
Jednym z rozwiązań jest powrót do QuickTime w wersji 7.0.1.
Oto lepsze rozwiązanie.
</p><p>
Zdobądź
<a class="ulink" href="http://rapidshare.de/files/20281171/CompatFrameworks.tgz.html" target="_top">starszą wersję szkieletów</a>
(frameworks; jest lepsze tłumaczenie? - przyp. tłum.).
Otrzymasz skompresowany plik zawierający QuickTime 7.0.1 Framework
i 10.3.9 QuartzCore Framework.
</p><p>
Rozpakuj pliki gdzieś poza swoim katalogiem systemowym.
(nie instaluj szkieletów do swojego
<tt class="filename">/System/Library/Frameworks</tt>!
Ta starsza kopia jest przeznaczona tylko do ominięcia błędów konsolidacji!)
</p><pre class="screen">gunzip &lt; CompatFrameworks.tgz | tar xvf -</pre><p>
W pliku config.mak, dodaj
<code class="systemitem">-F/ścieżka/do/rozpakowanego/archiwum</code>
do zmiennej <code class="systemitem">OPTFLAGS</code>.
Jeżeli używasz <span class="application">X-Code</span>, możesz po prostu
zaznaczyć te szkielety, zamiast systemowych.
</p><p>
W rezultacie binarka <span class="application">MPlayer</span> będzie
w rzeczywistości używać zainstalowanego w twoim systemie szkieletu poprzez
dynamiczne dowiązania, rozwiązywane przy uruchamianiu.
(Możesz to sprawdzić używając <code class="systemitem">otool -l</code>).
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-general"></a>11.3. Pytania ogólne</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2601303">
Czy są jakieś listy dyskusyjne o MPlayerze?
</a></dt><dt>Pyt: <a href="#id2601329">
Znalazłem paskudny błąd przy próbie odtworzenia mojego ulubionego filmu! Kogo
powinienem poinformować?
</a></dt><dt>Pyt: <a href="#id2601356">
Mam problemy z odtwarzaniem plików przy użyciu kodeka ... Czy mogę ich używać?
</a></dt><dt>Pyt: <a href="#id2601388">
Gdy zaczynam odtwarzanie wyświetla się następujący komunikat lecz wszystko
wydaje się być wporządku.
Linux RTC init: ioctl (rtc_pie_on): Permission denied
</a></dt><dt>Pyt: <a href="#id2601422">
Jak mogę zrobić zrzut ekranu?
</a></dt><dt>Pyt: <a href="#id2601474">
Co oznaczają te liczby w wierszu stanu?
</a></dt><dt>Pyt: <a href="#id2601724">
Dostaję komunikaty błędów o nie znalezionym pliku
/usr/local/lib/codecs/ ...
</a></dt><dt>Pyt: <a href="#id2601751">
Jak zmusić MPlayera do zapamiętania opcji
użytych dla określonego pliku, np film.avi?
</a></dt><dt>Pyt: <a href="#id2601794">
Napisy są bardzo ładne, najpiękniejsze jakie widziałem, ale spowalniają
odtwarzanie! Wiem, że to jest niezwykłe...
</a></dt><dt>Pyt: <a href="#id2601836">
Nie mogę się dostać do menu GUI. Klikam prawym przyciskiem myszy lecz
nie mogę dostać się do żadnych elementów menu!
</a></dt><dt>Pyt: <a href="#id2601909">
Jak uruchomić MPlayera w tle?
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601303"></a><a name="id2601305"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Czy są jakieś listy dyskusyjne o <span class="application">MPlayerze</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Tak. Spójrz na sekcję
<a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">listy dyskusyjne</a>
na naszej stronie domowej.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601329"></a><a name="id2601331"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Znalazłem paskudny błąd przy próbie odtworzenia mojego ulubionego filmu! Kogo
powinienem poinformować?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przeczytaj proszę
<a class="link" href="#bugreports" title="Dodatek A. Jak zgłaszać błędy">wskazówki do zgłoszeń błędów</a>
i kieruj się zawartymi tam instrukcjami.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601356"></a><a name="id2601358"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Mam problemy z odtwarzaniem plików przy użyciu kodeka ... Czy mogę ich używać?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Sprawdź <a class="ulink" href="../../codecs-status.html" target="_top">status kodeków</a>,
jeżeli nie zawiera on Twojego kodeka przeczytaj
<a class="ulink" href="../../tech/win32-codec-howto" target="_top">HOWTO importowania kodeków Win32</a>
i skontaktuj się z nami.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601388"></a><a name="id2601390"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Gdy zaczynam odtwarzanie wyświetla się następujący komunikat lecz wszystko
wydaje się być wporządku.
</p><pre class="screen">Linux RTC init: ioctl (rtc_pie_on): Permission denied</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Potrzebujesz uprawnień roota lub specjalnie ustawionego jądra, aby używać
nowego kodu synchronizacji czasu. Aby uzyskać szczegóły, spójrz do sekcji
<a class="link" href="#rtc" title="2.6. RTC">RTC</a> w dokumentacji.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601422"></a><a name="id2601424"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę zrobić zrzut ekranu?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Musisz skorzystać ze sterownika wyjścia video, który nie używa nakładki video.
Pod X11 wystarczy użyć <tt class="option">-vo x11</tt>,
pod Windows działa <tt class="option">-vo directx:noaccel</tt>
</p><p>
Możesz też uruchomić <span class="application">MPlayera</span> z filtrem video
<code class="systemitem">screenshot</code> (<tt class="option">-vf screenshot</tt>).
Wtedy wciśnięcie klawisza <span class="keycap"><b>s</b></span> spowoduje pobranie zrzutu
ekranu.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601474"></a><a name="id2601476"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Co oznaczają te liczby w wierszu stanu?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przykład:
</p><pre class="screen">
A: 2.1 V: 2.2 A-V: -0.167 ct: 0.042 57/57 41% 0% 2.6% 0 4 49% 1.00x
</pre><p>
</p><div class="variablelist"><dl><dt><span class="term"><code class="systemitem">A: 2.1</code></span></dt><dd><p>pozycja audio w sekundach</p></dd><dt><span class="term"><code class="systemitem">V: 2.2</code></span></dt><dd><p>pozycja video w sekundach</p></dd><dt><span class="term"><code class="systemitem">A-V: -0.167</code></span></dt><dd><p>
  różnica audio-video w sekundach (opóźnienie)
  </p></dd><dt><span class="term"><code class="systemitem">ct: 0.042</code></span></dt><dd><p>
  całkowita dokonana korekcja synchronizacji A-V
  </p></dd><dt><span class="term"><code class="systemitem">57/57</code></span></dt><dd><p>
  ramki odtworzone/zdekodowane (licząc od ostatniego przewijania)
  </p></dd><dt><span class="term"><code class="systemitem">41%</code></span></dt><dd><p>
  użycie procesora w procentach przez kodek video (przy renderowaniu
  w kawałkach (slices) i bezpośrednim (DirectRendering) zawiera także video_out
  </p></dd><dt><span class="term"><code class="systemitem">0%</code></span></dt><dd><p>użycie procesora przez video_out</p></dd><dt><span class="term"><code class="systemitem">2.6%</code></span></dt><dd><p>
  użycie procesora w procentach przez kodek audio
  </p></dd><dt><span class="term"><code class="systemitem">0</code></span></dt><dd><p>
  ramki opuszczone aby zachować synchronizację A-V
  </p></dd><dt><span class="term"><code class="systemitem">4</code></span></dt><dd><p>
  obecny poziom postprocessingu obrazu (gdy używasz <tt class="option">-autoq</tt>)
  </p></dd><dt><span class="term"><code class="systemitem">49%</code></span></dt><dd><p>
  obecne wykorzystanie pamięci cache (normale jest około 50%)
  </p></dd><dt><span class="term"><code class="systemitem">1.00x</code></span></dt><dd><p>
  szybkość odtwarzania jako mnożnik oryginalnej szybkości
  </p></dd></dl></div><p>
Większość z nich obecna jest w celu debuggingu, aby się ich pozbyć użyj opcji
<tt class="option">-quiet</tt>. Możesz zauważyć, że dla niektóych plików użycie
procesora przez video_out wynosi zero (0%). Spowodowane to jest tym, że jest
ono wywoływane bezpośrednio przez kodek i nie może być zmierzone osobno.
Jeżeli chcesz znać szybkość video_out, to porównaj różnicę przy odtwarzaniu
z <tt class="option">-vo null</tt> i normalnie przez Ciebie używanym sterownikiem
wyjścia video.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601724"></a><a name="id2601726"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Dostaję komunikaty błędów o nie znalezionym pliku
<tt class="filename">/usr/local/lib/codecs/</tt> ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Ściągnij i zainstaluj binarne kodeki z naszej
<a class="ulink" href="http://www.mplayerhq.hu/design7/codecs.html" target="_top">strony kodeków</a>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601751"></a><a name="id2601754"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak zmusić <span class="application">MPlayera</span> do zapamiętania opcji
użytych dla określonego pliku, np <tt class="filename">film.avi</tt>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Stwórz plik o nazwie <tt class="filename">film.avi.conf</tt> i umieść w nim
porządane opcje a następnie zapisz go w katalogu
<tt class="filename">~/.mplayer</tt>
albo w tym samym katalogu co film.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601794"></a><a name="id2601797"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Napisy są bardzo ładne, najpiękniejsze jakie widziałem, ale spowalniają
odtwarzanie! Wiem, że to jest niezwykłe...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Po odpaleniu <tt class="filename">./configure</tt>, wyedytuj
<tt class="filename">config.h</tt> i zamień <code class="systemitem">#undef FAST_OSD</code>
na <code class="systemitem">#define FAST_OSD</code>. Potem skompiluj ponownie.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601836"></a><a name="id2601838"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Nie mogę się dostać do menu GUI. Klikam prawym przyciskiem myszy lecz
nie mogę dostać się do żadnych elementów menu!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Czy używasz FVWM? Spróbuj tego:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="guimenu">Start</span> → <span class="guisubmenu">Settings</span> → <span class="guisubmenu">Configuration</span> → <span class="guimenuitem">Base Configuration</span>
</p></li><li class="listitem"><p>
  Ustaw <code class="systemitem">Use Applications position hints</code>
  na <code class="systemitem">Yes</code>
</p></li></ol></div><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601909"></a><a name="id2601911"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak uruchomić <span class="application">MPlayera</span> w tle?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj:
</p><pre class="screen">mplayer <em class="replaceable"><code>opcje</code></em> <em class="replaceable"><code>nazwa_pliku</code></em> &lt; /dev/null &amp;</pre><p>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-playback"></a>11.4. Problemy z odtwarzaniem</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2601955">
Nie mogę zidentyfikować powodu dziwnego problemu z odtwarzaniem.
</a></dt><dt>Pyt: <a href="#id2602022">
W jaki sposób sprawić by napisy pojawiały się na czarnym pasku pod filmem?
</a></dt><dt>Pyt: <a href="#id2602053">
Jak mogę określić ścieżkę audio/napisów z pliku OGM, Matroska, NUT lub DVD?
</a></dt><dt>Pyt: <a href="#id2602115">
Próbuję odtworzyć jakiś strumień z internetu, ale nie udaje mi się.
</a></dt><dt>Pyt: <a href="#id2602135">
Ściągnąłem film z sieci P2P i nie chce się odtworzyć!
</a></dt><dt>Pyt: <a href="#id2602160">
Mam problem z wyświetlaniem napisów. Pomocy!
</a></dt><dt>Pyt: <a href="#id2602202">
Dlaczego MPlayer nie działa w Fedora Core?
</a></dt><dt>Pyt: <a href="#id2602367">
MPlayer przerywa działanie z komunikatem
MPlayer interrupted by signal 4 in module: decode_video
(MPlayer przerwany przez sygnał 4 w module: decode_video).
</a></dt><dt>Pyt: <a href="#id2602411">
Gry próbuję przechwycić obraz z mojego tunera kolory są dziwne. Działa OK
pod innymi aplikacjami.
</a></dt><dt>Pyt: <a href="#id2602439">
Otrzymuję bardzo dziwne wartości procentowe (dużo za duże) podczas odtwarzania
plików na moim notebooku.
</a></dt><dt>Pyt: <a href="#id2602475">
Audio/video całowicie wychodzi z synchronizacji gdy uruchamiam
MPlayera jako root na moim notebooku. Działa OK
gdy robię to jako zwykły użytkownik.
</a></dt><dt>Pyt: <a href="#id2602511">
Podczas odtwarzania filmu nagle się tnie i wyświetlany jest następujący
komunikat:
Badly interleaved AVI file detected - switching to -ni mode...
(Plik AVI ze złym przeplotem - przełączam się w tryb -ni)
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2601955"></a><a name="id2601957"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Nie mogę zidentyfikować powodu dziwnego problemu z odtwarzaniem.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Czy masz jakiś zawieruszony plik <tt class="filename">codecs.conf</tt> w
<tt class="filename">~/.mplayer/</tt>, <tt class="filename">/etc/</tt>,
<tt class="filename">/usr/local/etc/</tt> lub podobnym miejscu? Usuń go,
stary plik <tt class="filename">codecs.conf</tt> może powodować tajemnicze
problemy i jest przeznaczony tylko dla deweloperów pracujących nad obsługą
kodeków. Przesłania on wbudowane ustawienia <span class="application">MPlayera</span>
dotyczące kodeków, co spowoduje chaos jeśli w nowszych wersjach zostaną
wprowadzone niekompatybilne zmiany. Jeśli nie jest używany przez ekspertów
jest to przepis na katastrofę w postaci pozornie losowych i trudnych
do zlokalizowania awarii i problemów z odtwarzaniem. Jeśli nadal masz go
gdzieś w swoim systemie powinieneś go teraz usunąć.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602022"></a><a name="id2602024"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
W jaki sposób sprawić by napisy pojawiały się na czarnym pasku pod filmem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj filtru video <code class="systemitem">expand</code> do zwiększenia pionowego
obszaru renderowania filmu i umieść film przy jego górnej granicy.
Na przykład:
</p><pre class="screen">mplayer -vf expand=0:-100:0:0 -slang pl dvd://1</pre><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602053"></a><a name="id2602055"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę określić ścieżkę audio/napisów z pliku OGM, Matroska, NUT lub DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Musisz użyć <tt class="option">-aid</tt> (ID audio) lub <tt class="option">-alang</tt>
(język audio), <tt class="option">-sid</tt> (ID napisów) lub <tt class="option">-slang</tt>
(język napisów), na przykład:
</p><pre class="screen">
mplayer -alang eng -slang eng <em class="replaceable"><code>przykład.mkv</code></em>
mplayer -aid 1 -sid 1 <em class="replaceable"><code>przykład.mkv</code></em>
</pre><p>
Aby zobaczyć jakie są dostępne:
</p><pre class="screen">
mplayer -vo null -ao null -frames 0 -v <em class="replaceable"><code>nazwa_pliku</code></em> | grep sid
mplayer -vo null -ao null -frames 0 -v <em class="replaceable"><code>nazwa_pliku</code></em> | grep aid
</pre><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602115"></a><a name="id2602117"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Próbuję odtworzyć jakiś strumień z internetu, ale nie udaje mi się.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Spróbuj otworzyć strumień korzystając z opcji <tt class="option">-playlist</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602135"></a><a name="id2602137"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Ściągnąłem film z sieci P2P i nie chce się odtworzyć!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Prawdopodobnie plik jest uszkodzony lub jest to fałszywka.
Jeżeli dostałeś go od znajomego i on mówi, że u niego działa, to spróbuj
porównać skróty <span class="application">md5sum</span> (md5sum hashes).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602160"></a><a name="id2602163"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Mam problem z wyświetlaniem napisów. Pomocy!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Upewnij się, że poprawnie zainstalowałeś czcionki. Wykonaj jeszcze raz
krok po kroku instrukcje z części
<a class="link" href="#fonts-osd" title="2.4. Czcionki i OSD">czcionki i OSD</a> z rozdziału o instalacji.
Jeżeli używasz czcionek TrueType, upewnij się, że masz zainstalowaną
bibliotekę <code class="systemitem">FreeType</code>.
Sprawdź także napisy w edytorze tekstu, bądź z innymi odtwarzaczami. Spróbuj
tekże przekonwertować je na inny format.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602202"></a><a name="id2602204"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Dlaczego <span class="application">MPlayer</span> nie działa w Fedora Core?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Prelink, exec-shield i aplikacje używająca windowsowych DLLi
(takie jak <span class="application">MPlayer</span>) nie
współdziałają ze sobą dobrze w Fedorze.
</p><p>
Problem powoduje exec-shield, który ustawia losowy adres, pod który będą
ładowane biblioteki systemowe. Dzieje się to podczas prelinkowania (raz
na dwa tygodnie)
</p><p>
<span class="application">MPlayer</span> próbuje załadować windowsowy DLL pod
określony adres (0x400000). Jeżeli znajduje się tam już ważna biblioteka
systemowa, <span class="application">MPlayer</span> się wykrzaczy. (Typowym objawem
jest błąd naruszenia ochrony pamięci (segfault) przy próbie odtwarzania plików
Windows Media 9.)
</p><p>
Jeżeli napotkasz taki problem, masz dwa wyjścia:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Poczekać dwa tygodnie... Być może znów zacznie działać.
</p></li><li class="listitem"><p>
  Zlinkować wszystkie biblioteki systemowe z innymi opcjami
  prelink. Oto instrukcje krok po korku:
  </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="krok 1"><p>Otwórz <tt class="filename">/etc/syconfig/prelink</tt> i zmień
  </p><pre class="programlisting">PRELINK_OPTS=-mR</pre><p> na
  </p><pre class="programlisting">PRELINK_OPTS="-mR --no-exec-shield"</pre><p>
  </p></li><li class="step" title="krok 2"><p>
    <span class="command"><strong>touch /var/lib/misc/prelink.force</strong></span>
  </p></li><li class="step" title="krok 3"><p>
    <span class="command"><strong>/etc/cron.daily/prelink</strong></span>
    (To ponownie linkuje wszystkie aplikacje i zajmuje sporo czasu.)
  </p></li><li class="step" title="krok 4"><p>
    <span class="command"><strong>execstack -s <em class="replaceable"><code>/ścieżka/do/</code></em>mplayer</strong></span>
    (To wyłącza exec-shield dla binarki <span class="application">MPlayera</span>.)
  </p></li></ol></div></li></ul></div><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602367"></a><a name="id2602369"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> przerywa działanie z komunikatem
</p><pre class="screen">MPlayer interrupted by signal 4 in module: decode_video</pre><p>
(MPlayer przerwany przez sygnał 4 w module: decode_video).
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Nie używaj <span class="application">MPlayera</span> na CPU innym niż ten,
na któym był skompilowany lub przekompiluj go z detekcją CPU podczas
uruchamiania (<span class="command"><strong>./configure --enable-runtime-cpudetection</strong></span>).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602411"></a><a name="id2602413"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Gry próbuję przechwycić obraz z mojego tunera kolory są dziwne. Działa OK
pod innymi aplikacjami.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Twoja karta prawdopodobni zgłasza obsługę penych przestrzeni kolorów,
w rzeczywistości ich nie obsługując. Spróbuj z YUV2 zamiast domyślnego YV12
(spójrz do sekcji <a class="link" href="#tv-input" title="5.1. Wejście TV">TV</a>).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602439"></a><a name="id2602441"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Otrzymuję bardzo dziwne wartości procentowe (dużo za duże) podczas odtwarzania
plików na moim notebooku.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Jest to efekt działania systemu zarządzania / oszczędzania energii w Twoim
notebooku (BIOS, a nie kernel). Podłącz wtyczkę od zasilacza
<span class="bold"><strong>przed</strong></span> włączeniem notebooka. Możesz także
zobaczyć czy pomoże
<a class="ulink" href="http://www.kernel.org/pub/linux/utils/kernel/cpufreq/cpufreq.html" target="_top">cpufreq</a>
(interfejs SpeedStep dla Linuksa).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602475"></a><a name="id2602477"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Audio/video całowicie wychodzi z synchronizacji gdy uruchamiam
<span class="application">MPlayera</span> jako root na moim notebooku. Działa OK
gdy robię to jako zwykły użytkownik.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
To także jest efekt zarządzania energią (patrz wyżej). Podłącz wtyczkę od
zasilacza <span class="bold"><strong>przed</strong></span> włączeniem notebooka lub
użyj opcji <tt class="option">nortc</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602511"></a><a name="id2602513"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Podczas odtwarzania filmu nagle się tnie i wyświetlany jest następujący
komunikat:
</p><pre class="screen">Badly interleaved AVI file detected - switching to -ni mode...</pre><p>
(Plik AVI ze złym przeplotem - przełączam się w tryb -ni)
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Pliki ze złym przeplotem i <tt class="option">-cache</tt> nie współdziałają
dobrze. Spróbuj <tt class="option">-nocache</tt>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-driver"></a>11.5. Problemy ze sterownikiem video/audio (vo/ao)</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2602558">
Gdy przechodzę w tryb pełnoekranowy wyświetlana jest czarna ramka
okalająca obraz. Obraz nie jest w ogóle skalowany.
</a></dt><dt>Pyt: <a href="#id2602619">
Właśnie zainstalowałem MPlayera. W momencie gdy chcę
otworzyć plik video wyskakuje błąd:
Error opening/initializing the selected video_out (-vo) device.
(Błąd przy otwarciu/inicjalizacji wybranego urządzenia video_out (-vo).)
Jak mogę rozwiązać mój problem?
</a></dt><dt>Pyt: <a href="#id2602696">
Mam problemy z [Twój manager okien] i pełnoekranowymi trybami xv/xmga/sdl/x11...
</a></dt><dt>Pyt: <a href="#id2602726">
Dźwięk gubi synchronizację przy odtwarzaniu pliku AVI.
</a></dt><dt>Pyt: <a href="#id2602758">
Mój komputer odtwarza zbyt wolno pliki AVI MS DivX w rozdzielczości ~ 640x300 i
z dźwiękiem mp3 stereo. Gdy użyję opcji -nosound, wszystko jest
OK (lecz bez dźwięku).
</a></dt><dt>Pyt: <a href="#id2602784">
Jak użyć dmix z
MPlayerem?
</a></dt><dt>Pyt: <a href="#id2602819">
Podczas odtwarzania filmu nie ma dźwięku i dostaję komunikat podobny do tego:

AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
audio_setup: Can't open audio device /dev/dsp: Device or resource busy
couldn't open/init audio device -&gt; NOSOUND
Audio: no sound!!!
Start playing...

</a></dt><dt>Pyt: <a href="#id2602871">
Gdy uruchamiam MPlayera pod KDE, pojawia się
czarny ekran i nic się nie dzieje. Po około minucie zaczyna się odtwarzanie
filmu.
</a></dt><dt>Pyt: <a href="#id2602922">
Mam problemy z synchronizacją A/V. Niektóre moje AVI są odtwarzane dobrze, a
niektóre z podwójną szybkością.
</a></dt><dt>Pyt: <a href="#id2602951">
Podczas odtwarzania filmu pojawia się brak synchronizacji video-audio i/lub
MPlayer wywala się z następującym komunikatem:

DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!

(DEMUXER: Za dużo (945 w 8390980 bajtach) pakietów video w buforze!)
</a></dt><dt>Pyt: <a href="#id2603039">
Jak pozbyć się braku synchronizacji audio/video przy przewijaniu strumieni
RealMedia?
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602558"></a><a name="id2602560"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Gdy przechodzę w tryb pełnoekranowy wyświetlana jest czarna ramka
okalająca obraz. Obraz nie jest w ogóle skalowany.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Twój sterownik wyjścia video nie obsługuje sprzętowego skalowania,
a ponieważ programowe skalowanie może być niewiarygodnie powolne,
<span class="application">MPlayer</span> nie włącza go automatycznie.
Prawdopodobnie używasz sterownika wyjśca <code class="systemitem">x11</code>
zamiast <code class="systemitem">xv</code>. Spróbuj dodać do wywołania programu
<tt class="option">-vo xv</tt> lub przeczytaj
<a class="link" href="#video" title="Rozdział 7. Urządzenia wyjścia video">sekcję video</a>, w której znajdziesz więcej
informacji dotyczących alternatywnych sterowników wyjścia video.
Opcja <tt class="option">-zoom</tt> jawnie wymusza skalowanie programowe.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602619"></a><a name="id2602621"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Właśnie zainstalowałem <span class="application">MPlayera</span>. W momencie gdy chcę
otworzyć plik video wyskakuje błąd:
</p><pre class="screen">Error opening/initializing the selected video_out (-vo) device.</pre><p>
(Błąd przy otwarciu/inicjalizacji wybranego urządzenia video_out (-vo).)
Jak mogę rozwiązać mój problem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Po prostu zmień urządzenie wyjścia video. Aby uzyskać listę dostępnych
sterowników wyjścia video wydaj następujące polecenie:
</p><pre class="screen">mplayer -vo help</pre><p>
Gdy juz wybierzesz odpowiedni sterownik wyjścia video, dodaj go do swojego
pliku konfiguracyjnego.  Dodaj
</p><pre class="programlisting">
vo = <em class="replaceable"><code>wybrany_vo</code></em>
</pre><p>
do <tt class="filename">~/.mplayer/config</tt> i/lub
</p><pre class="programlisting">
vo_driver = <em class="replaceable"><code>wybrany_vo</code></em>
</pre><p>
do <tt class="filename">~/.mplayer/gui.conf</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602696"></a><a name="id2602698"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Mam problemy z [Twój manager okien] i pełnoekranowymi trybami xv/xmga/sdl/x11...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przeczytaj <a class="link" href="#bugreports" title="Dodatek A. Jak zgłaszać błędy">wskazówki do zgłaszania błędów</a> i
wyślij nam poprawne zgłoszenie błędu.
Popróbuj też poeksperymentować z opcją <tt class="option">-fstype</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602726"></a><a name="id2602728"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Dźwięk gubi synchronizację przy odtwarzaniu pliku AVI.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Wypróbuj opcje <tt class="option">-bps</tt> oraz <tt class="option">-nobps</tt>.
Jeżeli nic się nie poprawiło, przeczytaj
<a class="link" href="#bugreports" title="Dodatek A. Jak zgłaszać błędy">wskazówki do zgłaszania błędów</a>
i wgraj plik na FTP.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602758"></a><a name="id2602760"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Mój komputer odtwarza zbyt wolno pliki AVI MS DivX w rozdzielczości ~ 640x300 i
z dźwiękiem mp3 stereo. Gdy użyję opcji <tt class="option">-nosound</tt>, wszystko jest
OK (lecz bez dźwięku).
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Twój komputer jest zbyt wolny lub sterownik karty dźwiękowej jest zepsuty.
Skonsultuj się z dokumentacją, aby zobaczyć, czy możesz poprawić wydajność.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602784"></a><a name="id2602786"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak użyć <span class="application">dmix</span> z
<span class="application">MPlayerem</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Po ustawieniu
<a class="ulink" href="http://alsa.opensrc.org/index.php?page=DmixPlugin" target="_top">asoundrc</a>
użyj <tt class="option">-ao alsa:device=dmix</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602819"></a><a name="id2602821"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Podczas odtwarzania filmu nie ma dźwięku i dostaję komunikat podobny do tego:
</p><pre class="screen">
AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
audio_setup: Can't open audio device /dev/dsp: Device or resource busy
couldn't open/init audio device -&gt; NOSOUND
Audio: no sound!!!
Start playing...
</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Czy masz uruchomione KDE lub GNOME z demonem dźwięku aRts lub ESD? Spróbuj
wyłączyć demona dźwięku lub użyj opcji
<tt class="option">-ao arts</tt> lub <tt class="option">-ao esd</tt>,
aby <span class="application">MPlayer</span> używał aRts lub ESD.
Możliwe jest też że masz uruchomione ALSA bez emulacji OSD, spróbuj załadować
moduły jądra ALSA OSS lub dodaj <tt class="option">-ao alsa</tt> do wiersza poleceń
żeby bezpośrednio używać sterownika wyjścia dźwięku ALSA.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602871"></a><a name="id2602874"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Gdy uruchamiam <span class="application">MPlayera</span> pod KDE, pojawia się
czarny ekran i nic się nie dzieje. Po około minucie zaczyna się odtwarzanie
filmu.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
aRts - demon dźwięku KDE - blokuje urządzenie dźwiękowe. Albo czekaj aż
rozpocznie się odtwarzanie lub wyłącz demona arts w centrum sterowania. Jeżeli
chcesz używać dźwięku aRts, określ wyjście audio przez nasz natywny sterownik
dźwięku aRts (<tt class="option">-ao arts</tt>). Jeżeli próba się nie powiedzie lub
sterownik nie jest wkompilowany, spróbuj użyć SDL (<tt class="option">-ao sdl</tt>)
i upewnij się, że Twoje SDL poradzi sobie z dźwiękiem aRts. Inną możliwością
jest uruchomienie <span class="application">MPlayera</span> z artsdsp.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602922"></a><a name="id2602924"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Mam problemy z synchronizacją A/V. Niektóre moje AVI są odtwarzane dobrze, a
niektóre z podwójną szybkością.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Masz wadliwą kartę/sterownik dźwięku. Najwyraźniej jest ustawiona na stałe na
44100Hz i próbujesz odtwarzać plik z dźwiękiem 22050Hz. Wypróbuj filtr zmiany
częstotliwości próbkowania audio (filtr <code class="systemitem">resample</code>).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2602951"></a><a name="id2602953"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Podczas odtwarzania filmu pojawia się brak synchronizacji video-audio i/lub
<span class="application">MPlayer</span> wywala się z następującym komunikatem:
</p><pre class="screen">
DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!
</pre><p>
(DEMUXER: Za dużo (945 w 8390980 bajtach) pakietów video w buforze!)
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Może istnieć kilka powodów.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Twój CPU <span class="bold"><strong>i/lub</strong></span> karta graficzna
  <span class="bold"><strong>i/lub</strong></span> magistrala jest zbyt wolna.
  <span class="application">MPlayer</span> w tym wypadku wyświetli komunikat
  (i licznik porzuconych ramek szybko będzie wzrastał).
</p></li><li class="listitem"><p>
  Jeżeli to plik AVI, to może ma zły przeplot. Wypróbuj opcję
  <tt class="option">-ni</tt>.
  Może też mieć zły nagłówek. W takim przypadku może pomóc opcja
  <tt class="option">-nobps</tt> i/lub opcja <tt class="option">-mc 0</tt>.
</p></li><li class="listitem"><p>
  Twój sterownik dźwięku jest wadliwy.
</p></li></ul></div><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603039"></a><a name="id2603041"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak pozbyć się braku synchronizacji audio/video przy przewijaniu strumieni
RealMedia?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Może pomóc <tt class="option">-mc 0.1</tt>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-dvd"></a>11.6. Odtwarzanie DVD</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2603071">
Co z nawigacją/menu DVD?
</a></dt><dt>Pyt: <a href="#id2603127">
Nie mogę obejrzeć żadnego nowego DVD od Sony Pictures/BMG.
</a></dt><dt>Pyt: <a href="#id2603164">
Co z napisami? Czy MPlayer może je wyświetlać?
</a></dt><dt>Pyt: <a href="#id2603191">
Jak mogę ustawić kod regionu w moim napędzie DVD? Nie mam Windowsów!
</a></dt><dt>Pyt: <a href="#id2603212">
Nie mogę odtworzyć DVD, MPlayer
się zawiesza bądź wyrzuca błędy "Encrypted VOB file!"
(Zaszyfrowany plik VOB!).
</a></dt><dt>Pyt: <a href="#id2603239">
Czy muszę mieć uprawnienia (lub setuid) użytkownika root, aby móc odtwarzać DVD?
</a></dt><dt>Pyt: <a href="#id2603265">
Czy jest możliwe odtwarzanie/kodowanie tylko wybranych rozdziałów?
</a></dt><dt>Pyt: <a href="#id2603284">
Odtwarzanie DVD jest bardzo wolne!
</a></dt><dt>Pyt: <a href="#id2603317">
Skopiowałem DVD używając vobcopy.
Jak mogę je odtworzyć/zakodować z dysku twardego?
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603071"></a><a name="id2603074"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Co z nawigacją/menu DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> nie obsługuje menu DVD ze względu na poważne
ograniczenia konstrukcyjne, które uniemożliwiają poprawną obsługę stałych
obrazów i treści interaktywnej. Jeżeli chcesz mieć fajne menu, będziesz musiał
użyć innego odtwarzacza, takiego jak <span class="application">xine</span>,
<span class="application">vlc</span> lub <span class="application">Ogle</span>.
Jeżeli chcesz nawigacji DVD w <span class="application">MPlayerze</span>, to będziesz
musiał sam ją zaimplementować. Bierz jednak pod uwagę, że jest to poważne
przedsięwzięcie.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603127"></a><a name="id2603129"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Nie mogę obejrzeć żadnego nowego DVD od Sony Pictures/BMG.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Jest to normalne; zostałeś oszukany i przedano Ci świadomie wadliwą płytę.
Jedyną metodą odtworzenia tych DVD jest ominięcie wadliwych bloków na dysku
przy użyciu DVDnav zamiast mpdvdkit2.
Możesz to zrobić kompilując <span class="application">MPlayera</span> z obsługą
DVDnav a potem zamieniając dvd:// na dvdnav:// w wierszu poleceń.
Jak na razie DVDnav i mpdvdkit2 wzajemnie się wykluczają, więc musisz podać
opcję <tt class="option">--disable-mpdvdkit2</tt> skryptowi konfiguracyjnemu.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603164"></a><a name="id2603167"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Co z napisami? Czy <span class="application">MPlayer</span> może je wyświetlać?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Tak. Spójrz do rozdziału <a class="link" href="#dvd" title="4.2. Odtwarzanie DVD">DVD</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603191"></a><a name="id2603193"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę ustawić kod regionu w moim napędzie DVD? Nie mam Windowsów!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj <a class="ulink" href="http://linvdr.org/projects/regionset/" target="_top">narzędzia regionset</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603212"></a><a name="id2603215"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Nie mogę odtworzyć DVD, <span class="application">MPlayer</span>
się zawiesza bądź wyrzuca błędy "Encrypted VOB file!"
(Zaszyfrowany plik VOB!).
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Kod deszyfrowania CSS nie działa z niektórymi odtwarzaczami DVD
dopóki nie ustawisz odpowiednio kodu regionu. Przeczytaj odpowiedź na
poprzednie pytanie.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603239"></a><a name="id2603241"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Czy muszę mieć uprawnienia (lub setuid) użytkownika root, aby móc odtwarzać DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Nie. Jednakże musisz mieć poprawne prawa ustawione dla wpisu urządzenia DVD
(w <tt class="filename">/dev/</tt>).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603265"></a><a name="id2603267"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Czy jest możliwe odtwarzanie/kodowanie tylko wybranych rozdziałów?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Tak, spróbuj użyć opcji <tt class="option">-chapter</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603284"></a><a name="id2603286"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Odtwarzanie DVD jest bardzo wolne!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj opcji <tt class="option">-cache</tt> (opisana na stronie man) i spróbuj włączyć
DMA dla napędu DVD, używając narzędzia <span class="command"><strong>hdparm</strong></span> (opisane
w rozdziale <a class="link" href="#drives" title="4.1. Napędy CD/DVD">CD</a>).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603317"></a><a name="id2603320"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Skopiowałem DVD używając vobcopy.
Jak mogę je odtworzyć/zakodować z dysku twardego?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj opcji <tt class="option">-dvd-device</tt> aby odwołać się do katalogu
zawierającego pliki:
</p><pre class="screen">
mplayer dvd://1 -dvd-device <em class="replaceable"><code>/ścieżka/do/katalogu</code></em>
</pre><p>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-features"></a>11.7. Prośby o wprowadzenie nowych możliwości</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2603364">
Jeżeli MPlayer jest zatrzymany i próbuję przewijać lub
nacisnę jakikolwiek klawisz, MPlayer z powrotem wraca
do odtwarzania. Chciałbym móc przwijać zatrzymany film.
</a></dt><dt>Pyt: <a href="#id2603398">
Chciałbym przewijać o +/- 1 klatkę zamiast 10 sekund.
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603364"></a><a name="id2603366"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jeżeli <span class="application">MPlayer</span> jest zatrzymany i próbuję przewijać lub
nacisnę jakikolwiek klawisz, <span class="application">MPlayer</span> z powrotem wraca
do odtwarzania. Chciałbym móc przwijać zatrzymany film.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Zaimplementowanie tego bez utraty synchronizacji A/V jest bardzo podchwytliwe.
Wszelkie próby do tej pory zakończyły się porażką. Łatki mile widziane.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603398"></a><a name="id2603400"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Chciałbym przewijać o +/- 1 klatkę zamiast 10 sekund.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Możesz przejść w przód o jedną klatkę przez naciśnięcie <span class="keycap"><b>.</b></span>.
Film zostanie zatrzymany (po szczegóły zajrzyj do strony man).
Wątpliwe jest, żeby przechodzenie w tył zostało
zaimplementowane w najbliższym czasie.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-encoding"></a>11.8. Kodowanie</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Pyt: <a href="#id2603439">
Jak mogę kodować?
</a></dt><dt>Pyt: <a href="#id2603462">
Jak zrzucić całą pozycję DVD do pliku?
</a></dt><dt>Pyt: <a href="#id2603503">
Jak mogę tworzyć automatycznie (S)VCD?
</a></dt><dt>Pyt: <a href="#id2603536">
Jak mogę stworzyć (S)VCD?
</a></dt><dt>Pyt: <a href="#id2603575">
Jak mogę połączyć dwa pliki video?
</a></dt><dt>Pyt: <a href="#id2603639">
Jak mogę naprawić pliki AVI z popsutym indeksem lub złym przeplotem?
</a></dt><dt>Pyt: <a href="#id2603687">
Jak mogę naprawić proporcje pliku AVI?
</a></dt><dt>Pyt: <a href="#id2603728">
Jak mogę zapisać i kodować plik VOB z popsutym początkiem?
</a></dt><dt>Pyt: <a href="#id2603803">
Nie mogę zakodować napisów z DVD do AVI!
</a></dt><dt>Pyt: <a href="#id2603821">
Jak mogę zakodować tylko wybrane rozdziały z DVD?
</a></dt><dt>Pyt: <a href="#id2603843">
Próbuję pracować z plikami 2GB+ na systemie plików VFAT. Czy to działa?
</a></dt><dt>Pyt: <a href="#id2603859">
Co oznaczają te liczby w wierszu stanu w czasie procesu kodowania?
</a></dt><dt>Pyt: <a href="#id2604010">
Dlaczego zalecany bitrate wypisywany przez MEncodera
jest ujemny?
</a></dt><dt>Pyt: <a href="#id2604035">
Nie mogę zakodować pliku ASF do AVI/DivX, ponieważ ma on 1000 fps.
</a></dt><dt>Pyt: <a href="#id2604058">
Jak mogę wstawić napisy do pliku wynikowego?
</a></dt><dt>Pyt: <a href="#id2604087">
Jak zakodować wyłącznie dźwięk z teledysku?
</a></dt><dt>Pyt: <a href="#id2604161">
Dlaczego zewnętrzne odtwarzacze nieodtwarzają filmów MPEG-4 zakodowanych
MEncoderem w wersji nowszej niż 1.0pre7?
</a></dt><dt>Pyt: <a href="#id2604294">
Jak mogę kodować plik zawierający tylko dźwięk?
</a></dt><dt>Pyt: <a href="#id2604329">
Jak mogę odtwarzać napisy wbudowane w AVI?
</a></dt><dt>Pyt: <a href="#id2604366">
MPlayer nie...
</a></dt></dl></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603439"></a><a name="id2603441"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę kodować?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przeczytaj sekcję
<a class="link" href="#mencoder" title="Rozdział 9. Podstawy używania MEncodera"><span class="application">MEncoder</span></a>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603462"></a><a name="id2603464"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak zrzucić całą pozycję DVD do pliku?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Gdy już wybierzesz pozycję i upewnisz się, że jest poprawnie odtwarzana przez
<span class="application">MPlayera</span>, użyj opcji <tt class="option">-dumpstream</tt>.
Na przykład:
</p><pre class="screen">
mplayer dvd://5 -dumpstream -dumpfile <em class="replaceable"><code>zrzut_dvd.vob</code></em>
</pre><p>
zrzuci piątą pozycję DVD do pliku <em class="replaceable"><code>zrzut_dvd.vob</code></em>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603503"></a><a name="id2603506"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę tworzyć automatycznie (S)VCD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Wypróbuj skrypt <tt class="filename">mencvcd.sh</tt> z podkatalogu
<tt class="filename">TOOLS</tt>.
Korzystając z niego, możesz kodować DVD lub inne filmy do formatu VCD lub SVCD,
a nawet wypalać bezpośrednio na CD.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603536"></a><a name="id2603538"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę stworzyć (S)VCD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Nowsze wersje <span class="application">MEncodera</span> potrafią bezpośrednio
generować pliki MPEG-2, które mogą być użyte jako podstawa do stworzenia VCD
lub SVCD i prawdopodobnie są od ręki odtwarzalne na wszelkich platformach (na
przykład aby podzielić się nagraniem z kamery cyfrowej z Twoimi nieobytymi
z komputerem przyjaciółmi).
Aby zdobyć więcej informacji przeczytaj sekcję
<a class="link" href="#menc-feat-vcd-dvd" title="10.8. Using MEncoder to create VCD/SVCD/DVD-compliant files">Używanie MEncodera do tworzenia plików zgodnych z VCD/SVCD/DVD</a>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603575"></a><a name="id2603577"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę połączyć dwa pliki video?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przy odrobinie szczęścia zbiory MPEG można połączyć (zkonkatenować).
Do zbiorów AVI możesz używać obsługi wielu zbiorów
<span class="application">MEncodera</span> w następujący sposób:
</p><pre class="screen">
mencoder -ovc copy -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em> <em class="replaceable"><code>plik1.avi</code></em> <em class="replaceable"><code>plik2.avi</code></em>
</pre><p>
Zadziała to tylko jeśli zbiory mają tę samą rozdzielczość i używają tego samego kodeka.
Możesz też spróbować
<a class="ulink" href="http://fixounet.free.fr/avidemux/" target="_top">avidemux</a> i
<span class="application">avimerge</span> (część zestawu narzędzi
<a class="ulink" href="http://www.transcoding.org/" target="_top">transcode</a>).
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603639"></a><a name="id2603641"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę naprawić pliki AVI z popsutym indeksem lub złym przeplotem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Aby unknąć używania <tt class="option">-idx</tt> aby móc przewijać w plikach AVI
z zepsutym indeksem lub <tt class="option">-ni</tt> do odtwarzania plików AVI ze złym
przeplotem, użyj polecenia
</p><pre class="screen">
mencoder -idx <em class="replaceable"><code>wejście.avi</code></em> -ovc copy -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em>
</pre><p>
aby skopiować strumienie audio i video do nowego pliku, równocześnie
odtwarzając indeks i poprawnie przeplatając dane.
Oczywiście to nie może naprawić ewentualnych błędów w strumieniach audio i/lub
video.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603687"></a><a name="id2603689"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę naprawić proporcje pliku AVI?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Możesz to zrobić dzięki opcji <span class="application">MEncodera</span>
<tt class="option">-force-avi-aspect</tt>, która nadpisuje proporcje zachowane w opcji
nagłówka AVI vprp OpenDML. Na przykład:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejście.avi</code></em> -ovc copy -oac copy -o <em class="replaceable"><code>wyjście.avi</code></em> -force-avi-acpect 4/3
</pre><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603728"></a><a name="id2603730"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę zapisać i kodować plik VOB z popsutym początkiem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Głównym problemem gdy chcesz kodować popsuty
<sup>[<a name="fn-corrupted-files-or-copy-protection" href="#ftn.fn-corrupted-files-or-copy-protection" class="footnote">3</a>]</sup>
plik VOB jest to, że będzie bardzo ciężko uzyskać wynik z doskonałą
synchronizacją A/V. Jednym sposobem ominięcia tego jest obcięcie uszkodzonej
części i kodowanie tylko tej dobrej.
Najpierw musisz się zorientować gdzie zaczyna się poprawna część:
</p><pre class="screen">
mplayer <em class="replaceable"><code>wejście.vob</code></em> -sb <em class="replaceable"><code>ilość_bajtów_do_pominięcia</code></em>
</pre><p>
Potem możesz stworzyć nowy plik, zawierający tylko poprawną część:
</p><pre class="screen">
dd if=<em class="replaceable"><code>wejście.vob</code></em> of=<em class="replaceable"><code>obcięte_wyjście.vob</code></em> skip=1 ibs=<em class="replaceable"><code>ilość_bajtów_do_pominięcia</code></em>
</pre><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603803"></a><a name="id2603805"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Nie mogę zakodować napisów z DVD do AVI!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Musisz poprawnie określić opcję <tt class="option">-sid</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603821"></a><a name="id2603823"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę zakodować tylko wybrane rozdziały z DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj poprawnie opcji <tt class="option">-chapter</tt>,
na przykład: <tt class="option">-chapter 5-7</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603843"></a><a name="id2603845"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Próbuję pracować z plikami 2GB+ na systemie plików VFAT. Czy to działa?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Nie, VFAT nie obsługuje plików 2GB+.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2603859"></a><a name="id2603861"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Co oznaczają te liczby w wierszu stanu w czasie procesu kodowania?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przykład:
</p><pre class="screen">
Pos: 264.5s   6612f ( 2%)  7.12fps Trem: 576min 2856mb  A-V:0.065 [2126:192]
</pre><p>
</p><div class="variablelist"><dl><dt><span class="term"><code class="systemitem">Pos: 264.5s</code></span></dt><dd><p>aktualny czas w kodowanym strumieniu</p></dd><dt><span class="term"><code class="systemitem">6612f</code></span></dt><dd><p>liczba zakodowanych klatek video</p></dd><dt><span class="term"><code class="systemitem">( 2%)</code></span></dt><dd><p>
  jaki procent strumienia wejściowego został zakodowany
  </p></dd><dt><span class="term"><code class="systemitem">7.12fps</code></span></dt><dd><p>szybkość kodowania</p></dd><dt><span class="term"><code class="systemitem">Trem: 576min</code></span></dt><dd><p>szacowany pozostały czas kodowania</p></dd><dt><span class="term"><code class="systemitem">2856mb</code></span></dt><dd><p>
  szacowana wielkość wyniku ostatecznego kodowania
  </p></dd><dt><span class="term"><code class="systemitem">A-V:0.065</code></span></dt><dd><p>
  aktualne opóźnienie między strumieniami audio i video
  </p></dd><dt><span class="term"><code class="systemitem">[2126:192]</code></span></dt><dd><p>
  średni bitrate video (w kb/s) i średni bitrate audio (w kb/s)
  </p></dd></dl></div><p>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604010"></a><a name="id2604012"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Dlaczego zalecany bitrate wypisywany przez <span class="application">MEncodera</span>
jest ujemny?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Ponieważ bitrate (ilość bitów na sekundę) z którym zakodowałeś audio jest za
duże, aby film się zmieścił na jakimkolwiek CD. Sprawdź czy libmp3lame jest
zainstalowana poprawnie.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604035"></a><a name="id2604038"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Nie mogę zakodować pliku ASF do AVI/DivX, ponieważ ma on 1000 fps.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Ponieważ ASF używa zmiennego framerate (ilość ramek na sekundę),
a AVI używa ustalonej wartości,
musisz ustawić ją ręcznie używając opcji <tt class="option">-ofps</tt>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604058"></a><a name="id2604060"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę wstawić napisy do pliku wynikowego?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Po prostu przekaż opcję <tt class="option">-sub &lt;nazwa_pliku&gt;</tt>
(lub odpowiednio <tt class="option">-sid</tt>) do <span class="application">MEncodera</span>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604087"></a><a name="id2604089"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak zakodować wyłącznie dźwięk z teledysku?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Nie jest to możliwe bezpośrednio lecz możesz sprówować następującego
sposobu (zwróć uwagę na znak
<span class="bold"><strong>&amp;</strong></span> na końcu polecenia
<span class="command"><strong>mplayer</strong></span>):
</p><pre class="screen">
mkfifo <em class="replaceable"><code>encode</code></em>
mplayer -ao pcm -aofile <em class="replaceable"><code>encode</code></em> dvd://1 &amp;
lame <em class="replaceable"><code>Twoje_opcje</code></em> <em class="replaceable"><code>encode</code></em> <em class="replaceable"><code>music.mp3</code></em>
rm <em class="replaceable"><code>encode</code></em>
</pre><p>
Ten sposób pozwala na użycie dowolnego kodera, nie tylko
<span class="application">LAME</span>.
Po prostu zamień <span class="command"><strong>lame</strong></span> w powyższym poleceniu
na swój ulubiony koder audio.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604161"></a><a name="id2604163"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Dlaczego zewnętrzne odtwarzacze nieodtwarzają filmów MPEG-4 zakodowanych
<span class="application">MEncoderem</span> w wersji nowszej niż 1.0pre7?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
<code class="systemitem">libavcodec</code>, natywna biblioteka
kodowania MPEG-4 zwykle dostarczana z <span class="application">MEncoderem</span>
ustawiała FourCC na 'DIVX' podczas kodowania video MPEG-4 (FourCC to
etykieta AVI identyfikująca oprogramowanie użyte do kodowania
i przewidziane do dekodowania video).
To powodowało przekonanie u wielu ludzi, że
<code class="systemitem">libavcodec</code> jest biblioteką kodowania
DivX, gdy w rzeczywistości jest zupełnie inną biblioteką kodowania MPEG-4,
która dużo lepiej niż DivX implementuje standard MPEG-4.
Dlatego też nowym domyślnym kodem FourCC używanym przez
<code class="systemitem">libavcodec</code> jest 'FMP4', lecz możesz
obejść to zachowanie używając opcji <span class="application">MEncodera</span>
<tt class="option">-ffourcc</tt>.
Tak samo możesz zmienić FourCC istniejącego pliku:
</p><pre class="screen">
mencoder <em class="replaceable"><code>wejście.avi</code></em> -o <em class="replaceable"><code>wyjście.avi</code></em> -ffourcc XVID
</pre><p>
Zauważ, że to ustawi FourCC na XVID, a nie na DIVX. Jest to zalecane, ze
względu na to, że kod FourCC DIVX oznacza DivX4, który jest bardzo prostym
kodekiem MPEG-4, a DX50 i XVID oba oznaczają pełne MPEG-4 (ASP). Dlatego
gdy ustawisz FourCC na DIVX, pewne programy lub sprzętowe odtwarzacze mogą
się dławić na niektórych zaawansowanych funkcjach, które obsługuje
<code class="systemitem">libavcodec</code>, a DivX nie; z drugiej
strony <code class="systemitem">Xvid</code> jest bliższy
funkjonalnością <code class="systemitem">libavacodec</code>,
a jest obsługiwany przez wszystkie sensowne odtwarzacze.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604294"></a><a name="id2604296"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę kodować plik zawierający tylko dźwięk?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj <tt class="filename">aconvert.sh</tt> z podkatalogu
<tt class="filename">TOOLS</tt> w drzewie źródeł
<span class="application">MPlayera</span>.
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604329"></a><a name="id2604331"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
Jak mogę odtwarzać napisy wbudowane w AVI?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Użyj <tt class="filename">avisubdump.c</tt> z podkatalogu
<tt class="filename">TOOLS</tt> lub przeczytaj
<a class="ulink" href="http://xlife.zuavra.net/curse/0012/" target="_top">ten dokument o wydobywaniu/demultipleksowaniu napisów wbudowanych w pliki AVI OpenDML</a>
</p></td></tr><tr class="question" title="Pyt:"><td align="left" valign="top"><a name="id2604366"></a><a name="id2604369"></a><p><b>Pyt:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> nie...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odp:</b></p></td><td align="left" valign="top"><p>
Przejrzyj podkatalog <tt class="filename">TOOLS</tt>.
Znajduje się tam kolekcja losowych skryptów i hacków.
Dokumentację znajdziesz w <tt class="filename">TOOLS/README</tt>.
</p></td></tr></tbody></table></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.fn-corrupted-files-or-copy-protection" href="#fn-corrupted-files-or-copy-protection" class="para">3</a>] </sup>
W pewnym stopniu, niektóre formy zabezpieczenia przed kopiowaniem używane na
DVD mogą zostać uznane za uszkodzenie zawartości.
</p></div></div></div><div class="appendix" title="Dodatek A. Jak zgłaszać błędy"><div class="titlepage"><div><div><h2 class="title"><a name="bugreports"></a>Dodatek A. Jak zgłaszać błędy</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#bugreports_security">A.1. Zgłaszanie błędów związanych z bezpieczeństwem</a></span></dt><dt><span class="sect1"><a href="#bugreports_fix">A.2. Jak poprawiać błędy</a></span></dt><dt><span class="sect1"><a href="#bugreports_regression_test">A.3. Jak wykonać test regresji za pomocą Subversion</a></span></dt><dt><span class="sect1"><a href="#bugreports_report">A.4. Jak zgłaszać błędy</a></span></dt><dt><span class="sect1"><a href="#bugreports_where">A.5. Gdzie zgłaszać błędy</a></span></dt><dt><span class="sect1"><a href="#bugreports_what">A.6. Co zgłaszać</a></span></dt><dd><dl><dt><span class="sect2"><a href="#bugreports_system">A.6.1. Informacja o systemie operacyjnym</a></span></dt><dt><span class="sect2"><a href="#bugreports_hardware">A.6.2. Sprzęt i sterowniki</a></span></dt><dt><span class="sect2"><a href="#bugreports_configure">A.6.3. Problemy z konfiguracją</a></span></dt><dt><span class="sect2"><a href="#bugreports_compilation">A.6.4. Problemy z kompilacją</a></span></dt><dt><span class="sect2"><a href="#bugreports_playback">A.6.5. Problemy z odtwarzaniem</a></span></dt><dt><span class="sect2"><a href="#bugreports_crash">A.6.6. Awarie programu (ang. Crashes)</a></span></dt><dd><dl><dt><span class="sect3"><a href="#bugreports_debug">A.6.6.1. Jak otrzymać informację o awarii</a></span></dt><dt><span class="sect3"><a href="#bugreports_core">A.6.6.2. Jak wyciągnąć sensowne informacje ze zrzutu core (ang. core dump)</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#bugreports_advusers">A.7. Wiem co robię...</a></span></dt></dl></div><p>
Dobre raporty błędów stanowią bardzo istotny wkład w rozwój każdego
projektu. Jednak tak jak pisanie dobrych programów wymaga sporo pracy, tak
dobre zgłoszenia problemów wymagają trochę wysiłku. Prosimy wziąć pod uwagę to,
że większość deweloperów jest bardzo zajęta i odbiera nieprzyzwoitą wręcz
ilość listów. Wsparcie ze strony użytkownika jest naprawdę ważne w procesie
rozwoju <span class="application">MPlayera</span>. Należy jednak pamiętać, że
trzeba dostarczyć <span class="bold"><strong>wszystkie</strong></span> informacje o które
poprosimy i postępować dokładnie według instrukcji zawartej w tym dokumencie.
</p><div class="sect1" title="A.1. Zgłaszanie błędów związanych z bezpieczeństwem"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_security"></a>A.1. Zgłaszanie błędów związanych z bezpieczeństwem</h2></div></div></div><p>
Jeśli znalazłeś lukę, którą można wykorzystać, i chcesz zrobić dobry uczynek
i pozwolić nam ją naprawić zanim ją ujawnisz, chętnie przyjmiemy zgłoszenie
bezpieczeństwa pod adresem
<a class="ulink" href="mailto:security@mplayerhq.hu" target="_top">security@mplayerhq.hu</a>.
Proszę pisać w języku angielskim i dodać [SECURITY] albo [ADVISORY] w temacie.
Upewnij się że Twoje zgłoszenie zawiera całkowity i dokładny opis błędu.
Jeśli wyślesz też poprawkę będziemy bardzo szczęśliwi.
Proszę, nie opóźniaj zgłoszenia żeby stworzyć exploit wykorzystujący lukę,
możesz go wysłać w następnym liście.
</p></div><div class="sect1" title="A.2. Jak poprawiać błędy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_fix"></a>A.2. Jak poprawiać błędy</h2></div></div></div><p>
Jeżeli uważasz, że posiadasz wystarczające umiejętności, namawiamy Cię do
samodzielnego poprawiania błędów. A może już to zrobiłeś? Przeczytaj
<a class="ulink" href="../../tech/patches.txt" target="_top">ten krótki dokument</a>, żeby dowiedzieć
się w jaki sposób dodać swoją łatę do źródeł
<span class="application">MPlayera</span>. Jeżeli będziesz miał jakieś pytania,
pomogą Ci ludzie z listy
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dev-eng" target="_top">MPlayer-dev-eng</a>
(tylko w języku angielskim -przyp. tłumacza).
</p></div><div class="sect1" title="A.3. Jak wykonać test regresji za pomocą Subversion"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_regression_test"></a>A.3. Jak wykonać test regresji za pomocą Subversion</h2></div></div></div><p>
Czasami zdarza się problem typu "wcześniej działało, a teraz przestało...".
Tutaj znajduje się, opisana krok po kroku, procedura, której celem jest próba
znalezienia źródła problemu.
<span class="bold"><strong>Nie jest</strong></span> ona przeznaczona
dla przeciętnego użytkownika.
</p><p>
Najpierw należy pobrać źródła MPlayera z SVN.
Więcej szczegółów na ten temat znajduje się w
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html#svn" target="_top">sekcji o Subversion strony pobierania</a>.
</p><p>
W rezultacie w katalogu mplayer/ znajdzie się obraz drzewa Subversion, po stronie klienta.
Teraz zaktualizuj ten obraz do daty, która Cię interesuje:
</p><pre class="screen">
cd mplayer/
svn update -r {"2004-08-23"}
</pre><p>
Format daty to RRRR-MM-DD GG:MM:SS.
Używając takiego formatu daty masz pewność, że będziesz w stanie wyciągać łatki
zgodnie z datą, gdy zostały dodane, dokładnie tak jak w przypadku
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mplayer-cvslog/" target="_top">archiwum listy MPlayer-cvslog</a>.
</p><p>
Następnie postępuj tak jak w przypadku normalnej aktualizacji:
</p><pre class="screen">
./configure
make
</pre><p>
</p><p>
Jeżeli czytasz ten dokument, a nie jesteś programistą, najszybszym
sposobem na dotarcie do miejsca w którym pojawi się problem jest
użycie binarnego wyszukiwania — tzn. szukania daty
pojawienia się problemu poprzez dzielenie interwału czasowego na pół
przy każdym kolejnym wyszukiwaniu.
Przykładowo, jeżeli problem wystąpił w 2003, spróbuj najpierw szukać
problemu w wydaniu z połowy roku. Jeżeli będzie obecny, cofnij się
do pierwszego kwietnia; jeżeli nie, przejdź do pierwszego października itd.
</p><p>
Jeżeli masz dużo wolnego miejsca na twardym dysku (pełna kompilacja
zajmuje aktualnie 100 MB albo około 300-350 MB jeżeli uaktywnione
jest debuggowanie), skopiuj najstarszą działającą wersję zanim dokonasz
aktualizacji; oszczędzi to sporo czasu, jeżeli zajdzie potrzeba powrotu
do starszej wersji.
(Zazwyczaj konieczne jest uruchomienie 'make distclean' przed
rekompilacją wcześniejszej wersji, więc jeżeli nie zrobisz kopii zapasowej
oryginalnego drzewa, będziesz musiał wszystko rekompilować, jeśli
będziesz chciał wrócić do aktualnej wersji.)
</p><p>
Kiedy znajdziesz dzień w którym pojawił się problem, kontynuuj szukanie
używając archiwum mplayer-cvslog (uporządkowane wg daty) i bardziej
precyzyjnych aktualizacji svn obejmujących godziny, minuty i sekundy:
</p><pre class="screen">
svn update -r {"2004-08-23 15:17:25"}
</pre><p>
To pomoże ci łatwo znaleźć łatkę, która jest winowajcą.
</p><p>
Jeżeli znajdziesz łatkę, która jest źródłem problemu, to znaczy, że już
prawie osiągnąłeś sukces; wyślij informację o niej na
<a class="ulink" href="http://bugzilla.mplayerhq.hu/" target="_top">MPlayer Bugzilla</a>
lub zapisz się na listę
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users" target="_top">MPlayer-users</a>
i tam wyślij raport.
Istnieje szansa, że autor łatki zasugeruje w jaki sposób rozwiązać problem.
Możesz też wpatrywać się w łatkę tak długo, aż nie będzie mogła wytrzymać
i wyjawi ci lokalizację błędu:-).
</p></div><div class="sect1" title="A.4. Jak zgłaszać błędy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_report"></a>A.4. Jak zgłaszać błędy</h2></div></div></div><p>
Po pierwsze sprawdź najnowszą wersję SVN <span class="application">MPlayera</span>,
ponieważ dany błąd może być już w niej naprawiony. Rozwój
<span class="application">MPlayera</span> przebiega naprawdę szybko, większość
problemów występujących w oficjalnych wydaniach jest zgłaszana w ciągu kilku dni
albo nawet godzin. Dlatego też prosimy używać <span class="bold"><strong>tylko wersji
z Subversion</strong></span> do zgłaszania błędów. Dotyczy to głównie pakietów binarnych
<span class="application">MPlayera</span>. Instrukcje dotyczące Subversion znajdują się
na dole <a class="ulink" href="http://www.mplayerhq.hu/dload.html" target="_top">tej strony</a>
lub w pliku README. Jeżeli problem dalej występuje prosimy sprawdzić listę
znanych błędów i resztę dokumentacji. Jeżeli problem
nie jest znany lub rozwiązany przez naszą dokumentację prosimy zgłosić błąd.
</p><p>
Nie należy wysyłać zgłoszeń do deweloperów. <span class="application">MPlayer</span>
jest dziełem dużej grupy, więc więcej osób może być zainteresowanych tym
problemem. Czasami inni użytkownicy spotkali się już z danym problemem i wiedzą,
jak go rozwiązać, nawet jeżeli jest to błąd w kodzie
<span class="application">MPlayera</span>.
</p><p>
Prosimy opisywać problem tak dokładnie, jak to tylko możliwe. Należy sprawdzić w
jakich dokładnie okolicznościach pojawia się błąd. Czy występuje on tylko w
określonych sytuacjach? Czy ma związek z konkretnym plikiem lub typem plików?
Czy dotyczy tylko danego kodeka, czy też jest niezależny od kodeków? Czy możesz
go powtórzyć z każdym wyjściem video? Im więcej informacji dostarczysz, tym
większe są szanse na rozwiązanie zgłoszonego problemu. Nie należy również
zapominać o dołączeniu wartościowych informacji wymienionych poniżej. W
przeciwnym wypadku nie będziemy w stanie prawidłowo zdiagnozować zgłoszonego
problemu.
</p><p>
Doskonałym i dobrze napisanym przewodnikiem dotyczącym zadawania pytań jest
dokument <a class="ulink" href="http://www.catb.org/~esr/faqs/smart-questions.html" target="_top">"Jak
mądrze zadawać pytania"</a> napisany przez
<a class="ulink" href="http://www.catb.org/~esr/" target="_top">Erica S. Raymonda</a>
(Polskie tłumaczenie tego dokumentu można znaleźć
<a class="ulink" href="http://rtfm.killfile.pl/" target="_top">tutaj</a> -przyp. tłum.). Istnieje
także inny dokumentem tego typu zatytułowany
<a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">Jak efektywnie zgłaszać błędy</a>
stworzony przez <a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/" target="_top">Simona Tathama</a>
(Polskie tłumaczenie tego dokumentu można znaleźć
<a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs-pl.html" target="_top">tutaj</a>
-przyp. tłum.). Jeśli będziesz postępował zgodnie z tymi przewodnikami,
powinieneś uzyskać pomoc. Prosimy jednak pamiętać, że śledzimy listę jako
ochotnicy, poświęcając nasz wolny czas. Jesteśmy bardzo zajęci i nie potrafimy
zagwarantować, że pomożemy rozwiązać zgłoszony problem, ani nawet tego, że
odpowiemy na Twoje zgłoszenie.
</p></div><div class="sect1" title="A.5. Gdzie zgłaszać błędy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_where"></a>A.5. Gdzie zgłaszać błędy</h2></div></div></div><p>
Zapisz się na listę MPlayer-users:
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users" target="_top">http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users</a>
i wyślij swoje zgłoszenie błędu na
<a class="ulink" href="mailto:mplayer-users@mplayerhq.hu" target="_top">mailto:mplayer-users@mplayerhq.hu</a>, gdzie będzie można je omówić.
</p><p>
Jeżeli wolisz, możesz zamiast tego skorzystać z naszej nowej
<a class="ulink" href="http://bugzilla.mplayerhq.hu/" target="_top">Bugzilli</a> (systemu zgłaszania błędów - przyp. tłum.)
</p><p>
Językiem obowiązującym na tej liście jest
<span class="bold"><strong>angielski</strong></span>. Prosimy trzymać się zasad standardowej
<a class="ulink" href="http://www.ietf.org/rfc/rfc1855.txt" target="_top">netykiety</a>
(Polską wersję netykiety można przeczytać np.
<a class="ulink" href="http://www.pg.gda.pl/~agatek/netq.html" target="_top">tutaj</a> - przyp. tłum.)
i <span class="bold"><strong>nie wysyłać listów w HTML-u</strong></span> na żadną z naszych
list. W przeciwnym wypadku zostaniesz zignorowany lub wyrzucony z listy. Jeżeli
nie wiesz czym jest list w HTML-u albo dlaczego jest on zły, przeczytaj ten
<a class="ulink" href="http://efn.no/html-bad.html" target="_top">świetny dokument</a> (znów tylko
po angielsku - przyp. tłum.). Wyjaśnia on wszystkie szczegóły i zawiera
instrukcje wyłączania HTML-u. Zauważ również, że nie wysyłamy kopii listów do
użytkowników, więc dobrym pomysłem jest zapisanie się na listę w celu uzyskania
odpowiedzi.
</p></div><div class="sect1" title="A.6. Co zgłaszać"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_what"></a>A.6. Co zgłaszać</h2></div></div></div><p>
Może zajść potrzeba dołączenia logu, konfiguracji lub przykładowego
pliku w Twoim
zgłoszeniu błędu. Jeżeli któryś z nich ma duży rozmiar, lepiej załadować go na
nasz <a class="ulink" href="ftp://upload.mplayerhq.hu/MPlayer/incoming/" target="_top">serwer FTP</a>
w skompresowanej postaci (gzip i bzip2 są preferowanymi formatami) i załączyć
tylko ścieżkę i nazwę pliku do zgłoszenia błędu. Nasza lista ma ustawiony limit
rozmiaru każdej wiadomości na 80k. Jeżeli potrzebujesz wysłać coś większego,
musisz to skompresować albo załadować na serwer.
</p><div class="sect2" title="A.6.1. Informacja o systemie operacyjnym"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_system"></a>A.6.1. Informacja o systemie operacyjnym</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Nazwa Twojej dystrybucji Linuksa albo system operacyjny. Np.:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Red Hat 7.1</p></li><li class="listitem"><p>Slackware 7.0 + pakiety rozwojowe z 7.1 ...</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  wersja jądra (kernela):
  </p><pre class="screen">uname -a</pre><p>
</p></li><li class="listitem"><p>
  wersja biblioteki libc:
  </p><pre class="screen">ls -l /lib/libc[.-]*</pre><p>
</p></li><li class="listitem"><p>
  wersja gcc i ld:
  </p><pre class="screen">
gcc -v
ld -v</pre><p>
</p></li><li class="listitem"><p>
  wersja binutils:
  </p><pre class="screen">as --version</pre><p>
</p></li><li class="listitem"><p>
  Jeżeli masz problem z trybem pełnoekranowym:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Menadżer okien i wersja</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Jeżeli masz problem z XVIDIXem:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
    głębia barw Xów (colour depth):
    </p><pre class="screen">xdpyinfo | grep "depth of root"</pre><p>
  </p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Jeżeli tylko GUI zawiera błędy:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>wersja GTK</p></li><li class="listitem"><p>wersja GLIB</p></li><li class="listitem"><p>wersja libpng</p></li><li class="listitem"><p>Sytuacja w której pojawia się błąd GUI</p></li></ul></div><p>
</p></li></ul></div><p>
</p></div><div class="sect2" title="A.6.2. Sprzęt i sterowniki"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_hardware"></a>A.6.2. Sprzęt i sterowniki</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  informacje o procesorze (CPU) (to działa tylko pod Linuksem):
  </p><pre class="screen">cat /proc/cpuinfo</pre><p>
</p></li><li class="listitem"><p>
  Producent karty graficznej i model. Np.:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>ASUS V3800U chip: nVidia TNT2 Ultra pro 32MB SDRAM</p></li><li class="listitem"><p>Matrox G400 DH 32MB SGRAM</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Typ sterownika video i wersja, np:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>wbudowane sterowniki X</p></li><li class="listitem"><p>nVidia 0.9.623</p></li><li class="listitem"><p>Utah-GLX CVS 2001-02-17</p></li><li class="listitem"><p>DRI z X 4.0.3</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Typ karty dźwiękowej i sterownik, np:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Creative SBLive! Gold ze sterownikiem OSS z oss.creative.com</p></li><li class="listitem"><p>Creative SB16 ze sterownikiem OSS z kernela</p></li><li class="listitem"><p>GUS PnP z emulacją ALSA OSS</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Jeżeli masz wątpliwości, załącz wyjście linuksowego polecenia
  <span class="command"><strong>lspci -vv</strong></span>.
</p></li></ul></div><p>
</p></div><div class="sect2" title="A.6.3. Problemy z konfiguracją"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_configure"></a>A.6.3. Problemy z konfiguracją</h3></div></div></div><p>
Jeżeli <span class="command"><strong>./configure</strong></span> zwraca błąd albo
automatyczne wykrywanie czegoś zawiedzie, przeczytaj
<tt class="filename">configure.log</tt>. Możliwe, że znajdziesz tam odpowiedź, na
przykład kilka połączonych wersji tej samej biblioteki w Twoim systemie albo że
zapomniałeś zainstalować pakietów rozwojowych (tych z przyrostkiem -dev albo
-devel). Jeżeli wydaje Ci się, że istnieje jednak błąd, załącz
<tt class="filename">configure.log</tt> w twoim raporcie.
</p></div><div class="sect2" title="A.6.4. Problemy z kompilacją"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_compilation"></a>A.6.4. Problemy z kompilacją</h3></div></div></div><p>
Prosimy załączyć następujące pliki:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>config.h</p></li><li class="listitem"><p>config.mak</p></li></ul></div><p>
</p></div><div class="sect2" title="A.6.5. Problemy z odtwarzaniem"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_playback"></a>A.6.5. Problemy z odtwarzaniem</h3></div></div></div><p>
Prosimy załączyć wyjście <span class="application">MPlayera</span> w trybie gadatliwym
na poziomie pierwszym (opcja -v - przyp. tłum.), ale pamiętając o
<span class="bold"><strong>nie skracaniu wyniku polecenia</strong></span> podczas
kopiowania go do Twojego listu. Deweloperzy potrzebują wszystkich informacji do
prawidłowego zdiagnozowania problemu. Możesz przekierować wyjście bezpośrednio
do pliku w ten sposób:
</p><pre class="screen">mplayer -v <em class="replaceable"><code>opcje</code></em> <em class="replaceable"><code>nazwa_pliku</code></em> &gt; mplayer.log 2&gt;&amp;1</pre><p>
</p><p>
Jeżeli Twój problem jest specyficzny dla jednego albo wielu plików, załaduj
winowajcę(ów) na:
<a class="ulink" href="ftp://upload.mplayerhq.hu/MPlayer/incoming/" target="_top">ftp://upload.mplayerhq.hu/MPlayer/incoming/</a>
</p><p>
Załaduj także mały plik tekstowy nazwany tak samo jak Twój plik, ale z
rozszerzeniem .txt. Opisz w nim problem, który masz z zawartym plikiem i załącz
swój adres email oraz wyjście <span class="application">MPlayera</span> w trybie
gadatliwym na poziomie pierwszym. Zazwyczaj pierwsze 1-5 MB pliku jest
wystarczające do odtworzenia problemu, ale żeby być pewnym prosimy wykonać:
</p><pre class="screen">
dd if=<em class="replaceable"><code>twój_plik</code></em> of=<em class="replaceable"><code>mały_plik</code></em> bs=1024k count=5
</pre><p>
To polecenie weźmie pierwsze pięć megabajtów
'<span class="bold"><strong>twojego_pliku</strong></span>' i zapisze je do
'<span class="bold"><strong>małego_pliku</strong></span>'. Następnie spróbuj odtworzyć
mały plik i jeśli błąd wciąż się pojawia plik ten jest dla nas wystarczający.
Prosimy <span class="bold"><strong>w żadnym wypadku</strong></span> nie wysyłać plików
poprzez pocztę elektroniczną! Załaduj je na serwer FTP i wyślij tylko
ścieżkę/nazwę pliku. Jeżeli plik jest dostępny w sieci, wyślij
<span class="bold"><strong>dokładny</strong></span> adres pod którym jest on dostępny.
</p></div><div class="sect2" title="A.6.6. Awarie programu (ang. Crashes)"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_crash"></a>A.6.6. Awarie programu (ang. Crashes)</h3></div></div></div><p>
Musisz uruchomić <span class="application">MPlayera</span> wewnątrz
<span class="command"><strong>gdb</strong></span> i wysłać nam kompletne wyjście, albo jeżeli posiadasz
zrzut <tt class="filename">core</tt> (ang. core dump) utworzony w wyniku awarii,
wyciągnąć z niego użyteczne informacje. Oto jak to zrobić:
</p><div class="sect3" title="A.6.6.1. Jak otrzymać informację o awarii"><div class="titlepage"><div><div><h4 class="title"><a name="bugreports_debug"></a>A.6.6.1. Jak otrzymać informację o awarii</h4></div></div></div><p>
Przekompiluj <span class="application">MPlayera</span> z opcją debugowania kodu:
</p><pre class="screen">
./configure --enable-debug=3
make
</pre><p>
i uruchom <span class="application">MPlayera</span> używając gdb:
</p><pre class="screen">gdb ./mplayer</pre><p>
Jesteś teraz wewnątrz gdb. Wpisz:
</p><pre class="screen">
run -v <em class="replaceable"><code>opcje-mplayera</code></em> <em class="replaceable"><code>nazwa_pliku</code></em>
</pre><p>
i odtwórz swoją awarię. Gdy tylko to zrobisz, gdb przeniesie cię z powrotem do
wiersza poleceń, gdzie należy wpisać
</p><pre class="screen">
bt
disass $pc-32 $pc+32
info all-registers
</pre><p>
</p></div><div class="sect3" title="A.6.6.2. Jak wyciągnąć sensowne informacje ze zrzutu core (ang. core dump)"><div class="titlepage"><div><div><h4 class="title"><a name="bugreports_core"></a>A.6.6.2. Jak wyciągnąć sensowne informacje ze zrzutu core (ang. core dump)</h4></div></div></div><p>
Utwórz plik z nastepującymi poleceniami:
</p><pre class="screen">
bt
disass $pc-32 $pc+32
info all-registers
</pre><p>
A następnie uruchomić następujące polecenie:
</p><pre class="screen">
gdb mplayer --core=core -batch 	--command=<em class="replaceable"><code>plik_z_poleceniami</code></em> &gt; mplayer.bug
</pre><p>
</p></div></div></div><div class="sect1" title="A.7. Wiem co robię..."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_advusers"></a>A.7. Wiem co robię...</h2></div></div></div><p>
Jeżeli utworzyłeś właściwy raport błędu kierując się powyższymi wskazówkami i
jesteś pewien że to błąd <span class="application">MPlayera</span>, nie kompilatora
albo uszkodzonego pliku, przeczytałeś dokumentację i nie możesz znaleźć
rozwiązania, Twoje sterowniki dźwięku są w porządku, możesz chcieć zapisać się
na listę MPlayer-advusers (tylko po angielsku - przyp. tłum.) i wysłać tam swoje
zgłoszenie błędu, aby uzyskać lepszą i szybszą odpowiedź.
</p><p>
Wiedz, że jeśli zadasz trywialne pytanie albo odpowiedź na nie znajduje się na
stronie man, zamiast dostać odpowiedź zostaniesz zignorowany
albo obrzucony wyzwiskami.
Dlatego też nie obrażaj nas i zapisz się na listę -advusers tylko jeżeli
naprawdę wiesz co robisz i czujesz się zaawansowanym użytkownikiem lub
deweloperem. Jeżeli spełniasz te kryteria, nie powinno Ci sprawić problemu
znalezienie sposobu zapisania się na listę
(pamiętaj, że musisz biegle znać j. angielski - przyp. tłum.)
</p></div></div><div class="appendix" title="Dodatek B. Format skórki MPlayera"><div class="titlepage"><div><div><h2 class="title"><a name="skin"></a>Dodatek B. Format skórki <span class="application">MPlayera</span></h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#skin-overview">B.1. Wstęp</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-overview-directories">B.1.1. Katalogi</a></span></dt><dt><span class="sect2"><a href="#skin-overview-formats">B.1.2. Formaty obrazków</a></span></dt><dt><span class="sect2"><a href="#skin-overview-components">B.1.3. Składniki skórki</a></span></dt><dt><span class="sect2"><a href="#skin-files">B.1.4. Pliki</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-file">B.2. Plik skin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-file-main">B.2.1. Okno główne i panel odtwarzania</a></span></dt><dt><span class="sect2"><a href="#skin-file-subwindow">B.2.2. Okno ekranu</a></span></dt><dt><span class="sect2"><a href="#skin-file-menu">B.2.3. Menu skórki</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-fonts">B.3. Czcionki</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-fonts-symbols">B.3.1. Znaki specjalne (symbole)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-gui">B.4. Sygnały GUI</a></span></dt><dt><span class="sect1"><a href="#skin-quality">B.5. Tworzenie dobrych skórek</a></span></dt></dl></div><div class="sect1" title="B.1. Wstęp"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-overview"></a>B.1. Wstęp</h2></div></div></div><p>
W zasadzie nie ma to żadnego związku z formatem skórki, ale powinieneś
wiedzieć, że <span class="application">MPlayer</span> <span class="bold"><strong>nie</strong></span>
ma wbudowanej skórki, w związku z tym <span class="bold"><strong> co najmniej
jedna skórka musi być zainstalowana, abyś miał możliwość korzystania z GUI.</strong></span>
</p><div class="sect2" title="B.1.1. Katalogi"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-directories"></a>B.1.1. Katalogi</h3></div></div></div><p>
Skórki są szukane w następujących katalogach (w kolejności):
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
<tt class="filename">$(DATADIR)/skins/</tt>
</p></li><li class="listitem"><p>
<tt class="filename">$(PREFIX)/share/mplayer/skins/</tt>
</p></li><li class="listitem"><p>
<tt class="filename">~/.mplayer/skins/</tt>
</p></li></ol></div><p>
</p><p>
Zauważ, że pierwsza ścieżka może się różnić, w zależności od sposobu w jaki
<span class="application">MPlayer</span> został skonfigurowany
(zobacz argumenty <tt class="option">--prefix</tt> oraz <tt class="option">--datadir</tt>
w skrypcie <span class="command"><strong>configure</strong></span>).
</p><p>
Każda skórka jest instalowana w swoim własnym katalogu, w jednej z wyżej
wymienionych lokacji, na przykład:
</p><pre class="screen">$(PREFIX)/share/mplayer/skins/default/</pre><p>
</p></div><div class="sect2" title="B.1.2. Formaty obrazków"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-formats"></a>B.1.2. Formaty obrazków</h3></div></div></div><p>Obrazki muszą być zapisane w formacie PNG (paleta truecolor - 24 lub 32 bpp).</p><p>
W głównym oknie oraz na panelu odtwarzania (zobacz niżej) możesz użyć
obrazków z 'przezroczystością': obszary wypełnione kolorem #FF00FF (magenta) są
w pełni przezroczyste dla <span class="application">MPlayera</span>. Oznacza to, że
możesz mieć okna o różnych kształtach jeśli Twój X Server ma rozszerzenie
XShape.
</p></div><div class="sect2" title="B.1.3. Składniki skórki"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-components"></a>B.1.3. Składniki skórki</h3></div></div></div><p>
Skórki są całkowicie konfigurowalne (w odróżnieniu od skórek np.
<span class="application">Winampa</span>/<span class="application">XMMS</span>),
a więc zależy to wyłącznie od Ciebie, czy stworzysz coś wspaniałego.
</p><p>
W chwili obecnej mamy cztery okna, które można ozdobić:
<a class="link" href="#skin-file-main" title="B.2.1. Okno główne i panel odtwarzania">okno główne (main window)</a>,
<a class="link" href="#skin-file-subwindow" title="B.2.2. Okno ekranu">okno ekranu (subwindow)</a>,
<a class="link" href="#skin-file-main" title="B.2.1. Okno główne i panel odtwarzania">panel odtwarzania (playbar)</a>,
<a class="link" href="#skin-file-menu" title="B.2.3. Menu skórki">menu skórki (skin menu)</a> (które może być
aktywowane prawym przyciskiem myszy).

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Okno główne</strong></span> i/lub
  <span class="bold"><strong>panel odtwarzania</strong></span> to miejsca, gdzie możesz
  sterować <span class="application">MPlayerem</span>.
  Tłem tego okna jest obrazek. Różne elementy mogą (i muszą) być umieszczone
  w tym oknie: <span class="emphasis"><em>przyciski</em></span>, <span class="emphasis"><em>potencjometry</em></span>
  (suwaki) i <span class="emphasis"><em>etykiety</em></span>. Dla każdego elementu musisz określić
  ich pozycję oraz rozmiar.
</p><p>
   <span class="bold"><strong>Przycisk</strong></span> ma trzy stany (wciśnięty,
   zwolniony, nieaktywny), zatem jego obrazki muszą być podzielone na trzy
   części w pionie. Zobacz sekcję <a class="link" href="#skin-button">button</a>, by
   dowiedzieć się więcej.
</p><p>
  <span class="bold"><strong>Potencjometr (suwak)</strong></span> (wykorzystywany głównie
  jako pasek przewijania i kontrolka głośności/balansu) może składać się z
  każdej liczby stanów poprzez podzielenie jego obrazka na wiele części, z
  których jedna jest pod drugą. Zobacz
  <a class="link" href="#skin-hpotmeter">hpotmeter</a> oraz
  <a class="link" href="#skin-potmeter">potmeter</a>, by dowiedzieć się więcej.
</p><p>
  <span class="bold"><strong>Etykiety</strong></span> są nieco specyficzne: Znaki
  potrzebne do ich narysowania są pobierane z pliku graficznego, a znaki
  umieszczone w pliku graficznym są opisane przez
  <a class="link" href="#skin-fonts" title="B.3. Czcionki">plik opisu czcionek</a>. Jest to plik, który za
  pomocą czystego tekstu określa współrzędne x, y oraz wielkość każdego znaku
  umieszczonego na obrazku (plik graficzny i jego plik opisu tworzą
  <span class="emphasis"><em>razem</em></span> czcionkę).
  Zobacz <a class="link" href="#skin-dlabel">dlabel</a>
  oraz <a class="link" href="#skin-slabel">slabel</a>, by dowiedzieć się więcej.
</p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>Wszystkie obrazki mogą być całkowicie przezroczyste - tak, jak to
opisano w sekcji <a class="link" href="#skin-overview-formats" title="B.1.2. Formaty obrazków">formaty plików
graficznych</a>. Jeżeli X Server nie obsługuje rozszerzenia XShape, to
elementy oznaczone jako przezroczyste będą czarne. Jeśli chciałbyś wykorzystać
taką możliwość, szerokość obrazka tła głównego okna musi być podzielna przez 8.
</p></div></li><li class="listitem"><p>
  <span class="bold"><strong>Okno ekranu</strong></span> to miejsce, gdzie odtwarzany jest
  film. Może ono wyświetlać określony obrazek, jeśli żaden film nie jest uruchomiony
  (to dość nudne mieć puste okno :-)) <span class="bold"><strong>Uwaga:</strong></span>
  przezroczystość <span class="bold"><strong>nie jest</strong></span> tutaj dostępna.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Menu skórki</strong></span> to po prostu jeden ze sposobów na
  kontrolowanie <span class="application">MPlayera</span> poprzez wpisy w menu. Dwa
  obrazki są do tego potrzebne: pierwszy z nich jest obrazkiem podstawowym,
  który pokazuje zwykły stan menu, drugi zaś służy do wyświetlenia zaznaczonych
  obszarów. Gdy uaktywnisz menu, zostanie pokazany pierwszy obrazek. Jeśli
  przesuniesz mysz nad któryś z jego wpisów, wówczas zaznaczony element jest
  kopiowany z drugiego obrazka w miejsce, na które wskazuje kursor myszy (drugi
  obrazek nigdy nie jest wyświetlany w całości).
</p><p>
 Wpis w menu jest określony przez jego pozycję oraz rozmiar na obrazku (zobacz
 sekcję <a class="link" href="#skin-file-menu" title="B.2.3. Menu skórki">menu skórki</a> by dowiedzieć się
 więcej).
</p></li></ul></div><p>
</p><p>
  Jedna ważna sprawa, która nie została jeszcze powiedziana:
  <span class="application">MPlayer</span> musi wiedzieć co zrobić w momencie
  kliknięcia na przyciski, potencjometry i wpisy w menu, aby zadziałały. Zostało
  to zrobione za pomocą <a class="link" href="#skin-gui" title="B.4. Sygnały GUI">sygnałów</a> (zdarzeń). Dla
  tych elementów musisz zdefiniować sygnały, które mają być wysłane podczas
  kliknięcia na nie.
</p></div><div class="sect2" title="B.1.4. Pliki"><div class="titlepage"><div><div><h3 class="title"><a name="skin-files"></a>B.1.4. Pliki</h3></div></div></div><p>
Potrzebujesz następujących plików do stworzenia skórki:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Plik konfiguracyjny o nazwie <a class="link" href="#skin-file" title="B.2. Plik skin">skin</a> mówi
  <span class="application">MPlayerowi</span> jak połączyć różne części skórki
  w jedną całość i co zrobić, gdy kliknie się gdzieś na obszarze okna.
</p></li><li class="listitem"><p>
  Plik graficzny tła w oknie głównym.
</p></li><li class="listitem"><p>
  Obrazki dla elementów w głównym oknie (zawierające jeden lub
  więcej plików opisu czcionek potrzebnych do rysowania etykiet).
</p></li><li class="listitem"><p>
  Obrazek wyświetlany w oknie ekranu (opcjonalnie)
</p></li><li class="listitem"><p>
  Dwa obrazki dla menu skórki (potrzebne są tylko wtedy, gdy chcesz stworzyć
  takie menu).
</p></li></ul></div><p>
  Za wyjątkiem pliku konfiguracyjnego skórki, możesz nazwać wszystkie pliki
  tak, jak tego chcesz (ale weź pod uwagę, że pliki opisu czcionek muszą mieć
  rozszerzenie <tt class="filename">.fnt</tt> ).
</p></div></div><div class="sect1" title="B.2. Plik skin"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-file"></a>B.2. Plik skin</h2></div></div></div><p>
Jak zostało powiedziane wcześniej, plik ten jest plikiem konfigurującym skórkę.
Obsługuje różne rodzaje wierszy; komentarze zaczynają wiersz znakiem
'<code class="literal">;</code>' (tylko spacje i znaki tabulacji są dopuszczone przed
'<code class="literal">;</code>').
</p><p>
Plik podzielony jest na sekcje. Każda sekcja opisuje skórkę dla każdej
aplikacji i ma następującą formę:

</p><pre class="programlisting">
section = <em class="replaceable"><code>nazwa sekcji</code></em>
.
.
.
end
</pre><p>
</p><p>
Obecnie jest tylko jedna aplikacja, a więc potrzebujesz tylko jedną sekcję
'section' - jej nazwa to <span class="bold"><strong>movieplayer</strong></span>.
</p><p>
Wewnątrz tej sekcji każde z okien jest opisane przez blok następującej postaci:
</p><pre class="programlisting">
window = <em class="replaceable"><code>nazwa okna</code></em>
.
.
.
end
</pre><p>
</p><p>
gdzie <em class="replaceable"><code>nazwa okna</code></em> może być jednym z poniższych łańcuchów:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>main</strong></span> - dla okna głównego</p></li><li class="listitem"><p><span class="bold"><strong>sub</strong></span> - dla okna ekranu</p></li><li class="listitem"><p><span class="bold"><strong>menu</strong></span> - dla menu skórki</p></li><li class="listitem"><p><span class="bold"><strong>playbar</strong></span> - dla panelu odtwarzania</p></li></ul></div><p>
</p><p>
(Bloki sub i menu są opcjonalne - nie musisz tworzyć menu czy elementów skórki
dla okna ekranu)
</p><p>
Wewnątrz bloku 'window' możesz definiować każdy element okna, wpisując linijkę
tej postaci: </p><pre class="programlisting">item = parametr</pre><p>
Gdzie <code class="literal">item</code> jest łańcuchem, kóry identyfikuje typ elementu
GUI, <code class="literal">parametr</code> jest wartością numeryczną lub tekstową (lub
listą takich wartości oddzielonych od siebie znakiem przecinka).
</p><p>
Złożenie powyższych elementów razem tworzy plik, który wygląda mniej więcej tak:
</p><pre class="programlisting">
section = movieplayer
  window = main
  ; ... elementy okna głównego ...
  end

  window = sub
  ; ... elementy okna ekranu ...
  end

  window = menu
  ; ... elementy menu skórki ...
  end

  window = playbar
  ; ... elementy panelu odtwarzania ...
  end
end
</pre><p>
</p><p>
Nazwa pliku graficznego musi zostać podana bez żadnych nazw katalogów - obrazki
są szukane w katalogu <tt class="filename">skins</tt>.
Możesz (ale nie musisz) określić rozszerzenia tego pliku. Jeśli plik taki nie
istnieje, <span class="application">MPlayer</span>
spróbuje wczytać plik <tt class="filename">&lt;nazwa pliku&gt;.&lt;rozszerzenie&gt;</tt>,
gdzie <code class="literal">png</code> oraz <code class="literal">PNG</code> są brane jako
<tt class="filename">&lt;rozszerzenie&gt;</tt> (w tej właśnie kolejności). Pierwszy
pasujący plik będzie użyty.
</p><p>
Na koniec kilka słów na temat pozycjonowania. Okno główne oraz okno ekranu możesz
umieścić w różnych narożnikach ekranu poprzez ustawienie współrzędnych
<code class="literal">X</code> i <code class="literal">Y</code>. <code class="literal">0</code> to góra lub
lewa strona, <code class="literal">-1</code> to środek, <code class="literal">-2</code> to strona
prawa, lub dół, tak jak przedstawiono na poniższej ilustracji:
</p><div class="informalfigure"><pre class="screen">
(0, 0)----(-1, 0)----(-2, 0)
  |          |          |
  |          |          |
(0,-1)----(-1,-1)----(-2,-1)
  |          |          |
  |          |          |
(0,-2)----(-1,-2)----(-2,-2)
</pre></div><p>
Oto przykład wyjaśniający to lepiej. Przypuśćmy, że masz obrazek nazwany
<tt class="filename">main.png</tt>, który został użyty dla okna głównego:
</p><pre class="programlisting">base = main, -1, -1</pre><p>
<span class="application">MPlayer</span> spróbuje wczytać pliki
<tt class="filename">main</tt>, <tt class="filename">main.png</tt>,
<tt class="filename">main.PNG</tt>.
</p><div class="sect2" title="B.2.1. Okno główne i panel odtwarzania"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-main"></a>B.2.1. Okno główne i panel odtwarzania</h3></div></div></div><p>
Poniżej znajduje się lista wpisów, które mogą być użyte w blokach
'<code class="literal">window = main</code>'...'<code class="literal">end</code>'
oraz '<code class="literal">window = playbar</code>' ... '<code class="literal">end</code>'.
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">
  <a name="skin-main-base"></a>base = obrazek, X, Y
  </code></span></dt><dd><p>
  Możesz określić obrazek tła, który będzie używany w oknie głównym.
  Okno będzie widoczne na ekranie na współrzędnych <code class="literal">X, Y</code>. Okno
  będzie wielkości tego obrazka.
    </p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>Współrzędne te nie działają na razie dla okna ekranu.</p></div><div class="warning" title="Ostrzeżenie" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Ostrzeżenie</h3><p>Obszary przezroczystości obrazka (kolor #FF00FF) będą
    widoczne jako czarne pod X serwerami niemającymi rozszerzenia
    XShape. Szerokość obrazka musi być podzielna przez 8.</p></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-button"></a>button = obrazek, X, Y, szerokość, wysokość, sygnał
  </code></span></dt><dd><p>
Umieści przycisk o rozmiarze <code class="literal">szerokość</code> *
<code class="literal">wysokość</code> na pozycji <code class="literal">X</code>,
<code class="literal">Y</code>. Określony <code class="literal">sygnał</code> jest generowany
podczas kliknięcia na przycisk. Obrazek ten opisany przez
<code class="literal">obrazek</code> musi składać się z trzech części jedna pod drugą
(stosownie do możliwych stanów przycisku), w ten oto sposób:
</p><div class="informalfigure"><pre class="screen">
+---------------+
|  wciśnięty    |
+---------------+
|  zwolniony    |
+---------------+
| nieaktywny    |
+---------------+
</pre></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-decoration"></a>decoration = enable|disable (włączona|wyłączona)
  </code></span></dt><dd><p>
Włącza lub wyłącza dekorację menedżera okna w oknie głównym.
Domyślnie jest <span class="bold"><strong>wyłączona</strong></span>.
    </p><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>Nie działa to w oknie ekranu, gdyż nie ma takiej potrzeby.</p></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-hpotmeter"></a>hpotmeter = przycisk, szer_przycisku, wys_przycisku, faza, liczba_faz, domyślny, X, Y, szerokość, wysokość, sygnał
  </code></span></dt><dd><p>

    </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-vpotmeter"></a>vpotmeter = przycisk, szer_przycisku, wys_przycisku, fazy, liczba_faz, domyślny, X, Y, szerokość, wysokość, sygnał
  </code></span></dt><dd><p>
Umieszcza poziomo (hpotmeter) lub pionowo (vpotmeter) suwak o rozmiarze
<code class="literal">szerokość</code> * <code class="literal">wysokość</code> i pozycji
<code class="literal">X,Y</code>. Obrazek może być podzielony na różne części dla różnych
faz suwaka (np. możesz mieć suwak głośności, który w zależności od położenia
zmienia kolor z zielonego (minimum) na czerwony (maksimum)).
<code class="literal">hpotmeter</code> może być przyciskiem umieszczonym poziomo.
Jego parametry to:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">przycisk</code> - obrazek użyty do przycisku
    (musi posiadać trzy części jedna pod drugą tak, jak w przypadku
    <a class="link" href="#skin-button">przycisku</a>)
    </p></li><li class="listitem"><p><code class="literal">szer_przycisku</code>,<code class="literal">wys_przycisku</code> - wielkość przycisku
    </p></li><li class="listitem"><p><code class="literal">fazy</code> - obrazek używany do określenie faz
   dla hpotmeter. Wartość specjalna <code class="literal">NULL</code> może być użyta,
   jeśli nie chcesz żadnego obrazka. Obrazek musi być podzielony w pionie
   na fragmenty <code class="literal">poszczególnych faz</code> tak, jak poniżej:
    </p><div class="informalfigure"><pre class="screen">
+------------+
|  faza #1   |
+------------+
|  faza #2   |
+------------+
     ...
+------------+
|  faza #n   |
+------------+
</pre></div></li><li class="listitem"><p><code class="literal">liczba_faz</code> - liczba faz znajdująca się na obrazku z <code class="literal">fazami</code>
    </p></li><li class="listitem"><p><code class="literal">domyślny</code> - domyślne ustawienie dla hpotmeter
    (zakres od <code class="literal">0</code> do <code class="literal">100</code>)
    </p></li><li class="listitem"><p><code class="literal">X</code>,<code class="literal">Y</code> - pozycja dla hpotmeter
    </p></li><li class="listitem"><p><code class="literal">szerokość</code>,<code class="literal">wysokość</code> - szerokość i wysokość dla
  <code class="literal">hpotmeter</code>
    </p></li><li class="listitem"><p><code class="literal">sygnał</code> - sygnał generowany podczas zmiany wartości <code class="literal">hpotmeter</code>
    </p></li></ul></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-potmeter"></a>potmeter = fazy, liczba_faz, domyślny, X, Y, szerokość, wysokość, sygnał
  </code></span></dt><dd><p>
<code class="literal">hpotmeter</code> bez przycisku. (domyślam się, że chodzi o to, aby
nim kręcić, ale reaguje on tylko na poziome przesuwanie). Opis parametrów znajdziesz w części o
<a class="link" href="#skin-hpotmeter">hpotmeter</a>.
Parametr <code class="literal">fazy</code> może mieć wartość <code class="literal">NULL</code>, ale
jest to zupełnie bezużyteczne, gdyż nie widać wtedy położenia potencjometru.
    </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-font"></a>font = plik_czcionek, id_czcionki
  </code></span></dt><dd><p>
Definiuje czcionkę. <code class="literal">plik_czcionek</code> jest nazwą pliku opisu
czcionki z rozszerzeniem <tt class="filename">.fnt</tt> (nie podawaj rozszerzenia w
tym miejscu). <code class="literal">id_czcionki</code> jest używany do wskazywania
konkretnej czcionki (zobacz <a class="link" href="#skin-dlabel">dlabel</a>
oraz <a class="link" href="#skin-slabel">slabel</a>). Można zdefiniować do 25
czcionek.
    </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-slabel"></a>slabel = X, Y, id_czcionki, "tekst"
  </code></span></dt><dd><p>
Umieszcza statyczną etykietę w pozycji <code class="literal">X,Y</code>.
<code class="literal">tekst</code> jest wyświetlany za pomocą czcionki wskazywanych przez
<code class="literal">id_czcionki</code>. Tekst jest po prostu zwykłym łańcuchem znaków
(zmienne <code class="literal">$x</code> nie działają), któru musi być umieszczony
pomiędzy podwójnym cudzysłowem (znak " nie może być częścią tekstu).
Etykieta wyświetlana jest za pomocą czcionki, na którą wskazuje
<code class="literal">id_czcionki</code>.
    </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-dlabel"></a>dlabel = X, Y, długość, wyrównanie, id_czcionki, "tekst"
  </code></span></dt><dd><p>
Umieszcza dynamiczną etykietę w pozycji <code class="literal">X,Y</code>. Etykieta jest
nazywana dynamiczną, ponieważ jej tekst jest cyklicznie odświeżany. Maksymalną
długość etykiety określa parametr <code class="literal">długość</code> (jej wysokość
określa wysokość czcionki). Jeśli tekst jest szerszy niż zdefiniowana długość,
będzie on przewijany, w przeciwnym wypadku będzie wyrównany w miejscu określonym
przez wartość parametru <code class="literal">wyrównanie</code>: <code class="literal">0</code>
oznacza do prawej, <code class="literal">1</code> to wyśrodkowanie, <code class="literal">2</code>
to wyrównanie do lewej.
</p><p>
Wyświetlany tekst jest określony przez zmienną <code class="literal">tekst</code>: musi
być zawarty pomiędzy podwójnymi cudzysłowami (znak " nie może być częścią
tekstu). Etykieta wyświetlana jest za pomocą czcionki, na którą wskazuje
parametr <code class="literal">id_czcionki</code>. Możesz użyć następujących zmiennych w
tekście:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Zmienna</th><th>Znaczenie</th></tr></thead><tbody><tr><td>$1</td><td>czas odtwarzania w formacie <span class="emphasis"><em>hh:mm:ss</em></span></td></tr><tr><td>$2</td><td>czas odtwarzania w formacie <span class="emphasis"><em>mmmm:ss</em></span></td></tr><tr><td>$3</td><td>czas odtwarzania w formacie (godziny) <span class="emphasis"><em>hh</em></span></td></tr><tr><td>$4</td><td>czas odtwarzania w formacie (minuty) <span class="emphasis"><em>mm</em></span></td></tr><tr><td>$5</td><td>czas odtwarzania w formacie (sekundy) <span class="emphasis"><em>ss</em></span></td></tr><tr><td>$6</td><td>długość filmu w formacie <span class="emphasis"><em>hh:mm:ss</em></span></td></tr><tr><td>$7</td><td>długość filmu w formacie <span class="emphasis"><em>mmmm:ss</em></span></td></tr><tr><td>$8</td><td>długość filmu w formacie<span class="emphasis"><em>h:mm:ss</em></span></td></tr><tr><td>$v</td><td>format głośności w %<span class="emphasis"><em>xxx.xx</em></span></td></tr><tr><td>$V</td><td>format głośności <span class="emphasis"><em>xxx.xx</em></span> format</td></tr><tr><td>$b</td><td>format balansu w %<span class="emphasis"><em>xxx.xx</em></span></td></tr><tr><td>$B</td><td>format balansu <span class="emphasis"><em>xxx.xx</em></span></td></tr><tr><td>$$</td><td>znak $</td></tr><tr><td>$a</td><td>oznaczenie zgodne z rodzajem typu pliku audio (nic: <code class="literal">n</code>,
mono: <code class="literal">m</code>, stereo: <code class="literal">t</code>)</td></tr><tr><td>$t</td><td>numer ścieżki (na liście odtwarzania)</td></tr><tr><td>$o</td><td>nazwa pliku</td></tr><tr><td>$f</td><td>nazwa pliku pisana małymi literami</td></tr><tr><td>$F</td><td>nazwa pliku pisana wielkimi literami</td></tr><tr><td>$T</td><td>oznaczenie zgodne z rodzajem strumienia (plik: <code class="literal">f</code>,
Video CD: <code class="literal">v</code>, DVD: <code class="literal">d</code>, URL: <code class="literal">u</code>)</td></tr><tr><td>$p</td><td>znak <span class="keycap"><b>p</b></span> (gdy film jest odtwarzany i czcionka ma znak <span class="keycap"><b>p</b></span>)</td></tr><tr><td>$s</td><td>znak <span class="keycap"><b>s</b></span> (gdy film jest zatrzymany i czcionka ma znak <span class="keycap"><b>s</b></span>)</td></tr><tr><td>$e</td><td>znak <span class="keycap"><b>e</b></span> (gdy film jest wstrzymany (pauza) i czcionka ma znak <span class="keycap"><b>e</b></span>)
</td></tr><tr><td>$x</td><td>rozdzielczość filmu (szerokość)</td></tr><tr><td>$y</td><td>rozdzielczość filmu (wysokość)</td></tr><tr><td>$C</td><td>nazwa używanego kodeka</td></tr></tbody></table></div></dd></dl></div><div class="note" title="Notatka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Notatka</h3><p>
Zmienne <code class="literal">$a, $T, $p, $s</code> oraz <code class="literal">$e</code>
zwracają znaki, które powinny być wyświetlane jako znaki specjalne (na przykład
<span class="keycap"><b>e</b></span> jest symbolem pauzy, która z reguły wygląda mniej więcej tak
||). Powinieneś mieć czcionkę dla zwykłych znaków oraz osobną czcionkę dla symboli.
Zobacz sekcję na temat <a class="link" href="#skin-fonts-symbols" title="B.3.1. Znaki specjalne (symbole)">symboli</a>,
by dowiedzieć się więcej.
</p></div></div><div class="sect2" title="B.2.2. Okno ekranu"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-subwindow"></a>B.2.2. Okno ekranu</h3></div></div></div><p>
Poniższe wpisy mogą być użyte w bloku
'<code class="literal">window = sub</code>' . . . '<code class="literal">end</code>' .
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">
  <a name="skin-sub-base"></a>base = obrazek, X, Y, szerokość, wysokość
  </code></span></dt><dd><p>
Wyświetla obrazek w oknie. Okno będzie widoczne na ekranie w miejscu oznaczonym
przez współrzędne <code class="literal">X</code>, <code class="literal">Y</code>
(<code class="literal">0,0</code> to lewy górny narożnik). Możesz użyć
<code class="literal">-1</code> dla środka, <code class="literal">-2</code> dla prawej strony
(<code class="literal">X</code>) i dołu (<code class="literal">Y</code>). Okno będzie mieć wielkość
obrazka. <code class="literal">szerokość</code> oraz <code class="literal">wysokość</code> oznaczają
wielkość okna; są one opcjonalne (jeśli nie są określone, okno będzie wielkości
takiej, jak obrazek).</p></dd><dt><span class="term"><code class="literal">
  <a name="skin-background"></a>background = R, G, B
  </code></span></dt><dd><p>
  Pozwala ustawić kolor tła. Jest to użyteczne jeśli obrazek jest mniejszy niż
  okno. <code class="literal">R</code>, <code class="literal">G</code> oraz <code class="literal">B</code>
  określają składniki kolorów czerwonego, zielonego i niebieskiego (każdy z nich
  jest reprezentowany przez liczbę dziesiętną w zakresie od 0 do
  255).</p></dd></dl></div></div><div class="sect2" title="B.2.3. Menu skórki"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-menu"></a>B.2.3. Menu skórki</h3></div></div></div><p>
Jak wspomniano wcześniej, menu jest wyświetlane przy użyciu dwóch obrazków.
Zwykłe obszary menu są pobierane z obrazka określonego przez element
<code class="literal">base</code>, podczas gdy obszary zaznaczone są pobierane z obrazka
wskazywanego przez element <code class="literal">selected</code>. Musisz zdefiniować
pozycję i rozmiar każdego obszaru menu poprzez element menu.
</p><p>
Poniższe wpisy mogą być użyte w bloku:
'<code class="literal">window = menu</code>'. . .'<code class="literal">end</code>' .
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">
  <a name="skin-menu-base"></a>base = obrazek
  </code></span></dt><dd><p>
Obrazek dla zwykłych obszarów menu.
    </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-selected"></a>selected = obrazek
  </code></span></dt><dd><p>
Obrazek pokazujący w menu wszystkie zaznaczone obszary.
    </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-menu"></a>menu = X, Y, szerokość, wysokość, sygnał
  </code></span></dt><dd><p>
Definiuje pozycję i rozmiar obszarów menu na obrazku przy pomocy
<code class="literal">X,Y</code>. <code class="literal">sygnał</code> to zdarzenie wygenerowane
podczas zwolnienia przycisku myszy nad obszarem.
    </p></dd></dl></div></div></div><div class="sect1" title="B.3. Czcionki"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-fonts"></a>B.3. Czcionki</h2></div></div></div><p>
Jak wspomniano w sekcji na temat fragmentów skórki, czcionka jest definiowana
przez obrazek i plik opisujący. Możesz umieścić znaki gdziekolwiek na obrazku,
ale miej pewność, żeich pozycja i rozmiar jest dokładnie podana w pliku
opisującym.
</p><p>
Plik opisujący czcionkę (o rozszerzeniu <tt class="filename">.fnt</tt>) może posiadać
linie komentarzy zaczynające się znakiem '<code class="literal">;</code>'. Plik musi
zawierać linie w postaci:
<a name="skin-font-image"></a>
</p><pre class="programlisting">image = <em class="replaceable"><code>obrazek</code></em></pre><p>
Gdzie <code class="literal"><em class="replaceable"><code>obrazek</code></em></code> jest nazwą pliku
graficznego, który zawiera czcionkę (nie musisz dopisywać jego rozszerzenia).
<a name="skin-font-char"></a>
</p><pre class="programlisting">"char" = X, Y, szerokość, wysokość</pre><p>
<code class="literal">X</code> oraz <code class="literal">Y</code> określają pozycję znaku
<code class="literal">char</code> na obrazku (<code class="literal">0,0</code> to górny lewy narożnik).
<code class="literal">szerokość</code> i <code class="literal">wysokość</code> to rozmiar znaku
w pikselach.
</p><p>
Przykład: definiujemy znaki A, B, C przy użyciu pliku <tt class="filename">font.png</tt>.
</p><pre class="programlisting">
; Może być "font" zamiast "font.png".
image = font.png

; Trzy znaki wystarczą do tej demonstracji :-)
"A" =  0,0, 7,13
"B" =  7,0, 7,13
"C" = 14,0, 7,13
</pre><p>
</p><div class="sect2" title="B.3.1. Znaki specjalne (symbole)"><div class="titlepage"><div><div><h3 class="title"><a name="skin-fonts-symbols"></a>B.3.1. Znaki specjalne (symbole)</h3></div></div></div><p>
Niektóre znaki mają specjalne znaczenie, gdy są zwracane przez pewne zmienne
używane w <a class="link" href="#skin-dlabel">dlabel</a>. Znaki te mogą być
wyświetlane jako symbole w ten sposób, że np. podczas odtwarzania strumienia DVD
widoczne jest ładne logo zamiast znaku '<code class="literal">d</code>'.
</p><p>
Poniższa tablica zawiera znaki używane do wyświetlania symboli (wymagają one
oddzielnych czcionek).
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Znak</th><th>Symbol</th></tr></thead><tbody><tr><td><span class="keycap"><b>p</b></span></td><td>odtwarzanie</td></tr><tr><td><span class="keycap"><b>s</b></span></td><td>stop</td></tr><tr><td><span class="keycap"><b>e</b></span></td><td>pauza</td></tr><tr><td><span class="keycap"><b>n</b></span></td><td>bez dźwięku</td></tr><tr><td><span class="keycap"><b>m</b></span></td><td>dźwięk mono</td></tr><tr><td><span class="keycap"><b>t</b></span></td><td>dźwięk stereo</td></tr><tr><td><span class="keycap"><b>f</b></span></td><td>strumień z pliku</td></tr><tr><td><span class="keycap"><b>v</b></span></td><td>strumień z Video CD</td></tr><tr><td><span class="keycap"><b>d</b></span></td><td>strumień z DVD</td></tr><tr><td><span class="keycap"><b>u</b></span></td><td>strumień z URL</td></tr></tbody></table></div></div></div><div class="sect1" title="B.4. Sygnały GUI"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-gui"></a>B.4. Sygnały GUI</h2></div></div></div><p>
Tutaj znajdują się sygnały, które mogą być generowane przez przyciski, suwaki
i elementy menu.
</p><div class="variablelist" title="Kontrola odtwarzania :"><p class="title"><b>Kontrola odtwarzania :</b></p><dl><dt><span class="term"><span class="bold"><strong>evNext</strong></span></span></dt><dd><p>
Przejdź do następnej pozycji na liście odtwarzania.
    </p></dd><dt><span class="term"><span class="bold"><strong>evPause</strong></span></span></dt><dd><p>
  Tworzy przełącznik razem z <code class="literal">evPlaySwitchToPause</code>.
  Mogą być użyte do utworzenia wspólnego przycisku odtwarzania/pauzy.
  Oba sygnały powinny być powiązane z przyciskami wyświetlonymi na tej samej
  pozycji w oknie. Sygnał ten wstrzymuje odtwarzanie i wyświetla  obrazek dla
  przycisku <code class="literal">evPlaySwitchToPause</code> (aby zaznaczyć,
  że przycisk ten może być użyty do kontynuowania odtwarzania).
    </p></dd><dt><span class="term"><span class="bold"><strong>evPlay</strong></span></span></dt><dd><p>
Rozpocznij odtwarzanie.
    </p></dd><dt><span class="term"><span class="bold"><strong>evPlaySwitchToPause</strong></span></span></dt><dd><p>
Przeciwieństwo <code class="literal">evPauseSwitchToPlay</code>. Ten sygnał zaczyna
odtwarzanie oraz wyświetla obrazek dla przycisku
<code class="literal">evPauseSwitchToPlay</code> (aby zaznaczyć, że przycisk ten może być
użyty ponownie do wstrzymania odtwarzania).
    </p></dd><dt><span class="term"><span class="bold"><strong>evPrev</strong></span></span></dt><dd><p>
Przejdź do poprzedniej pozycji na liście odtwarzania.
    </p></dd><dt><span class="term"><span class="bold"><strong>evStop</strong></span></span></dt><dd><p>
Zatrzymaj odtwarzanie.
    </p></dd></dl></div><div class="variablelist" title="Przewijanie:"><p class="title"><b>Przewijanie:</b></p><dl><dt><span class="term"><span class="bold"><strong>evBackward10sec</strong></span></span></dt><dd><p>
Przewiń do tyłu o 10 sekund.
    </p></dd><dt><span class="term"><span class="bold"><strong>evBackward1min</strong></span></span></dt><dd><p>
Przewiń do tyłu o 1 minutę.
    </p></dd><dt><span class="term"><span class="bold"><strong>evBackward10min</strong></span></span></dt><dd><p>
Przewiń do tyłu o 10 minut.
    </p></dd><dt><span class="term"><span class="bold"><strong>evForward10sec</strong></span></span></dt><dd><p>
Przewiń do przodu o 10 sekund.
    </p></dd><dt><span class="term"><span class="bold"><strong>evForward1min</strong></span></span></dt><dd><p>
Przewiń do przodu o 1 minutę.
    </p></dd><dt><span class="term"><span class="bold"><strong>evForward10min</strong></span></span></dt><dd><p>
Przewiń do przodu o 10 minut..
    </p></dd><dt><span class="term"><span class="bold"><strong>evSetMoviePosition</strong></span></span></dt><dd><p>
Przewiń do pozycji (może być wykorzystane przez suwak;
użyte są względne wartości (0-100%) suwaka).
    </p></dd></dl></div><div class="variablelist" title="Kontrola video:"><p class="title"><b>Kontrola video:</b></p><dl><dt><span class="term"><span class="bold"><strong>evHalfSize</strong></span></span></dt><dd><p>
Ustawia okno filmu na połowę rozmiaru.
    </p></dd><dt><span class="term"><span class="bold"><strong>evDoubleSize</strong></span></span></dt><dd><p>
Ustaw podwójny rozmiar okna z filmem.
    </p></dd><dt><span class="term"><span class="bold"><strong>evFullScreen</strong></span></span></dt><dd><p>
Włącz/wyłącz tryb pełnoekranowy.
    </p></dd><dt><span class="term"><span class="bold"><strong>evNormalSize</strong></span></span></dt><dd><p>
Ustaw typowy rozmiar okna z filmem.
    </p></dd></dl></div><div class="variablelist" title="Kontrola dźwięku:"><p class="title"><b>Kontrola dźwięku:</b></p><dl><dt><span class="term"><span class="bold"><strong>evDecAudioBufDelay</strong></span></span></dt><dd><p>
Zmniejsz opóźnienie bufora dźwięku.
    </p></dd><dt><span class="term"><span class="bold"><strong>evDecBalance</strong></span></span></dt><dd><p>
Zmniejsz balans.
    </p></dd><dt><span class="term"><span class="bold"><strong>evDecVolume</strong></span></span></dt><dd><p>
Zmniejsz głośność
    </p></dd><dt><span class="term"><span class="bold"><strong>evIncAudioBufDelay</strong></span></span></dt><dd><p>
Zwiększ opóźnienie bufora dźwięku.
    </p></dd><dt><span class="term"><span class="bold"><strong>evIncBalance</strong></span></span></dt><dd><p>
Zwiększ balans.
    </p></dd><dt><span class="term"><span class="bold"><strong>evIncVolume</strong></span></span></dt><dd><p>
Zwiększ głośność.
    </p></dd><dt><span class="term"><span class="bold"><strong>evMute</strong></span></span></dt><dd><p>
Wycisz/przywróć dźwięk.
    </p></dd><dt><span class="term"><span class="bold"><strong>evSetBalance</strong></span></span></dt><dd><p>
Ustawi balans (może być używane przez suwak;
używana jest wartość względna (0-100%)).
    </p></dd><dt><span class="term"><span class="bold"><strong>evSetVolume</strong></span></span></dt><dd><p>
Ustaw głośność (może być używane przez suwak;
używana jest wartość względna (0-100%)).
    </p></dd></dl></div><div class="variablelist" title="Różne:"><p class="title"><b>Różne:</b></p><dl><dt><span class="term"><span class="bold"><strong>evAbout</strong></span></span></dt><dd><p>
Otwórz okno "o programie".
    </p></dd><dt><span class="term"><span class="bold"><strong>evDropSubtitle</strong></span></span></dt><dd><p>
Wyłącz aktualnie używane napisy.
    </p></dd><dt><span class="term"><span class="bold"><strong>evEqualizer</strong></span></span></dt><dd><p>
Włącz/wyłącz korektor.
    </p></dd><dt><span class="term"><span class="bold"><strong>evExit</strong></span></span></dt><dd><p>
Wyłącz program.
    </p></dd><dt><span class="term"><span class="bold"><strong>evIconify</strong></span></span></dt><dd><p>
Minimalizuj okno.
    </p></dd><dt><span class="term"><span class="bold"><strong>evLoad</strong></span></span></dt><dd><p>
Wczytaj plik (poprzez otwarcie okna przeglądarki plików, gdzie możesz wybrać
plik).
    </p></dd><dt><span class="term"><span class="bold"><strong>evLoadPlay</strong></span></span></dt><dd><p>
Tto samo co <code class="literal">evLoad</code>, ale zacznij automatycznie odtwarzać
zaraz po wyborze pliku.
    </p></dd><dt><span class="term"><span class="bold"><strong>evLoadSubtitle</strong></span></span></dt><dd><p>
Wczytaj plik z napisami (z przeglądarki plików).
    </p></dd><dt><span class="term"><span class="bold"><strong>evLoadAudioFile</strong></span></span></dt><dd><p>
Wczytaj plik dźwiękowy (z przeglądarki plików).
    </p></dd><dt><span class="term"><span class="bold"><strong>evNone</strong></span></span></dt><dd><p>
Sygnał pusty - nic nie robi (może za wyjątkiem wersji z Subversion:-)).
    </p></dd><dt><span class="term"><span class="bold"><strong>evPlaylist</strong></span></span></dt><dd><p>
Otwórz/zamknij okno listy odtwarzania.
    </p></dd><dt><span class="term"><span class="bold"><strong>evPlayDVD</strong></span></span></dt><dd><p>
Spróbuj odczytać płytę ze wskazanego czytnika DVD.
    </p></dd><dt><span class="term"><span class="bold"><strong>evPlayVCD</strong></span></span></dt><dd><p>
Spróbuj odczytać płytę ze wskazanego czytnika CD.
    </p></dd><dt><span class="term"><span class="bold"><strong>evPreferences</strong></span></span></dt><dd><p>
Otwórz okno z ustawieniami.
    </p></dd><dt><span class="term"><span class="bold"><strong>evSetAspect</strong></span></span></dt><dd><p>
Ustaw proporcje obrazu.
    </p></dd><dt><span class="term"><span class="bold"><strong>evSetURL</strong></span></span></dt><dd><p>
Wyświetl okienko dialogowe URL.
    </p></dd><dt><span class="term"><span class="bold"><strong>evSkinBrowser</strong></span></span></dt><dd><p>
Otwórz okno przeglądarki skórek.
    </p></dd></dl></div></div><div class="sect1" title="B.5. Tworzenie dobrych skórek"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-quality"></a>B.5. Tworzenie dobrych skórek</h2></div></div></div><p>
		Wygląda na to, że przeczytałeś o tworzeniu skórek
		dla GUI <span class="application">MPlayera</span>, dałeś z siebie
		wszystko używając <span class="application">Gimpa</span>
		i chciałbyś umieścić u nas swoją skórkę?
		Zapoznaj się z kilkoma wytycznymi, żeby uniknąć najczęstszych pomyłek
		i stworzyć skórkę wysokiej jakości.
	</p><p>
		Chcemy aby skórki, które dodajemy do naszego repozytorium,
		spełniały określone standardy jakości. Istnieje również kilka rzeczy,
		które możesz zrobić, żeby ułatwić sobie życie.
	</p><p>
		Jako wzorzec możesz wziąć skórkę <code class="systemitem">Blue</code>,
		od wersji 1.5 spełnia one wszystkie wymienione niżej kryteria.
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Do każdej skórki powinien być dołączony plik
				<tt class="filename">README</tt> zawierający informacje
				o tobie, czyli autorze, prawach autorskich i licencji i wszystkie
				inne informacje, które zechcesz dodać. Jeżeli chcesz prowadzić
				listę zmian, ten plik jest na to dobrym miejscem.</p></li><li class="listitem"><p>Należy dodać plik <tt class="filename">VERSION</tt>
				zawierający tylko i wyłącznie wersję skórki zapisaną w jednej linii (np. 1.0)
			</p></li><li class="listitem"><p>Poziome i pionowe kontrolki (suwaki do zmiany głośności
				albo pozycji) powinny mieć gałki prawidłowo wycentrowane na środku
				suwaka. Powinno się dać przesunąć gałkę na oba końce suwaka, ale nie
				poza jego obszar.</p></li><li class="listitem"><p>Elementy skórki powinny mieć prawidłowo zadeklarowane
				rozmiary w pliku skórki. W przeciwnym wypadku możliwe będzie
				kliknięcie poza obszarem np. przycisku i jego naciśnięcia
				lub kliknięcie wewnątrz obszaru przycisku i nie naciśnięcie go.
			</p></li><li class="listitem"><p>Plik <tt class="filename">skin</tt> powinien być
				ładnie sformatowany i nie powinien zawierać tabulacji. Ładnie
				sformatowany, czyli taki w którym numery są ładnie ustawione
				w kolumnach.</p></li></ul></div></div></div></div></body></html>
