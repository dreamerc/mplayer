<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>MPlayer - Multimediální přehrávač</title><link rel="stylesheet" href="default.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="cs" class="book" title="MPlayer - Multimediální přehrávač"><div class="titlepage"><div><div><h1 class="title"><a name="index"></a><span class="application">MPlayer</span> - Multimediální přehrávač</h1></div><div><h2 class="subtitle"><a class="ulink" href="http://www.mplayerhq.hu" target="_top">http://www.mplayerhq.hu</a></h2></div><div><p class="copyright">Copyright © 2000-2010 MPlayer team</p></div><div><div class="legalnotice" title="License"><a name="id2499750"></a><p class="legalnotice-title"><b>License</b></p><p>MPlayer is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by the
  Free Software Foundation; either version 2 of the License, or (at your
  option) any later version.</p><p>MPlayer is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
  for more details.</p><p>You should have received a copy of the GNU General Public License
  along with MPlayer; if not, write to the Free Software Foundation,
  Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</p></div></div></div><hr></div><div class="toc"><dl><dt><span class="preface"><a href="#howtoread">Jak číst tuto  dokumentaci</a></span></dt><dt><span class="chapter"><a href="#intro">1. Představení</a></span></dt><dt><span class="chapter"><a href="#install">2. Instalace</a></span></dt><dd><dl><dt><span class="sect1"><a href="#softreq">2.1. Softwarové požadavky</a></span></dt><dt><span class="sect1"><a href="#features">2.2. Vlastnosti</a></span></dt><dt><span class="sect1"><a href="#gui">2.3. Chtěli byste GUI?</a></span></dt><dt><span class="sect1"><a href="#fonts-osd">2.4. Fonty a OSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#truetype-fonts">2.4.1. TrueType fonty</a></span></dt><dt><span class="sect2"><a href="#bitmap-fonts">2.4.2. bitmapové fonty</a></span></dt><dt><span class="sect2"><a href="#osdmenu">2.4.3. OSD menu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#codec-installation">2.5. Codec installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xvid">2.5.1. Xvid</a></span></dt><dt><span class="sect2"><a href="#x264">2.5.2. <code class="systemitem">x264</code></a></span></dt><dt><span class="sect2"><a href="#aac">2.5.3. Kodek AAC</a></span></dt><dt><span class="sect2"><a href="#amr">2.5.4. AMR kodeky</a></span></dt></dl></dd><dt><span class="sect1"><a href="#rtc">2.6. RTC</a></span></dt></dl></dd><dt><span class="chapter"><a href="#usage">3. Použití</a></span></dt><dd><dl><dt><span class="sect1"><a href="#commandline">3.1. Příkazový řádek</a></span></dt><dt><span class="sect1"><a href="#subosd">3.2. Titulky a OSD</a></span></dt><dt><span class="sect1"><a href="#control">3.3. Ovládání</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ctrl-cfg">3.3.1. Konfigurace ovládání</a></span></dt><dt><span class="sect2"><a href="#lirc">3.3.2. Ovládání z LIRC</a></span></dt><dt><span class="sect2"><a href="#slave-mode">3.3.3. Závislý režim</a></span></dt></dl></dd><dt><span class="sect1"><a href="#streaming">3.4. Přehrávání datových proudů ze sítě nebo rour</a></span></dt><dd><dl><dt><span class="sect2"><a href="#streaming-save">3.4.1. Uložení proudového obsahu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#edl">3.5. Seznamy editačních zásahů (EDL)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#edl_using">3.5.1. Použití EDL souboru</a></span></dt><dt><span class="sect2"><a href="#edl_making">3.5.2. Vytvoření EDL souboru</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio">3.6. Pokročilé audio</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-surround">3.6.1. Surround/Vícekanálové přehrávání</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-surround-DVD">3.6.1.1. DVD</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-stereoinfour">3.6.1.2. Přehrávání stereo souborů do čtyřech reproduktorů</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-passthrough">3.6.1.3. AC–3/DTS Passthrough</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-matrix">3.6.1.4. Maticově enkódovaný zvuk</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-hrtf">3.6.1.5. Surround emulace ve sluchátkách</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-troubleshooting">3.6.1.6. Potíže</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-channels">3.6.2. Manipulace s kanály</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-channels-general">3.6.2.1. Obecné informace</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mono">3.6.2.2. Přehrávání mono na dvou reproduktorech</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-copying">3.6.2.3. Kopírování/přesun kanálů</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mixing">3.6.2.4. Mixování kanálů</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-volume">3.6.3. Softwarové nastavení hlasitosti</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#cd-dvd">4. Použití CD/DVD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#drives">4.1. CD/DVD mechaniky</a></span></dt><dd><dl><dt><span class="sect2"><a href="#drives_linux">4.1.1. Linux</a></span></dt><dt><span class="sect2"><a href="#drives_freebsd">4.1.2. FreeBSD</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dvd">4.2. Přehrávání DVD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#region_code">4.2.1. Kód regionu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#vcd">4.3. Přehrávání VCD</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tv">5. TV</a></span></dt><dd><dl><dt><span class="sect1"><a href="#tv-input">5.1. TV vstup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-compilation">5.1.1. Kompilace</a></span></dt><dt><span class="sect2"><a href="#tv-tips">5.1.2. Tipy pro používání</a></span></dt><dt><span class="sect2"><a href="#tv-examples">5.1.3. Příklady</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#radio">6. Rádio</a></span></dt><dd><dl><dt><span class="sect1"><a href="#radio-input">6.1. Rádio vstup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#radio-compilation">6.1.1. Kompilace</a></span></dt><dt><span class="sect2"><a href="#radio-tips">6.1.2. Uživatelské tipy</a></span></dt><dt><span class="sect2"><a href="#radio-examples">6.1.3. Příklady</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#video">7. Výstupní video zařízení/rozhraní</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mtrr">7.1. Nastavení MTRR</a></span></dt><dt><span class="sect1"><a href="#xv">7.2. Xv</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tdfx">7.2.1. Karty 3dfx</a></span></dt><dt><span class="sect2"><a href="#s3">7.2.2. Karty S3</a></span></dt><dt><span class="sect2"><a href="#nvidia">7.2.3. Karty nVidia</a></span></dt><dt><span class="sect2"><a href="#ati">7.2.4. Karty ATI</a></span></dt><dt><span class="sect2"><a href="#neomagic">7.2.5. Karty NeoMagic</a></span></dt><dt><span class="sect2"><a href="#trident">7.2.6. Karty Trident</a></span></dt><dt><span class="sect2"><a href="#kyro">7.2.7. Karty Kyro/PowerVR</a></span></dt><dt><span class="sect2"><a href="#intel">7.2.8. Karty Intel</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dga">7.3. DGA</a></span></dt><dt><span class="sect1"><a href="#sdl">7.4. SDL</a></span></dt><dt><span class="sect1"><a href="#svgalib">7.5. SVGAlib</a></span></dt><dt><span class="sect1"><a href="#fbdev">7.6. Výstup na Framebuffer (FBdev)</a></span></dt><dt><span class="sect1"><a href="#mga_vid">7.7. Matrox framebuffer (mga_vid)</a></span></dt><dt><span class="sect1"><a href="#tdfxfb">7.8. Podpora 3Dfx YUV</a></span></dt><dt><span class="sect1"><a href="#tdfx_vid">7.9. tdfx_vid</a></span></dt><dt><span class="sect1"><a href="#opengl">7.10. Rozhraní OpenGL</a></span></dt><dt><span class="sect1"><a href="#aalib">7.11. AAlib – zobrazování v textovém režimu</a></span></dt><dt><span class="sect1"><a href="#caca">7.12. 
<code class="systemitem">libcaca</code> – Barevná ASCII Art knihovna
</a></span></dt><dt><span class="sect1"><a href="#vesa">7.13. VESA - výstup do VESA BIOSu</a></span></dt><dt><span class="sect1"><a href="#x11">7.14. X11</a></span></dt><dt><span class="sect1"><a href="#vidix">7.15. VIDIX</a></span></dt><dd><dl><dt><span class="sect2"><a href="#vidix-ati">7.15.1. Karty ATI</a></span></dt><dt><span class="sect2"><a href="#vidix-mga">7.15.2. Karty Matrox</a></span></dt><dt><span class="sect2"><a href="#vidix-trident">7.15.3. Karty Trident</a></span></dt><dt><span class="sect2"><a href="#vidix-3dlabs">7.15.4. Karty 3DLabs</a></span></dt><dt><span class="sect2"><a href="#vidix-nvidia">7.15.5. Karty nVidia</a></span></dt><dt><span class="sect2"><a href="#vidix-sis">7.15.6. Karty SiS</a></span></dt></dl></dd><dt><span class="sect1"><a href="#directfb">7.16. DirectFB</a></span></dt><dt><span class="sect1"><a href="#dfbmga">7.17. DirectFB/Matrox (dfbmga)</a></span></dt><dt><span class="sect1"><a href="#mpeg_decoders">7.18. MPEG dekodéry</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dvb">7.18.1. DVB výstup a vstup</a></span></dt><dt><span class="sect2"><a href="#dxr2">7.18.2. DXR2</a></span></dt><dt><span class="sect2"><a href="#dxr3">7.18.3. DXR3/Hollywood+</a></span></dt></dl></dd><dt><span class="sect1"><a href="#other">7.19. Ostatní vizualizační hardware</a></span></dt><dd><dl><dt><span class="sect2"><a href="#zr">7.19.1. Zr</a></span></dt><dt><span class="sect2"><a href="#blinkenlights">7.19.2. Blinkenlights</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tvout">7.20. Podpora TV výstupu</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tvout-mga-g400">7.20.1. Karty Matrox G400</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_g450">7.20.2. Karty Matrox G450/G550</a></span></dt><dt><span class="sect2"><a href="#tvout-ati">7.20.3. Karty ATI</a></span></dt><dt><span class="sect2"><a href="#tvout-nvidia">7.20.4. nVidia</a></span></dt><dt><span class="sect2"><a href="#tvout-neomagic">7.20.5. NeoMagic</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ports">8. Porty</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linux">8.1. Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#debian">8.1.1. Vytvoření balíčku pro Debian</a></span></dt><dt><span class="sect2"><a href="#rpm">8.1.2. Balení RPM</a></span></dt><dt><span class="sect2"><a href="#arm">8.1.3. ARM</a></span></dt></dl></dd><dt><span class="sect1"><a href="#bsd">8.2. *BSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#freebsd">8.2.1. FreeBSD</a></span></dt><dt><span class="sect2"><a href="#openbsd">8.2.2. OpenBSD</a></span></dt><dt><span class="sect2"><a href="#darwin">8.2.3. Darwin</a></span></dt></dl></dd><dt><span class="sect1"><a href="#unix">8.3. Komerční Unix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#solaris">8.3.1. Solaris</a></span></dt><dt><span class="sect2"><a href="#hp-ux">8.3.2. HP-UX</a></span></dt><dt><span class="sect2"><a href="#aix">8.3.3. AIX</a></span></dt><dt><span class="sect2"><a href="#qnx">8.3.4. QNX</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows">8.4. Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwin">8.4.1. <span class="application">Cygwin</span></a></span></dt><dt><span class="sect2"><a href="#mingw">8.4.2. <span class="application">MinGW</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="#macos">8.5. Mac OS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#osx_gui">8.5.1. MPlayer OS X GUI</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#mencoder">9. Základní použití <span class="application">MEncoder</span>u</a></span></dt><dd><dl><dt><span class="sect1"><a href="#menc-feat-selecting-codec">9.1. Výběr kodeků a nosných formátů</a></span></dt><dt><span class="sect1"><a href="#menc-feat-selecting-input">9.2. Výběr vstupního souboru nebo zařízení</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg4">9.3. Dvouprůchodové enkódování MPEG-4 ("DivX")</a></span></dt><dt><span class="sect1"><a href="#menc-feat-handheld-psp">9.4. Enkódovánído video formátu Sony PSP</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg">9.5. Enkódování do MPEG formátu</a></span></dt><dt><span class="sect1"><a href="#menc-feat-rescale">9.6. Škálování (změna velikosti) filmů</a></span></dt><dt><span class="sect1"><a href="#menc-feat-streamcopy">9.7. Proudové kopírování</a></span></dt><dt><span class="sect1"><a href="#menc-feat-enc-images">9.8. Enkódování z množství vstupních obrázkových souborů (JPEG, PNG, TGA, atd.)</a></span></dt><dt><span class="sect1"><a href="#menc-feat-extractsub">9.9. Extrakce DVD titulků do VOBsub souboru</a></span></dt><dt><span class="sect1"><a href="#aspect">9.10. Zachování poměru stran</a></span></dt></dl></dd><dt><span class="chapter"><a href="#encoding-guide">10. Enkódování s <span class="application">MEncoder</span>em</a></span></dt><dd><dl><dt><span class="sect1"><a href="#menc-feat-dvd-mpeg4">10.1. Vytvoření MPEG-4 ("DivX")
ripu DVD filmu ve vysoké kvalitě</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-preparing-encode">10.1.1. Příprava na enkódování: Určení zdrojového materiálu a datového toku</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-fps">10.1.1.1. Zjištění snímkové rychlosti zdroje</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-material">10.1.1.2. Určení zdrojového materiálu</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-2pass">10.1.2. Pevný kvantizer vs. více průchodů</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-constraints">10.1.3. Omezení pro efektivní enkódování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-crop">10.1.4. Ořezávání a škálování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate">10.1.5. Volba rozlišení a datového toku</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate-compute">10.1.5.1. Výpočet rozlišení</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-filtering">10.1.6. Filtrování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-interlacing">10.1.7. Prokládání a Telecine</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-encoding-interlaced">10.1.8. Enkódování prokládaného videa</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-av-sync">10.1.9. Poznámky k Audio/Video synchronizaci</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-codec">10.1.10. Výběr video kodeku</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-audio">10.1.11. Zvuk</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-muxing">10.1.12. Muxování (multiplexování)</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-filter-issues">10.1.12.1. Zlepšování spolehlivosti muxování a A/V synchronizace</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-avi-limitations">10.1.12.2. Limitace nosného formátu AVI</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-matroska">10.1.12.3. Muxování do nosného formátu Matroska</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#menc-feat-telecine">10.2. Jak naložit s telecine a prokladem v NTSC DVD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-telecine-intro">10.2.1. Představení</a></span></dt><dt><span class="sect2"><a href="#menc-feat-telecine-ident">10.2.2. Jak zjistit o jaký typ videa se jedná</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-ident-progressive">10.2.2.1. Progresivní (neprokládané)</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-telecined">10.2.2.2. Telecinováno (přepsáno pro NTSC televizi)</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-interlaced">10.2.2.3. Prokládané</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpt">10.2.2.4. Smíšené progresivní a telecinované</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpi">10.2.2.5. Smíšené progresivní a prokládané</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-encode">10.2.3. Jak enkódovat jednotlivé kategorie</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-encode-progressive">10.2.3.1. Progresivní</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-telecined">10.2.3.2. Telecinované</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-interlaced">10.2.3.3. Prokládané</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpt">10.2.3.4. Smíšené progresivní a telecinované</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpi">10.2.3.5. Smíšené progresivní a prokládané</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-footnotes">10.2.4. Poznámky pod čarou</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-enc-libavcodec">10.3. Enkódování s rodinou kodeků <code class="systemitem">libavcodec</code>
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-video-codecs">10.3.1. Video kodeky
<code class="systemitem">libavcodec</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-audio-codecs">10.3.2. Audio kodeky
<code class="systemitem">libavcodec</code></a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-enc-libavcodec-audio-codecs-pcmadpcm">10.3.2.1. Pomocná tabulka pro PCM/ADPCM formát</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-lavc-encoding-options">10.3.3. Enkódovací volby libavcodecu</a></span></dt><dt><span class="sect2"><a href="#menc-feat-mpeg4-lavc-example-settings">10.3.4. Příklady nastavení enkódování</a></span></dt><dt><span class="sect2"><a href="#custommatrices">10.3.5. Uživatelské inter/intra matice</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-example">10.3.6. Příklad</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-xvid">10.4. Enkódování pomocí kodeku <code class="systemitem">Xvid</code>
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-xvid-intro">10.4.1. Jaké volby by měly být použity, abychom dosáhli nejlepších výsledků?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-options">10.4.2. Volby pro enkódování s <code class="systemitem">Xvid</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-profiles">10.4.3. Enkódovací profily</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-example-settings">10.4.4. Příklady nastavení enkódování</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-x264">10.5. Enkódování
  <code class="systemitem">x264</code> kodekem</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-x264-encoding-options">10.5.1. Enkódovací volby x264</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-intro">10.5.1.1. Úvodem</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-speedvquality">10.5.1.2. Volby které primárně ovlivňují rychlost a kvalitu</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-misc-preferences">10.5.1.3. Volby náležející různým preferencím</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-x264-example-settings">10.5.2. Příklady nastavení enkódování</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-video-for-windows">10.6. 
  Enkódování rodinou kodeků
  <code class="systemitem">Video For Windows</code>
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-vfw-video-codecs">10.6.1. Podporované kodeky Video for Windows</a></span></dt><dt><span class="sect2"><a href="#menc-feat-video-for-windows-bitrate-settings">10.6.2. Použití vfw2menc pro vytvoření souboru s nastavením kodeku.</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-quicktime-7">10.7. Použití <span class="application">MEncoder</span>u pro vytvoření
<span class="application">QuickTime</span>-kompatibilních souborů</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-quicktime-7-why-use-it">10.7.1. Proč by někdo chtěl vytvářet
<span class="application">QuickTime</span>-kompatibilní soubory?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-constraints">10.7.2. <span class="application">QuickTime</span> 7 omezení</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-crop">10.7.3. Ořez</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-scale">10.7.4. Škálování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-avsync">10.7.5. A/V synchronizace</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-bitrate">10.7.6. Datový tok</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-example">10.7.7. Příklad enkódování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-remux">10.7.8. Přemuxování do MP4</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-metadata">10.7.9. Přidání stop s meta daty</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-vcd-dvd">10.8. Použití <span class="application">MEncoder</span>u
  k vytváření VCD/SVCD/DVD-kompatibilních souborů.</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-constraints">10.8.1. Omezení Formátů</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-resolution">10.8.1.1. Omezení Formátů</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-gop">10.8.1.2. Omezení velikosti GOP</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-bitrate">10.8.1.3. Omezení datového toku</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-output">10.8.2. Výstupní volby</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-aspect">10.8.2.1. Poměr stran</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-a-v-sync">10.8.2.2. Zachování A/V synchronizace</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-srate">10.8.2.3. Převod vzorkovacího kmitočtu</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-lavc">10.8.3. Použití libavcodec pro enkódování VCD/SVCD/DVD</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-intro">10.8.3.1. Úvodem</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-options">10.8.3.2. lavcopts</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-examples">10.8.3.3. Příklady</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-advanced">10.8.3.4. Pokročilé volby</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-audio">10.8.4. Enkódování zvuku</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-toolame">10.8.4.1. toolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-twolame">10.8.4.2. twolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-lavc">10.8.4.3. libavcodec</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-all">10.8.5. Spojení všeho dohromady</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-dvd">10.8.5.1. PAL DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-dvd">10.8.5.2. NTSC DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-ac3-copy">10.8.5.3. PAL AVI obsahující AC–3 zvuk do DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-ac3-copy">10.8.5.4. NTSC AVI obsahující AC–3 zvuk do DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-svcd">10.8.5.5. PAL SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-svcd">10.8.5.6. NTSC SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-vcd">10.8.5.7. PAL VCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-vcd">10.8.5.8. NTSC VCD</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#faq">11. Často Kladené Dotazy (FAQ)</a></span></dt><dt><span class="appendix"><a href="#bugreports">A. Jak hlásit chyby</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bugreports_security">A.1. Hlášení bezpečnostních chyb</a></span></dt><dt><span class="sect1"><a href="#bugreports_fix">A.2. Jak napravovat chyby</a></span></dt><dt><span class="sect1"><a href="#bugreports_regression_test">A.3. Jak provádět regresní testování pomocí Subversion</a></span></dt><dt><span class="sect1"><a href="#bugreports_report">A.4. Jak oznamovat chyby</a></span></dt><dt><span class="sect1"><a href="#bugreports_where">A.5. Kam hlásit chyby</a></span></dt><dt><span class="sect1"><a href="#bugreports_what">A.6. Co nahlásit</a></span></dt><dd><dl><dt><span class="sect2"><a href="#bugreports_system">A.6.1. Systémové informace</a></span></dt><dt><span class="sect2"><a href="#bugreports_hardware">A.6.2. Hardware a rozhraní (ovladače)</a></span></dt><dt><span class="sect2"><a href="#bugreports_configure">A.6.3. Problémy s konfigurací</a></span></dt><dt><span class="sect2"><a href="#bugreports_compilation">A.6.4. Problémy s kompilací</a></span></dt><dt><span class="sect2"><a href="#bugreports_playback">A.6.5. Problémy s přehráváním</a></span></dt><dt><span class="sect2"><a href="#bugreports_crash">A.6.6. Pády</a></span></dt><dd><dl><dt><span class="sect3"><a href="#bugreports_debug">A.6.6.1. Jak uchovat informace o zopakovatelném pádu</a></span></dt><dt><span class="sect3"><a href="#bugreports_core">A.6.6.2. Jak získat smysluplné informace z core dump</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#bugreports_advusers">A.7. Vím co dělám...</a></span></dt></dl></dd><dt><span class="appendix"><a href="#skin">B. Formát skinů <span class="application">MPlayer</span>u</a></span></dt><dd><dl><dt><span class="sect1"><a href="#skin-overview">B.1. Přehled</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-overview-directories">B.1.1. Adresáře</a></span></dt><dt><span class="sect2"><a href="#skin-overview-formats">B.1.2. Formáty obrázků</a></span></dt><dt><span class="sect2"><a href="#skin-overview-components">B.1.3. Součásti skinu</a></span></dt><dt><span class="sect2"><a href="#skin-files">B.1.4. Soubory</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-file">B.2. Soubor skin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-file-main">B.2.1. Hlavní okno a ovládací panel</a></span></dt><dt><span class="sect2"><a href="#skin-file-subwindow">B.2.2. Ovládací panel</a></span></dt><dt><span class="sect2"><a href="#skin-file-menu">B.2.3. Nabídka</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-fonts">B.3. Fonty</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-fonts-symbols">B.3.1. Symboly</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-gui">B.4. GUI zprávy</a></span></dt><dt><span class="sect1"><a href="#skin-quality">B.5. Tvorba kvalitních skinů</a></span></dt></dl></dd></dl></div><div class="preface" title="Jak číst tuto dokumentaci"><div class="titlepage"><div><div><h2 class="title"><a name="howtoread"></a>Jak číst tuto  dokumentaci</h2></div></div></div><p>
Pokud instalujete poprvé: měli byste si přečíst celou dokumentaci odtud až
do konce kapitoly Instalace a následovat linky, které naleznete.
Pokud máte jiné dotazy, vraťte se zpět na  <a class="link" href="#toc">Obsah</a>
a vyhledejte si příslušnou část. Přečtěte si <a class="xref" href="#faq" title="Kapitola 11. Často Kladené Dotazy (FAQ)">FAQ</a>,
nebo zkuste grep na souborech. Odpovědi na většinu otázek by měly být někde tady,
zbytek byl pravděpodobně probrán v některé z našich
<a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">e-mailových konferencí</a>.

</p></div><div class="chapter" title="Kapitola 1. Představení"><div class="titlepage"><div><div><h2 class="title"><a name="intro"></a>Kapitola 1. Představení</h2></div></div></div><p>
<span class="application">MPlayer</span> je multimediální přehrávač pro Linux (běží na mnoha
jiných Unixech a <span class="bold"><strong>ne-x86</strong></span> CPU, viz
<a class="xref" href="#ports" title="Kapitola 8. Porty">Ports</a>).
Přehraje většinu MPEG, VOB, AVI, OGG/OGM, VIVO, ASF/WMA/WMV, QT/MOV/MP4, FLI,
RM, NuppelVideo, yuv4mpeg, FILM, RoQ, PVA, Matroska souborů s podporou
mnoha nativních XAnim, RealPlayer a Win32 DLL kodeků. Můžete sledovat
<span class="bold"><strong>VideoCD, SVCD, DVD, 3ivx, RealMedia, Sorenson, Theora</strong></span>
a také <span class="bold"><strong>MPEG-4 (DivX)</strong></span> filmy. Další skvělou vlastností
<span class="application">MPlayer</span>u je velké množství podporovaných
výstupních rozhraní. Pracuje s X11, Xv, DGA, OpenGL, SVGAlib,
fbdev, AAlib, libcaca, DirectFB, rovněž můžete použít GGI a SDL (a takto i jejich ovladače)
a také některé nízkoúrovňové ovladače konkrétních karet (pro Matrox, 3Dfx a
Radeon, Mach64, Permedia3)! Většina z nich podporuje softwarové nebo hardwarové škálování
(změna velikosti obrazu), takže si můžete užít video na celé obrazovce.
<span class="application">MPlayer</span> podporuje zobrazování přes některé hardwarové MPEG
dekódovací karty, jako je <a class="link" href="#dvb" title="7.18.1. DVB výstup a vstup">DVB</a> a
<a class="link" href="#dxr3" title="7.18.3. DXR3/Hollywood+">DXR3/Hollywood+</a>. A což teprve velké krásné vyhlazené a
stínované titulky
(<span class="bold"><strong>14 podporovaných typů</strong></span>)
spolu s Evropskými/ISO 8859-1,2 (Bulharskými, Anglickými, Českými, atd), Cyrilickými a Korejskými
fonty a displej na obrazovce (OSD)?
</p><p>
Přehrávač je pevný jako skála při přehrávání poškozených MPEG souborů
(použitelné pro některá VCD), také přehrává špatné AVI soubory, které
nelze přehrávat ani věhlasným windows media playerem.
Dokonce lze přehrávat i AVI bez indexu a navíc můžete jejich indexy dočasně
obnovit pomocí volby <tt class="option">-idx</tt>, nebo trvale pomocí
<span class="application">MEncoder</span>u, což umožní převíjení!
Jak vidíte, kvalita a stabilita jsou těmi nejdůležitějšími vlastnostmi,
rychlost je ovšem také skvělá. Rovněž máme účinný systém filtrů pro manipulaci
s videem i se zvukem.
</p><p>
<span class="application">MEncoder</span> (<span class="application">MPlayer</span>ův Filmový
Enkodér) je jednoduchý filmový enkodér, navržený k enkódování
<span class="application">MPlayer</span>em přehrávatelných filmů
(<span class="bold"><strong>AVI/ASF/OGG/DVD/VCD/VOB/MPG/MOV/VIV/FLI/RM/NUV/NET/PVA</strong></span>)
do jiných <span class="application">MPlayer</span>em přehrávatelných formátů (viz níže).
Může enkódovat různými kodeky, třeba <span class="bold"><strong>MPEG-4 (DivX4)</strong></span>
(jedním nebo dvěma průchody), <code class="systemitem">libavcodec</code>,
<span class="bold"><strong>PCM/MP3/VBR MP3</strong></span>
audia.
</p><div class="itemizedlist" title="Vlastnosti MEncoderu"><p class="title"><b>Vlastnosti <span class="application">MEncoder</span>u</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Enkódování ze široké řady formátů souboru a dekodérů
  <span class="application">MPlayer</span>u
</p></li><li class="listitem"><p>
  Enkódování pomocí všech FFmpeg
  <code class="systemitem">libavcodec</code> kodeků
</p></li><li class="listitem"><p>
  Video enkódování z <span class="bold"><strong>V4L kompatibilních TV tunerů</strong></span>
</p></li><li class="listitem"><p>
  Enkódování/multiplexování do prokládaných AVI souborů se správným indexem
</p></li><li class="listitem"><p>
  Tvorba souborů z externího audio proudu
</p></li><li class="listitem"><p>
  1, 2 nebo 3 průchodové enkódování
</p></li><li class="listitem"><p>
  <span class="bold"><strong>VBR</strong></span> MP3 zvuk
  </p><div class="important" title="Důležité" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Důležité</h3><p>
  VBR MP3 zvuk není vždy přehráván dobře přehrávači pro windows!
  </p></div><p>
</p></li><li class="listitem"><p>
  PCM zvuk
</p></li><li class="listitem"><p>
  Kopírování datového proudu
</p></li><li class="listitem"><p>
  Vstupní A/V synchronizace (založená na PTS, lze ji vypnout pomocí
  volby <tt class="option">-mc 0</tt>)
</p></li><li class="listitem"><p>
  Korekce snímkové rychlosti pomocí volby <tt class="option">-ofps</tt> (užitečné při enkódování
  30000/1001 fps VOB do 24000/1001 fps AVI)
</p></li><li class="listitem"><p>
  Používá výkonný systém filtrů (ořez, expanze, postproces, rotace, škálování (změna velikosti),
  konverze rgb/yuv)
</p></li><li class="listitem"><p>
  Umí enkódovat DVD/VOBsub <span class="bold"><strong>A</strong></span> textové titulky do výstupního
  souboru
</p></li><li class="listitem"><p>
  Umí ripovat DVD titulky do VOBsub formátu
</p></li></ul></div><p>
<span class="application">MPlayer</span> a <span class="application">MEncoder</span>
mohou být distribuovány za podmínek stanovených v GNU General Public License Version 2.
</p></div><div class="chapter" title="Kapitola 2. Instalace"><div class="titlepage"><div><div><h2 class="title"><a name="install"></a>Kapitola 2. Instalace</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#softreq">2.1. Softwarové požadavky</a></span></dt><dt><span class="sect1"><a href="#features">2.2. Vlastnosti</a></span></dt><dt><span class="sect1"><a href="#gui">2.3. Chtěli byste GUI?</a></span></dt><dt><span class="sect1"><a href="#fonts-osd">2.4. Fonty a OSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#truetype-fonts">2.4.1. TrueType fonty</a></span></dt><dt><span class="sect2"><a href="#bitmap-fonts">2.4.2. bitmapové fonty</a></span></dt><dt><span class="sect2"><a href="#osdmenu">2.4.3. OSD menu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#codec-installation">2.5. Codec installation</a></span></dt><dd><dl><dt><span class="sect2"><a href="#xvid">2.5.1. Xvid</a></span></dt><dt><span class="sect2"><a href="#x264">2.5.2. <code class="systemitem">x264</code></a></span></dt><dt><span class="sect2"><a href="#aac">2.5.3. Kodek AAC</a></span></dt><dt><span class="sect2"><a href="#amr">2.5.4. AMR kodeky</a></span></dt></dl></dd><dt><span class="sect1"><a href="#rtc">2.6. RTC</a></span></dt></dl></div><p>
Jednoduchý návod na instalaci naleznete v souboru <tt class="filename">README</tt>.
Přečtěte si nejprve tento soubor a poté se vraťte zde pro další podrobnosti.
</p><p>
V této části vás provedeme procesem kompilace a konfigurace programu
<span class="application">MPlayer</span>. Není to snadné, ale nemusí to být
nutně těžké. Pokud zaznamenáte rozdílné chování, než zde popisuji,
prostudujte si prosím tuto dokumentaci a naleznete své odpovědi.
</p><div class="sect1" title="2.1. Softwarové požadavky"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="softreq"></a>2.1. Softwarové požadavky</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>binutils</strong></span> – doporučená verze je
  <span class="bold"><strong>2.11.x</strong></span>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>gcc</strong></span> – doporučené verze jsou 2.95
  a 3.4+. 2.96 a 3.0.x jsou známy generováním vadného kódu, 3.1 a
  3.2 měly rovněž problémy, 3.3 jen okrajově. Na PowerPC použijte 4.x.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Xorg/XFree86</strong></span> – doporučená verze je
  4.3 a vyšší. Ujistěte se, že máte nainstalovány
  <span class="bold"><strong>vývojové (dev)  balíčky</strong></span>,
  jinak to nebude pracovat.
  Ne vždy potřebujete X, některá výstupní video rozhraní pracují i bez nich.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>make</strong></span> – doporučená verze je
  3.79.x nebo vyšší. Pro sestavení XML dokumentace potřebujete 3.80.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>FreeType</strong></span> – vyžaduje se aspoň
  verze 2.0.9 pro OSD a titulky.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>ALSA</strong></span> – volitelnmá, pro podporu zvukového
  výstupu do ALSA. Vyžaduje se aspoň verze 0.9.0rc4.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libjpeg</strong></span> –
  vyžadována pro volitelné JPEG video výstupní rozhraní
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libpng</strong></span> –
  vyžadována pro volitelné PNG video výstupní rozhraní
</p></li><li class="listitem"><p>
  <span class="bold"><strong>directfb</strong></span> – volitelný, 0.9.13 nebo pozdější
  vyžadovaný pro directfb video výstupní rozhraní
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lame</strong></span> – doporučená verze 3.90 a vyšší,
  vyžadovaný pro enkódování MP3 zvuku v <span class="application">MEncoder</span>u.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>zlib</strong></span> – doporučená, nutná pro komprimovanou
  MOV hlavičku a podporu PNG.
</p></li><li class="listitem"><p>
  <span class="bold"><strong><a class="ulink" href="http://www.live555.com/mplayer/" target="_top">LIVE555 Streaming Media</a></strong></span>
  – volitelná, nutná pro přehrávání RTSP/RTP datových proudů.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cdparanoia</strong></span> – volitelná, pro podporu CDDA
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libxmms</strong></span> – volitelná, pro podporu XMMS
  vstupního pluginu.
  Vyžadujeme aspoň 1.2.7.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>libsmb</strong></span> – volitelná, pro podporu SMB sítí.
</p></li></ul></div></div><div class="sect1" title="2.2. Vlastnosti"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="features"></a>2.2. Vlastnosti</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Rozhodněte se zda potřebujete GUI. Pokud ano, přečtěte si před kompilací
  sekci <a class="link" href="#gui" title="2.3. Chtěli byste GUI?">GUI</a>.
</p></li><li class="listitem"><p>
  Pokud chcete nainstalovat <span class="application">MEncoder</span> (náš skvělý
  všestranný enkodér), přečtěte si sekci
  <a class="link" href="#mencoder" title="Kapitola 9. Základní použití MEncoderu"><span class="application">MEncoder</span></a>.
</p></li><li class="listitem"><p>
  Pokud máte V4L kompatibilní <span class="bold"><strong>TV tuner</strong></span> kartu,
  a přejete si sledovat/grabovat filmy <span class="application">MPlayer</span>em,
  přečtěte si sekci <a class="link" href="#tv-input" title="5.1. TV vstup">TV vstup</a>.
</p></li><li class="listitem"><p>
  Pokud máte V4L kompatibilní <span class="bold"><strong>radio tuner</strong></span>
  kartu a přejete si poslouchat nebo zachytávat zvuk
  <span class="application">MPlayer</span>em,
  přečtěte si sekci <a class="link" href="#radio" title="Kapitola 6. Rádio">radio</a>.
</p></li><li class="listitem"><p>
  Připravena k použití je podpora pěkného <span class="bold"><strong>OSD Menu</strong></span>.
  Přečtěte si sekci <a class="link" href="#subosd" title="3.2. Titulky a OSD">OSD menu</a>.
</p></li></ul></div><p>
  Pak přeložte <span class="application">MPlayer</span>:
</p><pre class="screen">
./configure
make
make install
</pre><p>
</p><p>
  V tuto chvíli máte <span class="application">MPlayer</span> připraven k použití.
  Ověřte si, zda nemáte soubor <tt class="filename">codecs.conf</tt> v domovském
  adresáři (<tt class="filename">~/.mplayer/codecs.conf</tt>) ze staré verze
  <span class="application">MPlayer</span>u. Pokud jej najdete, odstraňte ho.
</p><p>
  Uživatelé Debianu si mohou vyrobit .deb balíček, je to velmi jednoduché.
  Jen spusťte binárku
  </p><pre class="screen">fakeroot debian/rules</pre><p>
  v <span class="application">MPlayer</span>ově kořenovém adresáři. Podrobnosti viz
  <a class="link" href="#debian" title="8.1.1. Vytvoření balíčku pro Debian">Balíčkování Debianu</a>.
</p><p>
  <span class="bold"><strong>Vždy si prostudujte výstup skriptu</strong></span>
  <tt class="filename">./configure</tt>, a soubor <tt class="filename">configure.log</tt>,
  které obsahují informace o tom co bude zakompilováno a co ne. Také můžete
  chtít vidět soubory <tt class="filename">config.h</tt> a
  <tt class="filename">config.mak</tt>.
  Pokud máte některé knihovny nainstalovány, ale nebyly detekovány skriptem
  <tt class="filename">./configure</tt>, pak ověřte, zda máte příslušné hlavičkové
  soubory
  (obvykle -dev balíčky) a jejich verze jsou shodné. Soubor
  <tt class="filename">configure.log</tt> vám obvykle prozradí co vám chybí.
</p><p>
  Ačkoli to není podmínkou, měli byste mít nainstalovány fonty pro funkci OSD a
  zobrazování titulků. Doporučujeme nainstalovat soubor fontu TTF a nařídit
  <span class="application">MPlayer</span>u jej používat.
  Detaily viz sekce <a class="link" href="#subosd" title="3.2. Titulky a OSD">Titulky a OSD</a>.
</p></div><div class="sect1" title="2.3. Chtěli byste GUI?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gui"></a>2.3. Chtěli byste GUI?</h2></div></div></div><p>
  GUI potřebuje GTK 1.2.x nebo GTK 2.0 (není plně GTK, ale panely jsou).
  Skiny jsou uloženy v PNG formátu,
  takže GTK, <code class="systemitem">libpng</code>
  (a jejich příslušenství, obvykle nazývané
  <code class="systemitem">gtk-dev</code>
  a <code class="systemitem">libpng-dev</code>) musí být nainstalovány.
  Můžete jej zakompilovat předáním volby <tt class="option">--enable-gui</tt> skriptu
  <tt class="filename">./configure</tt>. Aktivaci GUI režimu pak provedete spuštěním
  binárky <span class="command"><strong>gmplayer</strong></span>.
</p><p>
  Protože <span class="application">MPlayer</span> nemá přibalen žádný skin, budete si
  muset nějaký stáhnout abyste mohli používat GUI. Viz naši <a class="ulink" href="http://www.mplayerhq.hu/dload.html" target="_top">download stránku</a>.
  Skiny by měly být rozbaleny do obvyklého systémového adresáře
  (<tt class="filename">$PREFIX/share/mplayer/skins</tt>),
  nebo do <tt class="filename">$HOME/.mplayer/skins</tt>.
  <span class="application">MPlayer</span> ve výchozím stavu hledá v těchto adresářích
  podadresář jménem <tt class="filename">default</tt>, ale
  můžete použít volbu <tt class="option">-skin <em class="replaceable"><code>nový_skin</code></em></tt>
  nebo direktivu <code class="literal">skin=nový_skin</code> konfiguračního souboru pro
  použití skinu v adresáři <tt class="filename">*/skins/nový_skin</tt>.
</p></div><div class="sect1" title="2.4. Fonty a OSD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="fonts-osd"></a>2.4. Fonty a OSD</h2></div></div></div><p>
Abyste si mohli užívat OSD a titulků, musíte
<span class="application">MPlayer</span>u sdělit, který font má použít.
Může to být jakýkoli TrueType font, nebo speciální bitmapový font.
TrueType však doporučujeme, jelikož vypadají lépe, mohou být vhodně
škálovány na rozměr filmu a lépe si poradí s různými znakovými sadami.
</p><div class="sect2" title="2.4.1. TrueType fonty"><div class="titlepage"><div><div><h3 class="title"><a name="truetype-fonts"></a>2.4.1. TrueType fonty</h3></div></div></div><p>
Existují dva způsoby, jak zprovoznit TrueType fonty. První je použít volbu
<tt class="option">-font</tt> pro volbu TrueType fontu z příkazového řádku.
Tato volba bude dobrým kandidátem pro umístění do konfiguračního
souboru (detaily viz manuál).
Druhá je vytvoření symlinku s názvem <tt class="filename">subfont.ttf</tt>
na soubor s vámi vybraným fontem. Buď
</p><pre class="screen">
ln -s <em class="replaceable"><code>/cesta/k/sample_font.ttf</code></em> ~/.mplayer/subfont.ttf
</pre><p>
pro každého uživatele zvlášť, nebo systémový:
</p><pre class="screen">
ln -s <em class="replaceable"><code>/cesta/k/sample_font.ttf</code></em> $PREFIX/share/mplayer/subfont.ttf
</pre><p>
</p><p>
Pokud byl <span class="application">MPlayer</span> kompilován s podporou
<code class="systemitem">fontconfig</code>, výše uvedené nebude
fungovat, místo toho <tt class="option">-font</tt> očekává
<code class="systemitem">fontconfig</code> název fontu
a jako výchozí bere bezpatkový font. Příklad:

</p><pre class="screen">
mplayer -font <em class="replaceable"><code>'Bitstream Vera Sans'</code></em> <em class="replaceable"><code>anime.mkv</code></em>
</pre><p>
</p><p>
Seznam fontů známých
<code class="systemitem">fontconfig</code>u,
získáte pomocí <span class="command"><strong>fc-list</strong></span>.
</p></div><div class="sect2" title="2.4.2. bitmapové fonty"><div class="titlepage"><div><div><h3 class="title"><a name="bitmap-fonts"></a>2.4.2. bitmapové fonty</h3></div></div></div><p>
Pokud se z nějakého důvodu rozhodnete nebo potřebujete použít bitmapové fonty,
stáhněte si sadu z našich stránek. Můžete si vybrat mezi různými
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/fonts/" target="_top">ISO fonty</a>
a několika sadami fontů
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/fonts/" target="_top">zaslaných uživateli</a>
v různých znakových sadách.
</p><p>
Rozbalte stažený archiv do
<tt class="filename">~/.mplayer</tt> nebo
<tt class="filename">$PREFIX/share/mplayer</tt>.
Pak přejmenujte nebo slinkujte jeden z rozbalených adresářů na
<tt class="filename">font</tt>, například:
</p><pre class="screen">
ln -s <em class="replaceable"><code>~/.mplayer/arial-24</code></em> ~/.mplayer/font
</pre><p>
</p><pre class="screen">
ln -s <em class="replaceable"><code>$PREFIX/share/mplayer/arial-24</code></em> $PREFIX/share/mplayer/font
</pre><p>
</p><p>
Fonty by měly mít vhodný <tt class="filename">font.desc</tt> soubor,
který mapuje unicode pozice ve fontu na aktuální znakovou sadu
textu titulků. Dalším řešením je mít titulky kódované v UTF-8 a použít
volbu <tt class="option">-utf8</tt>, nebo pojmenujte soubor s titulky
stejně jako film a dejte mu příponu <tt class="filename">.utf</tt>
a umístěte jej do adresáře s filmem.
</p></div><div class="sect2" title="2.4.3. OSD menu"><div class="titlepage"><div><div><h3 class="title"><a name="osdmenu"></a>2.4.3. OSD menu</h3></div></div></div><p>
<span class="application">MPlayer</span> má plně uživatelsky definovatelné
rozhraní OSD Menu (nabídka na obrazovce).
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Menu Preferences NENÍ v současnosti IMPLEMENTOVÁNO!
</p></div><div class="orderedlist" title="Instalace"><p class="title"><b>Instalace</b></p><ol class="orderedlist" type="1"><li class="listitem"><p>
  zkompilujte <span class="application">MPlayer</span> s volbou
  <tt class="option">--enable-menu</tt>
  předanou do <tt class="filename">./configure</tt>
</p></li><li class="listitem"><p>
  ujistěte se že máte nainstalován OSD font
</p></li><li class="listitem"><p>
  zkopírujte <tt class="filename">etc/menu.conf</tt> do svého
  <tt class="filename">.mplayer</tt> adresáře
</p></li><li class="listitem"><p>
  zkopírujte <tt class="filename">etc/menu.conf</tt> do svého
  <tt class="filename">.mplayer</tt> adresáře, nebo do systémového
  <span class="application">MPlayer</span> konfiguračního adresáře (výchozí:
  <tt class="filename">/usr/local/etc/mplayer</tt>)
</p></li><li class="listitem"><p>
  zkontrolujte a upravte <tt class="filename">input.conf</tt>, abyste zapnuli klávesy
  pro pohyb v menu (to je popsáno zde).
</p></li><li class="listitem"><p>
  spusťte <span class="application">MPlayer</span> podle následujícího příkladu:
  </p><pre class="screen">mplayer -menu <em class="replaceable"><code>file.avi</code></em></pre><p>
</p></li><li class="listitem"><p>
  stiskněte některou z kláves, kterou jste definovali
</p></li></ol></div></div></div><div class="sect1" title="2.5. Codec installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="codec-installation"></a>2.5. Codec installation</h2></div></div></div><div class="sect2" title="2.5.1. Xvid"><div class="titlepage"><div><div><h3 class="title"><a name="xvid"></a>2.5.1. Xvid</h3></div></div></div><p>
<a class="ulink" href="http://www.xvid.org" target="_top">Xvid</a> je free software MPEG-4 ASP
kompatibilní video kodec, jenž má podporu pro dvouprůchodové enkódování a
plně podporuje MPEG-4 ASP.
Poznamenejme, že Xvid není nutný pro dekódování Xvidem enkódovaného videa.
Jako výchozí je používán <code class="systemitem">libavcodec</code>,
jelikož poskytuje vyšší rychlost.
</p><div class="procedure" title="Instalace Xvid"><a name="id2541133"></a><p class="title"><b>Instalace <code class="systemitem">Xvid</code></b></p><p>
  Stejně jako většina svobodného software je dostupný ve dvou verzích:
  <a class="ulink" href="http://www.xvid.org/downloads.html" target="_top">oficiálně uvolněné verzi</a>
  a verzi CVS.
  V současnosti je CVS verze obvykle dostatečně stabilní pro použití, jelikož
  většinou obsahuje opravy chyb, které zůstaly po vydání.
  Zde uvádíme postup pro zprovoznění <code class="systemitem">Xvid</code>
  CVS v <span class="application">MEncoder</span>:
</p><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid login</pre><p>
</p></li><li class="step" title="Krok 2"><p>
  </p><pre class="screen">cvs -z3 -d:pserver:anonymous@cvs.xvid.org:/xvid co xvidcore</pre><p>
</p></li><li class="step" title="Krok 3"><p>
  </p><pre class="screen">cd xvidcore/build/generic</pre><p>
</p></li><li class="step" title="Krok 4"><p>
  </p><pre class="screen">./bootstrap.sh</pre><p>
</p></li><li class="step" title="Krok 5"><p>
  </p><pre class="screen">./configure</pre><p>
  Zde můžete přidat nějaké volby (prostudujte si výstup příkazu
  <span class="command"><strong>./configure --help</strong></span>).
</p></li><li class="step" title="Krok 6"><p>
  </p><pre class="screen">make &amp;&amp; make install</pre><p>
</p></li><li class="step" title="Krok 7"><p>
  Znovu zkompilujte <span class="application">MPlayer</span> s volbami.
</p></li></ol></div></div><div class="sect2" title="2.5.2. x264"><div class="titlepage"><div><div><h3 class="title"><a name="x264"></a>2.5.2. <code class="systemitem">x264</code></h3></div></div></div><p>
<a class="ulink" href="http://developers.videolan.org/x264.html" target="_top"><code class="systemitem">x264</code></a>
is a library for creating H.264 video.
<span class="application">MPlayer</span> sources are updated whenever
an <code class="systemitem">x264</code> API change
occurs, so it is always suggested to use
<span class="application">MPlayer</span> from Subversion.
</p><p>
If you have a GIT client installed, the latest x264
sources can be gotten with this command:
</p><pre class="screen">git clone git://git.videolan.org/x264.git</pre><p>

Then build and install in the standard way:
</p><pre class="screen">./configure &amp;&amp; make &amp;&amp; make install</pre><p>

Now rerun <tt class="filename">./configure</tt> for
<span class="application">MPlayer</span> to pick up
<code class="systemitem">x264</code> support.
</p></div><div class="sect2" title="2.5.3. Kodek AAC"><div class="titlepage"><div><div><h3 class="title"><a name="aac"></a>2.5.3. Kodek AAC</h3></div></div></div><p>
AAC (Advanced Audio Coding) je audio kodek, který lze občas nalézt v MOV a
MP4 souborech. Open source dekodér jménem FAAD je k dispozici na
<a class="ulink" href="http://www.audiocoding.com" target="_top">http://www.audiocoding.com</a>.
<span class="application">MPlayer</span> obsahuje CVS obraz libfaad 2.1 beta,
takže jej nemusíte stahovat dodatečně.
</p><p>
Pokud používáte gcc 3.2 které nedokáže zkompilovat naši zabudovanou FAAD,
nebo chcete použít externí knihovnu z jiných důvodů, stáhněte si ji z
<a class="ulink" href="http://www.audiocoding.com/modules/mydownloads/" target="_top">download stránky</a>
a předejte volbu <tt class="option">--enable-faad-external</tt> skriptu
<tt class="filename">./configure</tt>.
Pro dekódování AAC souborů nepotřebujete celou faad2, libfaad stačí.
Zkompilujete ji takto:
</p><pre class="screen">
cd faad2/
sh bootstrap
./configure
cd libfaad
make
make install
</pre><p>
Binárky na audiocoding.com nenajdete, ale můžete si je opatřit v balíčcích pro
Debian z
<a class="ulink" href="http://www.debian-multimedia.org/" target="_top">domácí stránky Christiana Marillata</a>,
Mandrake/Mandriva RPM z <a class="ulink" href="http://plf.zarb.org" target="_top">P.L.F</a>
a Fedora RPM ze stránek <a class="ulink" href="http://rpm.livna.org/" target="_top">Livna</a>.
</p></div><div class="sect2" title="2.5.4. AMR kodeky"><div class="titlepage"><div><div><h3 class="title"><a name="amr"></a>2.5.4. AMR kodeky</h3></div></div></div><p>
Adaptivní Multi-Rate kodek pro mluvené slovo je používán třetí generací (3G)
mobilních telefonů.
Referenční implementace je dostupná od
<a class="ulink" href="http://www.3gpp.org" target="_top">The 3rd Generation Partnership Project</a>
(zdarma pro osobní použití).
Pro zapnutí podpory si stáhněte podpůrné knihovny pro
<a class="ulink" href="http://www.penguin.cz/~utx/amr" target="_top">AMR-NB a AMR-WB</a>
a následujte instrukce na stránce. Potom znovu zkompilujte MPlayer.
</p></div></div><div class="sect1" title="2.6. RTC"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rtc"></a>2.6. RTC</h2></div></div></div><p>
V <span class="application">MPlayer</span> jsou zabudovány tři metody časování.

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Abyste použili starou metodu</strong></span>, nemusíte dělat
  vůbec nic. Ta používá <code class="systemitem">usleep()</code> pro hlídání
  A/V synchronizace s přesností +/- 10ms. Ačkoli někdy může být synchronizace
  hlídána ještě jemněji.
</p></li><li class="listitem"><p>
  Kód <span class="bold"><strong>nového časovače</strong></span> používá pro tento účel RTC
  (hodiny reálného času), protože mají přesné 1ms časovače.
  Volba <tt class="option">-rtc</tt> to zapíná, je však nutné vhodně nastavené jádro.
  Pokud používáte jádro 2.4.19pre8 nebo pozdější, můžete nastavit maximální RTC
  kmitočet pro normální uživatele pomocí systému souborů
  <code class="systemitem">/proc
  </code>. Použijte jeden z těchto dvou příkazů pro zapnutí RTC
  pro obyčejné uživatele:
  </p><pre class="screen">echo 1024 &gt; /proc/sys/dev/rtc/max-user-freq</pre><p>
  </p><pre class="screen">sysctl dev/rtc/max-user-freq=1024</pre><p>
  Můžete tuto volbu učinit trvalou přidáním druhého příkazu do
  <tt class="filename">/etc/sysctl.conf</tt>.
  </p><p>
   Efektivitu nového časovače uvidíte na stavovém řádku.
   Funkce power managementu některých notebookových BIOSů s speedstep procesory
   špatně komunikují s RTC. Audio a video se mohou rozejít. Zdá se že pomáhá
   připojení vnějšího napájení před zapnutím notebooku.
   V některých hardwarových kombinacích (zjištěno během používání ne-DMA DVD
   mechaniky na ALi1541 boardu) způsobuje použití RTC časování trhavé přehrávání.
   Pak doporučujeme
   použít třetí metodu.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Třetí kód časovače</strong></span> se zapíná volbou
  <tt class="option">-softsleep</tt>. Je stejně efektní jako RTC, ale nepoužívá RTC.
  Na druhou stranu více zatěžuje CPU.
</p></li></ul></div><p>
</p></div></div><div class="chapter" title="Kapitola 3. Použití"><div class="titlepage"><div><div><h2 class="title"><a name="usage"></a>Kapitola 3. Použití</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#commandline">3.1. Příkazový řádek</a></span></dt><dt><span class="sect1"><a href="#subosd">3.2. Titulky a OSD</a></span></dt><dt><span class="sect1"><a href="#control">3.3. Ovládání</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ctrl-cfg">3.3.1. Konfigurace ovládání</a></span></dt><dt><span class="sect2"><a href="#lirc">3.3.2. Ovládání z LIRC</a></span></dt><dt><span class="sect2"><a href="#slave-mode">3.3.3. Závislý režim</a></span></dt></dl></dd><dt><span class="sect1"><a href="#streaming">3.4. Přehrávání datových proudů ze sítě nebo rour</a></span></dt><dd><dl><dt><span class="sect2"><a href="#streaming-save">3.4.1. Uložení proudového obsahu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#edl">3.5. Seznamy editačních zásahů (EDL)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#edl_using">3.5.1. Použití EDL souboru</a></span></dt><dt><span class="sect2"><a href="#edl_making">3.5.2. Vytvoření EDL souboru</a></span></dt></dl></dd><dt><span class="sect1"><a href="#advaudio">3.6. Pokročilé audio</a></span></dt><dd><dl><dt><span class="sect2"><a href="#advaudio-surround">3.6.1. Surround/Vícekanálové přehrávání</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-surround-DVD">3.6.1.1. DVD</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-stereoinfour">3.6.1.2. Přehrávání stereo souborů do čtyřech reproduktorů</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-passthrough">3.6.1.3. AC–3/DTS Passthrough</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-matrix">3.6.1.4. Maticově enkódovaný zvuk</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-hrtf">3.6.1.5. Surround emulace ve sluchátkách</a></span></dt><dt><span class="sect3"><a href="#advaudio-surround-troubleshooting">3.6.1.6. Potíže</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-channels">3.6.2. Manipulace s kanály</a></span></dt><dd><dl><dt><span class="sect3"><a href="#advaudio-channels-general">3.6.2.1. Obecné informace</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mono">3.6.2.2. Přehrávání mono na dvou reproduktorech</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-copying">3.6.2.3. Kopírování/přesun kanálů</a></span></dt><dt><span class="sect3"><a href="#advaudio-channels-mixing">3.6.2.4. Mixování kanálů</a></span></dt></dl></dd><dt><span class="sect2"><a href="#advaudio-volume">3.6.3. Softwarové nastavení hlasitosti</a></span></dt></dl></dd></dl></div><div class="sect1" title="3.1. Příkazový řádek"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="commandline"></a>3.1. Příkazový řádek</h2></div></div></div><p>
<span class="application">MPlayer</span> využívá komplexní strukturu voleb. Ta sestává
z globálních voleb uváděných jako první, například:
</p><pre class="screen">mplayer -vfm 5</pre><p>
a voleb zapisovaných za jménem souboru, které se projeví pouze u tohoto jména
souboru/URL/čehokoli, například:
</p><pre class="screen">
mplayer -vfm 5 <em class="replaceable"><code>film1.avi</code></em> <em class="replaceable"><code>film2.avi</code></em> -vfm 4
</pre><p>
</p><p>
Můžete seskupovat jména souborů/adresy URL pomocí <code class="literal">{</code> a
<code class="literal">}</code>. Toho se dá využít s volbou <tt class="option">-loop</tt>:
</p><pre class="screen">mplayer { 1.avi -loop 2 2.avi } -loop 3</pre><p>
Výše uvedený příkaz přehraje soubory v tomto pořadí: 1, 1, 2, 1, 1, 2, 1, 1, 2.
</p><p>
Přehrávání souboru:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>volby</code></em>] [<em class="replaceable"><code>cesta</code></em>/]<em class="replaceable"><code>soubor</code></em>
</pre><p>
</p><p>
Jiný způsob přehrání souboru:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>volby</code></em>] <em class="replaceable"><code>file:///uri-eskejpovaná-cesta-k-souboru</code></em>
</pre><p>
</p><p>
Přehrávání více souborů:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>výchozí volby</code></em>] [<em class="replaceable"><code>cesta</code></em>/]<em class="replaceable"><code>soubor1</code></em> [<em class="replaceable"><code>volby pro soubor1</code></em>] <em class="replaceable"><code>soubor2</code></em> [<em class="replaceable"><code>volby pro soubor2</code></em>] ...
</pre><p>
</p><p>
Přehrávání VCD:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>volby</code></em>] vcd://<em class="replaceable"><code>číslo_stopy</code></em> [-cdrom-device <em class="replaceable"><code>/dev/cdrom</code></em>]
</pre><p>
</p><p>
Přehrávání DVD:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>volby</code></em>] dvd://<em class="replaceable"><code>číslo_titulu</code></em> [-dvd-device <em class="replaceable"><code>/dev/dvd</code></em>]
</pre><p>
</p><p>
Přehrávání z WWW:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>volby</code></em>] http://<em class="replaceable"><code>doména.com/soubor.asf</code></em>
</pre><p>
(rovněž lze použít playlisty)
</p><p>
Přehrávání z RTSP:
</p><pre class="synopsis">
<span class="command"><strong>mplayer</strong></span> [<em class="replaceable"><code>volby</code></em>] rtsp://<em class="replaceable"><code>server.priklad.com/JmenoProudu</code></em>
</pre><p>
</p><p>
Příklady:
</p><pre class="screen">
mplayer -vo x11 <em class="replaceable"><code>/mnt/Filmy/Kontakt/kontakt2.mpg</code></em>
mplayer vcd://<em class="replaceable"><code>2</code></em> -cdrom-device <em class="replaceable"><code>/dev/hdc</code></em>
mplayer -afm 3 <em class="replaceable"><code>/mnt/DVDtrailery/alien4.vob</code></em>
mplayer dvd://<em class="replaceable"><code>1</code></em> -dvd-device <em class="replaceable"><code>/dev/hdc</code></em>
mplayer -abs 65536 -delay -0.4 -nobps <em class="replaceable"><code>~/filmy/test.avi</code></em></pre><p>
</p></div><div class="sect1" title="3.2. Titulky a OSD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="subosd"></a>3.2. Titulky a OSD</h2></div></div></div><p>
<span class="application">MPlayer</span> umí zobrazovat titulky spolu s filmem.
V současnosti podporuje tyto formáty:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>VOBsub</p></li><li class="listitem"><p>OGM</p></li><li class="listitem"><p>CC (closed caption)</p></li><li class="listitem"><p>MicroDVD</p></li><li class="listitem"><p>SubRip</p></li><li class="listitem"><p>SubViewer</p></li><li class="listitem"><p>Sami</p></li><li class="listitem"><p>VPlayer</p></li><li class="listitem"><p>RT</p></li><li class="listitem"><p>SSA</p></li><li class="listitem"><p>PJS (Phoenix Japanimation Society)</p></li><li class="listitem"><p>MPsub</p></li><li class="listitem"><p>AQTitle</p></li><li class="listitem"><p>
    <a class="ulink" href="http://unicorn.us.com/jacosub/" target="_top">JACOsub</a>
  </p></li></ul></div><p>
</p><p>
<span class="application">MPlayer</span> umí vyextrahovat výše uvedené formáty titulků
(<span class="bold"><strong>s výjimkou prvních třech</strong></span>) do následujících
cílových formátů zadáním příslušných voleb:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>MPsub: <tt class="option">-dumpmpsub</tt></p></li><li class="listitem"><p>SubRip: <tt class="option">-dumpsrtsub</tt></p></li><li class="listitem"><p>MicroDVD: <tt class="option">-dumpmicrodvdsub</tt></p></li><li class="listitem"><p>JACOsub: <tt class="option">-dumpjacosub</tt></p></li><li class="listitem"><p>Sami: <tt class="option">-dumpsami</tt></p></li></ul></div><p>
</p><p>
<span class="application">MEncoder</span> umí vyextrahovat DVD titulky do formátu
<a class="link" href="#menc-feat-extractsub" title="9.9. Extrakce DVD titulků do VOBsub souboru">VOBsub</a>.
</p><p>
Volby příkazového řádku se pro různé formáty mírně liší:
</p><p title="VOBsub titulky"><b>VOBsub titulky. </b>
VOBsub titulky se skládají z velkého (řádově megabajty) <tt class="filename">.SUB</tt>
souboru a volitelného <tt class="filename">.IDX</tt> a/nebo <tt class="filename">.IFO</tt>
souboru. Pokud máte soubory jako
<tt class="filename"><em class="replaceable"><code>sample.sub</code></em></tt>,
<tt class="filename"><em class="replaceable"><code>sample.ifo</code></em></tt> (volitelný),
<tt class="filename"><em class="replaceable"><code>sample.idx</code></em></tt> – musíte předat
<span class="application">MPlayer</span>u volby <tt class="option">-vobsub sample
[-vobsubid <em class="replaceable"><code>id</code></em>]</tt>
(volitelně s plnou cestou). Volba <tt class="option">-vobsubid</tt> je jako
<tt class="option">-sid</tt> pro DVD, můžete jí vybírat mezi titulkovými stopami
(jazyky). Je-li <tt class="option">-vobsubid</tt> vynechána, pak se
<span class="application">MPlayer</span> pokusí použít jazyky zadané volbou
<tt class="option">-slang</tt> a při selhání použije
<code class="systemitem">langidx</code> v <tt class="filename">.IDX</tt>
souboru. Pokud selže i zde, nebudou titulky.
</p><p title="Ostatní titulky"><b>Ostatní titulky. </b>
Ostatní formáty tvoří jediný textový soubor obsahující časování,
umístění a textovou část. Použití: máte-li soubor jako
<tt class="filename"><em class="replaceable"><code>sample.txt</code></em></tt>,
musíte předat volbu <tt class="option">-sub
<em class="replaceable"><code>sample.txt</code></em></tt> (volitelně s plnou cestou).
</p><div class="variablelist" title="Úpravy časování a umístění titulků:"><p class="title"><b>Úpravy časování a umístění titulků:</b></p><dl><dt><span class="term"><tt class="option">-subdelay <em class="replaceable"><code>sec</code></em></tt></span></dt><dd><p>
    Opozdí titulky o <tt class="option"><em class="replaceable"><code>sec</code></em></tt> sekund.
    Může být i záporné. Hodnota je přidána k čítači pozice ve filmu.
    </p></dd><dt><span class="term"><tt class="option">-subfps <em class="replaceable"><code>RYCHLOST</code></em></tt></span></dt><dd><p>
    Nastavuje rychlost ve snímcích/sek titulkového souboru (desetinné číslo).
    </p></dd><dt><span class="term"><tt class="option">-subpos <em class="replaceable"><code>0-100</code></em></tt></span></dt><dd><p>
    Nastavuje pozici titulků.
    </p></dd></dl></div><p>
Pokud se vám zvětšuje rozdíl mezi filmem a titulky, při použití
titulkového souboru formátu MicroDVD, nejspíš se snímková rychlost
titulků a filmu liší. Poznamenejme, že MicroDVD formát používá
pro časování absolutní čísla snímků, ale není v něm informace
o snímkové rychlosti, a proto byste měli s tímto formátem používat volbu
<tt class="option">-subfps</tt>. Chcete-li tento problém vyřešit trvale,
musíte manuálně převést snímkovou rychlost souboru s titulky.
<span class="application">MPlayer</span> může převod udělat za
vás:

</p><pre class="screen">
mplayer -dumpmicrodvdsub -fps <em class="replaceable"><code>fps_titulků</code></em> -subfps <em class="replaceable"><code>avi_fps</code></em> \
    -sub <em class="replaceable"><code>soubor_s_titulky</code></em> <em class="replaceable"><code>dummy.avi</code></em>
</pre><p>
</p><p>
O DVD titulcích si přečtěte v sekci <a class="link" href="#dvd" title="4.2. Přehrávání DVD">DVD</a>.
</p></div><div class="sect1" title="3.3. Ovládání"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="control"></a>3.3. Ovládání</h2></div></div></div><p>
<span class="application">MPlayer</span> má plně konfigurovatelnou, příkazy řízenou,
ovládací vrstvu, která vám umožní ovládat <span class="application">MPlayer</span>
pomocí klávesnice, myši, joysticku nebo dálkového ovládače (používající LIRC).
Úplný seznam ovládacích prvků na klávesnici naleznete v man stránce.
</p><div class="sect2" title="3.3.1. Konfigurace ovládání"><div class="titlepage"><div><div><h3 class="title"><a name="ctrl-cfg"></a>3.3.1. Konfigurace ovládání</h3></div></div></div><p>
<span class="application">MPlayer</span> umožňuje přiřadit jakoukoli klávesu jakémukoli
příkazu <span class="application">MPlayer</span>u pomocí jednoduchého konfiguračního
souboru.
Syntaxe sestává z názvu klávesy následovaného příkazem. Výchozí umístění
konfiguračního souboru je
<tt class="filename">$HOME/.mplayer/input.conf</tt> ale můžete jej potlačit použitím
volby <tt class="option">-input <em class="replaceable"><code>konfig</code></em></tt>
(relativní cesty jsou vztaženy k <tt class="filename">$HOME/.mplayer</tt>).
</p><p>
Úplný seznam podporovaných jmen kláves dostanete příkazem
<span class="command"><strong>mplayer -input keylist</strong></span>
a úplný seznam dostupných příkazů příkazem
<span class="command"><strong>mplayer -input cmdlist</strong></span>.
</p><div class="example"><a name="input_control_file"></a><p class="title"><b>Příklad 3.1. Jednoduchý vstupní ovládací soubor</b></p><div class="example-contents"><pre class="programlisting">
##
## Vstupní soubor ovládání MPlayeru
##

RIGHT seek +10
LEFT seek -10
- audio_delay 0.100
+ audio_delay -0.100
q quit
&gt; pt_step 1
&lt; pt_step -1
ENTER pt_step 1 1</pre></div></div><br class="example-break"></div><div class="sect2" title="3.3.2. Ovládání z LIRC"><div class="titlepage"><div><div><h3 class="title"><a name="lirc"></a>3.3.2. Ovládání z LIRC</h3></div></div></div><p>
Linux Infrared Remote Control – použijte jednoduše vyrobitelný doma udělaný
IR-přijímač,
(téměř) libovolný dálkový ovládač a ovládejte jím svůj Linux!
Více se o tom dovíte na <a class="ulink" href="http://www.lirc.org" target="_top">domácí stránce LIRC</a>.
</p><p>
Pokud máte nainstalován balíček LIRC, <tt class="filename">configure</tt> jej zdetekuje.
Pokud vše dopadne dobře, <span class="application">MPlayer</span> při startu
vypíše "<code class="systemitem">Nastavuji podporu LIRC...</code>".
Pokud dojde k chybě, oznámí vám to. Pokud nevypíše žádnou zprávu o LIRC,
pak pro něj není podpora zakompilována. To je vše :-)
</p><p>
Jméno spustitelného souboru <span class="application">MPlayer</span>u je - překvapení -
<tt class="filename">mplayer</tt>. Můžete použít jakýkoli příkaz
<span class="application">MPlayer</span>u a dokonce i více než jeden, pokud je oddělíte
znakem <code class="literal">\n</code>.
Nezapomeňte zapnout opakovací (repeat) příznak v <tt class="filename">.lircrc</tt> tam,
kde to dává smysl (vyhledávání, hlasitost, atd.).
Zde je výňatek z demonstračního
<tt class="filename">.lircrc</tt>:
</p><pre class="programlisting">
begin
     button = VOLUME_PLUS
     prog = mplayer
     config = volume 1
     repeat = 1
end

begin
    button = VOLUME_MINUS
    prog = mplayer
    config = volume -1
    repeat = 1
end

begin
    button = CD_PLAY
    prog = mplayer
    config = pause
end

begin
    button = CD_STOP
    prog = mplayer
    config = seek 0 1\npause
end</pre><p>
Pokud se vám nelíbí standardní umístění lirc-config souboru
(<tt class="filename">~/.lircrc</tt>) použijte volbu <tt class="option">-lircconf
<em class="replaceable"><code>soubor</code></em></tt> k určení jiného souboru.
</p></div><div class="sect2" title="3.3.3. Závislý režim"><div class="titlepage"><div><div><h3 class="title"><a name="slave-mode"></a>3.3.3. Závislý režim</h3></div></div></div><p>
Závislý režim vám umožňuje vytvořit jednoduché ovládací panely (frontendy)
<span class="application">MPlayer</span>u. Pokud je <span class="application">MPlayer</span>
spuštěn s volbou <tt class="option">-slave</tt>, pak bude číst příkazy oddělené novým
řádkem (\n) ze standardního vstupu.
Příkazy jsou dokumentovány v souboru
<a class="ulink" href="../../tech/slave.txt" target="_top">slave.txt</a>.
</p></div></div><div class="sect1" title="3.4. Přehrávání datových proudů ze sítě nebo rour"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="streaming"></a>3.4. Přehrávání datových proudů ze sítě nebo rour</h2></div></div></div><p>
<span class="application">MPlayer</span> umí přehrávat soubory ze sítě s použitím protokolu
HTTP, FTP, MMS nebo RTSP/RTP.
</p><p>
Přehrávání pracuje jednoduše tak, že uvedete URL na příkazovém řádku.
<span class="application">MPlayer</span> ctí systémovou proměnnou <code class="envar">http_proxy</code>
a použije proxy pokud je k dispozici. Proxy může být rovněž vynucena:
</p><pre class="screen">
mplayer <em class="replaceable"><code>http_proxy://proxy.micorsops.com:3128/http://micorsops.com:80/stream.asf</code></em>
</pre><p>
</p><p>
<span class="application">MPlayer</span> umí číst ze std. vstupu
(<span class="emphasis"><em>ne</em></span> z pojmenovaných rour). To může být například použito
pro přehrávání z FTP:
</p><pre class="screen">
wget <em class="replaceable"><code>ftp://micorsops.com/something.avi</code></em> -O - | mplayer -
</pre><p>
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Také doporučujeme zapnout <tt class="option">-cache</tt> při přehrávání
ze sítě:
</p><pre class="screen">
wget <em class="replaceable"><code>ftp://micorsops.com/something.avi</code></em> -O - | mplayer -cache 8192 -
</pre><p>
</p></div><div class="sect2" title="3.4.1. Uložení proudového obsahu"><div class="titlepage"><div><div><h3 class="title"><a name="streaming-save"></a>3.4.1. Uložení proudového obsahu</h3></div></div></div><p>
Jakmile jste přiměli <span class="application">MPlayer</span> přehrát
váš oblíbený internetový proud, můžete použít volbu
<tt class="option">-dumpstream</tt> k uložení datového proudu do souboru.
For example:
</p><pre class="screen">
mplayer <em class="replaceable"><code>http://217.71.208.37:8006</code></em> -dumpstream -dumpfile <em class="replaceable"><code>proud.asf</code></em>
</pre><p>
uloží proudové video z
<em class="replaceable"><code>http://217.71.208.37:8006</code></em> do
<em class="replaceable"><code>proud.asf</code></em>.
Pracovat to bude se všemi <span class="application">MPlayer</span>em podporovanými
protokoly, jako MMS, RTSP, a tak dále.
</p></div></div><div class="sect1" title="3.5. Seznamy editačních zásahů (EDL)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edl"></a>3.5. Seznamy editačních zásahů (EDL)</h2></div></div></div><p>
Systém seznamů editačních zásahů (EDL) umožňuje automaticky vynechat nebo vypnout
zvuk v částech videa při přehrávání, což je zajišťováno pro každý film zvláštním
EDL konfiguračním souborem.
</p><p>
Toho se dá využít pro ty, kdo chtějí sledovat film v "rodinném" režimu.
Můžete vystříhat veškeré násilí, nechutnosti, Jar-Jar Binkse .. z filmu
podle svých vlastních osobních preferencí. Mimoto jsou zde i jiná využití,
jako je automatické vystřihávání reklam z videa které sleduješ.
</p><p>
Formát EDL souboru je poměrně kostrbatý. Každý příkaz je na samostatném
řádku a označuje co dělat (vystřihnout/ztišit) a kdy to dělat
(pomocí ukazatelů v sekundách).
</p><div class="sect2" title="3.5.1. Použití EDL souboru"><div class="titlepage"><div><div><h3 class="title"><a name="edl_using"></a>3.5.1. Použití EDL souboru</h3></div></div></div><p>
Vložte volbu <tt class="option">-edl &lt;soubor&gt;</tt> při spouštění
<span class="application">MPlayer</span>, se jménem EDL souboru, který chcete použít
na video.
</p></div><div class="sect2" title="3.5.2. Vytvoření EDL souboru"><div class="titlepage"><div><div><h3 class="title"><a name="edl_making"></a>3.5.2. Vytvoření EDL souboru</h3></div></div></div><p>
Současný formát EDL souboru je:
</p><pre class="programlisting">[počáteční sekunda] [koncová sekunda] [akce]</pre><p>
Kde jsou sekundy desetinnými čísly a akce je buď
<code class="literal">0</code> pro vynechání nebo <code class="literal">1</code> pro vypnutí zvuku.
Příklad:
</p><pre class="programlisting">
5.3   7.1    0
15    16.7   1
420   422    0
</pre><p>
To vynechá část videa mezi sekundami 5.3 a 7.1, pak vypne zvuk na
15 sekundě, zapne jej na 16.7 sekundy a vynechá část videa mezi sekundami 420 a 422.
Tyto akce budou provedeny jakmile časovač přehrávání dosáhne hodnoty zadané
v souboru.
</p><p>
Pro vytvoření EDL souboru se kterým budete moci začít, použijte volbu
<tt class="option">-edlout &lt;soubor&gt;</tt>. Během přehrávání jen stiskněte
<span class="keycap"><b>i</b></span> pro označení začátku a konce bloku. Pro vyznačený čas
bude do souboru zapsán odpovídající záznam. Můžete se pak vrátit a doladit
vygenerovaný EDL soubor, stejně jako změnit výchozí akci, což je vystřižení
vyznačených bloků.
</p></div></div><div class="sect1" title="3.6. Pokročilé audio"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="advaudio"></a>3.6. Pokročilé audio</h2></div></div></div><div class="sect2" title="3.6.1. Surround/Vícekanálové přehrávání"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-surround"></a>3.6.1. Surround/Vícekanálové přehrávání</h3></div></div></div><div class="sect3" title="3.6.1.1. DVD"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-DVD"></a>3.6.1.1. DVD</h4></div></div></div><p>
Většina DVD a mnoho jiných souborů obsahuje surround zvuk.
<span class="application">MPlayer</span> podporuje přehrávání přehrávání surround,
ale ve výchozím nastavení jej nezapíná, jelikož stereo vybavení je mnohem
častější. Pro přehrávání souboru, který má více než dvoukanálový zvuk použijte
volbu <tt class="option">-channels</tt>.
Například pro přehrání DVD s 5.1 zvukem:
</p><pre class="screen">mplayer dvd://1 -channels 6</pre><p>
Poznamenejme, že ačkoli se jmenuje "5.1", ve skutečnosti má šest kanálů.
Pokud máte surround zvukové vybavení, můžete si přidat volbu
<tt class="option">channels</tt> do svého konfiguračního souboru
<span class="application">MPlayer</span>u <tt class="filename">~/.mplayer/config</tt>.
Například pro použití čtyřkanálového přehrávání zvuku jako výchozí, přidejte
následující řádek:
</p><pre class="programlisting">channels=4</pre><p>
<span class="application">MPlayer</span> pak poskytuje zvuk ve čtyřech kanálech,
pokud jsou všechny čtyři kanály k dispozici.
</p></div><div class="sect3" title="3.6.1.2. Přehrávání stereo souborů do čtyřech reproduktorů"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-stereoinfour"></a>3.6.1.2. Přehrávání stereo souborů do čtyřech reproduktorů</h4></div></div></div><p>
<span class="application">MPlayer</span> ve výchozím nastavení neduplikuje žádné
kanály a nedělá to ani většina audio ovladačů. Pokud to chcete udělat
ručně:
</p><pre class="screen">mplayer <em class="replaceable"><code>soubor</code></em> -af channels=2:2:0:1:0:0</pre><p>
Vysvětlení naleznete v sekci
<a class="link" href="#advaudio-channels-copying" title="3.6.2.3. Kopírování/přesun kanálů">kopírování kanálů</a>.
</p></div><div class="sect3" title="3.6.1.3. AC–3/DTS Passthrough"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-passthrough"></a>3.6.1.3. AC–3/DTS Passthrough</h4></div></div></div><p>
DVD mají obvykle surround zvuk enkódovaný ve formátu AC–3 (Dolby Digital) nebo
DTS (Digital Theater System). Některá moderní zařízení jsou schopna dekódovat
tyto formáty interně. <span class="application">MPlayer</span> lze nakonfigurovat
tak, aby přenesl zvuková data bez dekódování. To bude fungovat pouze pokud máte
S/PDIF (Sony/Philips Digital Interface) jack ve zvukové kartě.
</p><p>
Pokud vaše zařízení umí dekódovat jak AC–3, tak DTS, můžete bezpečně zapnout
passthrough pro oba formáty. Jinak zapněte passthrough pouze pro formát, který
vaše zařízení podporuje.
</p><div class="itemizedlist" title="Zapnutí passthrough z příkazového řádku:"><p class="title"><b>Zapnutí passthrough z příkazového řádku:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Jen pro AC–3 použijte <tt class="option">-ac hwac3</tt>
</p></li><li class="listitem"><p>
  Jen pro DTS použijte <tt class="option">-ac hwdts</tt>
</p></li><li class="listitem"><p>
  Pro oba (AC–3 i DTS) použijte <tt class="option">-afm hwac3</tt>
</p></li></ul></div><div class="itemizedlist" title="Zapnutí passthrough v konfiguračním souboru MPlayeru:"><p class="title"><b>Zapnutí passthrough v konfiguračním souboru
  <span class="application">MPlayer</span>u: </b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Jen pro AC–3 použijte <tt class="option">ac=hwac3,</tt>
</p></li><li class="listitem"><p>
  Jen pro DTS použijte <tt class="option">ac=hwdts,</tt>
</p></li><li class="listitem"><p>
  Pro oba (AC–3 i DTS) použijte <tt class="option">afm=hwac3</tt>
</p></li></ul></div><p>
Povšimněte si čárky (",") na konci
<tt class="option">ac=hwac3,</tt> a <tt class="option">ac=hwdts,</tt>. To umožní
<span class="application">MPlayer</span>u použít normální kodek, když přehrávaný
soubor nemá AC–3 nebo DTS zvuk. Volba <tt class="option">afm=hwac3</tt> nevyžaduje
čárku; <span class="application">MPlayer</span> se zařídí podle potřeby automaticky,
pokud je zvolena rodina audio kodeků.
</p></div><div class="sect3" title="3.6.1.4. Maticově enkódovaný zvuk"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-matrix"></a>3.6.1.4. Maticově enkódovaný zvuk</h4></div></div></div><p>
<span class="emphasis"><em>***TODO***</em></span>
</p><p>
Tato sekce musí být teprve napsaná a nemůže být dokončena dokud nám někdo
nepošle vzorkové soubory pro testování. Pokud máte nějaké maticově enkódované
zvukové soubory, víte, kde je lze najít, nebo máte jakoukoli informaci, která
by mohla pomoci, pošlete prosím zprávu do konference
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-docs" target="_top">MPlayer-DOCS</a>.
Do předmětu vložte "[matrix-encoded audio]".
</p><p>
Pokud nepřijdou žádné soubory nebo informace, tato sekce bude odstraněna.
</p><p>
Dobré odkazy:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <a class="ulink" href="http://electronics.howstuffworks.com/surround-sound5.htm" target="_top">http://electronics.howstuffworks.com/surround-sound5.htm</a>
</p></li><li class="listitem"><p>
  <a class="ulink" href="http://www.extremetech.com/article2/0,1697,1016875,00.asp" target="_top">http://www.extremetech.com/article2/0,1697,1016875,00.asp</a>
</p></li></ul></div><p>
</p></div><div class="sect3" title="3.6.1.5. Surround emulace ve sluchátkách"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-hrtf"></a>3.6.1.5. Surround emulace ve sluchátkách</h4></div></div></div><p>
<span class="application">MPlayer</span> obsahuje HRTF (Head Related Transfer
Function) filtr založený na
<a class="ulink" href="http://sound.media.mit.edu/KEMAR.html" target="_top">projektu MIT</a>,
kde jsou měření vzata z mikrofonů na umělé lidské hlavě.
</p><p>
Ačkoli není možné přesně imitovat surround systém,
<span class="application">MPlayer</span>ův HRTF filtr produkuje prostorově mnohem
prokreslenější zvuk ve 2-kanálových sluchátkách. Obvyklé míchání jednoduše
kombinuje všechny kanály do dvou; krom kombinace kanálů, <tt class="option">hrtf</tt>
generuje slabá echa, poněkud zvětšuje oddělení stereo kanálů a mění hlasitost
některých kmitočtů. Jestli HRTF zní lépe může záviset na zdrojovém zvuku a
osobním vkusu, ale určitě stojí za zkoušku.
</p><p>
Pro přehrání DVD s HRTF:
</p><pre class="screen">mplayer dvd://1 -channels 6 -af hrtf</pre><p>
</p><p>
<tt class="option">hrtf</tt> pracuje dobře pouze s 5 nebo 6 kanály.
<tt class="option">hrtf</tt> také vyžaduje zvuk 48 kHz. DVD audio již je 48 kHz, ale
pokud máte soubor s odlišným vzorkovacím kmitočtem, který chcete přehrávat
pomocí <tt class="option">hrtf</tt>, musíte jej převzorkovat:
</p><pre class="screen">
mplayer <em class="replaceable"><code>soubor</code></em> -channels 6 -af resample=48000,hrtf
</pre><p>
</p></div><div class="sect3" title="3.6.1.6. Potíže"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-surround-troubleshooting"></a>3.6.1.6. Potíže</h4></div></div></div><p>
Pokud neslyšíte ze surround kanálů žádný zvuk, ověřte si nastavení směšovače
pomocí programu jako je <span class="application">alsamixer</span>;
audio výstupy jsou často vypnuty a nastaveny na nulovou hlasitost jako výchozí.
</p></div></div><div class="sect2" title="3.6.2. Manipulace s kanály"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-channels"></a>3.6.2. Manipulace s kanály</h3></div></div></div><div class="sect3" title="3.6.2.1. Obecné informace"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-general"></a>3.6.2.1. Obecné informace</h4></div></div></div><p>
Naneštěstí neexistuje standard pro řazení kanálů. Následující řazení jsou
používaná v AC–3 a jsou poměrně typická; zkuste je a uvidíte, zda tomu váš zdroj
odpovídá. Kanály jsou číslovány od 0.

</p><div class="orderedlist" title="mono"><p class="title"><b>mono</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>střed</p></li></ol></div><p>

</p><div class="orderedlist" title="stereo"><p class="title"><b>stereo</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>levý</p></li><li class="listitem"><p>pravý</p></li></ol></div><p>

</p><div class="orderedlist" title="kvadrofonní"><p class="title"><b>kvadrofonní</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>levý čelní</p></li><li class="listitem"><p>pravý čelní</p></li><li class="listitem"><p>levý zadní</p></li><li class="listitem"><p>pravý zadní</p></li></ol></div><p>

</p><div class="orderedlist" title="surround 4.0"><p class="title"><b>surround 4.0</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>levý čelní</p></li><li class="listitem"><p>pravý čelní</p></li><li class="listitem"><p>středový zadní</p></li><li class="listitem"><p>středový čelní</p></li></ol></div><p>

</p><div class="orderedlist" title="surround 5.0"><p class="title"><b>surround 5.0</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>levý čelní</p></li><li class="listitem"><p>pravý čelní</p></li><li class="listitem"><p>levý zadní</p></li><li class="listitem"><p>pravý zadní</p></li><li class="listitem"><p>středový čelní</p></li></ol></div><p>

</p><div class="orderedlist" title="surround 5.1"><p class="title"><b>surround 5.1</b></p><ol class="orderedlist" type="1" compact><li class="listitem" value="0"><p>levý čelní</p></li><li class="listitem"><p>pravý čelní</p></li><li class="listitem"><p>levý zadní</p></li><li class="listitem"><p>pravý zadní</p></li><li class="listitem"><p>středový čelní</p></li><li class="listitem"><p>subwoofer</p></li></ol></div><p>
</p><p>
Volba <tt class="option">-channels</tt> se používá pro požadavek na počet kanálů z
dekodéru zvuku. Některé audio kodeky používají počet zadaných kanálů pro
rozhodování, zda je nutné podmixovat zdroj. Poznamenejme, že to ne vždy
ovlivní počet výstupních kanálů. Například použití
<tt class="option">-channels 4</tt> pro přehrání stereo MP3 souboru povede ke
2-kanálovému výstupu, jelikož MP3 kodek neprodukuje extra kanály.
</p><p>
Pro vytvoření nebo odstranění kanálů slouží zvukový filtr
<tt class="option">channels</tt>, který je rovněž vhodný k ovládání počtu zvukových
kanálů posílaných do zvukové karty. Viz následující sekce pro více informací
o manipulacích s kanály.
</p></div><div class="sect3" title="3.6.2.2. Přehrávání mono na dvou reproduktorech"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-mono"></a>3.6.2.2. Přehrávání mono na dvou reproduktorech</h4></div></div></div><p>
Mono zní mnohem lépe, když je přehráván dvěma reproduktory – zvlášť při
použití sluchátek. Audio soubory, které ve skutečnosti mají jeden kanál,
jsou automaticky přehrávány dvěma reproduktory; naneštěstí je většina
mono souborů ve skutečnosti enkódována jako stereo s jedním kanálem utlumeným.
Nejjednodušší a nejblbuvzdornější způsob, jak přinutit oba reproduktory
poskytovat stejný zvuk je filtr <tt class="option">extrastereo</tt>:
</p><pre class="screen">mplayer <em class="replaceable"><code>soubor</code></em> -af extrastereo=0</pre><p>
</p><p>
To zprůměruje oba kanály, takže budou mít poloviční hlasitost originálu.
Další sekce přinášejí příklady dalších možností, jak to udělat bez snížení
hlasitosti, ale ty jsou mnohem komplexnější a vyžadují odlišné volby
v závislosti na tom, který kanál ponecháte. Pokud potřebujete jen upravit
hlasitost, může být lehčí experimentovat s filtrem <tt class="option">volume</tt>
a najít vhodnou hodnotu. Například:
</p><pre class="screen">
mplayer <em class="replaceable"><code>soubor</code></em> -af extrastereo=0,volume=5
</pre><p>
</p></div><div class="sect3" title="3.6.2.3. Kopírování/přesun kanálů"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-copying"></a>3.6.2.3. Kopírování/přesun kanálů</h4></div></div></div><p>
Filtr <tt class="option">channels</tt> umí přesunout jakýkoli nebo všechny kanály.
Nastavení všech parametrů filtru <tt class="option">channels</tt> může být
komplikované a vyžaduje pozornost.

</p><div class="orderedlist"><ol class="orderedlist" type="1" compact><li class="listitem"><p>
  Rozhodněte, kolik výstupních kanálů potřebujete. To je první parametr.
</p></li><li class="listitem"><p>
  Spočítejte, kolik přesunů kanálů budete dělat. To je druhý parametr. Každý
  kanál může být přesunut naráz do několika různých kanálů, ale pamatujte, že
  pokud je kanál přesunut (dokonce i jen do jednoho cíle), bude zdrojový kanál
  prázdný dokud do něj nepřesunete jiný kanál. Chcete-li kanál zkopírovat,
  aby zdroj zůstal stejný, jednoduše přesuňte kanál do obou, cíle i zdroje.
  Například:
</p><pre class="programlisting">
channel 2 --&gt; channel 3
channel 2 --&gt; channel 2</pre><p>
</p></li><li class="listitem"><p>
  Zapište kopie kanálů jako dvojici parametrů. Pamatujte, že první kanál je 0,
  druhý 1 atd. Na pořadí parametrů nezáleží, pokud jsou správně sdruženy do
  párů <em class="replaceable"><code>zdroj:cíl</code></em>.
</p></li></ol></div><p>
</p><h5><a name="id2543033"></a>Příklad: jeden kanál ve dvou reproduktorech</h5><p>
Zde máte příklad jiného způsobu, jak hrát jeden kanál v obou reproduktorech.
Pro náš účel předpokládejme, že by měl být přehráván levý kanál a zahozen pravý.
Následujeme výše uvedený postup:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Abychom měli výstupní kanál pro každý z obou reproduktorů, musí být první
  parametr "2".
</p></li><li class="listitem"><p>
  Levý kanál musí být přesunut do pravého a také sám do sebe, aby nezůstal
  prázdný. To jsou celkem dva přesuny, takže druhý parametr bude také "2".
</p></li><li class="listitem"><p>
  Pro přesun levého kanálu (channel 0) do pravého kanálu (channel 1) bude dvojice
  parametrů "0:1" a "0:0" přesune levý kanál na sebe.
</p></li></ol></div><p>
Vše dohromady pak dá:
</p><pre class="screen">
mplayer <em class="replaceable"><code>soubor</code></em> -af channels=2:2:0:1:0:0
</pre><p>
</p><p>
Výhoda tohoto postupu před <tt class="option">extrastereo</tt> je v tom, že
je hlasitost každého výstupního kanálu stejná jako hlasitost zdrojového
kanálu. Nevýhodou je to, že parametry musí být změněny na "2:2:1:0:1:1",
pokud je požadovaný zvuk v pravém kanálu. Také je těžší si je pamatovat
a napsat.
</p><h5><a name="id2543111"></a>Příklad: levý kanál v obou reproduktorech – zkratka</h5><p>
Ve skutečnosti je mnohem jednodušší způsob použití filtru
<tt class="option">channels</tt> pro přehrávání levého kanálu v obou reproduktorech:
</p><pre class="screen">mplayer <em class="replaceable"><code>soubor</code></em> -af channels=1</pre><p>
Druhý kanál je zahozen a bez dalších parametrů je ponechán jediný zbývající
kanál. Ovladače zvukových karet hrají jednokanálový zvuk automaticky v obou
reproduktorech. To pracuje pouze pokud je požadovaný levý kanál.
</p><h5><a name="id2545558"></a>Příklad: kopírování čelních kanálů do zadních</h5><p>
Dalším běžným úkonem je duplikace čelních kanálů a jejich přehrávání v zadních
reproduktorech kvadrofonní sestavy.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Zde by mely být čtyři výstupní kanály. První parametr je "4".
</p></li><li class="listitem"><p>
  Oba přední kanály musí být přesunuty do odpovídajících zadních kanálů a
  také na sebe. To jsou čtyři přesuny, takže druhý parametr bude "4".
</p></li><li class="listitem"><p>
  Levý čelní (channel 0) přesuneme do levého zadního (channel 2): "0:2".
  Levý čelní musíme rovněž přesunout do sama sebe: "0:0". Pravý přední (channel
  1) je přesunut do pravého zadního (channel 3): "1:3" a také do sebe: "1:1".
</p></li></ol></div><p>
Po zkombinování všech nastavení dostaneme:
</p><pre class="screen">
mplayer <em class="replaceable"><code>soubor</code></em> -af channels=4:4:0:2:0:0:1:3:1:1
</pre><p>
</p></div><div class="sect3" title="3.6.2.4. Mixování kanálů"><div class="titlepage"><div><div><h4 class="title"><a name="advaudio-channels-mixing"></a>3.6.2.4. Mixování kanálů</h4></div></div></div><p>
Filtr <tt class="option">pan</tt> umí mixovat kanály podle požadavků uživatele.
Umožňuje vše co filtr <tt class="option">channels</tt> a ještě víc. Naneštěstí jsou
jeho parametry ještě komplikovanější.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Rozhodněte, s kolika kanály budeme pracovat. To můžete nastavit pomocí volby
  <tt class="option">-channels</tt> a/nebo <tt class="option">-af channels</tt>. Později se
  v příkladech dozvíte, kdy použít kterou.
</p></li><li class="listitem"><p>
  Rozhodněte, kolik kanálů propustíme do <tt class="option">pan</tt> (ostatní dekódované
  kanály jsou zahozeny). To je první parametr a také ovládá, kolik kanálů bude mít
  výstup.
</p></li><li class="listitem"><p>
  Zbývající parametry nastavují, kolik z daného kanálu bude namixováno do každého
  dalšího kanálu. Toto je ta komplikovaná část. Pro usnadnění si rozdělte
  parametry do několika skupin, jednu pro každý výstupní kanál. Každý parametr
  uvnitř skupiny odpovídá vstupnímu kanálu. Číslo, které nastavíte bude procento
  vstupního kanálu, které bude namixováno do výstupního kanálu.
  </p><p>
  <tt class="option">pan</tt> akceptuje hodnoty od 0 do 512, což odpovídá 0% až 51200%
  původní hlasitosti. Buďte opatrní, pokud používáte hodnoty větší než 1. Nejen,
  že vám to dá velmi vysokou hlasitost, ale pokud překročíte dynamický rozsah
  své zvukové karty, můžete uslyšet rány a praskání. Pokud chcete, můžete
  za <tt class="option">pan</tt> přidat <tt class="option">,volume</tt> pro zapnutí omezení,
  ale i tak je nejlepší udržet hodnoty <tt class="option">pan</tt> dostatečně nízko,
  aby omezování nebylo potřeba.
  </p></li></ol></div><p>
</p><h5><a name="id2545726"></a>Příklad: jeden kanál do dvou reproduktorů</h5><p>
Zde máte další příklad pro přehrávání levého kanálu ve dvou reproduktorech.
Následujme výše uvedené kroky:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Na výstupu <tt class="option">pan</tt> by měly být dva kanály, takže první
  parametr je "2".
</p></li><li class="listitem"><p>
  Jelikož máme dva vstupní kanály, budeme mít dvě sady parametrů.
  Jelikož máme rovněž dva výstupní kanály, budeme mít dva parametry v každé
  sadě. Levý kanál ze souboru by měl jít s plnou hlasitostí do nového levého
  i pravého kanálu.
  Takže první sada parametrů je "1:1".
  Pravý kanál by měl být zahozen, takže druhá sada bude "0:0".
  Hodnoty 0 na konci je možné vynechat, ale pro snadnější pochopení
  je zde necháváme.
</p></li></ol></div><p>
Dáme-li vše dohromady, dostaneme:
</p><pre class="screen">mplayer <em class="replaceable"><code>soubor</code></em> -af pan=2:1:1:0:0</pre><p>
Pokud chceme místo levého kanálu pravý, budou parametry
<tt class="option">pan</tt> tyto: "2:0:0:1:1".
</p><h5><a name="id2545786"></a>Příklad: levý kanál ve dvou reproduktorech zkráceně</h5><p>
Stejně jako s <tt class="option">channels</tt> můžeme použít zkrácený zápis, který
funguje pouze pro levý kanál:
</p><pre class="screen">mplayer <em class="replaceable"><code>soubor</code></em> -af pan=1:1</pre><p>
Jelikož má <tt class="option">pan</tt> pouze jeden vstupní kanál (druhý je zahozen),
máme pouze jednu sadu s jedním parametrem, takže tento jediný kanál dává
100% sám ze sebe.
</p><h5><a name="id2545818"></a>Příklad: podmixování 6-kanálového PCM</h5><p>
<span class="application">MPlayer</span>ův dekodér 6-kanálového PCM neumí podmixování.
Máme však možnost k tomu použít <tt class="option">pan</tt>:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Počet výstupních kanálů je 2, takže první parametr je "2".
</p></li><li class="listitem"><p>
  Při šesti vstupních kanálech budeme mít šest sad parametrů. Jelikož nás
  však zajímá pouze výstup z prvních dvou kanálů, vystačíme s pouhými dvěma
  sadami; zbývající čtyři sady můžeme vynechat. Pozor na to, že ne všechny
  vícekanálové zvukové soubory mají stejné řazení kanálů! Tento příklad
  demonstruje podmixování souboru se stejným řazením kanálů jako má AC–3 5.1:
  </p><pre class="programlisting">
0 - levý přední
1 - pravý přední
2 - levý zadní
3 - pravý zadní
4 - středový přední
5 - subwoofer</pre><p>
  První sada parametrů je výčtem procentních hodnot hlasitostí v daném pořadí,
  kterou by měl dostat každý výstupní kanál z levého předního kanálu: "1:0".
  Pravý přední kanál by měl jít do pravého výstupu: "0:1".
  Stejně tak zadní kanály: "1:0" a "0:1".
  Středový kanál jde do obou výstupních kanálů s poloviční hlasitostí:
  "0.5:0.5" a subwoofer jde do obou s plnou hlasitostí: "1:1".
</p></li></ol></div><p>
Dáme-li vše dohromady, dostaneme:
</p><pre class="screen">
mplayer <em class="replaceable"><code>6-kanálové.wav</code></em> -af pan=2:1:0:0:1:1:0:0:1:0.5:0.5:1:1
</pre><p>
Uvedené procentní hodnoty jsou pouhým příkladem. Upravte si je podle vlastního
uvážení.
</p><h5><a name="id2545900"></a>Příklad: Přehrávání 5.1 zvuku na velkých reprobednách bez subwooferu</h5><p>
Pokud máte robustní čelní reprobedny, nemusíte utrácet za nákup subwooferu
pro kompletní 5.1 zvukový systém. Použijete-li volbu
<tt class="option">-channels 5</tt> pro požadavek, aby liba52 dekódovala 5.1 zvuk
do 5.0, bude zkrátka kanál pro subwoofer zahozen. Pokud jeho obsah chcete
roznést do ostatních kanálů, musíte jej podmixovat ručně pomocí
<tt class="option">pan</tt>:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Jelikož se <tt class="option">pan</tt> potřebuje dostat ke všem šesti kanálům, nastavte
  <tt class="option">-channels 6</tt>, takže je liba52 dekóduje všechny.
</p></li><li class="listitem"><p>
  Filtr <tt class="option">pan</tt> produkuje pouze pět kanálů, takže první parametr je 5.
</p></li><li class="listitem"><p>
  Šest vstupních a pět výstupních kanálů znamená šest sad po pěti parametrech.
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
    Levý přední kanál půjde jen sám do sebe:
    "1:0:0:0:0"
  </p></li><li class="listitem"><p>
    Stejně tak pravý přední kanál:
    "0:1:0:0:0"
  </p></li><li class="listitem"><p>
    Taktéž levý zadní kanál:
    "0:0:1:0:0"
  </p></li><li class="listitem"><p>
    Rovněž pravý zadní kanál:
    "0:0:0:1:0"
  </p></li><li class="listitem"><p>
    Středový kanál jakbysmet:
    "0:0:0:0:1"
  </p></li><li class="listitem"><p>
    A nyní se musíme rozhodnout, co uděláme se subwooferem,
    například půlku do předního levého a půlku do předního pravého:
    "0.5:0.5:0:0:0"
  </p></li></ul></div><p>
</p></li></ol></div><p>
Zkombinujeme-li to dohromady, dostaneme:
</p><pre class="screen">
mplayer <em class="replaceable"><code>dvd://1</code></em> -channels 6 -af pan=5:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0.5:0.5:0:0:0
</pre><p>
</p></div></div><div class="sect2" title="3.6.3. Softwarové nastavení hlasitosti"><div class="titlepage"><div><div><h3 class="title"><a name="advaudio-volume"></a>3.6.3. Softwarové nastavení hlasitosti</h3></div></div></div><p>
Některé zvukové stopy jsou příliš tiché na to, aby mohly být pohodlně
poslouchány bez zesílení. To je problém, pokud váš zvukový systém neumožňuje
potřebné zesílení. Volba <tt class="option">-softvol</tt> poručí
<span class="application">MPlayer</span>u použití vestavěného směšovače. Pak můžete
použít klávesy pro nastavení hlasitosti (výchozí <span class="keycap"><b>9</b></span> a
<span class="keycap"><b>0</b></span>) pro dosažení mnohem vyšších úrovní hlasitosti.
Takto neobejdete směšovač vaší zvukové karty; <span class="application">MPlayer</span>
pouze zesílí signál před jeho odesláním do zvukové karty.
Následující příklad je dobrým startem:
</p><pre class="screen">
mplayer <em class="replaceable"><code>tichý-soubor</code></em> -softvol -softvol-max 300
</pre><p>
Volba <tt class="option">-softvol-max</tt> nastavuje maximální povolenou výstupní
hlasitost v procentech původní hlasitosti. Například,
<tt class="option">-softvol-max 200</tt> umožní nastavit hlasitost až na dvojnásobek
původní úrovně.
Je bezpečné nastavit vysoké hodnoty volbou
<tt class="option">-softvol-max</tt>; vyšší hlasitost se nepoužije, dokud nepoužijete
tlačítka nastavení hlasitosti. Jedinou nevýhodou velkých hodnot je to, že
jelikož <span class="application">MPlayer</span> nastavuje hlasitost o podíl
z maximální hlasitosti, nebudete mít tak jemný krok nastavení pomocí tlačítek.
Pokud potřebujete přesnější nastavování, použijte nižší hodnotu pro
<tt class="option">-softvol-max</tt> a/nebo nastavte
<tt class="option">-volstep 1</tt>.
</p><p>
Volba <tt class="option">-softvol</tt> pracuje tak, že ovládá zvukový filtr
<tt class="option">volume</tt>. Chcete-li přehrávat soubor od začátku při určité
hlasitosti, můžete nastavit <tt class="option">volume</tt> ručně:
</p><pre class="screen">mplayer <em class="replaceable"><code>tichý-soubor</code></em> -af volume=10</pre><p>
Takto přehrajete soubor se ziskem 10 decibelů. Při použití filtru
<tt class="option">volume</tt> buďte velmi opatrní. Pokud použijete příliš vysokou
hodnotu, můžete si poškodit sluch. Začněte s nízkou hodnotou a postupně
zvyšujte, až docílíte požadované hlasitosti. Při nastavení příliš vysokých
hodnot také hrozí, že <tt class="option">volume</tt> bude nucen ořezat signál, aby
předešel odeslání dat mimo dovolený rozsah do zvukové karty; to povede ke
zkreslení signálu.
</p></div></div></div><div class="chapter" title="Kapitola 4. Použití CD/DVD"><div class="titlepage"><div><div><h2 class="title"><a name="cd-dvd"></a>Kapitola 4. Použití CD/DVD</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#drives">4.1. CD/DVD mechaniky</a></span></dt><dd><dl><dt><span class="sect2"><a href="#drives_linux">4.1.1. Linux</a></span></dt><dt><span class="sect2"><a href="#drives_freebsd">4.1.2. FreeBSD</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dvd">4.2. Přehrávání DVD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#region_code">4.2.1. Kód regionu</a></span></dt></dl></dd><dt><span class="sect1"><a href="#vcd">4.3. Přehrávání VCD</a></span></dt></dl></div><div class="sect1" title="4.1. CD/DVD mechaniky"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="drives"></a>4.1. CD/DVD mechaniky</h2></div></div></div><p>
Moderní CD-ROM mechaniky dosahují velmi vysokých otáček a některé z nich
mohou pracovat i se sníženými otáčkami. Existuje několik důvodů, pro
které byste mohli chtít změnit rychlost CD-ROM mechaniky:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Byly zprávy o chybách čtení při vysokých rychlostech, zvláště u špatně
  vylisovaných CD-ROMů. Z těchto důvodů může snížení rychlosti působit
  jako prevence ztráty dat.
</p></li><li class="listitem"><p>
  Mnoho CD-ROM mechanik je nechutně hlučných, nižší rychlost může omezit
  tento hluk.
</p></li></ul></div><div class="sect2" title="4.1.1. Linux"><div class="titlepage"><div><div><h3 class="title"><a name="drives_linux"></a>4.1.1. Linux</h3></div></div></div><p>
Můžete snížit rychlost IDE CD-ROM mechanik pomocí <span class="command"><strong>hdparm</strong></span>,
<span class="command"><strong>setcd</strong></span> nebo <span class="command"><strong>cdctl</strong></span>. Pracuje to asi takto:
</p><pre class="screen">hdparm -E <em class="replaceable"><code>[rychlost]</code></em> <em class="replaceable"><code>[mechanika cdrom]</code></em></pre><p>
</p><pre class="screen">setcd -x <em class="replaceable"><code>[rychlost]</code></em> <em class="replaceable"><code>[mechanika cdrom]</code></em></pre><p>
</p><pre class="screen">cdctl -bS <em class="replaceable"><code>[rychlost]</code></em></pre><p>
</p><p>
Pokud používáte SCSI emulaci, budete muset předat tato nastavení do skutečného
IDE zařízení, nikoli emulovaného SCSI zařízení.
</p><p>
Pokud máte práva root-a, následující příkaz vám rovněž může pomoci:
</p><pre class="screen">echo file_readahead:2000000 &gt; /proc/ide/<em class="replaceable"><code>[mechanika cdrom]</code></em>/settings</pre><p>
</p><p>
To nastaví čtení napřed na 2MB, což pomůže při poškrábaných médiích.
Pokud ji však nastavíte příliš vysoko, bude mechanika stále zrychlovat a
zpomalovat, což výrazně sníží její výkon.
Doporučujeme vám rovněž vyladit vaši CD-ROM mechaniku pomocí <span class="command"><strong>hdparm</strong></span>:
</p><pre class="screen">hdparm -d1 -a8 -u1 <em class="replaceable"><code>[cdrom zařízení]</code></em></pre><p>
</p><p>
To zapne DMA přístup, čtení napřed a odmaskování IRQ (přečtěte si man stránku
programu <span class="command"><strong>hdparm</strong></span> pro podrobné vysvětlení).
</p><p>
Prostudujte si
„<tt class="filename">/proc/ide/<em class="replaceable"><code>(cdrom zařízení)</code></em>/settings</tt>“
pro jemné doladění vaší CD-ROM.
</p><p>
SCSI mechaniky nemají jednotný způsob pro nastavení těchto parametrů
(Znáte nějaký? Řekněte nám jej!). Existuje nástroj, který pracuje se
<a class="ulink" href="http://das.ist.org/~georg/" target="_top">SCSI mechanikami Plextor</a>.
</p></div><div class="sect2" title="4.1.2. FreeBSD"><div class="titlepage"><div><div><h3 class="title"><a name="drives_freebsd"></a>4.1.2. FreeBSD</h3></div></div></div><p>rychlost:
</p><pre class="screen">
cdcontrol [-f <em class="replaceable"><code>zařízení</code></em>] speed <em class="replaceable"><code>[rychlost]</code></em>
</pre><p>
</p><p>DMA:
</p><pre class="screen">
sysctl hw.ata.atapi_dma=1
</pre><p>
</p></div></div><div class="sect1" title="4.2. Přehrávání DVD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dvd"></a>4.2. Přehrávání DVD</h2></div></div></div><p>
Úplný seznam dostupných voleb naleznete v man stránce.
Syntaxe pro přehrání standardního DVD je následující:
</p><pre class="screen">
mplayer dvd://<em class="replaceable"><code>&lt;track&gt;</code></em> [-dvd-device <em class="replaceable"><code>&lt;DVD_zařízení&gt;</code></em>]
</pre><p>
</p><p>
Příklad:
</p><pre class="screen">mplayer dvd://1 -dvd-device /dev/hdc</pre><p>
</p><p>
Pokud jste kompilovali <span class="application">MPlayer</span> s podporou dvdnav,
je syntaxe stejná až na to, že musíte používat dvdnav:// místo dvd://.
</p><p>
Výchozím DVD zařízením je <tt class="filename">/dev/dvd</tt>. Pokud se vaše nastavení
liší, vytvořte symlink, nebo uveďte správné zařízení na příkazovém řádku
pomocí volby <tt class="option">-dvd-device</tt>.
</p><p>
<span class="application">MPlayer</span> používá <code class="systemitem">libdvdread</code> a
<code class="systemitem">libdvdcss</code> pro přehrávání a dekódování DVD. Tyto dvě
knihovny jsou obsaženy ve zdrojových kódech
<span class="application">MPlayer</span>u, nemusíte je tedy instalovat zvlášť.
Můžete rovněž použít systémové verze těchto knihoven, ale toto řešení
nedoporučujeme, protože může vést k chybám,
nekompatibilitě knihovny a nižší rychlosti.
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
V případě problémů s dekódováním DVD, zkuste vypnout supermount a podobná udělátka.
Některé RPC-2 mechaniky mohou rovněž vyžadovat nastavení region kódu.
</p></div><p title="Dekódování DVD"><b>Dekódování DVD. </b>
Dekódování DVD provádí <code class="systemitem">libdvdcss</code>. Metodu
můžete zvolit pomocí proměnné prostředí <code class="envar">DVDCSS_METHOD</code>,
detaIly viz manuálová stránka.
</p><div class="sect2" title="4.2.1. Kód regionu"><div class="titlepage"><div><div><h3 class="title"><a name="region_code"></a>4.2.1. Kód regionu</h3></div></div></div><p>
DVD mechaniky v současnosti přicházejí s nesmyslným omezením nazvaným
<a class="ulink" href="http://en.wikipedia.org/wiki/DVD_region_code" target="_top">kód regionu</a>.
To je způsob jak přinutit DVD mechaniku akceptovat pouze DVD vyrobené pro
jeden ze šesti různých regionů na které byl rozdělen svět. Jak si může skupina lidí
zasednout ke kulatému stolu, přijít s takovým nápadem a čekat, že se svět
21. století skloní před jejich vůlí je naprosto nepochopitelné
</p><p>
Mechaniky, které vynucují nastavení regionu poze softwarově jsou známy také jako
RPC-1 a ty, které to dělají v hardware jako RPC-2. Mechaniky RPC-2 umožňují změnu
kódu regionu pětkrát a pak zůstane pevný.
V Linuxu můžete použít nástroj
<a class="ulink" href="http://linvdr.org/projects/regionset/" target="_top">regionset</a>
pro nastavení kódu regionu vaší DVD mechaniky.
</p><p>
Naštěstí je možné konvertovat RPC-2 mechaniky na RPC-1 pomocí
upgrade firmware. Vyplňte modelové číslo vaší DVD mechaniky do svého oblíbeného
vyhledávače, nebo se podívejte do fóra a sekce download
<a class="ulink" href="http://www.rpc1.org/" target="_top">„Firmware stránek“</a>.
Ačkoli platí obvyklé „kazy“ upgradů fimware, zkušenosti se zbavením se
vynucování region kódů jsou obecně kladné.
</p></div></div><div class="sect1" title="4.3. Přehrávání VCD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vcd"></a>4.3. Přehrávání VCD</h2></div></div></div><p>
Úplný seznam dostupných voleb naleznete v man stránce. Syntaxe pro standardní
Video CD (VCD) je následující:
</p><pre class="screen">mplayer vcd://<em class="replaceable"><code>&lt;stopa&gt;</code></em> [-cdrom-device <em class="replaceable"><code>&lt;zařízení&gt;</code></em>]</pre><p>
Příklad:
</p><pre class="screen">mplayer vcd://2 -cdrom-device /dev/hdc</pre><p>
Výchozím VCD zařízením je <tt class="filename">/dev/cdrom</tt>. Pokud se vaše nastavení
liší, vytvořte symlink nebo uveďte správné zařízení na příkazovém řádku pomocí volby
<tt class="option">-cdrom-device</tt>.
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Minimálně SCSI CD-ROM mechaniky Plextor a Toshiba vykazují mizerný výkon
při čtení VCD. To proto, že CDROMREADRAW <code class="systemitem">ioctl</code>
není pro tyto mechaniky plně implementováno. Pokud máte zkušenosti se
SCSI programováním, prosíme
<a class="ulink" href="../../tech/patches.txt" target="_top">pomozte nám</a>
implementovat obecnou SCSI podporu pro VCD.
</p></div><p>
Mezitím můžete extrahovat data z VCD pomocí
<a class="ulink" href="http://ftp.ntut.edu.tw/ftp/OS/Linux/packages/X/viewers/readvcd/" target="_top">readvcd</a>
a výsledný soubor přehrát v <span class="application">MPlayer</span>u.
</p><p title="Struktura VCD"><b>Struktura VCD. </b>
Video CD (VCD) je tvořeno CD-ROM XA sektory, čili stopy CD-ROM mode 2
třída 1 a 2:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  První stopa je ve formátu mode 2 třída 2 což znamená, že používá L2
  korekci chyb. Stopa obsahuje souborový systém ISO-9660 s 2048
  bajty/sektor. Tento souborový systém obsahuje VCD metadata informace,
  spolu se statickými snímky často používanými v menu. MPEG segmenty menu
  mohou být rovněž uloženy v této první stopě, ale tyto MPEGy musí být
  rozsekány na série 150 sektorových chunků. Souborový systém ISO-9660
  může obsahovat další soubory, které nejsou potřeba pro operace
  s VCD.
</p></li><li class="listitem"><p>
  Druhá a ostatní stopy jsou všeobecně surovými MPEG (film) stopami
  s 2324 bajty/sektor, obsahující jeden MPEG PS datový paket na
  sektor. Ty jsou v mode 2 třída 1 formátu, takže obsahují více dat
  v každém sektoru za cenu omezení korekce chyb. Je rovněž možné mít
  CD-DA stopy na VCD za první stopou.
  V některých operačních systémech jsou triky, které umožňují zpřístupnit
  tyto ne-ISO-9660 stopy v systému souborů. V dalších operačních
  systémech jako GNU/Linux to není možné (zatím). Zde MPEG data
  <span class="bold"><strong>nemohou být připojena</strong></span>. Protože většina
  filmů je uložena uvnitř tohoto druhu stopy, měli byste nejprve zkusit
  <tt class="option">vcd://2</tt>.
</p></li><li class="listitem"><p>
  Existují také VCD disky bez první stopy (jediná stopa bez systému souborů).
  Můžete je přehrát, ale nemohou být namountovány.
</p></li><li class="listitem"><p>
  Definice standardu Video CD se nazývá
  Philips „White Book“ a není obecně přístupná online, ale musí být zakoupena
  od Philipsu. Podrobnější informace o Video CD můžete nalézt
  <a class="ulink" href="http://www.vcdimager.org/pub/vcdimager/manuals/0.7/vcdimager.html#SEC4" target="_top">v dokumentaci programu vcdimager</a>.
</p></li></ul></div><p title="Struktura VCD">
</p><p title="Pár slov o .DAT souborech"><b>Pár slov o .DAT souborech. </b>
Soubor veliký ~600 MB viditelný v první stopě připojeného VCD není
skutečným souborem! Je to takzvaná ISO gateway, vytvořená proto,
aby mohl Windows přistupovat k těmto stopám (Windows vůbec neumožňuje
aplikacím surový přístup k zařízení).
Pod Linuxem nemůžete kopírovat nebo přehrávat tyto soubory
(obsahují jen nesmysly). Pod Windows je to možné, protože jeho iso9660
ovladač emuluje surový přístup ke stopě v tomto souboru. Abyste mohli
přehrát .DAT soubor, potřebujete ovladač kernelu který můžete nalézt
v Linuxové verzi PowerDVD. Obsahuje upravený ovladač systému souborů
iso9660 (<tt class="filename">vcdfs/isofs-2.4.X.o</tt>), který umí emulovat
surové stopy přes tento stínový .DAT soubor. Pokud připojíte disk
s pomocí jejich ovladače, můžete kopírovat či dokonce přehrávat .DAT
soubory <span class="application">MPlayer</span>em. Ale nebude to fungovat
se standardním iso9660 ovladačem z Linuxového kernelu! Místo toho
použijte <tt class="option">vcd://</tt>. Alternativou kopírování VCD je
nový jaderný ovladač jménem
<a class="ulink" href="http://www.elis.rug.ac.be/~ronsse/cdfs/" target="_top">cdfs</a>
(není součástí oficiálního jádra), který zobrazuje CD sekce jako
obrazové soubory a program
<a class="ulink" href="http://cdrdao.sf.net/" target="_top">cdrdao</a>, který bit-po-bitu
grabuje/kopíruje CD.
</p></div></div><div class="chapter" title="Kapitola 5. TV"><div class="titlepage"><div><div><h2 class="title"><a name="tv"></a>Kapitola 5. TV</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#tv-input">5.1. TV vstup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tv-compilation">5.1.1. Kompilace</a></span></dt><dt><span class="sect2"><a href="#tv-tips">5.1.2. Tipy pro používání</a></span></dt><dt><span class="sect2"><a href="#tv-examples">5.1.3. Příklady</a></span></dt></dl></dd></dl></div><div class="sect1" title="5.1. TV vstup"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tv-input"></a>5.1. TV vstup</h2></div></div></div><p>
Tato sekce je zaměřena na zpřístupnění
<span class="bold"><strong>sledování/grabování z V4L kompatibilního TV tuneru
</strong></span>. Popis voleb k TV a ovládání z klávesnice naleznete v man
stránce.
</p><div class="sect2" title="5.1.1. Kompilace"><div class="titlepage"><div><div><h3 class="title"><a name="tv-compilation"></a>5.1.1. Kompilace</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
  Zaprvé musíte rekompilovat. <tt class="filename">./configure</tt> zdetekuje
  v4l hlavičkové soubory kernelu a existenci zařízení
  <tt class="filename">/dev/video*</tt>. Pokud existují, bude zabudována
  podpora pro TV (viz výstup z <tt class="filename">./configure</tt>).
</p></li><li class="step" title="Krok 2"><p>
  Ujistěte se, že váš tuner pracuje s jiným Linuxovým TV softwarem,
  například <span class="application">XawTV</span>.
</p></li></ol></div></div><div class="sect2" title="5.1.2. Tipy pro používání"><div class="titlepage"><div><div><h3 class="title"><a name="tv-tips"></a>5.1.2. Tipy pro používání</h3></div></div></div><p>
Úplný seznam voleb je dostupný v manuálové stránce.
Zde je jen několik typů:

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Použijte volbu <tt class="option">channels</tt>. Příklad:
  </p><pre class="screen">-tv channels=26-MTV1,23-TV2</pre><p>
  Vysvětlení: Při použití této volby budou použitelné pouze kanály 26 a 23 a
  budete také mít krásný OSD text po přepnutí kanálů, zobrazující jméno
  kanálu. Mezery ve jméně kanálu musí být nahrazeny znakem
  "_".
</p></li><li class="listitem"><p>
  Zvolte rozumné rozměry obrazu. Rozměry výsledného obrazu by měly být
  bezezbytku dělitelné 16.
</p></li><li class="listitem"><p>
  Pokud zachytáváte video se svislým rozlišením vyšším než polovina plného
  rozlišení (čili 288 pro PAL nebo 240 pro NTSC), pak 'snímky', které dostanete,
  budou ve skutečnosti prokládané páry půlsnímků.
  V závislosti na tom, co chcete s videem dělat, je můžete nechat jak jsou,
  destruktivně odstranit proklad, nebo rozdělit páry do individuálních políček.
  </p><p>
  Jinak bude získaný snímek roztřepený
  během rychlých scén a regulátor datového toku nebude pravděpodobně schopen
  ani udržet nastavený datový tok, vzhledem k tomu, že prokladové artefakty
  produkují velké množství detailů, což spotřebovává velké přenosové pásmo.
  Odstraňování prokladu můžete zapnout pomocí volby
  <tt class="option">-vf pp=DEINT_TYPE</tt>. Dobrou práci obvykle odvede
  <tt class="option">pp=lb</tt>, ale záleží na osobních preferencích. Prostudujte si
  ostatní možnosti odstraňování prokladu v manuálu a vyzkoušejte je.
  </p></li><li class="listitem"><p>
  Odstřihněte mrtvý prostor. Když zachytáváte video, oblasti na okrajích jsou
  obvykle černé, nebo obsahují nějaký šum. Což opět zbytečně spotřebovává
  přenosové pásmo. Přesněji to nejsou samotné černé oblasti, ale ostrý přechod
  mezi černou a světlejším videem, ale to teď není důležité.
  Než začnete zachytávat, nastavte parametry volby <tt class="option">crop</tt> tak,
  aby byl veškerý binec na okrajích odstřižen. Opět se snažte zachovat rozumné
  rozměry výsledného obrazu.
</p></li><li class="listitem"><p>
  Sledujte zatížení CPU. Většinu času by nemělo překročit hranici 90%. Pokud
  máte velkou vyrovnávací paměť pro zachytávání, dokáže
  <span class="application">MEncoder</span> přežít několikasekundové přetížení, ale
  nic víc. Raději vypněte 3D OpenGL spořiče obrazovky a podobné věci.
</p></li><li class="listitem"><p>
  Nehrajte si se systémovými hodinami. <span class="application">MEncoder</span>
  používá systémové hodiny pro A/V synchronizaci. Pokud přestavíte systémové
  hodiny (zvlášť nazpět), <span class="application">MEncoder</span> bude zmaten a
  vy přijdete o snímky. To je velmi důležité pokud jste připojeni k síti a
  používáte nějaký časový synchronizační software jako je NTP. Musíte vypnout
  NTP během zachytávání, pokud chcete spolehlivě zachytávat.
</p></li><li class="listitem"><p>
  Neměňte <tt class="option">outfmt</tt> pokud nevíte co děláte, nebo vaše
  karta/ovladač opravdu nepodporuje výchozí (YV12 barevný prostor).
  Ve starší verzi <span class="application">MPlayer</span>u/
  <span class="application">MEncoder</span>u bylo nutné nastavit výstupní formát.
  Tento problém by měl být v současných verzích vyřešen,
  <tt class="option">outfmt</tt> již není nadále potřeba a výchozí hodnoty vyhovují
  pro většinu případů. Například pokud zachytáváte do DivX pomocí
  <code class="systemitem">libavcodec</code>u a uvedete
  <tt class="option">outfmt=RGB24</tt> pro zvýšení kvality zachytávaných snímků,
  stejně budou tyto snímky později konvertovány zpět na YV12, takže jediné co
  tím získáte je spousta vyplýtvaného výkonu CPU.
</p></li><li class="listitem"><p>
  Chcete-li nastavit barevný prostor I420 (<tt class="option">outfmt=i420</tt>),
  musíte přidat i volbu <tt class="option">-vc rawi420</tt> kvůli konfliktu fourcc
  Intel Indeo video kodekem.
</p></li><li class="listitem"><p>
  Existuje několik cest, jak zachytávat zvuk. Můžete nahrát zvuk buď pomocí
  zvukové karty pomocí externího propojení mezi video kartou a linkovým
  vstupem, nebo použitím vestavěného ADC v čipu bt878. Ve druhém případě
  musíte načíst ovladač <span class="bold"><strong>btaudio</strong></span>. Přečtěte si
  soubor <tt class="filename">linux/Documentation/sound/btaudio</tt> (ve zdrojácích
  kernelu, nikoli <span class="application">MPlayer</span>u) pro několik instrukcí
  jak použít tento ovladač.
</p></li><li class="listitem"><p>
  Pokud <span class="application">MEncoder</span> nedokáže otevřít audio zařízení,
  ujistěte se, že je opravdu k dispozici. Můžete mít potíže se zvukovými
  servery jako aRts (KDE) nebo ESD (GNOME). Pokud máte plně duplexní zvukovou
  kartu (téměř každá slušná karta to již podporuje) a používáte KDE, zkuste
  zaškrtnout volbu "full duplex" v menu nastavení zvukového serveru.
</p></li></ul></div><p>
</p></div><div class="sect2" title="5.1.3. Příklady"><div class="titlepage"><div><div><h3 class="title"><a name="tv-examples"></a>5.1.3. Příklady</h3></div></div></div><div class="informalexample"><p>
Modelový výstup do AAlib :)
</p><pre class="screen">mplayer -tv driver=dummy:width=640:height=480 -vo aa tv://</pre><p>
</p></div><div class="informalexample"><p>
Vstup ze standardního V4L:
</p><pre class="screen">
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://
</pre><p>
</p></div><div class="informalexample"><p>
Mnohem sofistikovanější příklad. Zde <span class="application">MEncoder</span>
zachytává obraz v plném PALu, ořízne okraje a odstraní proklad obrazu pomocí
lineárního směšovacího algoritmu. Zvuk je komprimován konstantním datovým
tokem 64kbps LAME kodekem. Toto nastavení je vhodné pro zachytávání filmů.
</p><pre class="screen">
mencoder -tv driver=v4l:width=768:height=576 -oac mp3lame -lameopts cbr:br=64\
    -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
    -vf crop=720:544:24:16,pp=lb -o <em class="replaceable"><code>výstup.avi</code></em> tv://
</pre><p>
</p></div><div class="informalexample"><p>
Toto navíc přeškáluje video na 384x288 a zkomprimuje jej s datovým tokem
350kbps v režimu vysoké kvality. Volba vqmax uvolňuje kvantizer a umožní
video kompresoru podržet takto nízký datový tok i za cenu snížení kvality.
To lze použít pro záznam dlouhých TV seriálů, kde kvalita obrazu není až
tolik důležitá.
</p><pre class="screen">
mencoder -tv driver=v4l:width=768:height=576 \
    -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
    -oac mp3lame -lameopts cbr:br=48 -sws 1 -o <em class="replaceable"><code>výstup.avi</code></em>\
    -vf crop=720:540:24:18,pp=lb,scale=384:288 tv://
</pre><p>
Rovněž můžete nastavit menší rozměry obrazu ve volbě
<tt class="option">-tv</tt> a vyhnout se tak softwarovému škálování, ale tento přístup
vyžaduje maximální množství informací a je trochu odolnější proti šumu.
Čipy bt8x8 umí průměrování pixelů pouze ve svislém směru díky
hardwarovým omezením.
</p></div></div></div></div><div class="chapter" title="Kapitola 6. Rádio"><div class="titlepage"><div><div><h2 class="title"><a name="radio"></a>Kapitola 6. Rádio</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#radio-input">6.1. Rádio vstup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#radio-compilation">6.1.1. Kompilace</a></span></dt><dt><span class="sect2"><a href="#radio-tips">6.1.2. Uživatelské tipy</a></span></dt><dt><span class="sect2"><a href="#radio-examples">6.1.3. Příklady</a></span></dt></dl></dd></dl></div><div class="sect1" title="6.1. Rádio vstup"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="radio-input"></a>6.1. Rádio vstup</h2></div></div></div><p>
Tato sekce se zabývá tím, jak zprovoznit poslech rozhlasu
z V4L-kompatibilního rozhlasového tuneru.
Popis voleb a ovládání z klávesnice naleznete v man stránce.
</p><div class="sect2" title="6.1.1. Kompilace"><div class="titlepage"><div><div><h3 class="title"><a name="radio-compilation"></a>6.1.1. Kompilace</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
  Nejprve musíte znovupřeložit <span class="application">MPlayer</span> pomocí
  <tt class="filename">./configure</tt> s <tt class="option">--enable-radio</tt> a
  (pokud chcete i nahrávat) <tt class="option">--enable-radio-capture</tt>.
</p></li><li class="step" title="Krok 2"><p>
  Ujistěte se, že váš tuner pracuje s jiným softwarem v Linuxu, například
  <span class="application">XawTV</span>.
</p></li></ol></div></div><div class="sect2" title="6.1.2. Uživatelské tipy"><div class="titlepage"><div><div><h3 class="title"><a name="radio-tips"></a>6.1.2. Uživatelské tipy</h3></div></div></div><p>
Plný výčet voleb je v manuálové stránce.
Zde uvádíme jen několik tipů:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Použití volby <tt class="option">channels</tt>. Příklad:
  </p><pre class="screen">-radio channels=104.4-Sibir,103.9-Maximum</pre><p>
  Vysvětlení: Pomocí této volby budou k dispozici pouze stanice 104.4
  a 103.9. Budete mít krásný OSD text během přepínání kanálů,
  který zobrazí jméno kanálu. Mezery v názvech kanálů musí být
  nahrazeny znakem "_".
</p></li><li class="listitem"><p>
  Je mnoho způsobů, jak zachytávat (nahrávat) zvuk. Můžete buď zachytávat pomocí
  vstupu line-in zvukové karty propojeného vnější linkou s videokartou,
  nebo použitím vestavěného ADC v čipu saa7134. V druhém případě musíte
  zavést ovladač <code class="systemitem">saa7134-alsa</code> nebo
 <code class="systemitem">saa7134-oss</code>.
</p></li><li class="listitem"><p>
  <span class="application">MEncoder</span> nelze použít pro zachytávání zvuku, jelikož
  vyžaduje videoproud, aby fungoval. Takže buď použijete
  <span class="application">arecord</span> z projektu ALSA, nebo
  volbu <tt class="option">-ao pcm:file=file.wav</tt>. V druhém případě neuslyšíte nic
  (pokud ovšem nemáte propojku s line-in a vypnuté mute na kanále line-in).
</p></li></ul></div><p>
</p></div><div class="sect2" title="6.1.3. Příklady"><div class="titlepage"><div><div><h3 class="title"><a name="radio-examples"></a>6.1.3. Příklady</h3></div></div></div><div class="informalexample"><p>
Vstup ze standardního V4L (pomocí line-in kablu, zachytávání vypnuto):
</p><pre class="screen">mplayer radio://104.4</pre><p>
</p></div><div class="informalexample"><p>
Vstup ze standardního V4L (pomocí line-in kablu, zachytávání vypnuto,
rozhraní V4Lv1):
</p><pre class="screen">mplayer -radio driver=v4l radio://104.4</pre><p>
</p></div><div class="informalexample"><p>
Přehrávání druhé stanice ze seznamu:
</p><pre class="screen">mplayer -radio channels=104.4=Sibir,103.9=Maximm  radio://2</pre><p>
</p></div><div class="informalexample"><p>
Průchod zvuku přes PCI sběrnici z interního ADC rádio karty.
V tomto příkladu se tuner používá jako druhá zvuková karta
(ALSA zařízení hw:1,0). Pro zařízení založené na saa7134 musí
být zaveden buď modul <code class="systemitem">saa7134-alsa</code> nebo
modul <code class="systemitem">saa7134-oss</code>.
</p><pre class="screen">
mplayer -rawaudio rate=32000 radio://2/capture \
    -radio adevice=hw=1.0:arate=32000:channels=104.4=Sibir,103.9=Maximm
</pre><p>
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Když používáte názvy zařízení ALSA, dvojtečky musí být
nahrazeny znaky rovnáse, čárky tečkami.
</p></div><p>
</p></div></div></div></div><div class="chapter" title="Kapitola 7. Výstupní video zařízení/rozhraní"><div class="titlepage"><div><div><h2 class="title"><a name="video"></a>Kapitola 7. Výstupní video zařízení/rozhraní</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#mtrr">7.1. Nastavení MTRR</a></span></dt><dt><span class="sect1"><a href="#xv">7.2. Xv</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tdfx">7.2.1. Karty 3dfx</a></span></dt><dt><span class="sect2"><a href="#s3">7.2.2. Karty S3</a></span></dt><dt><span class="sect2"><a href="#nvidia">7.2.3. Karty nVidia</a></span></dt><dt><span class="sect2"><a href="#ati">7.2.4. Karty ATI</a></span></dt><dt><span class="sect2"><a href="#neomagic">7.2.5. Karty NeoMagic</a></span></dt><dt><span class="sect2"><a href="#trident">7.2.6. Karty Trident</a></span></dt><dt><span class="sect2"><a href="#kyro">7.2.7. Karty Kyro/PowerVR</a></span></dt><dt><span class="sect2"><a href="#intel">7.2.8. Karty Intel</a></span></dt></dl></dd><dt><span class="sect1"><a href="#dga">7.3. DGA</a></span></dt><dt><span class="sect1"><a href="#sdl">7.4. SDL</a></span></dt><dt><span class="sect1"><a href="#svgalib">7.5. SVGAlib</a></span></dt><dt><span class="sect1"><a href="#fbdev">7.6. Výstup na Framebuffer (FBdev)</a></span></dt><dt><span class="sect1"><a href="#mga_vid">7.7. Matrox framebuffer (mga_vid)</a></span></dt><dt><span class="sect1"><a href="#tdfxfb">7.8. Podpora 3Dfx YUV</a></span></dt><dt><span class="sect1"><a href="#tdfx_vid">7.9. tdfx_vid</a></span></dt><dt><span class="sect1"><a href="#opengl">7.10. Rozhraní OpenGL</a></span></dt><dt><span class="sect1"><a href="#aalib">7.11. AAlib – zobrazování v textovém režimu</a></span></dt><dt><span class="sect1"><a href="#caca">7.12. 
<code class="systemitem">libcaca</code> – Barevná ASCII Art knihovna
</a></span></dt><dt><span class="sect1"><a href="#vesa">7.13. VESA - výstup do VESA BIOSu</a></span></dt><dt><span class="sect1"><a href="#x11">7.14. X11</a></span></dt><dt><span class="sect1"><a href="#vidix">7.15. VIDIX</a></span></dt><dd><dl><dt><span class="sect2"><a href="#vidix-ati">7.15.1. Karty ATI</a></span></dt><dt><span class="sect2"><a href="#vidix-mga">7.15.2. Karty Matrox</a></span></dt><dt><span class="sect2"><a href="#vidix-trident">7.15.3. Karty Trident</a></span></dt><dt><span class="sect2"><a href="#vidix-3dlabs">7.15.4. Karty 3DLabs</a></span></dt><dt><span class="sect2"><a href="#vidix-nvidia">7.15.5. Karty nVidia</a></span></dt><dt><span class="sect2"><a href="#vidix-sis">7.15.6. Karty SiS</a></span></dt></dl></dd><dt><span class="sect1"><a href="#directfb">7.16. DirectFB</a></span></dt><dt><span class="sect1"><a href="#dfbmga">7.17. DirectFB/Matrox (dfbmga)</a></span></dt><dt><span class="sect1"><a href="#mpeg_decoders">7.18. MPEG dekodéry</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dvb">7.18.1. DVB výstup a vstup</a></span></dt><dt><span class="sect2"><a href="#dxr2">7.18.2. DXR2</a></span></dt><dt><span class="sect2"><a href="#dxr3">7.18.3. DXR3/Hollywood+</a></span></dt></dl></dd><dt><span class="sect1"><a href="#other">7.19. Ostatní vizualizační hardware</a></span></dt><dd><dl><dt><span class="sect2"><a href="#zr">7.19.1. Zr</a></span></dt><dt><span class="sect2"><a href="#blinkenlights">7.19.2. Blinkenlights</a></span></dt></dl></dd><dt><span class="sect1"><a href="#tvout">7.20. Podpora TV výstupu</a></span></dt><dd><dl><dt><span class="sect2"><a href="#tvout-mga-g400">7.20.1. Karty Matrox G400</a></span></dt><dt><span class="sect2"><a href="#tv-out_matrox_g450">7.20.2. Karty Matrox G450/G550</a></span></dt><dt><span class="sect2"><a href="#tvout-ati">7.20.3. Karty ATI</a></span></dt><dt><span class="sect2"><a href="#tvout-nvidia">7.20.4. nVidia</a></span></dt><dt><span class="sect2"><a href="#tvout-neomagic">7.20.5. NeoMagic</a></span></dt></dl></dd></dl></div><div class="sect1" title="7.1. Nastavení MTRR"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mtrr"></a>7.1. Nastavení MTRR</h2></div></div></div><p>
VELMI doporučujeme skontrolovat, zda jsou MTRR registry
správně nastaveny, jelikož mohou velice zvýšit výkon.
</p><p>
Proveďte <span class="command"><strong>cat /proc/mtrr</strong></span>:
</p><pre class="screen">
<code class="prompt">--($:~)--</code> cat /proc/mtrr
reg00: base=0xe4000000 (3648MB), size=  16MB: write-combining, count=9
reg01: base=0xd8000000 (3456MB), size= 128MB: write-combining, count=1</pre><p>
</p><p>
Takto to správně ukazuje má Matrox G400 se 16MB paměti. Provedl jsem to z
XFree 4.x.x, které nastavuje MTRR registry automaticky.
</p><p>
Pokud nic nefunguje, budete to muset udělat ručně. Nejprve musíte najít
bázovou adresu. Máte tři možnosti, jak ji zjistit:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  ze startovacích informací X11, například:
  </p><pre class="screen">
(--) SVGA: PCI: Matrox MGA G400 AGP rev 4, Memory @ 0xd8000000, 0xd4000000
(--) SVGA: Linear framebuffer at 0xD8000000</pre><p>
</p></li><li class="listitem"><p>
  z <tt class="filename">/proc/pci</tt> (použijte příkaz <span class="command"><strong>lspci -v</strong></span>
  ):
  </p><pre class="screen">
01:00.0 VGA compatible controller: Matrox Graphics, Inc.: Unknown device 0525
Memory at d8000000 (32-bit, prefetchable)</pre><p>
</p></li><li class="listitem"><p>
  ze zpráv jaderného modulu mga_vid (použijte <span class="command"><strong>dmesg</strong></span>):
  </p><pre class="screen">mga_mem_base = d8000000</pre><p>
</p></li></ol></div><p>
</p><p>
Pak zjistěte velikost paměti. Je to velmi snadné, stačí převést velikost
video RAM do hexadecimální soustavy, nebo použijte následující tabulku:
</p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td>1 MB</td><td>0x100000</td></tr><tr><td>2 MB</td><td>0x200000</td></tr><tr><td>4 MB</td><td>0x400000</td></tr><tr><td>8 MB</td><td>0x800000</td></tr><tr><td>16 MB</td><td>0x1000000</td></tr><tr><td>32 MB</td><td>0x2000000</td></tr></tbody></table></div><p>
</p><p>
Pokud znáte bázovou adresu a velikost paměti, začněme nastavovat MTRR registry!
Například pro výše uvedenou kartu Matrox (<code class="literal">base=0xd8000000</code>)
s 32MB RAM (<code class="literal">size=0x2000000</code>) stačí spustit:
</p><pre class="screen">
echo "base=0xd8000000 size=0x2000000 type=write-combining" &gt; /proc/mtrr
</pre><p>
</p><p>
Ne všechny procesory mají MTRR. Například starší CPU K6-2 (okolo 266MHz,
stepping 0) nemají MTRR, ale stepping 12 je mají
(pro ověření spusťte <span class="command"><strong>cat /proc/cpuinfo</strong></span>).
</p></div><div class="sect1" title="7.2. Xv"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xv"></a>7.2. Xv</h2></div></div></div><p>
Pod XFree86 4.0.2, nebo novějším, můžete použít hardwarové YUV rutiny karty
pomocí rozšíření XVideo. Přesně toto používá volba
<tt class="option">-vo xv</tt>. Toto rozhraní také podporuje nastavování
jasu/kontrastu/barevného tónu/atd. (pokud nepoužíváte strarý, pomalý DirectShow
DivX kodek, který to podporuje všude), viz man stránka.
</p><p>
Abyste to zprovoznili, ujistěte se o následujícím:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Musíte používat XFree86 4.0.2 nebo novější (předchozí verze nemají XVideo)
</p></li><li class="listitem"><p>
  Vaše karta aktuálně podporuje hardwarovou akceleraci (moderní karty ano)
</p></li><li class="listitem"><p>
  X nahrává rozšíření XVideo. Zpráva ve <tt class="filename">/var/log/XFree86.0.log</tt>
  vypadá asi takto:
  </p><pre class="programlisting">(II) Loading extension XVideo</pre><p>
  </p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
   Takto se nahraje pouze rozšíření pro XFree86. To je v dobré instalaci nahráno
   vždy a neznamená to, že je načtena i podpora XVideo pro
   <span class="bold"><strong>kartu</strong></span>!
  </p></div><p>
</p></li><li class="listitem"><p>
  Vaše karta má podporu Xv pod Linuxem. Abyste si to ověřili, zkuste
  <span class="command"><strong>xvinfo</strong></span>, které je součástí distribuce XFree86. Měl by se
  vypsat dlouhý text podobný tomuto:
  </p><pre class="screen">
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
(...)
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
(...atd...)</pre><p>
  Musí podporovat pixelové formáty YUY2 packed a YV12 planar, aby byla
  použitelná s <span class="application">MPlayer</span>em.
</p></li><li class="listitem"><p>
  A nakonec si ověřte, jestli byl <span class="application">MPlayer</span> skompilován
  s podporou 'xv'. Proveďte <span class="command"><strong>mplayer -vo help | grep xv </strong></span>.
  Pokud byla skompilována podpora 'xv', měl by se objevi řádek podpobný tomuto:
  </p><pre class="screen">  xv      X11/Xv</pre><p>
</p></li></ol></div><p>
</p><div class="sect2" title="7.2.1. Karty 3dfx"><div class="titlepage"><div><div><h3 class="title"><a name="tdfx"></a>7.2.1. Karty 3dfx</h3></div></div></div><p>
Starší ovladače 3dfx byly známy svými problémy s XVideo akcelerací a
nepodporovaly barevné prostory YUY2 ani YV12. Ověřte, že máte XFree86
verze 4.2.0 nebo vyšší, které pracuje dobře s YV12 a YUY2, zatímco předchozí
verze, včetně 4.1.0, <span class="bold"><strong>padá s YV12</strong></span>.
Pokud zažívate podivné situace při používání <tt class="option">-vo xv</tt>, zkuste SDL
(má rovněž XVideo) a uvidíte, zda to pomůže. Prostudujte si sekci
<a class="link" href="#sdl" title="7.4. SDL">SDL</a> pro více informací.
</p><p>
<span class="bold"><strong>NEBO</strong></span>, zkuste NOVÉ
<tt class="option">-vo tdfxfb</tt> rozhraní! Viz sekce
<a class="link" href="#tdfxfb" title="7.8. Podpora 3Dfx YUV">tdfxfb</a>.
</p></div><div class="sect2" title="7.2.2. Karty S3"><div class="titlepage"><div><div><h3 class="title"><a name="s3"></a>7.2.2. Karty S3</h3></div></div></div><p>
S3 Savage3D by měly fungovat dobře, ale pro Savage4 použijte XFree86 verze 4.0.3
nebo vyšší (v případě problémů s obrazem, zkuste 16bpp). Stejně ajko S3 Virge:
má sice podporu xv, ale karta samotná je velmi pomalá, takže ji raději prodejte.
</p><p>
Pro karty S3 Virge nyní existuje nativní framebuffer ovladač podobný
tdfxfb. Nastavte si framebuffer (čili přidejte
"<tt class="option">vga=792 video=vesa:mtrr</tt>" do příkazového řádku kernelu) a
použijte <tt class="option">-vo s3fb</tt> (<tt class="option">-vf yuy2</tt> a
<tt class="option">-dr</tt> rovněž pomůžou).
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Zatím není jasné, kterým modelům Savage chybí podpora YV12 a konvertují
ovladačem (pomalé). Pokud podezříváte kartu, opatřete si novější ovladač, nebo
slušně požádejte v konferenci MPlayer-users o ovladač s MMX/3DNow!.
</p></div></div><div class="sect2" title="7.2.3. Karty nVidia"><div class="titlepage"><div><div><h3 class="title"><a name="nvidia"></a>7.2.3. Karty nVidia</h3></div></div></div><p>
nVidia není vždy pod Linuxem nejlepší volbou... Open-source ovladač
v XFree86 podporuje většinu těchto karet, ale v některých případech musíte
použít binární closed-source ovladač od nVidie, který je k dispozici na
<a class="ulink" href="http://www.nvidia.com/object/linux.html" target="_top">serveru nVidia</a>.
Tento ovladač budete potřebovat vždy, pokud zároveň chcete 3D akceleraci.
</p><p>
Karty Riva128 nemají podporu XVideo v nVidia ovladači z XFree86 :(
Stěžujte si nVidii.
</p><p>
Ačkoli <span class="application">MPlayer</span> obsahuje
<a class="link" href="#vidix" title="7.15. VIDIX">VIDIX</a> ovladač pro většinu nVidia karet, zatím je
ve stavu beta verze a má jisté nedostatky. Více informací naleznete v sekci
<a class="link" href="#vidix-nvidia" title="7.15.5. Karty nVidia">nVidia VIDIX</a>.
</p></div><div class="sect2" title="7.2.4. Karty ATI"><div class="titlepage"><div><div><h3 class="title"><a name="ati"></a>7.2.4. Karty ATI</h3></div></div></div><p>
<a class="ulink" href="http://gatos.sf.net" target="_top">Ovladač GATOS</a>
(který byste měli použít, pokud nemáte Rage128 nebo Radeon) má zapnutý VSYNC
ve výchozím stavu. To znamená, že rychlost dekódování (!) je synchronizována
s obnovovacím kmitočtem monitoru. Pokud se vám zdá přehrávání pomalé, zkuste
nějak vypnout VSYNC, nebo nastavte obnovovací kmitočet na n*(snímková rychlost
filmu) Hz.
</p><p>
Radeon VE - pokud potřebujete X, použijte pro tuto kartu XFree86 4.2.0 nebo
vyšší. Není zde podpora pro TV out. Samozřejmě s
<span class="application">MPlayer</span>em můžete mít s trochou štěstí
<span class="bold"><strong>akcelerovaný</strong></span> display s nebo bez
<span class="bold"><strong>TV výstupu</strong></span> a nepotřebujete žádné X knihovny.
Přečtěte si sekci <a class="link" href="#vidix" title="7.15. VIDIX">VIDIX</a>.
</p></div><div class="sect2" title="7.2.5. Karty NeoMagic"><div class="titlepage"><div><div><h3 class="title"><a name="neomagic"></a>7.2.5. Karty NeoMagic</h3></div></div></div><p>
Tyto karty lze nalézt v mnoha laptopech. Musíte použít XFree86 4.3.0 nebo
vyšší, nebo použijte
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/" target="_top">ovladače s podporou Xv</a>
od Stefana Seyfrieda.
Stačí vybrat ten, který je vhodný pro vaši verzi XFree86.
</p><p>
XFree86 4.3.0 obsahuje podporu Xv, avšak Bohdan Horst poslal malý
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/neo_driver.patch" target="_top">patch</a>
pro zdrojový kód XFree86, který zrychluje operace s framebufferem (čili XVideo)
až čtyřikrát. Patch byl zařazen do XFree86 CVS a měl by být v další verzi
vydané po 4.3.0.
</p><p>
Abyste mohli přehrávat obsah velikosti DVD, změňte svůj XF86Config takto:
</p><pre class="programlisting">
Section "Device"
    [...]
    Driver "neomagic"
    <span class="emphasis"><em>Option "OverlayMem" "829440"</em></span>
    [...]
EndSection</pre><p>
</p></div><div class="sect2" title="7.2.6. Karty Trident"><div class="titlepage"><div><div><h3 class="title"><a name="trident"></a>7.2.6. Karty Trident</h3></div></div></div><p>
Chcete-li používat Xv s kartou Trident, což nepracuje s 4.1.0,
nainstalujte si XFree 4.2.0. 4.2.0 přidává podporu pro celoobrazovkové Xv
pro kartu Cyberblade XP.
</p><p>
Alternativně, <span class="application">MPlayer</span> obsahuje
<a class="link" href="#vidix" title="7.15. VIDIX">VIDIX</a> ovladač pro kartu Cyberblade/i1.
</p></div><div class="sect2" title="7.2.7. Karty Kyro/PowerVR"><div class="titlepage"><div><div><h3 class="title"><a name="kyro"></a>7.2.7. Karty Kyro/PowerVR</h3></div></div></div><p>
Pokud chcete používat Xv s kartou založenou na čipu Kyro (například Hercules
Prophet 4000XT), měli byste si stáhnout ovladače z
<a class="ulink" href="http://www.powervr.com/" target="_top">PowerVR serveru</a>.
</p></div><div class="sect2" title="7.2.8. Karty Intel"><div class="titlepage"><div><div><h3 class="title"><a name="intel"></a>7.2.8. Karty Intel</h3></div></div></div><p>
Tyto karty lze nalézt v mnoha laptopech. Doporučujeme aktuální Xorg.
</p><p>
Abyste umožnili přehrávání obsahu velikosti DVD (a větší), změňte svůj XF86Config/xorg.conf takto:
</p><pre class="programlisting">
Section "Device"
    [...]
    Driver "intel"
    <span class="emphasis"><em>Option "LinearAlloc" "6144"</em></span>
    [...]
EndSection
</pre><p>
Vynechání této volby obvykle vede k chybě jako
</p><pre class="screen">X11 error: BadAlloc (insufficient resources for operation)</pre><p>
při pokusu použít <tt class="option">-vo xv</tt>.
</p></div></div><div class="sect1" title="7.3. DGA"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dga"></a>7.3. DGA</h2></div></div></div><p title="PŘEDMLUVA"><b>PŘEDMLUVA. </b>
Tento dokument se několika slovy snaží vysvětlit co je to DGA a co
výstupní videorozhraní DGA pro <span class="application">MPlayer</span>
udělat může (a co ne).
</p><p title="CO JE DGA"><b>CO JE DGA. </b>
<acronym class="acronym">DGA</acronym> je zkratka pro <span class="emphasis"><em>Direct Graphics
Access</em></span>, což je program pro obejití X servru a
přímou modifikaci paměti framebufferu. Technicky to znamená mapování paměti
framebufferu do paměťového prostoru vašeho procesu.
To kernel umožňuje pouze pokud máte práva superuživatele. Ty dostanete buď
nalogováním se jako <code class="systemitem">root</code>, nebo
nastavením SUID bitu spustitelnému souboru
<span class="application">MPlayer</span>u (<span class="bold"><strong>nedoporučujeme
</strong></span>).
</p><p>
Existují dvě verze DGA: DGA1 je používáno XFree 3.x.x a DGA2 bylo
představeno v XFree 4.0.1.
</p><p>
DGA1 poskytuje pouze přímý přístup k framebufferu jak byl popsán výše.
Chcete-li přepínat rozlišení videosignálu, musíte se spolehnout na
rozšíření XVidMode.
</p><p>
DGA2 zahrnuje vlastnosti rozšíření XVidMode a rovněž umožňuje přepínat
barevnou hloubku zobrazovače. Takže můžete jendoduše provozovat X server
s hloubkou 32 bitů a přepnout na barevnou hloubku 15 bitů a naopak.
</p><p>
DGA má ovšem i jisté obtíže. Zdá se, že je nějak závislé na grafickém čipu,
který používáte a na implementaci video ovladače X serveru, který tento čip
obsluhuje. Takže nefunguje na všech systémech...
</p><p title="INSTALACE PODPORY DGA PRO MPLAYER"><b>INSTALACE PODPORY DGA PRO MPLAYER. </b>
Nejprve si ověřte, že X nahrávají rozšíření DGA, viz v
<tt class="filename">/var/log/XFree86.0.log</tt>:

</p><pre class="programlisting">(II) Loading extension XFree86-DGA</pre><p title="INSTALACE PODPORY DGA PRO MPLAYER">

XFree86 4.0.x nebo vyšší je
<span class="bold"><strong>vřele doporučován</strong></span>!
Video rozhraní DGA <span class="application">MPlayer</span>u je autodetekováno
<tt class="filename">./configure</tt>, nebo jej můžete vynutit pomocí
<tt class="option">--enable-dga</tt>.
</p><p>
Pokud rozhraní nemůže přepnout do menšího rozlišení, experimentujte s
volbami <tt class="option">-vm</tt> (pouze s X 3.3.x), <tt class="option">-fs</tt>,
<tt class="option">-bpp</tt>, <tt class="option">-zoom</tt>, abyste nalezli videorežim, do
kterého se video napasuje. Momentálně není žádný převodník :(
</p><p>
Staňte se <code class="systemitem">root</code>em. DGA vyžaduje
práva roota, aby mohl přímo zapisovat do video paměti. Pokud jej chcete
provozovat jako uživatel, pak nainstalujte <span class="application">MPlayer</span>
jako SUID root:

</p><pre class="screen">
chown root <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
chmod 750 <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
chmod +s <em class="replaceable"><code>/usr/local/bin/mplayer</code></em>
</pre><p>

A nyní to bude pracovat také pod obyčejným uživatelem.
</p><div class="caution" title="Bezpečnostní riziko" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Bezpečnostní riziko</h3><p>
Toto je <span class="bold"><strong>velké</strong></span> bezpečnostní riziko!
<span class="bold"><strong>Nikdy</strong></span> to nedělejte na serveru nebo počítači
ke kterému mohou mít přístup ostatní lidé, jelikož ti mohou získat
superuživatelská práva díky SUID root
<span class="application">MPlayer</span>u.
</p></div><p>
Nyní použijte volbu <tt class="option">-vo dga</tt> a je to! (doufám:)
Také byste měli vyzkoušet, jestli vám pracuje volba
<tt class="option">-vo sdl:dga</tt>!
Je mnohem rychlejší!
</p><p title="PŘEPÍNÁNÍ ROZLIŠENÍ"><a name="dga-modelines"></a><b>PŘEPÍNÁNÍ ROZLIŠENÍ. </b>
Rozhraní DGA umožňuje přepínání rozlišení výstupního signálu.
To odstraňuje potřebu (pomalého) softwarového škálování a zároveň
poskytuje obraz na celou obrazovku. Ideálně by se mělo přepnout na přesné
rozlišení (s výjimkou dodržení poměru stran) video dat, ale X
server umožňuje poze přepínání do rozlišení předdefinovaných v
<tt class="filename">/etc/X11/XF86Config</tt>
(nebo <tt class="filename">/etc/X11/XF86Config-4</tt> pro XFree 4.X.X).
Ty jsou definovány takzvanými "modelines" a závisí na
schopnostech vašeho video hardwaru. X server projíždí tento konfigurační
soubor při startu a zakáže režimy (modelines) nevhodné pro váš hardware.
Povolené videorežimy naleznete v X11 log souboru. Tel lze nalézt zde:
<tt class="filename">/var/log/XFree86.0.log</tt>.
</p><p>
Tyto vstupy jsou známy dobrou funkcí na Riva128 čipu, s použitím modulu
ovladače nv.o X serveru.
</p><pre class="programlisting">
Section "Modes"
  Identifier "Modes[0]"
  Modeline "800x600"  40     800 840 968 1056  600 601 605 628
  Modeline "712x600"  35.0   712 740 850 900   400 410 412 425
  Modeline "640x480"  25.175 640 664 760 800   480 491 493 525
  Modeline "400x300"  20     400 416 480 528   300 301 303 314 Doublescan
  Modeline "352x288"  25.10  352 368 416 432   288 296 290 310
  Modeline "352x240"  15.750 352 368 416 432   240 244 246 262 Doublescan
  Modeline "320x240"  12.588 320 336 384 400   240 245 246 262 Doublescan
EndSection
</pre><p title="DGA &amp; MPLAYER"><b>DGA &amp; MPLAYER. </b>
DGA je v <span class="application">MPlayer</span>u použito na dvou místech: SDL
rozhraní může být nastaveno pro jeho použití (<tt class="option">-vo sdl:dga</tt>) a
přímé DGA rozhraní (<tt class="option">-vo dga</tt>). Výše uvedené je platné
pro obě varianty; v následující sekci vysvětlíme jak pracuje DGA rozhraní
<span class="application">MPlayer</span>u.
</p><p title="VLASTNOSTI"><b>VLASTNOSTI. </b>
DGA rozhraní je použito zadáním volby <tt class="option">-vo dga</tt> na příkazovém
řádku. Výchozím chováním je přepnout na rozlišení co nejbižší originálním
rozměrům videa. Zcela záměrně se ignorují volby <tt class="option">-vm</tt> a
<tt class="option">-fs</tt> (umožňující přepínání videorežimů a zobrazení na celou
obrazovku) - vždy zkouší pokrýt tak velkou plochu obrazovky, jak je to jen možné
pomocí přepnutí videorežimu, což nás oprostí od využívání dalších CPU cyklů
pro škálování obrazu. Pokud se vám nelíbí režim, který vybere automatika,
můžete ji přinutit pro výběr režimu nejblíže odpovídajícímu rozlišení,
které zadáte pomocí <tt class="option">-x</tt> a <tt class="option">-y</tt>.
Při zadání volby <tt class="option">-v</tt>, vypíše DGA rozhraní, spolu s dalšími
věcmi, seznam všech rozlišení podporovaných vašim aktuálním
<tt class="filename">XF86Config</tt> souborem.
Máte-li DGA2, můžete jej rovněž přinutit použít různé barevné hloubky pomocí
volby <tt class="option">-bpp</tt>. Platné barevné hloubky jsou 15, 16, 24 a 32.
To jestli jsou tyto barevné hloubky nativně podporovány, nebo musí být provedena
(pravděpodobně pomalá) konverze závisí na vašem hardware.
</p><p>
Pokud jste natolik šťastlivci, že máte dostatek volné mimoobrazové paměti,
aby se zde vměstnal celý obrázek, použije DGA rozhraní dvojitou vyrovnávací
paměť, což vám zajistí mnohem plynulejší přehrávání filmů. Rozhraní vás bude
informovat jestli je dvojitý buffer zapnutý nebo ne.
</p><p>
Dvojitou vyrovnávací pamětí se rozumí to, že je další snímek vykreslován do
paměti mimo zobrazovanou plochu, zatímco je zobrazován aktuální snímek.
Jakmile je další snímek připraven, grafický čip je informován o pozici v paměti,
kde je nový snímek a jednoduše přesune data k zobrazení odtud.
Mezitím je další buffer v paměti zaplňován novými videodaty.
</p><p>
Dvojitá vyrovnávací paměť může být zapnuta volbou
<tt class="option">-double</tt> a vypnuta volbou
<tt class="option">-nodouble</tt>. Současná výchozí hodnota je vypnutí dvojité
vyrovnávací paměti. Při použití DGA rozhraní bude display na obrazovce (OSD)
pracovat pouze při zapnuté dvojité vyrovnávací paměti.
Zapnutí dvojité vyrovnávací paměti však může vyústit velkou ztrátou výkonu
(na mé K6-II+ 525 to použije dalších 20% CPU výkonu!) v závislosti na
implementaci DGA pro váš hardware.
</p><p title="OTÁZKA RYCHLOSTI"><b>OTÁZKA RYCHLOSTI. </b>
Obecně by přístup přes DGA framebuffer měl být alespoň tak rychlý jako
použití rozhraní X11 navíc s celoobrazovkovým režimem.
Procentní hodnoty rychlosti vypisované
<span class="application">MPlayer</span>em byste měli brát s rezervou, jelikož
například při použití X11 nezahrnují čas spotřebovaný X serverem pro
vlastní vykreslování. Zavěste terminál na sériovou linku počítače a
spusťte <span class="command"><strong>top</strong></span>, abyste viděli co se opravdu děje ve vašem
počítači.
</p><p>
Obecně zrychlení použitím DGA oproti 'běžnému' X11 velmi závisí na vaší
grafické kertě a jak dobře je pro ni optimalizován modul X serveru.
</p><p>
Pokud máte pomalý stroj, raději použijte 15 nebo 16 bitovou hloubku, jelikož
vyžaduje pouze poloviční průchodnost paměti oproti 32 bitovému zobrazení.
</p><p>
Použití hloubky 24 bitů je dobré i v případě, že vaše karta nativně podporuje
pouze barevnou hloubku 32 bitů, jelikož se přenáší o 25% méně dat oproti
režimu 32/32.
</p><p>
Viděl jsem pár AVI souborů přehrávat na Pentiu MMX 266. Procesory AMD K6-2
pracují při 400 MHZ a výše.
</p><p title="ZNÁMÉ CHYBY"><b>ZNÁMÉ CHYBY. </b>
Podle některých vývojářů XFree je DGA zvěrstvo. Říkají, abyste je raději
nepoužívali. Jeho implementace není vždy bezproblémová v každém dostupném
ovladači pro XFree.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  V XFree 4.0.3 je v <tt class="filename">nv.o</tt> chyba vedoucí
  k podivným barvám.
</p></li><li class="listitem"><p>
  Ovladač pro ATI vyžaduje více než jedno zpětné přepnutí režimu po skončení
  používání DGA.
</p></li><li class="listitem"><p>
  Některé ovladače selžou při přepnutí do normálního rozlišení (použijte
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Numerické +</b></span>
  a
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Numerické -</b></span>
  pro ruční přepnutí).
</p></li><li class="listitem"><p>
  Některé ovladače zobrazují divné barvy.
</p></li><li class="listitem"><p>
  Některé ovladače lžou o množství paměti kterou mapují do adresového prostoru
  procesu, takže vo_dga nepoužije dvojitou vyrovnávací paměť (SIS?).
</p></li><li class="listitem"><p>
  Některé ovladače nezvládnou ohlásit dokonce ani jeden platný režim.
  V tom případě rozhraní DGA spadne s hláškou o nesmaslném režimu
  100000x100000 nebo tak.
</p></li><li class="listitem"><p>
  OSD pracuje pouze se zapnutou dvojitou vyrovnávací pamětí (jinak poblikává).
</p></li></ul></div></div><div class="sect1" title="7.4. SDL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sdl"></a>7.4. SDL</h2></div></div></div><p>
<acronym class="acronym">SDL</acronym> (Simple Directmedia Layer) je zjednodušeně unifikované
video/audio rozhraní. Programy, které ji používají, znají pouze SDL a ne
jaký audio nebo video ovladač SDL aktuálně používá. Například klon DOOMa
může běžet na svgalib, aalib, X, fbdev a dalších. Musíte jen nastavit
(například) video ovladač pomocí proměnné prostředí
<code class="envar">SDL_VIDEODRIVER</code>. Aspoň teoreticky.
</p><p>
V <span class="application">MPlayer</span>u používáme její softwarový škálovač
ovladače X11 pro karty/ovladače, které nepodporují XVideo, dokud nevytvoříme
vlastní (rychlejší, hezčí) softwarový škálovač. Rovněž jsme používali její
výstup na aalib, ale nyní máme vlastní, což je mnohem pohodlnější.
Její DGA režim byl až doposud lepší než náš. Sledujete? :)
</p><p>
Rovněž pomáhá s některými chybnými ovladači/kartami, pokud je video roztřesené
(nikoli problém pomalého stroje), nebo se zpožďuje zvuk.
</p><p>
SDL video rozhraní podporuje zobrazování titulků pod filmem, v (pokud je) černém
okraji.
</p></div><div class="sect1" title="7.5. SVGAlib"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="svgalib"></a>7.5. SVGAlib</h2></div></div></div><p title="INSTALACE"><b>INSTALACE. </b>
Budete muset nainstalovat svgalib i s development balíčkem, aby
<span class="application">MPlayer</span> vytvořil své SVGAlib rozhraní
(autodetekováno, ale nelze vynutit) a nezapomeňte upravit
<tt class="filename">/etc/vga/libvga.config</tt> tak, aby odpovídal vaší kartě a
monitoru.
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Ujistěte se, že nepoužíváte volbu <tt class="option">-fs</tt>, jelikož zapíná
použití softwarového škálování, což je pomalé. Pokud jej opravdu potřebujete,
použijte volbu <tt class="option">-sws 4</tt>, což poskytuje špatnou kvalitu, ale je
o poznání rychlejší.
</p></div><p title="PODPORA EGA (4BPP)"><b>PODPORA EGA (4BPP). </b>
SVGAlib obsahuje EGAlib a <span class="application">MPlayer</span> umí zobrazovat
jakýkoli film v 16 barvách, což je vhodné v následujících konfiguracích:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  EGA karta s EGA monitorem: 320x200x4bpp, 640x200x4bpp, 640x350x4bpp
</p></li><li class="listitem"><p>
  EGA karta s CGA monitorem: 320x200x4bpp, 640x200x4bpp
</p></li></ul></div><p>
Hodnota bpp (bitů na pixel) musí být nastavena na 4 ručně:
<tt class="option">-bpp 4</tt>
</p><p>
Obraz bude nejspíš muset být zmenšený tak, aby se vešel v EGA režimu:
</p><pre class="screen">-vf scale=640:350</pre><p>
nebo
</p><pre class="screen">-vf scale=320:200</pre><p>
</p><p>
Když potřebujeme rychlou, ale nekvalitní škálovací rutinu:
</p><pre class="screen">-sws 4</pre><p>
</p><p>
Možná bude muset být vypnuta automatická korekce poměru stran:
</p><pre class="screen">-noaspect</pre><p>
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Podle mých zkušeností lze dosáhnout nejlepší kvality obrazu na
EGA obrazovkách mírným snížením jasu:
<tt class="option">-vf eq=-20:0</tt>. Na svém počítači jsem rovněž musel snížit
vzorkovací kmitočet zvuku, protože zvuk pří 44kHz byl vadný:
<tt class="option">-srate 22050</tt>.
</p></div><p>
Zapnout OSD a titulky můžete pouze v kombinaci s <tt class="option">expand</tt>
filtrem, viz man stránka pro přesné parametry.
</p></div><div class="sect1" title="7.6. Výstup na Framebuffer (FBdev)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="fbdev"></a>7.6. Výstup na Framebuffer (FBdev)</h2></div></div></div><p>
Podpora pro cíl FBdev je autodetekována během
<tt class="filename">./configure</tt>. Přečtěte si dokumentaci framebufferu ve
zdrojových kódech kernelu (<tt class="filename">Documentation/fb/*</tt>) pro více
informací.
</p><p>
Pokud vaše karta nepodporuje standard VBE 2.0 (starší ISA/PCI karty, jako
S3 Trio64), pouze VBE 1.2 (nebo straší?): Nuže, stále máte k dispozici VESAfb,
ale budete muset nahrát SciTech Display Doctor (původně UniVBE) před startem
Linuxu. Použijte bootovací disk DOSu nebo tak. A nezapoměňte si zaregistrovat
svůj UniVBE ;))
</p><p>
Výstup FBdev přijímá několik dodatečných voleb:
</p><div class="variablelist"><dl><dt><span class="term"><tt class="option">-fb</tt></span></dt><dd><p>
    nastaví zařízení framebufferu k použití (výchozí: <tt class="filename">/dev/fb0</tt>)
    </p></dd><dt><span class="term"><tt class="option">-fbmode</tt></span></dt><dd><p>
    název režimu k použití (podle <tt class="filename">/etc/fb.modes</tt>)
    </p></dd><dt><span class="term"><tt class="option">-fbmodeconfig</tt></span></dt><dd><p>
    config soubor režimů (výchozí: <tt class="filename">/etc/fb.modes</tt>)
    </p></dd><dt><span class="term"><tt class="option">-monitor-hfreq</tt>, </span><span class="term"><tt class="option">-monitor-vfreq</tt>, </span><span class="term"><tt class="option">-monitor-dotclock</tt></span></dt><dd><p>
    <span class="bold"><strong>důležité</strong></span> hodnoty, viz
    <tt class="filename">example.conf</tt>
    </p></dd></dl></div><p>
Pokud se chcete přepnout do určitého režimu, pak použijte
</p><pre class="screen">
mplayer -vm -fbmode <em class="replaceable"><code>name_of_mode</code></em> <em class="replaceable"><code>soubor</code></em>
</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <tt class="option">-vm</tt> samotná zvolí nejpříhodnější režim z
  <tt class="filename">/etc/fb.modes</tt>. Může být rovněž použita spolu s volbami
  <tt class="option">-x</tt> a <tt class="option">-y</tt>. Volba
  <tt class="option">-flip</tt> je podporována pouze pokud pixelový formát filmu
  odpovídá pixelovému formátu videorežimu. Věnujte pozornost hodnotě bpp.
  Ovladač fbdev zkusí použít aktuální, nebo pokud zadáte volbu
  <tt class="option">-bpp</tt>, pak tuto.
  </p></li><li class="listitem"><p>
  Volba <tt class="option">-zoom</tt> není podporována
  (použijte <tt class="option">-vf scale</tt>). Nelze použít režimy 8bpp (nebo nižší).
</p></li><li class="listitem"><p>
  Pravděpodobně budete chtít vypnout kursor:
  </p><pre class="screen">echo -e '\033[?25l'</pre><p>
  nebo
  </p><pre class="screen">setterm -cursor off</pre><p>
  a spořič obrazovky:
  </p><pre class="screen">setterm -blank 0</pre><p>
  Pro opětovné zapnutí kursoru:
  </p><pre class="screen">echo -e '\033[?25h'</pre><p>
  nebo
  </p><pre class="screen">setterm -cursor on</pre><p>
</p></li></ul></div><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Změna videorežimu FBdev <span class="emphasis"><em>nepracuje</em></span> ve VESA
framebufferu a nechtějte to po nás, jelikož to není omezení
<span class="application">MPlayer</span>u.
</p></div></div><div class="sect1" title="7.7. Matrox framebuffer (mga_vid)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mga_vid"></a>7.7. Matrox framebuffer (mga_vid)</h2></div></div></div><p>
<code class="systemitem">mga_vid</code> je kombinací výstupního video rozhraní a
Linuxového jaderného modulu, který používá Matrox G200/G400/G450/G550 video
scaler/overlay jednotku pro konverzi YUV-&gt;RGB barevného prostoru a libovolé
škálování videa.
<code class="systemitem">mga_vid</code> má hardwarovou podporu VSYNC s trojitou
vyrovnávací pamětí. Pracuje jak ve framebuffer konzoli, tak v X, ale pouze
s Linuxem 2.4.x.
</p><p>
Chcete-li verzi ovladače pro Linux 2.6.x, podívejte se na
<a class="ulink" href="http://attila.kinali.ch/mga/" target="_top">http://attila.kinali.ch/mga/</a>.
</p><div class="procedure" title="Instalace:"><a name="id2553507"></a><p class="title"><b>Instalace:</b></p><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
  Pokud jej chcete použít, nejdříve musíte sestavit
  <tt class="filename">mga_vid.o</tt>:
  </p><pre class="screen">
cd drivers
make</pre><p>
</p></li><li class="step" title="Krok 2"><p>
  Pake spusťte (jako <code class="systemitem">root</code>)
  </p><pre class="screen">make install</pre><p>
  což by mělo nainstalovat modul a vytvořit pro vás soubor zařízení.
  Ovladač nahrajte pomocí
  </p><pre class="screen">insmod mga_vid.o</pre><p>
</p></li><li class="step" title="Krok 3"><p>
  Měli byste ověřit velikost detekované paměti pomocí příkazu
  <span class="command"><strong>dmesg</strong></span>. Pokud je špatná, použijte volbu
  <tt class="option">mga_ram_size</tt>
  (nejdřív <span class="command"><strong>rmmod mga_vid</strong></span>),
  nastavte velikost paměti karty v MB:
  </p><pre class="screen">insmod mga_vid.o mga_ram_size=16</pre><p>
</p></li><li class="step" title="Krok 4"><p>
  Aby se nahrával/odstraňoval automaticky podle potřeby, nejdříve přidejte
  následující řádek na konec <tt class="filename">/etc/modules.conf</tt>:

  </p><pre class="programlisting">alias char-major-178 mga_vid</pre><p>
</p></li><li class="step" title="Krok 5"><p>
  Teď budete muset (pře)kompilovat <span class="application">MPlayer</span>,
  <span class="command"><strong>./configure</strong></span> zdetekuje
  <tt class="filename">/dev/mga_vid</tt> a zakompiluje 'mga' rozhraní.
  V <span class="application">MPlayer</span>u se používá pomocí <tt class="option">-vo mga</tt>
  pokud máte matroxfb konzoli, nebo <tt class="option">-vo xmga</tt> pod XFree86
  3.x.x nebo 4.x.x.
</p></li></ol></div><p>
Ovladač mga_vid spolupracuje s Xv.
</p><p>
Určité informace lze přečíst z <tt class="filename">/dev/mga_vid</tt> zařízení,
například pomocí
</p><pre class="screen">cat /dev/mga_vid</pre><p>
a může do něj být zapsána změna jasu:
</p><pre class="screen">echo "brightness=120" &gt; /dev/mga_vid</pre><p>
</p><p>
Ve stejném adresáři je i testovací aplikace jménem
<span class="command"><strong>mga_vid_test</strong></span>. Měla by na obrazovku kreslit obrázky
256x256 bodů, pokud vše pracuje jak má.
</p></div><div class="sect1" title="7.8. Podpora 3Dfx YUV"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tdfxfb"></a>7.8. Podpora 3Dfx YUV</h2></div></div></div><p>
Tento ovladač používá ovladač framebufferu tdfx z jádra pro přehrávání
filmů s YUV akcelerací. Budete potřebovat jádro s podporou tdfxfb a
rekompilovat s
</p><pre class="screen">./configure --enable-tdfxfb</pre><p>
</p></div><div class="sect1" title="7.9. tdfx_vid"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tdfx_vid"></a>7.9. tdfx_vid</h2></div></div></div><p>
Toto je kombinace Linuxového jaderného modulu a video výstupního
rozhraní podobného <a class="link" href="#mga_vid" title="7.7. Matrox framebuffer (mga_vid)">mga_vid</a>.
Budete potřebovat 2.4.x kernel s <code class="systemitem">agpgart</code>
ovladačem, jelikož <code class="systemitem">tdfx_vid</code> používá AGP.
Předejte <tt class="option">--enable-tdfxfb</tt> do <span class="command"><strong>configure</strong></span>
abyste sestavili video výstupní rozhraní a sestavte jaderný modul pomocí
následujících instrukcí.
</p><div class="procedure" title="Instalace jaderného modulu tdfx_vid.o:"><a name="id2553771"></a><p class="title"><b>Instalace jaderného modulu tdfx_vid.o:</b></p><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
  Kompilace <tt class="filename">tdfx_vid.o</tt>:
  </p><pre class="screen">
cd drivers
make</pre><p>
</p></li><li class="step" title="Krok 2"><p>
  Pak spusťte (jako <code class="systemitem">root</code>)
  </p><pre class="screen">make install</pre><p>
  což by mělo nainstalovat modul a vytvořit soubor zařízení.
  Nahrajte ovladač pomocí
  </p><pre class="screen">insmod tdfx_vid.o</pre><p>
</p></li><li class="step" title="Krok 3"><p>
  Aby se nahrával a odstraňoval automaticky podle potřeby, vložte nejprve
  následující řádku na konec <tt class="filename">/etc/modules.conf</tt>:

  </p><pre class="programlisting">alias char-major-178 tdfx_vid</pre><p>
</p></li></ol></div><p>
Ve stejném adresáři je testovací aplikace jménem
<span class="command"><strong>tdfx_vid_test</strong></span>. Měla by vypisovat pár užitečných
informací, pokud vše dobře pracuje.
</p></div><div class="sect1" title="7.10. Rozhraní OpenGL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="opengl"></a>7.10. Rozhraní OpenGL</h2></div></div></div><p>
<span class="application">MPlayer</span> podporuje zobrazování filmů pomocí OpenGL,
ale pokud vaše platforma/ovladač podporuje xv což by měl být případ PC s
Linuxem, použijte raději xv, jelikož výkon OpenGL je o poznání horší.
Pokud máte X11 implementaci bez podpory xv, je OpenGL slušná alternativa.
</p><p>
Naneštěstí ne všechny ovladače tuto vlastnost podporují. Ovladače Utah-GLX
(pro XFree86 3.3.6) ji podporují pro všechny karty.
Viz <a class="ulink" href="http://utah-glx.sf.net" target="_top">http://utah-glx.sf.net</a> pro detaily jak je nainstalovat.
</p><p>
XFree86(DRI) 4.0.3 nebo pozdější podporují OpenGL s kartami Matrox a Radeon,
4.2.0 a pozdější podporují Rage128.
Viz <a class="ulink" href="http://dri.sf.net" target="_top">http://dri.sf.net</a> pro stažení a instalační instrukce.
</p><p>
Rada od jednoho z uživatelů: GL video výstup lze použít pro dosažení
vertikálně synchronizovaného TV výstupu. Budete muset nastavit proměnnou
prostředí (aspoň na nVidii):
</p><p>
<span class="command"><strong>export __GL_SYNC_TO_VBLANK=1</strong></span>
</p></div><div class="sect1" title="7.11. AAlib – zobrazování v textovém režimu"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aalib"></a>7.11. AAlib – zobrazování v textovém režimu</h2></div></div></div><p>
AAlib je knihovna pro zobrazování grafiky v textovém režimu pomocí výkonného
ASCII renderovače. Existuje <span class="emphasis"><em>spousta</em></span> programů, ktaré ji již
podporují, jako DOOM, Quake, atd. <span class="application">MPlayer</span>
pro ni obsahuje šikovné rozhraní. Pokud <tt class="filename">./configure</tt>
zjistí nainstalovanou aalib, sestaví se aalib libvo rozhraní.
</p><p>
Můžete použít některé klávesy v AA okně pro změnu renderovacích voleb:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Klávesa</th><th>Akce</th></tr></thead><tbody><tr><td><span class="keycap"><b>1</b></span></td><td>
  sníží kontrast
</td></tr><tr><td><span class="keycap"><b>2</b></span></td><td>
  zvýší kontrast
</td></tr><tr><td><span class="keycap"><b>3</b></span></td><td>
  sníží jas
</td></tr><tr><td><span class="keycap"><b>4</b></span></td><td>
  zvýší jas
</td></tr><tr><td><span class="keycap"><b>5</b></span></td><td>
  vypíná/zapíná rychlé renderování
</td></tr><tr><td><span class="keycap"><b>6</b></span></td><td>
  nastaví rozhodovací režim (žádný, error distribution, Floyd Steinberg)
</td></tr><tr><td><span class="keycap"><b>7</b></span></td><td>
  inverze obrazu
</td></tr><tr><td><span class="keycap"><b>8</b></span></td><td>
  přepíná mezi ovládáním aa a <span class="application">MPlayer</span>u
</td></tr></tbody></table></div><div class="variablelist" title="Můžete použít následující volby příkazového řádku:"><p class="title"><b>Můžete použít následující volby příkazového řádku:</b></p><dl><dt><span class="term"><tt class="option">-aaosdcolor=<em class="replaceable"><code>V</code></em></tt></span></dt><dd><p>
    změna barvy OSD
  </p></dd><dt><span class="term"><tt class="option">-aasubcolor=<em class="replaceable"><code>V</code></em></tt></span></dt><dd><p>
    změna barvy titulků
  </p><p>
    kde <em class="replaceable"><code>V</code></em> může být:
    <code class="literal">0</code> (normální),
    <code class="literal">1</code> (tmavé),
    <code class="literal">2</code> (tučné),
    <code class="literal">3</code> (polotučný font),
    <code class="literal">4</code> (reverz),
    <code class="literal">5</code> (speciální).
  </p></dd></dl></div><div class="variablelist" title="AAlib samotná poskytuje velké množství voleb. Zde je několik důležitých:"><p class="title"><b>AAlib samotná poskytuje velké množství voleb. Zde je několik
důležitých:</b></p><dl><dt><span class="term"><tt class="option">-aadriver</tt></span></dt><dd><p>
    Nastaví doporučený aa ovladač (X11, curses, Linux).
  </p></dd><dt><span class="term"><tt class="option">-aaextended</tt></span></dt><dd><p>
    Použití všech 256 znaků.
  </p></dd><dt><span class="term"><tt class="option">-aaeight</tt></span></dt><dd><p>
    Použití osmibitového ASCII.
  </p></dd><dt><span class="term"><tt class="option">-aahelp</tt></span></dt><dd><p>
    Vypíše všechny aalib volby.
  </p></dd></dl></div><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Renderování je velmi náročné na CPU, zvlášť při použití AA-na-X
(aalib na X) a nejméně náročné je na standardní neframebuferované
konzoli. Použijte SVGATextMode pro nastavení velkého textového režimu
a užijte si! (secondary head Hercules cards rock :)) (ale IMHO můžete použít
volbu <tt class="option">-vf 1bpp</tt> pro grafiku na hgafb:)
</p></div><p>
Použijte volbu <tt class="option">-framedrop</tt>, pokud váš počítač není dostatečně
rychlý pro renderování všech snímků!
</p><p>
Při přehrávání na terminálu dosáhnete lepší rychlosti i kvality použitím
ovladače Linux, bez curses (<tt class="option">-aadriver linux</tt>). Ale pak budete
potřebovat práva k zápisu do
<tt class="filename">/dev/vcsa<em class="replaceable"><code>&lt;terminal&gt;</code></em></tt>!
Aalib to nedetekuje, ale vo_aa zkouší najít nejlepší režim.
Pro více ladících možností viz <a class="ulink" href="http://aa-project.sf.net/tune" target="_top">http://aa-project.sf.net/tune</a>.
</p></div><div class="sect1" title="7.12. libcaca – Barevná ASCII Art knihovna"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="caca"></a>7.12. 
<code class="systemitem">libcaca</code> – Barevná ASCII Art knihovna
</h2></div></div></div><p>
Knihovna <a class="ulink" href="http://sam.zoy.org/projects/libcaca/" target="_top"><code class="systemitem">libcaca</code></a>
je grafická knihovna produkující text místo pixelů, takže může fungovat na
starších video kartách a textových terminálech. Není nepodobná známé knihovně
<code class="systemitem">AAlib</code>.
<code class="systemitem">libcaca</code> vyžaduje k činnosti terminál,
takže by měla fungovat na všech Unixových systémech (včetně Mac OS X) pomocí buď
knihovny <code class="systemitem">slang</code> nebo knihovny
<code class="systemitem">ncurses</code>, pod DOSem pomocí knihovny
<code class="systemitem">conio.h</code> a na systémech Windows
pomocí buď <code class="systemitem">slang</code> nebo
<code class="systemitem">ncurses</code> (pomocí emulace Cygwin) nebo
<code class="systemitem">conio.h</code>. Pokud
<tt class="filename">./configure</tt>
detekuje <code class="systemitem">libcaca</code>, bude sestaveno
rozhraní caca libvo.
</p><div class="itemizedlist" title="Odlišnosti od AAlib jsou:"><p class="title"><b>Odlišnosti od <code class="systemitem">AAlib</code> jsou:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
   16 dostupných barev pro znakový výstup (256 barev pro pár)
</p></li><li class="listitem"><p>
   rozhodování podle barev v obrázku
</p></li></ul></div><div class="itemizedlist" title="Ale libcaca má také následující omezení:"><p class="title"><b>Ale <code class="systemitem">libcaca</code> má také následující
  omezení:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
   nemá podpora pro jas, kontrast a gamu
</p></li></ul></div><p>
V caca okně můžete použít některé klávesy pro změnu renderovacích volby:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Klávesa</th><th>Akce</th></tr></thead><tbody><tr><td><span class="keycap"><b>d</b></span></td><td>
  Přepíná metody rozhodování v <code class="systemitem">libcaca</code>.
</td></tr><tr><td><span class="keycap"><b>a</b></span></td><td>
  Přepíná vyhlazování v <code class="systemitem">libcaca</code>.
</td></tr><tr><td><span class="keycap"><b>b</b></span></td><td>
  Přepíná pozadí v <code class="systemitem">libcaca</code>.
</td></tr></tbody></table></div><div class="variablelist" title="libcaca také respektuje některé proměnné prostředí:"><p class="title"><b><code class="systemitem">libcaca</code> také respektuje některé
   proměnné prostředí:</b></p><dl><dt><span class="term"><tt class="option">CACA_DRIVER</tt></span></dt><dd><p>
    Nastaví doporučený caca ovladač, jako ncurses, slang, x11.
  </p></dd><dt><span class="term"><tt class="option">CACA_GEOMETRY (pouze X11)</tt></span></dt><dd><p>
    Nastaví počet řad a sloupců. Např. 128x50.
  </p></dd><dt><span class="term"><tt class="option">CACA_FONT (pouze X11)</tt></span></dt><dd><p>
    Nastaví použitý font. Např. fixed, nexus.
  </p></dd></dl></div><p>
Použijte volbu <tt class="option">-framedrop</tt>, pokud váš počítač není dost rychlý
pro renderování všech snímků.
</p></div><div class="sect1" title="7.13. VESA - výstup do VESA BIOSu"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vesa"></a>7.13. VESA - výstup do VESA BIOSu</h2></div></div></div><p>
Tento ovladač byl navržen a představen jako <span class="bold"><strong>obecný
ovladač</strong></span> pro jakoukoli video kartu, která má VESA VBE 2.0 kompatibilní
BIOS. Další výhodou tohoto ovladače je, že zkouší vynutit zapnutí výstupu na TV.
<em class="citetitle">VESA BIOS EXTENSION (VBE) Version 3.0 Date: September 16,
1998</em> (Strana 70) uvádí:
</p><div class="blockquote"><blockquote class="blockquote"><p title="Karty Dual-Controller"><b>Karty Dual-Controller. </b>
VBE 3.0 podporuje karty s dual-controllerem za předpokladu že, jelikož jsou
typicky oba controllery vybaveny stejným OEM a nastavovány jedinou
BIOS ROM na stejné grafické kartě, je možné skrýt před aplikací přítomnost
dvou controllerů. To omezuje nezávislé použití jednotlivých controllerů,
ale umožňuje aplikacím vydaným před VBE 3.0 pracovat normálně.
VBE funkce 00h (Návrat informací o controlleru) vrací kombinované informace
obou conrollerů, včetně kombinovaného seznamu platných režimů.
Příslušný controller je aktivován jakmile aplikace vybere režim. Všechny
ostatní VBE funkce pak pracují s aktivním controllerem.
</p></blockquote></div><p>
Máte tedy možnost s tímto rozhraním dostat funkční TV výstup.
(Soudím že TV výstup má velmi často samostatnou jednotku, nebo aspoň samostatný
výstup.)
</p><div class="itemizedlist" title="VÝHODY"><p class="title"><b>VÝHODY</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Máte šanci sledovat video <span class="bold"><strong>dokonce i když Linux nezná
  </strong></span> váš video hardware.
</p></li><li class="listitem"><p>
  Nepotřebujete mít ve svém Linuxu nainstalovány žádné věci související s
  grafikou (jako X11 (alias XFree86), fbdev atd). Toto rozhraní lze provozovat
  z <span class="bold"><strong>textového režimu</strong></span>.
</p></li><li class="listitem"><p>
  Máte šanci získat <span class="bold"><strong>funkční TV-out</strong></span>.
  (Je to pravda minimálně s kartami ATI).
</p></li><li class="listitem"><p>
  Toto rozhraní volá <code class="function">int 10h</code> handler, takže není
  emulátorem – volá <span class="bold"><strong>skutečné</strong></span> věci
  <span class="emphasis"><em>skutečného</em></span> BIOSu v <span class="emphasis"><em>reálném režimu</em></span>
  (ve skutečnosti v režimu vm86).
</p></li><li class="listitem"><p>
  Můžete s ním použít VIDIX, takže dostanete akcelerované video
  <span class="bold"><strong>a</strong></span> TV výstup současně!
  (Doporučeno pro karty ATI.)
</p></li><li class="listitem"><p>
  Máte-li VESA VBE 3.0+ a nastavili jste si někde
  <tt class="option">monitor-hfreq, monitor-vfreq, monitor-dotclock</tt>
  (config soubor nebo příkazový řádek) dostanete nejvyšší možný obnovovací
  kmitočet. (Using General Timing Formula). Abyste této funkce dosáhli, musíte
  nastavit <span class="bold"><strong>všechna</strong></span> nastavení monitoru.
</p></li></ul></div><div class="itemizedlist" title="NEVÝHODY"><p class="title"><b>NEVÝHODY</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
   Pracuje pouze na <span class="bold"><strong>systémech x86</strong></span>.
</p></li><li class="listitem"><p>
  Může to použít pouze <code class="systemitem">root</code>.
</p></li><li class="listitem"><p>
  Zatím je dostupné pouze pro <span class="bold"><strong>Linux</strong></span>.
</p></li></ul></div><div class="important" title="Důležité" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Důležité</h3><p>
Nepoužívejte toto rozhraní s <span class="bold"><strong>GCC 2.96</strong></span>!
Nefunguje!
</p></div><div class="variablelist" title="VOLBY PŘÍKAZOVÉHO ŘÁDKU DOSTUPNÉ PRO VESA"><p class="title"><b>VOLBY PŘÍKAZOVÉHO ŘÁDKU DOSTUPNÉ PRO VESA</b></p><dl><dt><span class="term"><tt class="option">-vo vesa:<em class="replaceable"><code>volby</code></em></tt></span></dt><dd><p>
    zatím dostupné: <code class="literal">dga</code> pro vynucení dga režimu a
    <code class="literal">nodga</code> pro jeho potlačení. V režimu dga můžete zapnout
    dvojitou vyrovnávací paměť pomocí volby <tt class="option">-double</tt>.
    Poznámka: Tyto volby můžete vynechat, abyste zapli
    <span class="bold"><strong>autodetekci</strong></span> dga režimu.
  </p></dd></dl></div><div class="itemizedlist" title="ZNÁMÉ PROBLÉMY A KLIČKY"><p class="title"><b>ZNÁMÉ PROBLÉMY A KLIČKY</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Pokud máte nainstalován <span class="bold"><strong>NLS</strong></span> font v
  Linuxové konzoli a použijete VESA rozhraní v textovém režimu, pak po
  ukončení <span class="application">MPlayer</span>u budete mít nahrán
  <span class="bold"><strong>ROM font</strong></span> místo národního.
  Můžete si opět nahrát národní font například pomocí utility
  <span class="command"><strong>setsysfont</strong></span> z distribuce Mandrake/Mandriva.
  (<span class="bold"><strong>Tip</strong></span>: Stejná utilita je použita pro
  lokalizaci fbdev).
</p></li><li class="listitem"><p>
  Některé <span class="bold"><strong>Linuxové grafické ovladače</strong></span> neobnovují
  aktivní <span class="bold"><strong>režim BIOSu</strong></span> v DOSové paměti.
  Takže pokud máte tento problém – vždy používejte VESA rozhraní pouze v
  <span class="bold"><strong>textovém režimu</strong></span>. Jinak bude přesto aktivován
  textový režim (#03) a budete muset restartovat počítač.
</p></li><li class="listitem"><p>
  Často po ukončení VESA rozhraní dostanete
  <span class="bold"><strong>černou</strong></span> obrazovku. Chcete-li vrátit obraz do
  původního stavu – jednoduše se přepněte do jiné konzole (stiskem
  <span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F&lt;x&gt;</b></span>)
  a pak se přepněte zpět stejným způsobem.
</p></li><li class="listitem"><p>
  Chcete-li <span class="bold"><strong>funkční TV-out</strong></span>, musíte mít
  připojený TV konektor před startem počítače, jelikož se video BIOS
  inicializuje pouze jednou během POST procedury.
</p></li></ul></div></div><div class="sect1" title="7.14. X11"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="x11"></a>7.14. X11</h2></div></div></div><p>
Pokud možno se mu vyhněte. Posílá obraz do X11 (používá rozšíření sdílená paměť)
bez jakékoli hardwarové akcelerace. Podporuje (MMX/3DNow/SSE akcelerované, ale
přesto pomalé) softwarové škálování. Použijte volby <tt class="option">-fs -zoom</tt>.
Většina karet má hardwarovou podporu škálování, použijte pro ně volbu
<tt class="option">-vo xv</tt>, nebo <tt class="option">-vo xmga</tt> pro karty Matrox.
</p><p>
Problém je, že většina karet nepodporuje hardwarovou akceleraci na sekundárním
výstupu/TV. V těchto případech uvidíte místo filmu zelenou/modrou obrazovku.
Teď se hodí toto rozhraní, ale potřebujete silný procesor pro použití
softwarového škálování. Nepoužívejte SDL softwarový výstup a škálování, má horší
kvalitu obrazu!
</p><p>
Softwarové škálování je velmi pomalé, zkuste raději měnit videorežimy.
Je to jednoduché. Viz <a class="link" href="#dga-modelines" title="PŘEPÍNÁNÍ ROZLIŠENÍ">modelines v DGA sekci</a>
a přidejte je do svého <tt class="filename">XF86Config</tt>.

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Máte-li XFree86 4.x.x: použijte volbu <tt class="option">-vm</tt>. Ta změní
  rozlišení tak, aby do něj film dobře vešel. Když ne:
</p></li><li class="listitem"><p>
  S XFree86 3.x.x: musíte cyklovat dostupnými rozlišeními pomocí tlačítek
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Numerické  +</b></span>
  a
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>Numerické  -</b></span>
</p></li></ul></div><p>
</p><p>
Pokud nemůžete najír rozlišení, která jste vložili, pročtěte si výstup XFree86.
Některé ovladače nezvládnou nízké bodové kmitočty potřebné pro režimy s nízkým
rozlišením videa.
</p></div><div class="sect1" title="7.15. VIDIX"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="vidix"></a>7.15. VIDIX</h2></div></div></div><p title="PŘEDMLUVA"><b>PŘEDMLUVA. </b>
<acronym class="acronym">VIDIX</acronym> je zkratka pro
<span class="bold"><strong>VID</strong></span>eo
<span class="bold"><strong>I</strong></span>nterface
for *ni<span class="bold"><strong>X</strong></span>
(video rozhraní pro *nix).
VIDIX bylo navrženo a představeno jako rozhraní pro rychlé uživatelské ovladače
dosahujících video výkonu jako dosahuje mga_vid na kartách Matrox. Je rovněž
dobře přenositelné.
</p><p>
Toto rozhraní bylo navrženo jako pokus napasovat existující video akcelerující
rozhraní (známé jako mga_vid, rage128_vid, radeon_vid, pm3_vid) do pevného
schéma. Poskytuje vysokoúrovňové rozhraní k čipům známým jako BES
(BackEnd scalers) nebo OV (Video Overlays). Neposkytuje nízkoúrovňové rozhraní
k věcem známým jako grafické servery.
(Nechci konkurovat X11 týmu v přepínání grafických režimů). Čili hlavním cílem
tohoto rozhraní je maximalizace rychlosti přehrávání videa.
</p><div class="itemizedlist" title="POUŽITÍ"><p class="title"><b>POUŽITÍ</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Můžete použít samostatné video rozhraní: <tt class="option">-vo xvidix</tt>.
  Toto rozhraní bylo vytvořeno jako front end X11 k technologii VIDIX.
  Vyžaduje X server a může pracovat pouze pod X serverem. Poznamenejme, že
  jelikož přímo komunikuje s hardwarem a obchází X ovladač, pixmapy uložené
  v paměti grafické karty můžou být poškozeny. Můžete se tomu vyhnout omezením
  množství video paměti použité X pomocí volby "VideoRam" v XF86Config o 4MB.
  Pokud máte méně než 8MB video ram, můžete místo toho použít volbu
  "XaaNoPixmapCache" v sekci screen.
</p></li><li class="listitem"><p>
  Existuje konzolové VIDIX rozhraní: <tt class="option">-vo cvidix</tt>.
  To vyžaduje pro většinu karet funkční inicializovaný framebuffer (jinak pouze
  rozhodíte obrazovku) a dosáhnete podobného efektu jako s
  <tt class="option">-vo mga</tt> nebo <tt class="option">-vo fbdev</tt>. nVidia karty však
  jsou schopny zobrazit plně grafické video na reálné textové konzoli. Viz
  sekci <a class="link" href="#vidix-nvidia" title="7.15.5. Karty nVidia">nvidia_vid</a> pro více informací.
  Abyste se zbavili textu na okrajích a blikajícího kursoru, zkuste něco jako
  </p><pre class="screen">setterm -cursor off &gt; /dev/tty9</pre><p>
  (předpokládáme, že <code class="systemitem">tty9</code> není dosud používaná) a pak
  se přepneme do <code class="systemitem">tty9</code>.
  Na druhou stranu volba <tt class="option">-colorkey 0</tt> by měla poskytnout
  video běžící na "pozadí", zprávná funkce však závisí na funkčnosti colorkey.
  </p></li><li class="listitem"><p>
  Můžete použít VIDIXové podzařízení, které bylo zabudováno do několika video
  ovladačů, například: <tt class="option">-vo vesa:vidix</tt>
  (<span class="bold"><strong>pouze Linux</strong></span>) a
  <tt class="option">-vo fbdev:vidix</tt>.
</p></li></ul></div><p>
Nezáleží na tom, které video výstupní rozhraní je použito s
<span class="bold"><strong>VIDIX</strong></span>.
</p><div class="itemizedlist" title="POŽADAVKY"><p class="title"><b>POŽADAVKY</b></p><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
  Video karta by měla být v grafickém režimu (vyjma karet nVidia s výstupním
  rozhraním <tt class="option">-vo cvidix</tt>).
</p></li><li class="listitem"><p>
  Výstupní video rozhraní <span class="application">MPlayer</span>u by mělo znát
  aktivní video režim a být schopno sdělit VIDIXovému podzařízení některé video
  charakteristiky serveru.
</p></li></ul></div><p title="METODY POUŽITÍ"><b>METODY POUŽITÍ. </b>
Když použijete VIDIX jako <span class="bold"><strong>subdevice</strong></span>
(<tt class="option">-vo vesa:vidix</tt>), pak je konfigurace video režimu je provedeno
výstupním video rozhraním (zkrátka <span class="bold"><strong>vo_server</strong></span>em).
Takže můžete zadat na příkazovém řádku <span class="application">MPlayer</span>u
stejné volby jako pro vo_server. Návdavkem rozeznává volbu
<tt class="option">-double</tt> jako globální parametr. (Doporučuji použít tuto volbu
s VIDIX aspoň pro ATI kartu). Stejně jako <tt class="option">-vo xvidix</tt>, dosud
zná následující volby: <tt class="option">-fs -zoom -x -y -double</tt>.
</p><p>
Rovněž můžete uvést VIDIXový ovladač jako třetí podvolbu na příkazovém řádku:
</p><pre class="screen">
mplayer -vo xvidix:mga_vid.so -fs -zoom -double <em class="replaceable"><code>soubor.avi</code></em>
</pre><p>
nebo
</p><pre class="screen">
mplayer -vo vesa:vidix:radeon_vid.so -fs -zoom -double -bpp 32 <em class="replaceable"><code>soubor.avi</code></em>
</pre><p>
Ale je to nebezpečné a neměli byste to dělat. V tomto případě bude zadaný
ovladač vynucen a výsledek je nepředvídatelný (může vám
<span class="bold"><strong>zatuhnout</strong></span> počítač). Měli byste to použít
POUZE pokud jste si absolutně jistí, že to bude fungovat a
<span class="application">MPlayer</span> to neudělá automaticky. Řekněte o tom prosím
vývojářům. Správný způsob je použití VIDIX bez argumentů, aby proběhla
autodetekce.
</p><p>
Jelikož VIDIX vyžaduje přímý přístup k hardware, můžete jej buď spustit jako
root, nebo nastavit SETUID bit binárce <span class="application">MPlayer</span>u
(<span class="bold"><strong>Varování: Toto je bezpečnostní risk!</strong></span>).
Alternativně můžete použít speciální jaderný modul, například:
</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
  Stáhněte si
  <a class="ulink" href="http://www.arava.co.il/matan/svgalib/" target="_top">vývojovou verzi</a>
  svgalib (například 1.9.17), <span class="bold"><strong>NEBO</strong></span> si
  stáhněte verzi vytvořenou Alexem speciálně pro použití s
  <span class="application">MPlayer</span>em (ke kompilaci nepotřebuje zdrojový kód
  svgalib) z
  <a class="ulink" href="http://www.mplayerhq.hu/MPlayer/contrib/svgalib/svgalib_helper-1.9.17-mplayer.tar.bz2" target="_top">odtud</a>.
</p></li><li class="step" title="Krok 2"><p>
  Skompilujte modul v adresáři
  <tt class="filename">svgalib_helper</tt>
  (naleznete ji v <tt class="filename">svgalib-1.9.17/kernel/</tt>,
  pokud jste si stáhli zdrojový kód ze serveru svgalib) a nahrajte (insmod) jej.
</p></li><li class="step" title="Krok 3"><p>
  Pro vytvoření potřebných zařízení v adresáři
  <tt class="filename">/dev</tt> proveďte jako root
  </p><pre class="screen">make device</pre><p> v adresáři
  <tt class="filename">svgalib_helper</tt>.
</p></li><li class="step" title="Krok 4"><p>
  Přesuňte adresář <tt class="filename">svgalib_helper</tt> do
  podadresáře <tt class="filename">vidix</tt> zdrojových
  kódů <span class="application">MPlayer</span>u.
</p></li><li class="step" title="Krok 5"><p>
 Odkomentujte řádek CFLAGS obsahující text "svgalib_helper"
 v souboru <tt class="filename">vidix/Makefile</tt>.
</p></li><li class="step" title="Krok 6"><p>
  Překompilujte.
</p></li></ol></div><div class="sect2" title="7.15.1. Karty ATI"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-ati"></a>7.15.1. Karty ATI</h3></div></div></div><p>
V současnosti je většina ATI karet podporována nativně od Mach64 až po
nejnovější Radeony.
</p><p>
Existují dvě skompilované binárky: <tt class="filename">radeon_vid</tt> pro Radeony a
<tt class="filename">rage128_vid</tt> pro karty Rage 128. Můžete některou vynutit,
 nebo nechat VIDIX rozhraní autodetekovat všechny dostupné ovladače.
</p></div><div class="sect2" title="7.15.2. Karty Matrox"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-mga"></a>7.15.2. Karty Matrox</h3></div></div></div><p>
Matrox G200, G400, G450 a G550 jsou hlášeny jako funkční.
</p><p>
Ovladač podporuje video ekvalizéry a měl by být téměř tak rychlý jako
<a class="link" href="#mga_vid" title="7.7. Matrox framebuffer (mga_vid)">Matrox framebuffer</a>
</p></div><div class="sect2" title="7.15.3. Karty Trident"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-trident"></a>7.15.3. Karty Trident</h3></div></div></div><p>
Existuje ovladač pro čipset Trident Cyberblade/i1, který lze nalézt na
motherboardech VIA Epia.
</p><p>
Ovladač byl napsán a je udržován
<a class="ulink" href="http://www.blackfiveservices.co.uk/EPIAVidix.shtml" target="_top">Alastairem M. Robinsonem</a>
</p></div><div class="sect2" title="7.15.4. Karty 3DLabs"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-3dlabs"></a>7.15.4. Karty 3DLabs</h3></div></div></div><p>
Ačkoli existuje ovladač pro čipy 3DLabs GLINT R3 a Permedia3, nikdo je
netestoval, takže hlášení vítáme.
</p></div><div class="sect2" title="7.15.5. Karty nVidia"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-nvidia"></a>7.15.5. Karty nVidia</h3></div></div></div><p>
Unikátní vlastností ovladače nvidia_vid je jeho schopnost zobrazit video na
<span class="bold"><strong>jednoduché, čisté, pouze textové konzoli</strong></span>
– bez framebufferu nebo nějaké X magie. Pro tento účel budete muset
použít video rozhraní <tt class="option">cvidix</tt>, jak to ukazuje následující
příklad:
</p><pre class="screen">mplayer -vo cvidix <em class="replaceable"><code>příklad.avi</code></em></pre><p>
</p></div><div class="sect2" title="7.15.6. Karty SiS"><div class="titlepage"><div><div><h3 class="title"><a name="vidix-sis"></a>7.15.6. Karty SiS</h3></div></div></div><p>
Toto je velmi experimentální kód, stejně jako nvidia_vid.
</p><p>
Byl testován na SiS 650/651/740 (nejobvyklejší čipsety použité v SiS
verzích "Shuttle XPC" barebones boxes out there)
</p><p>
Hlášení očekávána!
</p></div></div><div class="sect1" title="7.16. DirectFB"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="directfb"></a>7.16. DirectFB</h2></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>
„DirectFB je grafická knihovna navržená se zřetelem na vestavěné systémy.
Nabízí maximálně hardwarově akcelerovaný výkon při minimální spotřebě
zdrojů a zatížení.“ – citováno z <a class="ulink" href="http://www.directfb.org" target="_top">http://www.directfb.org</a>
</p></blockquote></div><p>Vlastnosti DirectFB v této sekci vynechám.</p><p>

Ačkoli <span class="application">MPlayer</span> není podporován jako „video
provider“ v DirectFB, toto video rozhraní umožní přehrávání videa přes
DirectFB. Bude to samozřejmě akcelerované. Na mém Matroxu G400 byla rychlost
DirectFB stejná jako XVideo.
</p><p>
Vždy se snažte používat nejnovější verzi DirectFB. Můžete nastavovat volby pro
DirectFB na příkazovém řádku pomocí volby <tt class="option">-dfbopts</tt>. Volbu
vrstvy lze provést metodou podzařízení, např.: <tt class="option">-vo directfb:2</tt>
(výchozí je vrstva -1: autodetekce)
</p></div><div class="sect1" title="7.17. DirectFB/Matrox (dfbmga)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dfbmga"></a>7.17. DirectFB/Matrox (dfbmga)</h2></div></div></div><p>
Přečtěte si prosím <a class="link" href="#directfb" title="7.16. DirectFB">hlavní DirectFB</a> sekci pro
obecné informace.
</p><p>
Toto video výstupní zařízení zapne CRTC2 (na sekundárním výstupu) na kartách
Matrox G400/G450/G550, takže zobrazuje video
<span class="bold"><strong>nezávisle</strong></span> na hlavním výstupu.
</p><p>
Ville Syrjala's má
<a class="ulink" href="http://www.sci.fi/~syrjala/directfb/Matrox_TV-out_README.txt" target="_top">README</a>
a
<a class="ulink" href="http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto" target="_top">HOWTO</a>
na své domácí stránce, kde vysvětluje, jak rozběhnout DirectFB TV výstup na
kartách Matrox.
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
První DirectFB verze se kterou se nám to povedlo byla
0.9.17 (je chybová, potřebuje <code class="systemitem">surfacemanager</code>
patch z výše uvedeného URL). Portace CRTC2 kódu do
<a class="link" href="#mga_vid" title="7.7. Matrox framebuffer (mga_vid)">mga_vid</a> bylo plánováno léta,
<a class="ulink" href="../../tech/patches.txt" target="_top">patche</a> vítáme.
</p></div></div><div class="sect1" title="7.18. MPEG dekodéry"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mpeg_decoders"></a>7.18. MPEG dekodéry</h2></div></div></div><div class="sect2" title="7.18.1. DVB výstup a vstup"><div class="titlepage"><div><div><h3 class="title"><a name="dvb"></a>7.18.1. DVB výstup a vstup</h3></div></div></div><p>
<span class="application">MPlayer</span> podporuje karty s čipsetem Siemens DVB od
výrobců jako Siemens, Technotrend, Galaxis nebo Hauppauge. Poslední DVB
ovladače jsou dostupné na
<a class="ulink" href="http://www.linuxtv.org" target="_top">Linux TV serveru</a>.
Pokud chcete provádět softwarové transkódování, měli byste mít aspoň 1GHz CPU.
</p><p>
Configure by měl detekovat vaši DVB kartu. Pokud ne, vynuťte detekci pomocí
</p><pre class="screen">./configure --enable-dvb</pre><p>
Pokud máte ost hlavičky na nestandardním místě, nastavte cestu pomocí
</p><pre class="screen">
./configure --with-extraincdir=<em class="replaceable"><code>zdrojový adresář DVB</code></em>/ost/include
</pre><p>
Pak kompilujte a instalujte obvyklým způsobem.</p><p title="POUŽITÍ"><b>POUŽITÍ. </b>
Hardwarové dekódování proudů obsahujících MPEG–1/2 video a/nebo audio lze
provést tímto příkazem:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes <em class="replaceable"><code>soubor.mpg|vob</code></em>
</pre><p title="POUŽITÍ">
</p><p>
Dekódování jakéhokoli jiného typu video proudu vyžaduje transkódování MPEG–1,
což je pomalé a nemusí stát za to, zvlášť s pomalým počítačem.
Můžete jej dosáhnout příkazem podobným tomuto:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes <em class="replaceable"><code>váš_soubor.ext</code></em>
mplayer -ao mpegpes -vo mpegpes -vf expand <em class="replaceable"><code>váš_soubor.ext</code></em>
</pre><p>
Pamatujte, že DVB karty podporují pouze výšky 288 a 576 pro PAL nebo 240 a 480
pro NTSC. Jiné výšky <span class="bold"><strong>musíte</strong></span> přeškálovat
přidáním <tt class="option">scale=šířka:výška</tt> s šířkou a výškou, které chcete
do volby <tt class="option">-vf</tt>. DVB karty akceptují různé šířky jako 720, 704,
640, 512, 480, 352 atd, a provádí hardwarově vodorovné škálování,
takže ve většině případů nemusíte vodorovně škálovat.
Pro 512x384 (poměr stran 4:3) MPEG–4 (DivX) zkuste:
</p><pre class="screen">mplayer -ao mpegpes -vo mpegpes -vf scale=512:576</pre><p>
</p><p>
Pokud máte širokoúhlý film a nechcete jej škálovat na plnou výšku, můžete
použít filtr <tt class="option">expand=š:v</tt> pro přidání černých okrajů. Pro
promítání 640x384 MPEG–4 (DivX), zkuste:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes -vf expand=640:576 <em class="replaceable"><code>soubor.avi</code></em>
</pre><p>
</p><p>
Pokud je váš procesor příliš slabý pro 720x576 MPEG–4 (DivX), zkuste podškálovat:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes -vf scale=352:576 <em class="replaceable"><code>soubor.avi</code></em>
</pre><p>
</p><p>Pokud se rychlost nezlepší, zkuste podškálovat i výšku:
</p><pre class="screen">
mplayer -ao mpegpes -vo mpegpes -vf scale=352:288 <em class="replaceable"><code>soubor.avi</code></em>
</pre><p>
</p><p>
Pro OSD a titulky použijte OSD vlastnost expand filtru. Takže místo
<tt class="option">expand=š:v</tt> nebo <tt class="option">expand=š:v:x:y</tt>, použijte
<tt class="option">expand=š:v:x:y:1</tt> (pátý parametr <tt class="option">:1</tt>
na konci zapne renderování OSD). Možná byste měli trochu posunout obraz nahoru,
abyste měli větší černý okraj pro titulky. Rovněž byste měli posunout nahoru
titulky, pokud jsou mimo TV obrazovku. Použijte volbu
<tt class="option">-subpos &lt;0-100&gt;</tt>
pro toto nastavení (<tt class="option">-subpos 80</tt> je dobrá volba).
</p><p>
Chcete-li přehrávat filmy s jinou snímkovou rychlostí než 25 fps na PAL TV, nebo
na pomalém CPU, přidejte volbu <tt class="option">-framedrop</tt>.
</p><p>
Chcete-li zachovat poměr stran MPEG–4 (DivX) souborů a dosáhnout optimálních
škálovacích parametrů (hardwarové horizontální škálování a softwarové vertikální
škálování zatímco zachováte správný poměr stran), použijte filtr dvbscale:
</p><pre class="screen">
pro 4:3 TV: -vf dvbscale,scale=-1:0,expand=-1:576:-1:-1:1
pro 16:9 TV: -vf dvbscale=1024,scale=-1:0,expand=-1:576:-1:-1:1
</pre><p>
</p><p title="Digitální TV (vstupní DVB modul)"><b>Digitální TV (vstupní DVB modul). </b>Můžete použít svou DVB kartu pro sledování Digitální TV.</p><p>
Měli byste mít nainstalovány programy <span class="command"><strong>scan</strong></span> a
<span class="command"><strong>szap/tzap/czap/azap</strong></span>; všechny jsou zařazeny v balíčku
ovladačů.
</p><p>
Ověřte si, zda vaše ovladače pracují správně s progamy jako je
<a class="ulink" href="http://sf.net/projects/dvbtools/" target="_top"><span class="command"><strong>dvbstream</strong></span></a>
(to je základ vstupního DVB modulu).
</p><p>
Nyní byste měli skompilovat soubor <tt class="filename">~/.mplayer/channels.conf</tt>,
se syntaxí akceptovanou <span class="command"><strong>szap/tzap/czap/azap</strong></span>, nebo nechat
<span class="command"><strong>scan</strong></span>, aby jej skompiloval.
</p><p>
Pokud máte více než jeden typ karty (Např. Satellitar, Terrestrial, Cable a ATSC)
můžete si uložit své channels soubory podle typu jako
<tt class="filename">~/.mplayer/channels.conf.sat</tt>,
<tt class="filename">~/.mplayer/channels.conf.ter</tt>,
<tt class="filename">~/.mplayer/channels.conf.cbl</tt>,
a <tt class="filename">~/.mplayer/channels.conf.atsc</tt>,
kdy <span class="application">MPlayer</span> použije tyto soubory spíše než
<tt class="filename">~/.mplayer/channels.conf</tt>,
a vy musíte pouze nastavit, kterou kartu použít.
</p><p>
Ujistěte se, že máte <span class="emphasis"><em>pouze</em></span> nekódované
kanály ve svém <tt class="filename">channels.conf</tt> souboru, jinak se
<span class="application">MPlayer</span> pokusí přeladit na nejbližší zobrazitelný,
ale to může trvat dlouho, pokud je zde mnoho po sobě jdoucích šifrovaných
kanálů.
</p><p>
V polích audio a video můžete použít rozšířenou syntaxi:
<tt class="option">...:pid[+pid]:...</tt> (maximálně 6 pidů každé);
v tom případě zahrne <span class="application">MPlayer</span> do datového proudu
všechny zadané pidy plus pid 0 (který obsahuje PAT).
Doporučujeme zahrnout do každého řádku PMT pid pro odpovídající kanál
(pokud jej znáte)
Můžete rovněž zadat 8192, to vybere všechny pidy na této frekvenci
a vy pak můžete přepínat programy pomocí TAB.
To může vyžadovat větší šířku pásma, ale laciné karty vždy přenášejí všechny
kanály minimálně do jádra, takže u nich v tom nebude velký rozdíl.
Další možná použití jsou: televideo pid, druhá audio stopa, atd.
</p><p>
Pokud <span class="application">MPlayer</span> často protestuje o
</p><pre class="screen">Příliš mnoha video/audio paketech ve vyrovnávací paměti</pre><p> nebo
pokud si povšimnete rostoucí desynchronizace mezi zvukem a
videem, zkuste použít MPEG–TS demuxer z libavformat přidáním
<tt class="option">-demuxer lavf -lavfdopts probesize=128</tt>
na příkazovém řádku.
</p><p>
Pro zobrazení prvního z kanálů uvedeného v seznamu, spusťte
</p><pre class="screen">mplayer dvb://</pre><p>
</p><p>
Pokud chcete sledovat určitý kanál, například R1, spusťte
</p><pre class="screen">mplayer dvb://<em class="replaceable"><code>R1</code></em></pre><p>
</p><p>
Pokud máte více než jednu kartu, musíte rovněž uvést číslo karty, na které lze
kanál sledovat (např. 2). Syntyxe je:
</p><pre class="screen">mplayer dvb://<em class="replaceable"><code>2@R1</code></em></pre><p>
</p><p>
Pro změnu kanálu stiskněte klávesu <span class="keycap"><b>h</b></span> (další) nebo
<span class="keycap"><b>k</b></span> (předchozí), nebo použijte
<a class="link" href="#osdmenu" title="2.4.3. OSD menu">OSD menu</a>.
</p><p>
Pokud váš <tt class="filename">~/.mplayer/menu.conf</tt> obsahuje řádek
<code class="literal">&lt;dvbsel&gt;</code> podobný tomu v ukázkovém souboru
<tt class="filename">etc/dvb-menu.conf</tt> (který můžete použít k přepsání
<tt class="filename">~/.mplayer/menu.conf</tt>), bude v hlavním menu podseznam,
kde si budete moci zvolit kanál ze svého <tt class="filename">channels.conf</tt>.
Může mu případně předcházet menu se seznamem dostupných karet, pokud máte
více než jednu použitelnou <span class="application">MPlayer</span>em.
</p><p>
Pokud si chcete uložit program na disk, můžete použít
</p><pre class="screen">
mplayer -dumpfile <em class="replaceable"><code>r1.ts</code></em> -dumpstream dvb://<em class="replaceable"><code>R1</code></em>
</pre><p>
</p><p>
Pokud jej chcete zaznamenat v odlišném formátu (reenkódovat jej), spusťte
místo toho příkaz podobný následujícímu:
</p><pre class="screen">
mencoder -o <em class="replaceable"><code>r1.avi</code></em> -ovc xvid -xvidencopts bitrate=800\
    -oac mp3lame -lameopts cbr:br=128 -pp=ci dvb://<em class="replaceable"><code>R1</code></em>
</pre><p>
</p><p>
Přečtěte si man stránku pro seznam voleb, které můžete předat vstupnímu
DVB modulu.
</p><p title="BUDOUCNOST"><b>BUDOUCNOST. </b>
Máte-li otázky, nebo chcete dostávat oznámení o nových vlastnostech a zapojit
se do diskuse o těchto věcech, připojte se k naší
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dvb" target="_top">MPlayer-DVB</a>
e-mailové konferenci. Pamatujte prosím, že jazykem konference je angličtina.
</p><p>
V budoucnu můžete očekávat schopnost zobrazovat OSD a titulky pomocí nativní
podpory OSD v DVB kartách, stejně jako plynulejší přehrávání filmů s jinou
snímkovou rychlostí, než 25 fps a transkódování MPEG–2 na MPEG–4 v reálném čase
(částečná dekomprese).
</p></div><div class="sect2" title="7.18.2. DXR2"><div class="titlepage"><div><div><h3 class="title"><a name="dxr2"></a>7.18.2. DXR2</h3></div></div></div><p>
<span class="application">MPlayer</span> podporuje hardwarově akcelerované
přehrávání pomocí karty Creative DXR2.
</p><p>
Nejdříve musíte mít správně nainstalované DXR2 ovladače. Ovladače a návod
k jejich instalaci naleznete na stránkách
<a class="ulink" href="http://dxr2.sf.net/" target="_top">DXR2 Resource Center</a>.
</p><div class="variablelist" title="POUŽITÍ"><p class="title"><b>POUŽITÍ</b></p><dl><dt><span class="term"><tt class="option">-vo dxr2</tt></span></dt><dd><p>Zapíná TV výstup.</p></dd><dt><span class="term"><tt class="option">-vo dxr2:x11</tt> nebo <tt class="option">-vo dxr2:xv</tt></span></dt><dd><p>Zapíná Overlay výstup v X11.</p></dd><dt><span class="term"><tt class="option">-dxr2 &lt;volba1:volba2:...&gt;</tt></span></dt><dd><p>
  Tato volba je použita k ovládání DXR2 ovladače.
  </p></dd></dl></div><p>
Overlay čipset použitý v DXR2 má mizernou kvalitu, ale výchozí nastavení pracuje
vždy. OSD lze použít spolu s overlay (ne na TV) při jeho vykreslení v klíčovací
barvě. S výchozím nastavením klíčovací barvy můžete dosáhnout různých výsledků,
obvykle uvidíte klíčovací barvu kolem znaků nebo jiné srandovní věci. Pokud ale
vhodně upravíte klíčování, můžete dosáhnout použitelných výsledků.
</p><p>Prostudujte si prosím man stránku pro dostupné volby.</p></div><div class="sect2" title="7.18.3. DXR3/Hollywood+"><div class="titlepage"><div><div><h3 class="title"><a name="dxr3"></a>7.18.3. DXR3/Hollywood+</h3></div></div></div><p>
<span class="application">MPlayer</span> podporuje hardwarově akcelerované
přehrávání videa pomocí karet Creative DXR3 a Sigma Designs Hollywood Plus.
Obě tyto karty používají MPEG dekodér em8300 od Sigma Designs.
</p><p>
Nejprve budete potřebovat správně nainstalované DXR3/H+ ovladače verze 0.12.0
nebo pozdější. Ovladače a návod na jejich instalaci naleznete na stránkách
<a class="ulink" href="http://dxr3.sf.net/" target="_top">DXR3 &amp; Hollywood Plus for Linux</a>.
<tt class="filename">configure</tt> by mělo automaticky detekovat vaši kartu a
kompilace by se měla obejít bez potíží.
</p><div class="variablelist" title="POUŽITÍ"><p class="title"><b>POUŽITÍ</b></p><dl><dt><span class="term"><tt class="option">-vo dxr3:prebuf:sync:norm=x:<em class="replaceable"><code>zařízení</code></em></tt></span></dt><dd><p>
<tt class="option">overlay</tt> aktivuje overlay místo TVOut. Pro správnou funkci
vyžaduje, abyste měli správně nakonfigurované nastavení overlay. Nejjednodužší
způsob nastavení overlay, je spuštění autocal. Pak spusťte MPlayer s video
výstupem nastaveným na dxr3 s vypnutým overlay, spusťte dxr3view. V dxr3view
si můžete hrát s nastavením overlay a pozorovat změny v reálném čase. Snad bude
tato funkce časem dostupná z GUI <span class="application">MPlayer</span>u. Jakmile
máte správně nastaveno overlay, není již nutné používat dxr3view.
<tt class="option">prebuf</tt> zapíná prebuffering. Prebuffering je vlastnost čipu
em8300, která mu umožňuje podržet si více než jeden videosnímek současně.
To znamená, že pokud jej máte zapnutý, snaží se
<span class="application">MPlayer</span> udržet vyrovnávací paměť videa (buffer)
naplněný daty.
Pokud jej provozujete na pomalém stroji, použije
<span class="application">MPlayer</span> téměř nebo přesně 100% výkonu CPU.
To je zvlášť časté, pokud přehráváte čisté MPEG datové proudy
(jako DVD, SVCD atp.) jelikož je <span class="application">MPlayer</span> nemusí
převádět do MPEG, naplní buffer velmi rychle.
S prebufferingem je přehrávání videa <span class="bold"><strong>mnohem</strong></span>
méně citlivé na zaměstnávání CPU jinými programy. Nebudou zahozeny snímky, pokud
si aplikace neuzme CPU na dlouhou dobu.
Pokud přehráváte bez prebufferingu, je em8300 mnohem citlivější na vytížení CPU,
takže doporučujeme zapnout <span class="application">MPlayer</span>ovu volbu
<tt class="option">-framedrop</tt> pro zachování synchronizace.
<tt class="option">sync</tt> zapíná nový sync–engine. To je zatím experimentální
vlastnost. Se zapnutým sync budou vnitřní hodiny em8300 neustále sledovány a
pokud se začnou rozcházet s časovačem <span class="application">MPlayer</span>u,
budou resetovány, což způsobí, že em8300 zahodí veškeré snímky, které čekají ve
frontě.
<tt class="option">norm=x</tt> nastaví TV normu DXR3 karty bez nutnosti externího
nástroje jako em8300setup. Platné normy jsou 5 = NTSC, 4 = PAL-60,
3 = PAL. Zvláštní normy jsou 2 (automaticné nastavení s použitím PAL/PAL-60) a
1 (automatické nastavení s použitím PAL/NTSC), jelikož ty určí použitou normu
podle snímkové rychlosti filmu. norm = 0 (výchozí) nezmění aktuální normu.
<tt class="option"><em class="replaceable"><code>device</code></em></tt> = číslo zařízení, které se
má použít, pokud máte více než jednu em8300 kartu.
Jakoukoli z těchto voleb můžete vynechat.
Volba <tt class="option">:prebuf:sync</tt>, zdá se, pracuje skvěle při přehrávání filmů
v MPEG–4 (DivX). Lidé však hlásili potíže s volbou prebuf při přehrávání souborů
v MPEG–1/2.
Měli byste je nejprve zkusit přehrát bez dodatečných voleb a pokud
narazíte na potíže se synchronizací nebo DVD titulky, zkuste to s volbou
<tt class="option">:sync</tt>.
</p></dd><dt><span class="term"><tt class="option">-ao oss:/dev/em8300_ma-<em class="replaceable"><code>X</code></em></tt></span></dt><dd><p>
  Pro zvukový výstup, kde <em class="replaceable"><code>X</code></em> je číslo zařízení
  (0 máte-li jen jednu kartu).
  </p></dd><dt><span class="term"><tt class="option">-af resample=<em class="replaceable"><code>xxxxx</code></em></tt></span></dt><dd><p>
  Čip em8300 neumí přehrávat signál vzorkovaný méně než 44100Hz. Pokud je
  vzorkovací kmitočet pod 44100Hz, zvolte buď 44100Hz nebo 48000Hz podle toho,
  násobek kterého je blíž. Čili pokud má film zvuk 22050Hz použijte 44100Hz,
  jelikož 44100 / 2 = 22050, pokud jej má 24000Hz použijte 48000Hz jelikož
  48000 / 2 = 24000 a tak dále.
  S výstupem digitálního audia to nefunguje (<tt class="option">-ac hwac3</tt>).
  </p></dd><dt><span class="term"><tt class="option">-vf lavc/fame</tt></span></dt><dd><p>
  Pro přehrávání ne–MPEG obsahu na em8300 (např. MPEG–4 (DivX) nebo RealVideo)
  musíte nastavit MPEG–1 video filtr jako
  <code class="systemitem">libavcodec</code> (lavc).
  Viz manuál pro další informace o <tt class="option">-vf lavc</tt>.
  V tuto chvíli není možné nastavit snímkovou rychlost em8300, což znamená,
  že je pevně nastavena na 30000/1001 snímků/s (fps).
  Z toho důvodu doporučujeme,
  abyste použili <tt class="option">-vf lavc=<em class="replaceable"><code>quality</code></em>:25</tt>
  zvlášť pokud používáte prebuffering. Proč tedy 25 a ne 30000/1001? Nu, důvodem
  je, že pokud zadáte 30000/1001, začne obraz trochu poskakovat.
  Důvod tohoto jevu nám není znám.
  Pokud to nastavíte někde mezi 25 a 27, obraz se ustálí.
  Pro tuto chvíli se to dá pouze uznat jako fakt.
  </p></dd><dt><span class="term"><tt class="option">-vf expand=-1:-1:-1:-1:1</tt></span></dt><dd><p>
  Ačkoli DXR3 ovladač umí dodat OSD do MPEG–1/2/4 videa, má to mnohem nižší
  kvalitu než tradiční OSD <span class="application">MPlayer</span>u a má i různé
  problémy s obnovováním. Výše uvedený příkazový řádek nejprve převede vstupní
  video do MPEG–4 (je to nutné, sorry), pak aplikuje filtr expand, který však
  nic neexpanduje (-1: výchozí), ale doplní normální OSD do obrazu
  (na to je ta „1“ na konci).
  </p></dd><dt><span class="term"><tt class="option">-ac hwac3</tt></span></dt><dd><p>
  Čip em8300 podporuje přehrávání zvuku v AC–3 (prostorový zvuk) přes digitální
  audio výstup na kartě. Viz výš volbu <tt class="option">-ao oss</tt>. Ta musí být
  použita pro nastavení výstupu do DXR3 místo zvukové karty.
  </p></dd></dl></div></div></div><div class="sect1" title="7.19. Ostatní vizualizační hardware"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="other"></a>7.19. Ostatní vizualizační hardware</h2></div></div></div><div class="sect2" title="7.19.1. Zr"><div class="titlepage"><div><div><h3 class="title"><a name="zr"></a>7.19.1. Zr</h3></div></div></div><p>
Toto je zobrazovací rozhraní (<tt class="option">-vo zr</tt>) pro mnoho MJPEG
zachytávacích/přehrávacích karet (testováno na DC10+ a Buz a mělo by pracovat
i s LML33, tedy DC10). Rozhraní pracuje tak, že snímek zakóduje do JPEG a pak
jej pošle do karty. Pro enkódování do JPEG se používá
<code class="systemitem">libavcodec</code> a je pro ně nezbytný.
Ve speciálním <span class="emphasis"><em>cinerama</em></span> režimu můžete sledovat filmy
v pravém širokoúhlém formátu, kterého je dosaženo tak, že máte dvě promítačky
a dvě MJPEG karty. V závislosti na rozlišení a nastavení kvality může toto
rozhraní vyžadovat spoustu výkonu CPU. Nezapomeňte zadat
<tt class="option">-framedrop</tt>, pokud je váš počítač příliš pomalý.
Poznámka: Můj AMD K6-2 350MHz je (s <tt class="option">-framedrop</tt>) vcelku
adekvátní pro sledování materiálu o rozměru VCD a podškálovaných filmů.
</p><p>
Toto rozhraní komunikuje s jaderným modulem dostupným na
<a class="ulink" href="http://mjpeg.sf.net" target="_top">http://mjpeg.sf.net</a>, takže jej nejdříve musíte zprovoznit.
Přítomnost MJPEG karty je autodetekována skriptem
<tt class="filename">configure</tt>. Pokud detekce selže, vynuťte ji pomocí
</p><pre class="screen">./configure --enable-zr</pre><p>
</p><p>
Výstup může být ovlivňován několika volbami. Obšírný výklad těchto voleb
naleznete v man stránce, krátký přehled obržíte spuštěním
</p><pre class="screen">mplayer -zrhelp</pre><p>
</p><p>
Věci jako škálování a OSD (display na obrazovce) nejsou tímto rozhraním pokryty,
ale lze jich dosáhnout pomocí video filtrů. Například mějte video o rozlišení
512x272 a chcete jej přehrávat na celé obrazovce přes DC10+, pak máte tři
základní možnosti, jak to udělat. Můžete škálovat video na šířku 768, 384 nebo
192. Z důvodu výkonu a kvality si zvolíte škálování filmu na 384x204 pomocí
bilineárního softwarového škálovače. Příkazový řádek je pak
</p><pre class="screen">
mplayer -vo zr -sws 0 -vf scale=384:204 <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p><p>
Ořezání lze provést <tt class="option">crop</tt> filtrem a samotným rozhraním.
Řekněme, že film je příliš široký pro promítání na vaší Buz a proto chcete
použít <tt class="option">-zrcrop</tt> pro zůžení filmu, pak byste měli použít
následující příkaz
</p><pre class="screen">
mplayer -vo zr -zrcrop 720x320+80+0 <em class="replaceable"><code>benhur.avi</code></em>
</pre><p>
</p><p>
chcete-li použít filtr <tt class="option">crop</tt>, proveďte
</p><pre class="screen">
mplayer -vo zr -vf crop=720:320:80:0 <em class="replaceable"><code>benhur.avi</code></em>
</pre><p>
</p><p>
Zvláštní případy <tt class="option">-zrcrop</tt> vyvolá režim
<span class="emphasis"><em>cinerama</em></span>, takže rozprostřete film na několik televizí nebo
promítaček, čímž se vytvoří větší obraz. Předpokládejme, že máte dvě promítačky.
Levá je připojena k vaší Buz na <tt class="filename">/dev/video1</tt> a
pravý je připojen do vaší DC10+ na <tt class="filename">/dev/video0</tt>.
Film má rozlišení 704x288. Předpokládejme rovněž, že pravá promítačka je
černobílá a levá umí JPEG snímky s kvalitou 10, pak byste měli použít
následující příkaz
</p><pre class="screen">
mplayer -vo zr -zrdev /dev/video0 -zrcrop 352x288+352+0 -zrxdoff 0 -zrbw \
    -zrcrop 352x288+0+0 -zrdev /dev/video1 -zrquality 10 \
	<em class="replaceable"><code>movie.avi</code></em>
</pre><p>
</p><p>
Jak vidíte, volby uvedené před druhým <tt class="option">-zrcrop</tt> jsou předány
pouze do DC10+ a volby za druhým <tt class="option">-zrcrop</tt> do Buz.
Maximální počet MJPEG karet zahrnutých do <span class="emphasis"><em>cinerama</em></span>
režimu jsou čtyři, takže můžete sestavit zobrazovací stěnu 2x2.
</p><p>
Nakonec důležité upozornění: Nespouštějte ani nezastavujte XawTV na přehrávacím
zařízení během přehrávání, zhavaru je vám počítač. Můžete však
<span class="bold"><strong>NEJDŘÍV</strong></span> spustit XawTV a
<span class="bold"><strong>PAK</strong></span> spustit <span class="application">MPlayer</span>,
počkat až <span class="application">MPlayer</span> skončí a
<span class="bold"><strong>PAK</strong></span> zastavit XawTV.
</p></div><div class="sect2" title="7.19.2. Blinkenlights"><div class="titlepage"><div><div><h3 class="title"><a name="blinkenlights"></a>7.19.2. Blinkenlights</h3></div></div></div><p>
Toto rozhraní je schopno přehrávání pomocí Blinkenlights UDP protokolu. Pokud
nevíte co je <a class="ulink" href="http://www.blinkenlights.de/" target="_top">Blinkenlights</a>
nebo jeho nástupce
<a class="ulink" href="http://www.blinkenlights.de/arcade/" target="_top">Arcade</a>,
zjistěte si to. Ačkoli je to dost možná nejméně používané video výstupní
rozhraní, bezpochyby je tím nejlepším, co může <span class="application">MPlayer</span>
nabídnout. Stačí shlédnout některá z
<a class="ulink" href="http://www.blinkenlights.de/video.en.html" target="_top">Blinkenlights dokumentačních videí</a>.
Na Arcade video můžete vidět výstupní rozhraní Blinkenlights v akci v 00:07:50.
</p></div></div><div class="sect1" title="7.20. Podpora TV výstupu"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tvout"></a>7.20. Podpora TV výstupu</h2></div></div></div><div class="sect2" title="7.20.1. Karty Matrox G400"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-mga-g400"></a>7.20.1. Karty Matrox G400</h3></div></div></div><p>
Pod Linuxem máte dva způsoby jak zprovoznit TV výstup na G400:
</p><div class="important" title="Důležité" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Důležité</h3><p>
pro instrukce k TV výstupu na Matrox G450/G550 si prostudujte textovou část!
</p></div><div class="variablelist"><dl><dt><span class="term">XFree86</span></dt><dd><p>
    Pomocí ovladače a HAL modulu dostupného na stránkách <a class="ulink" href="http://www.matrox.com" target="_top">Matrox</a>. Takto dostanete X na TV.
    </p><p>
    <span class="bold"><strong>Tato metoda vám neposkytne akcelerované přehrávání</strong></span>
    jako pod Windows! Sekundární jednotka má pouze YUV framebuffer, <span class="emphasis"><em>BES</em></span>
    (Back End Scaler, YUV škálovač na kartách G200/G400/G450/G550) na něm
    nepracuje! Ovladač pro Windows to nějak obchází, pravděpodobně použitím
    3D jednotky pro zoom a YUV framebufferu pro zobrazení zoomovaného
    obrazu. Pokud opravdu chcete použít X, použijte volby <tt class="option">-vo x11 -fs
    -zoom</tt>, ale bude to <span class="bold"><strong>POMALÉ</strong></span> a
    bude zapnuta ochrana proti kopírování
    <span class="bold"><strong>Macrovision</strong></span>
    (Macrovision můžete obejít pomocí tohoto
    <a class="ulink" href="http://avifile.sf.net/mgamacro.pl" target="_top">perlového skriptu</a>).
    </p></dd><dt><span class="term">Framebuffer</span></dt><dd><p>
    Pomocí <span class="bold"><strong>matroxfb modulů</strong></span> v jádrech řady 2.4.
    Jádra 2.2 v nich neobsahují podporu pro TV, takže jsou pro tento účel
    nepoužitelná. Měli byste povolit VŠECHNY matroxfb-specifické vlastnosti
    během kompilace (vyjma MultiHead) a zakompilovat je do
    <span class="bold"><strong>modulů</strong></span>!
    Rovněž potřebujete zapnuté I2C.
    </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
      Vstupte do <tt class="filename">TVout</tt> a zadejte
      <span class="command"><strong>./compile.sh</strong></span>. Nainstalujte
      <tt class="filename">TVout/matroxset/matroxset</tt>
      někde do cesty <code class="envar">PATH</code>.
    </p></li><li class="step" title="Krok 2"><p>
      Nemáte-li nainstalován <span class="command"><strong>fbset</strong></span>, vložte
      <tt class="filename">TVout/fbset/fbset</tt>
      někde do cesty <code class="envar">PATH</code>.
    </p></li><li class="step" title="Krok 3"><p>
      Nemáte-li nainstalován <span class="command"><strong>con2fb</strong></span>, vložte
      <tt class="filename">TVout/con2fb/con2fb</tt>
      někde do cesty <code class="envar">PATH</code>.
    </p></li><li class="step" title="Krok 4"><p>
      Pak vstupte do adresáře <tt class="filename">TVout/</tt>
      ve zdrojovém adresáři <span class="application">MPlayer</span>u a spusťte
      <tt class="filename">./modules</tt> jako root. Vaše textová konzole přejde
      do režimu framebuffer (není cesta zpět!).
    </p></li><li class="step" title="Krok 5"><p>
      Dále EDITUJTE a spusťte skript <tt class="filename">./matroxtv</tt>. Objeví se
      vám velmi jednoduché menu. Stiskněte <span class="keycap"><b>2</b></span> a
      <span class="keycap"><b>Enter</b></span>. Nyní byste měli mít stejný obraz na svém monitoru
      i TV. Pokud má obraz na TV (výchozí je PAL) nějaké podivné šrámy, nebyl
      skript schopen nastavit správně rozlišení (na výchozích 640x512).
      Zkuste jiná rozlišení z menu a/nebo experimentujte s fbset.
    </p></li><li class="step" title="Krok 6"><p>
      Jo. Dalším úkolem je nechat zmizet kurzor z tty1 (nebo odjinud) a
      vypnout mazání obrazovky. Spusťe následující příkazy:

      </p><pre class="screen">
echo -e '\033[?25l'
setterm -blank 0</pre><p>
      nebo
      </p><pre class="screen">
setterm -cursor off
setterm -blank 0</pre><p>

      Předchozí nejspíš bude lepší umístit do skriptu a také vyčistit obrazovku.
      Pro zpětné zapnutí kurzoru:
      </p><pre class="screen">echo -e '\033[?25h'</pre><p> nebo
      </p><pre class="screen">setterm -cursor on</pre><p>
    </p></li><li class="step" title="Krok 7"><p>
      A jasně. Spusťte přehrávání filmu:
      </p><pre class="screen">
mplayer -vo mga -fs -screenw 640 -screenh 512 <em class="replaceable"><code>soubor</code></em></pre><p>

      (Pokud používáte X, přepněte se nyní do matroxfb pomocí například

<span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F1</b></span>.)
      Změňte <code class="literal">640</code> a <code class="literal">512</code> pokud máte
      nastaveno jiné rozlišení...
    </p></li><li class="step" title="Krok 8"><p>
      <span class="bold"><strong>Užijte si ultra-rychlý ultra-vybavený Matrox TV
      výstup (lepší než Xv)!</strong></span>
    </p></li></ol></div></dd></dl></div><p title="Výroba kabelu pro Matrox TV–out"><b>Výroba kabelu pro Matrox TV–out. </b>
Zříkáme se jakékoli odpovědnosti nebo záruky za jakékoli poškození způsobené
touto dokumentací.
</p><p title="Kabel pro G400"><b>Kabel pro G400. </b>
Na čtvrtém pinu CRTC2 konektoru je kompozitní video signál. Zem je
na šestém, sedmém a osmém pinu. (informaci poskytl
Balázs Rácz)
</p><p title="Kabel pro G450"><b>Kabel pro G450. </b>
Kompozitní video signál je na pinu jedna. Zem je na pátém,
šestém, sedmém a patnáctém (5, 6, 7, 15) pinu.
(informaci poskytl Balázs Kerekes)
</p></div><div class="sect2" title="7.20.2. Karty Matrox G450/G550"><div class="titlepage"><div><div><h3 class="title"><a name="tv-out_matrox_g450"></a>7.20.2. Karty Matrox G450/G550</h3></div></div></div><p>
Podpora TV výstupu pro tyto karty byla přidána teprve nedávno a dosud není
v ostré verzi jádra.
V současnosti nelze (aspoň pokud vím) použít modul
<span class="bold"><strong>mga_vid</strong></span>, protože ovladač G450/G550 pracuje
pouze v jedné konfiguraci: první CRTC čip (s mnohem více schopnostmi) na první
displej a druhá CRTC (žádné <span class="bold"><strong>BES</strong></span> – pro
popis BES viz sekci G400 výše) na TV. Takže v současnosti můžete použít pouze
<span class="application">MPlayer</span>ovo <span class="emphasis"><em>fbdev</em></span> výstupní
rozhraní.
</p><p>
První CRTC nemůže být v současnosti přesměrována na sekundární výstup. Autor
jaderného ovladače matroxfb – Petr Vandrovec – pro to snad
vyrobí podporu pomocí zobrazení výstupu prvního CRTC na oba výstupy najednou,
což se pro tuto chvíli doporučuje pro G400, viz předchozí sekce.
</p><p>
Potřebnou záplatu jádra a podrobné HOWTO lze stáhnout z
<a class="ulink" href="http://www.bglug.ca/matrox_tvout/" target="_top">http://www.bglug.ca/matrox_tvout/</a>
</p></div><div class="sect2" title="7.20.3. Karty ATI"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-ati"></a>7.20.3. Karty ATI</h3></div></div></div><p title="ÚVOD"><b>ÚVOD. </b>
V současnosti nechce ATI podporovat žádný ze svých TV-out čipů pod Linuxem
z důvodu jejich licencované technologii Macrovision.
</p><div class="itemizedlist" title="STATUS TV VÝSTUPU NA KARTÁCH ATI POD LINUXEM"><p class="title"><b>STATUS TV VÝSTUPU NA KARTÁCH ATI POD LINUXEM</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>ATI Mach64</strong></span>:
  podporovaný <a class="ulink" href="http://gatos.sf.net" target="_top">GATOS</a>em.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>ASIC Radeon VIVO</strong></span>:
  podporovaný <a class="ulink" href="http://gatos.sf.net" target="_top">GATOS</a>em.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Radeon</strong></span> a <span class="bold"><strong>Rage128</strong></span>:
  podporovaný <span class="application">MPlayer</span>em!
  Podívejte se na sekce <a class="link" href="#vesa" title="7.13. VESA - výstup do VESA BIOSu">VESA</a> a
  <a class="link" href="#vidix" title="7.15. VIDIX">VIDIX</a>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Rage Mobility P/M, Radeon, Rage 128, Mobility M3/M4</strong></span>:
  podporovaný <a class="ulink" href="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/" target="_top">atitvout</a>em.
</p></li></ul></div><p>
Ne ostatních kartách prostě použijte rozhraní <a class="link" href="#vesa" title="7.13. VESA - výstup do VESA BIOSu">VESA</a>
bez VIDIX. Vyžaduje to výkoný CPU.
</p><p>
Jediné co musíte, je <span class="bold"><strong>mít TV konektor zapojený
před zapnutím PC</strong></span> jelikož video BIOS se inicializuje pouze
jednou během POST procedury.
</p></div><div class="sect2" title="7.20.4. nVidia"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-nvidia"></a>7.20.4. nVidia</h3></div></div></div><p>
Nejprve si MUSÍTE stáhnout closed–source ovladače z
<a class="ulink" href="http://nvidia.com" target="_top">http://nvidia.com</a>.
Nebudu zde popisovat instalaci a konfiguraci, jelikož je to mimo rámec této
dokumentace.
</p><p>
Jakmile je funkční XFree86, XVideo a 3D akcelerace, editujte sekci
Device v souboru <tt class="filename">XF86Config</tt>, podle
následujícího příkladu (upravte si to pro svou kartu/TV):

</p><pre class="programlisting">
Section "Device"
        Identifier      "GeForce"
        VendorName      "ASUS"
        BoardName       "nVidia GeForce2/MX 400"
        Driver          "nvidia"
        #Option         "NvAGP" "1"
        Option          "NoLogo"
        Option          "CursorShadow"  "on"

        Option          "TwinView"
        Option          "TwinViewOrientation" "Clone"
        Option          "MetaModes" "1024x768,640x480"
        Option          "ConnectedMonitor" "CRT, TV"
        Option          "TVStandard" "PAL-B"
        Option          "TVOutFormat" "Composite"
EndSection
</pre><p>
</p><p>
Samozřejmě je nejdůležitější část TwinView.
</p></div><div class="sect2" title="7.20.5. NeoMagic"><div class="titlepage"><div><div><h3 class="title"><a name="tvout-neomagic"></a>7.20.5. NeoMagic</h3></div></div></div><p>
Čip NeoMagic lze nalézt v různých laptopech. Některé z nich jsou vybaveny
jednoduchým analogovým TV enkodérem, některé jej mají mnohem pokročilejší.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Analogový enkodér</strong></span>:
  Bylo nám hlášeno, že použitelný TV lze dosáhnout použitím
  <tt class="option">-vo fbdev</tt> nebo <tt class="option">-vo fbdev2</tt>.
  Musíte mít v jádře podporu vesafb a dopsat do příkazového řádku jádra
  následující parametry:
  <tt class="option">append="video=vesafb:ywrap,mtrr" vga=791</tt>.
  Měli byste nastartovat <span class="application">X</span>, pak se přepnout do
  terminálového režimu např. pomocí
  <span class="keycap"><b>Ctrl</b></span>+<span class="keycap"><b>Alt</b></span>+<span class="keycap"><b>F1</b></span>.
  Pokud se vám nepodaří nastartovat <span class="application">X</span> před spuštěním
  <span class="application">MPlayer</span>u z konzole, bude video pomalé a trhané
  (vysvětlení uvítáme).
  Nalogujte se do konzole a zadejte následující příkaz:

  </p><pre class="screen">clear; mplayer -vo fbdev -zoom -cache 8192 dvd://</pre><p>

  Video by nyní mělo běžet v konzoli a vyplňovat asi polovinu LCD obrazovky
  laptopu. Pro přepnutí na TV stiskněte
  <span class="keycap"><b>Fn</b></span>+<span class="keycap"><b>F5</b></span> třikrát.
  Testováno na Tecra 8000, 2.6.15 jádro s vesafb, ALSA v1.0.10.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Chrontel 70xx enkodér</strong></span>:
  Nalezen v  IBM Thinkpad 390E a bude pravděpodobně i ostatních Thinkpadech nebo
  noteboocích.
  </p><p>
  Musíte použít <tt class="option">-vo vesa:neotv_pal</tt> pro PAL nebo
  <tt class="option">-vo vesa:neotv_ntsc</tt> pro NTSC.
  To vám zpřístupní funkci TV výstupu v následujících 16 bpp a 8 bpp režimech:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>NTSC 320x240, 640x480 a možná také 800x600.</p></li><li class="listitem"><p>PAL  320x240, 400x300, 640x480, 800x600.</p></li></ul></div><p>Režim 512x384 není podporován BIOSem. Musíte obraz škálovat do
  jiného rozlišení pro aktivaci TV výstupu. Pokud vidíte obraz na obrazovce
  v 640x480 nebo v 800x600, ale ne v 320x240 nebo jiném menším rozlišení,
  musíte nahradit dvě tabulky ve <tt class="filename">vbelib.c</tt>.
  Viz funkci vbeSetTV pro více informací. V tomto případě prosím kontaktujte
  autora.
  </p><p>
  Známá omezení: pouze VESA, žádné další ovládací prvky jako jas, kontrast,
  úroveň černé, filtrace blikání nejsou implementovány.
  </p></li></ul></div><p>
</p></div></div></div><div class="chapter" title="Kapitola 8. Porty"><div class="titlepage"><div><div><h2 class="title"><a name="ports"></a>Kapitola 8. Porty</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#linux">8.1. Linux</a></span></dt><dd><dl><dt><span class="sect2"><a href="#debian">8.1.1. Vytvoření balíčku pro Debian</a></span></dt><dt><span class="sect2"><a href="#rpm">8.1.2. Balení RPM</a></span></dt><dt><span class="sect2"><a href="#arm">8.1.3. ARM</a></span></dt></dl></dd><dt><span class="sect1"><a href="#bsd">8.2. *BSD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#freebsd">8.2.1. FreeBSD</a></span></dt><dt><span class="sect2"><a href="#openbsd">8.2.2. OpenBSD</a></span></dt><dt><span class="sect2"><a href="#darwin">8.2.3. Darwin</a></span></dt></dl></dd><dt><span class="sect1"><a href="#unix">8.3. Komerční Unix</a></span></dt><dd><dl><dt><span class="sect2"><a href="#solaris">8.3.1. Solaris</a></span></dt><dt><span class="sect2"><a href="#hp-ux">8.3.2. HP-UX</a></span></dt><dt><span class="sect2"><a href="#aix">8.3.3. AIX</a></span></dt><dt><span class="sect2"><a href="#qnx">8.3.4. QNX</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windows">8.4. Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwin">8.4.1. <span class="application">Cygwin</span></a></span></dt><dt><span class="sect2"><a href="#mingw">8.4.2. <span class="application">MinGW</span></a></span></dt></dl></dd><dt><span class="sect1"><a href="#macos">8.5. Mac OS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#osx_gui">8.5.1. MPlayer OS X GUI</a></span></dt></dl></dd></dl></div><div class="sect1" title="8.1. Linux"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="linux"></a>8.1. Linux</h2></div></div></div><p>
Hlavní vývojovou platformou je Linux na x86, ačkoli
<span class="application">MPlayer</span> pracuje na mnoha jiných portech Linuxu.
Binární balíčky <span class="application">MPlayer</span>u jsou dostupné z několika
zdrojů.
Nicméně <span class="bold"><strong>není žádný z těchto balíčků podporován</strong></span>.
Hlaste tedy problémy jejich autorům, nikoli nám.
</p><div class="sect2" title="8.1.1. Vytvoření balíčku pro Debian"><div class="titlepage"><div><div><h3 class="title"><a name="debian"></a>8.1.1. Vytvoření balíčku pro Debian</h3></div></div></div><p>
Pro vytvoření balíčku pro Debian spusťte následující příkaz v adresáři se
zdrojovým kódem <span class="application">MPlayer</span>u:

</p><pre class="screen">fakeroot debian/rules binary</pre><p>

Pokud chcete předat nějaké volby pro configure, můžete nastavit proměnnou
prostředí <code class="envar">DEB_BUILD_OPTIONS</code>. Například, pokud chcete GUI a
podporu OSD menu, měli byste použít:

</p><pre class="screen">DEB_BUILD_OPTIONS="--enable-gui --enable-menu" fakeroot debian/rules binary</pre><p>

Rovněž můžete předat některé proměnné do Makefile. Například, pokud chcete
kompilovat pomocí gcc 3.4 i v případě, že to není výchozí kompilátor:

</p><pre class="screen">CC=gcc-3.4 DEB_BUILD_OPTIONS="--enable-gui" fakeroot debian/rules binary</pre><p>

K vyčistění zdrojového stromu spusťte následující příkaz:

</p><pre class="screen">fakeroot debian/rules clean</pre><p>

Jako root můžete nainstalovat <tt class="filename">.deb</tt> balíček obvyklým
způsobem:

</p><pre class="screen">dpkg -i ../mplayer_<em class="replaceable"><code>version</code></em>.deb</pre><p>
</p><p>
Christian Marillat vytvářel jistou dobu neoficiální Debianí balíčky
<span class="application">MPlayer</span>u, <span class="application">MEncoder</span>u a
našich binárních balíků s kodeky, můžete si je stáhnout (apt-get) z
<a class="ulink" href="http://www.debian-multimedia.org/" target="_top">jeho domácí stránky</a>.
</p></div><div class="sect2" title="8.1.2. Balení RPM"><div class="titlepage"><div><div><h3 class="title"><a name="rpm"></a>8.1.2. Balení RPM</h3></div></div></div><p>
Dominik Mierzejewski udržuje oficiální RPM balíčky
<span class="application">MPlayer</span>u pro Fedora Core. Ty jsou dostupné
z <a class="ulink" href="http://rpm.livna.org/" target="_top">repozitáře</a>.
</p><p>
RPM balíčky pro Mandrake/Mandriva jsou dostupné z
<a class="ulink" href="http://plf.zarb.org/" target="_top">P.L.F.</a>.
SuSE zařadilo do své distribuce zmrzačenou verzi
<span class="application">MPlayer</span>u. V posledních verzích ji odstranili. Funkční
RPM naleznete na
<a class="ulink" href="http://packman.links2linux.de/?action=128" target="_top">links2linux.de</a>.
</p></div><div class="sect2" title="8.1.3. ARM"><div class="titlepage"><div><div><h3 class="title"><a name="arm"></a>8.1.3. ARM</h3></div></div></div><p>
<span class="application">MPlayer</span> pracuje na Linuxových PDA s ARM CPU např.
Sharp Zaurus, Compaq Ipaq. Nejjednodušší způsob jak si opatřit
<span class="application">MPlayer</span> je, stáhnout si jej z některého
<a class="ulink" href="http://www.openzaurus.org" target="_top">OpenZaurus</a> balíčkového kanálu.
Pokud si jej chcete skompilovat sami, měli byste nahlédnout do adresáře
<a class="ulink" href="http://openzaurus.bkbits.net:8080/buildroot/src/packages/mplayer?nav=index.html%7Csrc/.%7Csrc/packages" target="_top">mplayer</a>
a
<a class="ulink" href="http://openzaurus.bkbits.net:8080/buildroot/src/packages/libavcodec?nav=index.html%7Csrc/.%7Csrc/packages" target="_top">libavcodec</a>
v buildroot OpenZaurus distribuce. Zde mají vždy poslední Makefile a patche používané
pro sestavení SVN verze <span class="application">MPlayer</span>u.
Pokud potřebujete GUI rozhraní, můžete použít xmms-embedded.
</p></div></div><div class="sect1" title="8.2. *BSD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bsd"></a>8.2. *BSD</h2></div></div></div><p>
<span class="application">MPlayer</span> běží na všech známých BSD verzích.
Existují portované/pkgsrc/fink/atd verze
<span class="application">MPlayer</span>u, které lze pravděpodobně snadněji použít,
než naše surové zdrojové kódy.
</p><p>
K sestavení <span class="application">MPlayer</span>u budete potřebovat GNU make
(gmake - nativní BSD make nebude pracovat) a současnou verzi binutils.
</p><p>
Pokud si <span class="application">MPlayer</span> stěžuje, že nemůže najít
<tt class="filename">/dev/cdrom</tt> nebo <tt class="filename">/dev/dvd</tt>,
vytvořte příslušný symbolický link:
</p><pre class="screen">ln -s /dev/<em class="replaceable"><code>vaše_cdrom_zařízení</code></em> /dev/cdrom</pre><p>
</p><p>
Chcete-li používat Win32 DLL v <span class="application">MPlayer</span>u, budete muset
rekompilovat jádro s volbou "<code class="envar">USER_LDT</code>"
(pokud nepoužíváte FreeBSD-CURRENT, kde je to výchozí).
</p><div class="sect2" title="8.2.1. FreeBSD"><div class="titlepage"><div><div><h3 class="title"><a name="freebsd"></a>8.2.1. FreeBSD</h3></div></div></div><p>
Pokud váš procesor má SSE, rekompilujte jádro s
"<code class="envar">options CPU_ENABLE_SSE</code>" (vyžaduje FreeBSD-STABLE nebo patche
do jádra).
</p></div><div class="sect2" title="8.2.2. OpenBSD"><div class="titlepage"><div><div><h3 class="title"><a name="openbsd"></a>8.2.2. OpenBSD</h3></div></div></div><p>
Vzhledem k omezením v různých verzích gas (GNU assembleru – pozn. překl.)
(relokace vs MMX), budete muset kompilovat ve dvou krocích:
Nejprve se ujistěte že je nenativní as jako první ve vaší <code class="envar">$PATH</code>
a proveďte <span class="command"><strong>gmake -k</strong></span>, pak zajistěte, aby se použila nativní
verze a proveďte <span class="command"><strong>gmake</strong></span>.
</p><p>
Od OpenBSD 3.4 není již výše uvedená metoda potřeba.
</p></div><div class="sect2" title="8.2.3. Darwin"><div class="titlepage"><div><div><h3 class="title"><a name="darwin"></a>8.2.3. Darwin</h3></div></div></div><p>
Viz sekce <a class="link" href="#macos" title="8.5. Mac OS">Mac OS</a>.
</p></div></div><div class="sect1" title="8.3. Komerční Unix"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="unix"></a>8.3. Komerční Unix</h2></div></div></div><p>
<span class="application">MPlayer</span> byl portován na mnoho komerčních variant
Unixu. Jelikož vývojová prostředí na těchto systémech bývají odlišná od těch
na svobodných Unixech, budete muset provést ruční úpravy, aby se kompilace
povedla.
</p><div class="sect2" title="8.3.1. Solaris"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>8.3.1. Solaris</h3></div></div></div><p>
<span class="application">MPlayer</span> by měl běžet na Solarisu 2.6 nebo novějším.
Použijte SUN audio rozhraní pomocí volby <tt class="option">-ao sun</tt> pro přehrávání
zvuku.
</p><p>
Na <span class="bold"><strong>UltraSPARC</strong></span>ích,
<span class="application">MPlayer</span> využívá jejich rozšíření
<span class="bold"><strong>VIS</strong></span>
(ekvivalentní MMX), zatím jen v
<code class="systemitem">libmpeg2</code>,
<code class="systemitem">libvo</code>
a <code class="systemitem">libavcodec</code>, ale nikoli v
<code class="systemitem">mp3lib</code>. Můžete přehrávat VOB soubor
na 400MHz CPU. Budete k tomu potřebovat nainstalovanou
<a class="ulink" href="http://www.sun.com/sparc/vis/mediaLib.html" target="_top"><code class="systemitem">mLib</code></a>.
</p><p><span class="bold"><strong>Caveat:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Podpora <span class="bold"><strong>mediaLib</strong></span> je
<span class="bold"><strong>v současnosti vypnutá</strong></span> ve výchozím nastavení
<span class="application">MPlayer</span>u kvůli chybovosti. Uživatelé SPARCu
překládající MPlayer s podporou mediaLib hlásili tlustý zelený pruh
v libavcodecem enkódovaném a dekódovaném videu. Pokud chcete, můžete si ji
zapnout:
</p><pre class="screen">./configure --enable-mlib</pre><p>
Děláte to na vlastní nebezpečí. Uživatelé x86 by
<span class="bold"><strong>nikdy</strong></span> neměli používat mediaLib, jelikož
vede k velmi slabému výkonu MPlayeru.
</p></li></ul></div><p>
Pro kompilaci balíku budete potřebovat GNU <span class="application">make</span>
(<tt class="filename">gmake</tt>, <tt class="filename">/opt/sfw/gmake</tt>), jelikož
nativní make Solarisu nebude pracovat. Typickou chybou kompilace s make
Solarisu namísto GNU make je:
</p><pre class="screen">
% /usr/ccs/bin/make
make: Fatal error in reader: Makefile, line 25: Unexpected end of line seen
</pre><p>
</p><p>
Na Solarisu SPARC, potřebujete GNU C/C++ Compiler; nezáleží na tom, zda je
GNU C/C++ compiler konfigurován s nebo bez GNU assembleru.
</p><p>
Na Solarisu x86, potřebujete GNU assembler a GNU C/C++ compiler,
konfigurovaný pro použití GNU assembleru! Kód <span class="application">MPlayer</span>u
na platformě x86 intenzivně používá MMX, SSE a 3DNOW! instrukce,
které nemůže být kompilovány Sun assemblerem
<tt class="filename">/usr/ccs/bin/as</tt>.
</p><p>
Skript <tt class="filename">configure</tt> zkouší zjistit, který assembler je použitý
vaším příkazem "gcc" (v případě že autodetekce selže, použijte volbu
<tt class="option">--as=<em class="replaceable"><code>/kdekoli/máte/nainstalován/gnu-as</code></em></tt>
pro nastavení <tt class="filename">configure</tt> skriptu tak, aby našel GNU
"as" na vašem systému).
</p><p>Řešení běžných potíží:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Chybová zpráva z <tt class="filename">configure</tt> na systému Solaris x86
  s použitím GCC bez GNU assembleru:
  </p><pre class="screen">
% configure
...
Checking assembler (/usr/ccs/bin/as) ... , failed
Please upgrade(downgrade) binutils to 2.10.1...</pre><p>
  (Řešení: Nainstalujte a použijte gcc konfigurovaný s
  <tt class="option">--with-as=gas</tt>)
</p><p>
Typická chyba, kterou dostanete při kompilaci pomocí GNU C kompilátoru, který
nepoužívá GNU as:
</p><pre class="screen">
% gmake
...
gcc -c -Iloader -Ilibvo -O4 -march=i686 -mcpu=i686 -pipe -ffast-math
    -fomit-frame-pointer  -I/usr/local/include   -o mplayer.o mplayer.c
Assembler: mplayer.c
"(stdin)", line 3567 : Illegal mnemonic
"(stdin)", line 3567 : Syntax error
... more "Illegal mnemonic" and "Syntax error" errors ...
</pre><p>
</p></li><li class="listitem"><p>
  <span class="application">MPlayer</span> může zhavarovat (segfault),
  pokud dekódujete nebo enkódujete video používající win32 kodeky:
</p><pre class="screen">
...
Trying to force audio codec driver family acm...
Opening audio decoder: [acm] Win32/ACM decoders
sysi86(SI86DSCR): Invalid argument
Couldn't install fs segment, expect segfault


MPlayer interrupted by signal 11 in module: init_audio_codec
...</pre><p>
  To díky změně na sysi86() ve verzích Solaris 10 a před-Solaris
  Nevada b31. V Solaris Nevada b32 to bylo opraveno;
  Sun však ještě musí portovat opravu do Solaris 10. MPlayer
  Project upozornil Sun na tento problém a záplata pro Solaris 10
  je v současnosti rozpracována. Více informací o této chybě naleznete
  na:
  <a class="ulink" href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413" target="_top">http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6308413</a>.
</p></li><li class="listitem"><p>
Díky chybám v Solarisu 8,
nemůžete přehrávat DVD disky větší než 4 GB:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
  Ovladač sd(7D) na Solarisu 8 x86 má chybu v přístupu k diskovému bloku &gt;4GB
  na zařízeních, které mají logical blocksize != DEV_BSIZE (čili CD-ROM a DVD média).
  Díky 32Bit int overflow, dostanete přístupovou diskovou adresu modulo 4GB
  (<a class="ulink" href="http://groups.yahoo.com/group/solarisonintel/message/22516" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22516</a>).
  Tento problém neexistuje ve SPARC verzi Solarisu 8.
</p></li><li class="listitem"><p>
  Podobná chyba je i v kódu systému souborů hsfs(7FS) (AKA ISO9660),
  hsfs nemusí podporovat oddíly/disky větší než 4GB, ke všem datům je přistupováno
  modulo 4GB
  (<a class="ulink" href="http://groups.yahoo.com/group/solarisonintel/message/22592" target="_top">http://groups.yahoo.com/group/solarisonintel/message/22592</a>).
  Problém hsfs může být odstraněn nainstalováním
  patche 109764-04 (sparc) / 109765-04 (x86).
</p></li></ul></div></li></ul></div></div><div class="sect2" title="8.3.2. HP-UX"><div class="titlepage"><div><div><h3 class="title"><a name="hp-ux"></a>8.3.2. HP-UX</h3></div></div></div><p>
Joe Page hostuje podrobné HP-UX <span class="application">MPlayer</span>
<a class="ulink" href="http://users.rcn.com/joepage/mplayer_on_hpux11.htm" target="_top">HOWTO</a>
od Martina Ganssera na jeho domácí stránce. Podle těchto instrukcí by kompilace
měla proběhnout bez potíží. Následující informace jsou vytaženy ze zmíněného
HOWTO.
</p><p>
Potřebujete GCC 3.4.0 nebo pozdější, GNU make 3.80 nebo pozdější a SDL 1.2.7 nebo pozdější.
HP cc nevytvoří funkční program, předchozí verze GCC jsou chybové.
Pro funkci OpenGL musíte nainstalovat Mesa a video rozhraní gl a gl2 by měly
pracovat. Jejich rychlost však může být velmi malá, podle rychlosti CPU.
Dobrou náhradou za spíše slabý nativní HP-UX systém je GNU esound.
</p><p>
Vytvořte DVD zařízení průzkumem SCSI pomocí:

</p><pre class="screen">
# ioscan -fn

Class          I            H/W   Path          Driver    S/W State    H/W Type        Description
...
ext_bus 1    8/16/5      c720  CLAIMED INTERFACE  Built-in SCSI
target  3    8/16/5.2    tgt   CLAIMED DEVICE
disk    4    8/16/5.<span class="bold"><strong>2</strong></span>.<span class="bold"><strong>0</strong></span>  sdisk CLAIMED DEVICE     <span class="bold"><strong>PIONEER DVD-ROM DVD-305</strong></span>
                         /dev/dsk/c1t2d0 <span class="bold"><strong>/dev/rdsk/c1t2d0</strong></span>
target  4    8/16/5.7    tgt   CLAIMED DEVICE
ctl     <span class="bold"><strong>1</strong></span>    8/16/5.7.0  sctl  CLAIMED DEVICE     Initiator
                         /dev/rscsi/c1t7d0 /dev/rscsi/c1t7l0 /dev/scsi/c1t7l0
...
</pre><p>

Výstup na obrazovce ukazuje Pioneer DVD-ROM na SCSI adrese 2.
Instance karty pro hardwarovou cestu 8/16 je 1.
</p><p>
Vytvořte link ze surového zařízení na DVD zařízení.
</p><pre class="screen">
ln -s /dev/rdsk/c<em class="replaceable"><code>&lt;SCSI bus instance&gt;</code></em>t<em class="replaceable"><code>&lt;SCSI target ID&gt;</code></em>d<em class="replaceable"><code>&lt;LUN&gt;</code></em> /dev/<em class="replaceable"><code>&lt;device&gt;</code></em>
</pre><p>
Příklad:
</p><pre class="screen">ln -s /dev/rdsk/c1t2d0 /dev/dvd</pre><p>
</p><p>
Níže uvádíme řešení některých běžných problémů:

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Spadne při startu s hlášením:
  </p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: finite (code) from /usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.00/3.2/../../../libGL.sl</pre><p>
  </p><p>
  To znamená, že funkce <code class="systemitem">.finite().</code> není
  dostupná ve standardní HP-UX matematické knihovně.
  Místo ní je zde <code class="systemitem">.isfinite().</code>.
  Řešení: Použijte poslední Mesa depot soubor.
  </p></li><li class="listitem"><p>
  Spadne při přehrávání s hlášením:
  </p><pre class="screen">
/usr/lib/dld.sl: Unresolved symbol: sem_init (code) from /usr/local/lib/libSDL-1.2.sl.0</pre><p>
  </p><p>
  Řešení: Použijte volbu extralibdir v configure
  <tt class="option">--with-extralibdir="/usr/lib -lrt"</tt>
  </p></li><li class="listitem"><p>
  MPlayer havaruje (segfault) s hlášením:
  </p><pre class="screen">
Pid 10166 received a SIGSEGV for stack growth failure.
Possible causes: insufficient memory or swap space, or stack size exceeded maxssiz.
Segmentation fault</pre><p>
  </p><p>
  Řešení:
  HP-UX kernel má výchozí velikost zásobníku 8MB(?) na proces.(11.0 a
  novější 10.20 patche vám umožní zvýšit <code class="systemitem">maxssiz</code> až na
  350MB pro 32-bit programy). Musíte zvětšit
  <code class="systemitem">maxssiz</code> a rekompilovat kernel (a restartovat).
  Pro tento účel můžete použít SAM.
  (Když už to budete dělat, ověřte parametr <code class="systemitem">maxdsiz</code>
  pro maximální množství paměti, které může program použít.
  Závisí na vašich aplikacích, jestli je výchozích 64MB dost nebo ne.)
  </p></li></ul></div><p>
</p></div><div class="sect2" title="8.3.3. AIX"><div class="titlepage"><div><div><h3 class="title"><a name="aix"></a>8.3.3. AIX</h3></div></div></div><p>
<span class="application">MPlayer</span> lze úspěšně přeložit na AIX 5.1,
5.2 a 5.3, pomocí GCC 3.3 nebo vyšší. Kompilace
<span class="application">MPlayer</span>u na AIX 4.3.3 a nížsích nebyla
testována. Velmi doporučujeme kompilovat
<span class="application">MPlayer</span> pomocí GCC 3.4 nebo vašší,
nebo pokud kompilujete na
POWER5, vyžaduje se GCC 4.0.
</p><p>
Ujistěte se, že používáte GNU make
(<tt class="filename">/opt/freeware/bin/gmake</tt>) pro sestavení
<span class="application">MPlayer</span>u, jelikož při použití
<tt class="filename">/usr/ccs/bin/make</tt> budete mít problémy.
</p><p>
Detekce procesoru je stále nedokončena.
Testovány byly následující architektury:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>604e</p></li><li class="listitem"><p>POWER3</p></li><li class="listitem"><p>POWER4</p></li></ul></div><p>
Následující architektury nebyly testovány, ale měly by pracovat:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POWER</p></li><li class="listitem"><p>POWER2</p></li><li class="listitem"><p>POWER5</p></li></ul></div><p>
</p><p>
Zvuk přes Ultimedia Services není podporován, jelikož Ultimedia byla
opuštěna v AIX 5.1; tudíš je jedinou možností použití ovladačů AIX Open
Sound System (OSS) od 4Front Technologies z
<a class="ulink" href="http://www.opensound.com/aix.html" target="_top">http://www.opensound.com/aix.html</a>.
4Front Technologies volně poskytuje OSS ovladače pro AIX 5.1 pro
nekomerční použití; zatím však neexistují zvukové ovladače
pro AIX 5.2 nebo 5.3. To znamená, že <span class="bold"><strong>AIX 5.2
a 5.3 nejsou nyní schopny provozovat MPlayer se zvukem.</strong></span>
</p><p>Řešení běžných potíží:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Pokud dostanete tuto chybovou hlášku z <tt class="filename">configure</tt>:
  </p><pre class="screen">
$ ./configure
...
Checking for iconv program ... no
No working iconv program found, use
--charset=US-ASCII to continue anyway.
Messages in the GTK-2 interface will be broken then.</pre><p>
  To proto, že AIX používá nestandardní názvy znakových sad; proto
  konverze výstupu MPlayeru do jiné znakové sady není zatím podporována.
  Řešením je:
  </p><pre class="screen">$ ./configure --charset=noconv</pre><p>
  </p></li></ul></div></div><div class="sect2" title="8.3.4. QNX"><div class="titlepage"><div><div><h3 class="title"><a name="qnx"></a>8.3.4. QNX</h3></div></div></div><p>
Musíte si stáhnout a nainstalovat SDL pro QNX. Pak spusťte
<span class="application">MPlayer</span> s volbami <tt class="option">-vo sdl:driver=photon</tt>
a <tt class="option">-ao sdl:nto</tt>, mělo by to být rychlé.
</p><p>
Výstup <tt class="option">-vo x11</tt> bude ještě pomalejší než na Linuxu,
jelikož QNX má pouze X <span class="emphasis"><em>emulaci</em></span>, která je velmi pomalá.
</p></div></div><div class="sect1" title="8.4. Windows"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="windows"></a>8.4. Windows</h2></div></div></div><p>
Ano, <span class="application">MPlayer</span> běží na Windows pod
<a class="ulink" href="http://www.cygwin.com/" target="_top"><span class="application">Cygwin</span></a> a
<a class="ulink" href="http://www.mingw.org/" target="_top"><span class="application">MinGW</span></a>.
Nemá zatím oficiální GUI, ale verze pro příkazový řádek je plně funkční.
Měli byste navštívit konferenci
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-cygwin/" target="_top">MPlayer-cygwin</a>
pro pomoc a poslední informace.
Oficiální Windows binárky naleznete na
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">download stránce</a>.
Instalátor a jednoduché GUI frontendy jsou dostupné z externích zdrojů.
Odkazy na ně jsme umístili v sekci Windows na naší
<a class="ulink" href="http://www.mplayerhq.hu/design7/projects.html#windows" target="_top">stránce s
projekty</a>.
</p><p>
Pokud se chcete vyhnout použití příkazové řádky, můžete použít malý trik
s umístěním zástupce na pracovní plochu, který bude obsahovat v sekci
spuštění něco takového:
</p><pre class="screen"><em class="replaceable"><code>c:\cesta\k\</code></em>mplayer.exe %1</pre><p>
To nechá <span class="application">MPlayer</span> přehrát jakýkoli film, který je
přetažen na zástupce. Přidejte <tt class="option">-fs</tt> pro celoobrazovkový
režim.
</p><p>
Nejlepších výsledků dosáhnete použitím nativního DirectX video rozhraní
(<tt class="option">-vo directx</tt>). Alternativami jsou OpenGL a SDL, ale výkon
OpenGL se velmi různí na jednotlivých systémech a o SDL je známo, že na
některých systémech drobí video nebo padá. Pokud je obraz rozsypán, zkuste
vypnout hardwarovou akceleraci pomocí
<tt class="option">-vo directx:noaccel</tt>. Stáhněte si
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/contrib/dx7headers.tgz" target="_top">hlavičkové soubory DirectX 7</a>
pro kompilaci výstupního rozhraní DirectX. Navíc budete muset mít
nainstalovány DirectX 7 nebo vyšší, aby rozhraní pracovalo.
</p><p>
<a class="link" href="#vidix" title="7.15. VIDIX">VIDIX</a> nyní pracuje pod Windows jako
<tt class="option">-vo winvidix</tt>, ačkoli je stále experimentální
a vyžaduje trochu manuálního nastavování. Stáhněte si
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/dhahelperwin/dhahelper.sys" target="_top">dhahelper.sys</a> nebo
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/dhahelperwin/withmtrr/dhahelper.sys" target="_top">dhahelper.sys (s podporou MTRR)</a>
a zkopírujte jej do adresáře
<tt class="filename">vidix/dhahelperwin</tt> ve svém stromě se
zdrojovými kódy <span class="application">MPlayer</span>u.
Otevřete konzoli a přesuňte se do tohoto adresáře. Pak zadejte
</p><pre class="screen">gcc -o dhasetup.exe dhasetup.c</pre><p>
a spusťte
</p><pre class="screen">dhasetup.exe install</pre><p>
jako Administrator. Pak budete muset restartovat. Jakmile budete hotovi,
zkopírujte <code class="systemitem">.so</code> soubory z
<tt class="filename">vidix/drivers</tt> do adresáře
<tt class="filename">mplayer/vidix</tt>
relativního k vašemu <tt class="filename">mplayer.exe</tt>.
</p><p>
Pro nejlepší výsledky by měl <span class="application">MPlayer</span> používat
barevný prostor, který podporuje vaše video karta v hardware. Naneštěstí
některé Windows ovladače grafických karet špatně hlásí některé barevné
prostory jako podporované v hardware. Chcete-li zjistit které, zkuste
</p><pre class="screen">
mplayer -benchmark -nosound -frames 100 -vf format=<em class="replaceable"><code>barevny_prostor</code></em> <em class="replaceable"><code>film</code></em>
</pre><p>
kde <em class="replaceable"><code>barevny_prostor</code></em> může být barevný prostor
vypsaný volbou <tt class="option">-vf format=fmt=help</tt>. Pokud najdete
barevný prostor, který vaše karta zvládá zjevně špatně,
<tt class="option">-vf noformat=<em class="replaceable"><code>barevny_prostor</code></em></tt>
zakáže jeho použití. Přidejte si to do vašeho konfig souboru, aby zůstal
zakázán natrvalo.
</p><p>Pro Windows máme k dispozici speciální balíčky kodeků na naší
  <a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">download stránce</a>,
  abyste mohli přehrávat formáty, pro které zatím není nativní podpora.
  Umístěte kodeky někde do cesty (path), nebo přidejte
  <tt class="option">--codecsdir=<em class="replaceable"><code>c:/cesta/ke/kodekům</code></em></tt>
  (případně
  <tt class="option">--codecsdir=<em class="replaceable"><code>/cesta/ke/kodekům</code></em></tt>
  používate-li <span class="application">Cygwin</span>) do <tt class="filename">configure</tt>.
  Máme několik zpráv, že Real DLL musí mít práva zápisu pro uživatele, který
  pouští <span class="application">MPlayer</span>, ale pouze na některých systémech (NT4).
  Máte-li potíže, zkuste jim přidat právo zápisu.
  </p><p>
Můžete přehrávat VCD přehráváním <tt class="filename">.DAT</tt> nebo
<tt class="filename">.MPG</tt> souborů, které Windows ukazuje na VCD. Pracuje to
takto (upravte písmeno disku vaší CD-ROM):
</p><pre class="screen">mplayer <em class="replaceable"><code>d:/mpegav/avseq01.dat</code></em></pre><p>
DVD pracují také, upravte <tt class="option">-dvd-device</tt> na písmeno
DVD-ROM mechaniky:
</p><pre class="screen">
mplayer dvd://<em class="replaceable"><code>&lt;titul&gt;</code></em> -dvd-device <em class="replaceable"><code>d</code></em>:
</pre><p>
<span class="application">Cygwin</span>/<span class="application">MinGW</span>
terminál je spíše pomalý. Přesměrování výstupu nebo použití volby
<tt class="option">-quiet</tt> podle hlášení zvýší výkon na některých systémech.
Direct rendering (<tt class="option">-dr</tt>) může rovněž pomoci.
Pokud je přehrávání trhané, zkuste
<tt class="option">-autosync 100</tt>. Pokud vám některé z těchto voleb pomohly,
měli byste si je zapsat do konfiguračního souboru.
</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Runtime CPU detekce na Windows vypíná podporu SSE kvůli opakovaným a
těžko vystopovatelným se SSE souvisejícím pádům. Pokud chcete mít podporu
SSE pod Windows, budete muset kompilovat bez runtime CPU detekce.
</p><p>
Máte-li Pentium 4 a dojde k pádu při použití
RealPlayer kodeků, možná budete muset vypnout podporu hyperthreading.
</p></div><div class="sect2" title="8.4.1. Cygwin"><div class="titlepage"><div><div><h3 class="title"><a name="cygwin"></a>8.4.1. <span class="application">Cygwin</span></h3></div></div></div><p>
Musíte používat <span class="application">Cygwin</span> 1.5.0 nebo vyšší,
abyste mohli kompilovat <span class="application">MPlayer</span>.
</p><p>
Hlavičkové soubory DirectX musí být rozbaleny do
<tt class="filename">/usr/include/</tt> nebo
<tt class="filename">/usr/local/include/</tt>.
</p><p>
Instrukce a soubory nutné pro běh SDL pod
<span class="application">Cygwin</span> lze nalézt na
<a class="ulink" href="http://www.libsdl.org/extras/win32/cygwin/" target="_top">libsdl stránkách</a>.
</p></div><div class="sect2" title="8.4.2. MinGW"><div class="titlepage"><div><div><h3 class="title"><a name="mingw"></a>8.4.2. <span class="application">MinGW</span></h3></div></div></div><p>
Instalace takové verze <span class="application">MinGW</span>, aby bylo lze
kompilovat <span class="application">MPlayer</span> byla obtížná, ale nyní
pracuje bez dalších úprav. Jen nainstalujte <span class="application">MinGW</span>
3.1.0 nebo vyšší a MSYS 1.0.9 nebo vyšší a zvolte v MSYS postinstall, že je
<span class="application">MinGW</span> nainstalováno.
</p><p>
Rozbalte DirectX hlavičkové soubory do
<tt class="filename">/mingw/include/</tt>.
</p><p>
Podpora MOV compressed header vyžaduje
<a class="ulink" href="http://www.gzip.org/zlib/" target="_top">zlib</a>,
kterou <span class="application">MinGW</span> neobsahuje.
Konfigurujte ji s <tt class="option">--prefix=/mingw</tt> a nainstalujte
ji před kompilací <span class="application">MPlayer</span>u.
</p><p>
Kompletní instrukce pro překlad <span class="application">MPlayer</span>u
a potřebné knihovny naleznete v
<a class="ulink" href="http://www.mplayerhq.hu/MPlayer/releases/win32/contrib/MPlayer-MinGW-Howto.txt" target="_top">MPlayer MinGW HOWTO</a>.
</p></div></div><div class="sect1" title="8.5. Mac OS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="macos"></a>8.5. Mac OS</h2></div></div></div><p>
<span class="application">MPlayer</span> nepracuje na Mac OS verzích pod
10, ale měl by být bez úprav kompilovatelný na Mac OS X 10.2 a vyšších.
Preferovaná verze kompileru je Apple verze
GCC 3.x a vyšších.
Základní prostředí pro kompilaci můžete získat instalací
<a class="ulink" href="http://developer.apple.com/tools/download/" target="_top">Xcode</a>
od Apple. Máte-li Mac OS X 10.3.9 nebo pozdější a QuickTime 7
můžete použít výstupní video rozhraní <tt class="option">corevideo</tt>.
</p><p>
Naneštěstí toto základní prostředí neumožňuje využít všechny
pěkné vlastnosti <span class="application">MPlayer</span>u.
Například, budete-li chtít mít zakompilovánu podporu OSD, budete
muset mít na svém stroji nainstalovány knihovny
<code class="systemitem">fontconfig</code>
a <code class="systemitem">freetype</code>.
 Narozdíl od jiných Unixů, jako je většina variant Linuxu a BSD, OS X
 nemá balíčkovací systém distribuovaný se systémem.
</p><p>
Můžete vybírat minimálně ze dvou:
<a class="ulink" href="http://fink.sourceforge.net/" target="_top">Fink</a>u a
<a class="ulink" href="http://www.macports.org/" target="_top">MacPorts</a>.
Oba poskytují zhruba stejné služby (např. mnoho dostupných balíčků,
řešení závislostí, schopnost jednoduše přidávat/aktualizovat/odebírat
balíčky, atp...).
Fink nabízí jak předkompilované binární balíčky, tak možnost kompilovat
všechno ze zdrojového kódu, zatímco MacPorts nabízí pouze možnost
kompilace ze zdrojového kódu.
Autor této příručky zvolil MacPorts z jednoduchého důvodu, že jeho
základní nastavení je mnohem lehčí.
Pozdější příklady budou založeny na MacPorts.
</p><p>
Například pro kompilaci <span class="application">MPlayer</span> s podporou OSD:
</p><pre class="screen">sudo port install pkgconfig</pre><p>
Takto nainstalujete <span class="application">pkg-config</span>, což je systém pro správu
knihovních příznaků compile/link.
<span class="application">MPlayer</span>ův skript <code class="systemitem">configure</code> jej
používá pro správnou detekci knihoven.
Pak můžete nainstalovat <span class="application">fontconfig</span>
podobným způsobem:
</p><pre class="screen">sudo port install fontconfig</pre><p>
Následně můžete pokračovat spuštěním <span class="application">MPlayer</span>ova
<code class="systemitem">configure</code> skriptu (ověřte proměnné prostředí
<code class="systemitem">PKG_CONFIG_PATH</code> a <code class="systemitem">PATH</code>,
aby <code class="systemitem">configure</code> našel knihovny instalované pomocí
MacPorts):
</p><pre class="screen">
PKG_CONFIG_PATH=/opt/local/lib/pkgconfig/ PATH=$PATH:/opt/local/bin/ ./configure
</pre><p>
</p><div class="sect2" title="8.5.1. MPlayer OS X GUI"><div class="titlepage"><div><div><h3 class="title"><a name="osx_gui"></a>8.5.1. MPlayer OS X GUI</h3></div></div></div><p>
Můžete si stáhnout nativní GUI pro <span class="application">MPlayer</span> spolu
s předkompilovanými binárkami <span class="application">MPlayer</span>u pro Mac OS X
z <a class="ulink" href="http://mplayerosx.sf.net/" target="_top">MPlayerOSX</a> projektu, ale upozorňujeme:
tento projekt již není aktivní.
</p><p>
Naštěstí byl <span class="application">MPlayerOSX</span> převzat členem
<span class="application">MPlayer</span> týmu.
Předváděcí verze lze stáhnout z naší
<a class="ulink" href="http://mplayerhq.hu/dload.html" target="_top">download stránky</a>
a oficiální verze by měla přijít již brzy.
</p><p>
Abyste mohli skompilovat <span class="application">MPlayerOSX</span> ze zdrojového
kódu sami, budete potřebovat <code class="systemitem">mplayerosx</code>,
<code class="systemitem">main</code> a kopii
<code class="systemitem">main</code> SVN modulu jménem
<code class="systemitem">main_noaltivec</code>.
<code class="systemitem">mplayerosx</code> je GUI nadstavba,
<code class="systemitem">main</code> je MPlayer a
<code class="systemitem">main_noaltivec</code> je MPlayer přeložený bez podpory AltiVec.
</p><p>
Pro stažení SVN modulů použijte:
</p><pre class="screen">
svn checkout svn://svn.mplayerhq.hu/mplayerosx/trunk/ mplayerosx
svn checkout svn://svn.mplayerhq.hu/mplayer/trunk/ main
</pre><p>
</p><p>
Abyste skompilovali <span class="application">MPlayerOSX</span> budete muset setavit
asi toto:
</p><pre class="screen">
Adresář_se_zdrojáky_MPlayeru
   |
   |---&gt;main           (Zdrojový kód MPlayeru ze Subversion)
   |
   |---&gt;main_noaltivec (Zdrojový kód MPlayeru ze Subversion konfigurován s --disable-altivec)
   |
   \---&gt;mplayerosx     (Zdrojový kód MPlayer OS X ze Subversion)
</pre><p>
Nejdřív musíte skompilovat main a main_noaltivec.
</p><p>
Pro začátek, pro dosažení maximální zpětné kompatibility,  nastavte
globální proměnnou:
</p><pre class="screen">export MACOSX_DEPLOYMENT_TARGET=10.3</pre><p>
</p><p>
Pak konfigurujte:
</p><p>
Pokud konfigurujete pro G4 nebo pozdější CPU s podporou AltiVec, proveďte následující:
</p><pre class="screen">
./configure --disable-gl --disable-x11
</pre><p>
Pokud konfigurujete pro stroj s G3 bez AltiVec, použijte:
</p><pre class="screen">
./configure --disable-gl --disable-x11 --disable-altivec
</pre><p>
Možná budete muset editovat <tt class="filename">config.mak</tt> a změnit
<code class="systemitem">-mcpu</code> a <code class="systemitem">-mtune</code>
z <code class="systemitem">74XX</code> na <code class="systemitem">G3</code>.
</p><p>
Pokračujte s
</p><pre class="screen">make</pre><p>
pak jděte do adresáře mplayerosx a napište
</p><pre class="screen">make dist</pre><p>
To vytvoří komprimovaný <code class="systemitem">.dmg</code> archiv
s binárkou připravenou k použití.
</p><p>
Také lze použít projekt <span class="application">Xcode</span> 2.1;
starý projekt pro <span class="application">Xcode</span> 1.x
již nepracuje.
</p></div></div></div><div class="chapter" title="Kapitola 9. Základní použití MEncoderu"><div class="titlepage"><div><div><h2 class="title"><a name="mencoder"></a>Kapitola 9. Základní použití <span class="application">MEncoder</span>u</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#menc-feat-selecting-codec">9.1. Výběr kodeků a nosných formátů</a></span></dt><dt><span class="sect1"><a href="#menc-feat-selecting-input">9.2. Výběr vstupního souboru nebo zařízení</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg4">9.3. Dvouprůchodové enkódování MPEG-4 ("DivX")</a></span></dt><dt><span class="sect1"><a href="#menc-feat-handheld-psp">9.4. Enkódovánído video formátu Sony PSP</a></span></dt><dt><span class="sect1"><a href="#menc-feat-mpeg">9.5. Enkódování do MPEG formátu</a></span></dt><dt><span class="sect1"><a href="#menc-feat-rescale">9.6. Škálování (změna velikosti) filmů</a></span></dt><dt><span class="sect1"><a href="#menc-feat-streamcopy">9.7. Proudové kopírování</a></span></dt><dt><span class="sect1"><a href="#menc-feat-enc-images">9.8. Enkódování z množství vstupních obrázkových souborů (JPEG, PNG, TGA, atd.)</a></span></dt><dt><span class="sect1"><a href="#menc-feat-extractsub">9.9. Extrakce DVD titulků do VOBsub souboru</a></span></dt><dt><span class="sect1"><a href="#aspect">9.10. Zachování poměru stran</a></span></dt></dl></div><p>
Úplný seznam dostupných voleb a příkladů pro <span class="application">MEncoder</span>
naleznete v man stránce. Řadu užitečných příkladů a podrobných návodů pro
použití mnoha enkódovacích voleb naleznete v
<a class="ulink" href="../../tech/encoding-tips.txt" target="_top">tipech pro enkódování</a>, které
byly získány z několika diskusí v konferenci MPlayer-users. Prohledejte archivy
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mencoder-users/" target="_top">zde</a>,
hlavně pro starší věci a také
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mplayer-users/" target="_top">zde</a>
chcete-li bohatost diskusí o všech aspektech a problémech vztažených
k enkódování <span class="application">MEncoder</span>em.
</p><div class="sect1" title="9.1. Výběr kodeků a nosných formátů"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-selecting-codec"></a>9.1. Výběr kodeků a nosných formátů</h2></div></div></div><p>
Audio a video kodeky pro enkódování jsou vybírány příslušnými
volbami <tt class="option">-oac</tt> a <tt class="option">-ovc</tt>.
Napište například:
</p><pre class="screen">mencoder -ovc help</pre><p>
pro seznam video kodeků podporovaných verzí programu
<span class="application">MEncoder</span> na vašem počítači.
Dostupné jsou následující možnosti:
</p><p>
Audio (zvukové) kodeky:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Jméno audio kodeku</th><th>Popis</th></tr></thead><tbody><tr><td>mp3lame</td><td>Enkóduje do VBR, ABR nebo CBR MP3 pomocí LAME</td></tr><tr><td>lavc</td><td>Použije se některý z
  <a class="link" href="#menc-feat-enc-libavcodec-audio-codecs" title="10.3.2. Audio kodeky libavcodec">
  <code class="systemitem">libavcodec</code> audio kodeků</a>
  </td></tr><tr><td>faac</td><td>FAAC AAC audio enkodér</td></tr><tr><td>toolame</td><td>Enkodér MPEG Audio Layer 2</td></tr><tr><td>twolame</td><td>Enkodér MPEG Audio Layer 2 založený na tooLAME</td></tr><tr><td>pcm</td><td>Nekomprimovaný PCM zvuk</td></tr><tr><td>copy</td><td>Nereenkóduje, pouze kopíruje komprimované vzorky</td></tr></tbody></table></div><p>
</p><p>
Video kodeky:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Jméno video kodeku</th><th>Popis</th></tr></thead><tbody><tr><td>lavc</td><td>Použije se některý z
  <a class="link" href="#menc-feat-enc-libavcodec-video-codecs" title="10.3.1. Video kodeky libavcodec">
  <code class="systemitem">libavcodec</code> video kodeků</a>
  </td></tr><tr><td>xvid</td><td>XviD, MPEG-4 Advanced Simple Profile (ASP) kodek</td></tr><tr><td>x264</td><td>x264, MPEG-4 Advanced Video Coding (AVC), alias H.264 kodek</td></tr><tr><td>nuv</td><td>nuppel video, používaný některými realtime aplikacemi</td></tr><tr><td>raw</td><td>Nekomprimované videosnímky</td></tr><tr><td>copy</td><td>Nereenkóduje, pouze kopíruje komprimované snímky</td></tr><tr><td>frameno</td><td>Použité pro 3-průchodové enkódování (nedoporučujeme)</td></tr></tbody></table></div><p>
</p><p>
Výstupní nosný formát je vybírán volbou <tt class="option">-of</tt>.
Zadejte:
</p><pre class="screen">mencoder -of help</pre><p>
pro seznam všech nosných formátů podporovaných verzí
<span class="application">MEncoder</span>u na vašem počítači.
Dostupné jsou následující možnosti:
</p><p>
Nosné formáty:
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Název nosného formátu</th><th>Popis</th></tr></thead><tbody><tr><td>lavf</td><td>Jeden z nosných formátů podporovaných
  <code class="systemitem">libavformat</code></td></tr><tr><td>avi</td><td>Audio-Video Interleaved (Prokládané audio s videem)</td></tr><tr><td>mpeg</td><td>MPEG-1 a MPEG-2 PS</td></tr><tr><td>rawvideo</td><td>surový (raw) video datový proud (žádný muxing – pouze jeden
  video proud)</td></tr><tr><td>rawaudio</td><td>surový (raw) audio datový proud (žádný muxing – pouze jeden
  audio proud)</td></tr></tbody></table></div><p>
Nosný formát AVI je nativním nosným formátem
<span class="application">MEncoder</span>u, což znamená, že je tím, který je nejlépe
zpracován a pro nějž byl <span class="application">MEncoder</span>
navržen.
Jak bylo zmíněno, ostatní nosné formáty jsou použitelné, ale můžete
při jejich použití narazit na problémy.
</p><p>
Nosné formáty <code class="systemitem">libavformat</code>:
</p><p>
Pokud jste si zvolili <code class="systemitem">libavformat</code>
pro provádění muxování výstupního souboru (pomocí <tt class="option">-of lavf</tt>),
příslušný nosný formát bude určen z přípony výstupního souboru.
Můžete vynutit určitý nosný formát pomocí parametru <tt class="option">format</tt>
knihovny <code class="systemitem">libavformat</code>.

</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Název <code class="systemitem">libavformat</code> nosného formátu</th><th>Popis</th></tr></thead><tbody><tr><td>mpg</td><td>MPEG-1 a MPEG-2 PS</td></tr><tr><td>asf</td><td>Advanced Streaming Format</td></tr><tr><td>avi</td><td>Audio-Video Interleaved</td></tr><tr><td>wav</td><td>Waveform Audio</td></tr><tr><td>swf</td><td>Macromedia Flash</td></tr><tr><td>flv</td><td>Macromedia Flash video</td></tr><tr><td>rm</td><td>RealMedia</td></tr><tr><td>au</td><td>SUN AU</td></tr><tr><td>nut</td><td>otevřený nosný formát NUT (experimentální a dosud neslučitelný se specifikací)</td></tr><tr><td>mov</td><td>QuickTime</td></tr><tr><td>mp4</td><td>formát MPEG-4</td></tr><tr><td>dv</td><td>Sony Digital Video</td></tr><tr><td>mkv</td><td>Otevřený nosný audio/video formát Matroska</td></tr></tbody></table></div><p>
Jak vidíte, <code class="systemitem">libavformat</code>
umožňuje <span class="application">MEncoder</span>u muxovat do velkého množství
nosných formátů.
Naneštěstí, jelikož <span class="application">MEncoder</span> nebyl od počátku
navržen pro podporu jiných nosných formátů než AVI, měli byste být
paranoidní ve vztahu k výstupnímu souboru.
Ověřte si prosím pro jistotu, že audio/video synchronizace je OK
a soubor lze správně přehrát i jinými přehrávači, než
<span class="application">MPlayer</span>.
</p><div class="example"><a name="encode_to_macromedia_flash_format"></a><p class="title"><b>Příklad 9.1. Enkódování do formátu Macromedia Flash</b></p><div class="example-contents"><p>
Vytvoření Macromedia Flash videa vhodného pro přehrávání ve webovém prohlížeči
pomocí Macromedia Flash pluginu:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -o <em class="replaceable"><code>výstupní.flv</code></em> -of lavf \
    -oac mp3lame -lameopts abr:br=56 -srate 22050 -ovc lavc \
    -lavcopts vcodec=flv:vbitrate=500:mbd=2:mv0:trell:v4mv:cbp:last_pred=3
</pre><p>
</p></div></div><br class="example-break"></div><div class="sect1" title="9.2. Výběr vstupního souboru nebo zařízení"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-selecting-input"></a>9.2. Výběr vstupního souboru nebo zařízení</h2></div></div></div><p>
<span class="application">MEncoder</span> umí enkódovat ze souborů nebo přímo z
DVD či VCD disku.
Vložte na příkazovém řádku jméno souboru pro enkódování souboru,
nebo <tt class="option">dvd://</tt><em class="replaceable"><code>číslo_titulu</code></em> nebo
<tt class="option">vcd://</tt><em class="replaceable"><code>číslo_stopy</code></em> pro enkódování
DVD titulu či VCD stopy.
Máte-li již zkopírováno DVD na hard disk (k tomu můžete použít nástroj jako
<span class="application">dvdbackup</span>, dostupný na mnoha systémech),
a chcete enkódovat z kopie, měli byste i zde použít syntaxi
<tt class="option">dvd://</tt> ve spojení s volbou <tt class="option">-dvd-device</tt>
následovanou cestou do kořenového adresáře skopírovaného DVD.

Volby <tt class="option">-dvd-device</tt> a <tt class="option">-cdrom-device</tt>
lze rovněž použít k přenastavení cest k souborům zařízení pro přímé
čtení disků, pokud výchozí
<tt class="filename">/dev/dvd</tt> a <tt class="filename">/dev/cdrom</tt> na vašem
systému nepracují.
</p><p>
Enkódujete-li z DVD, je často vhodné vybrat kapitolu nebo rozsah
kapitol k enkódování.
Pro tento účel můžete použít volbu <tt class="option">-chapter</tt>.
Například s volbou <tt class="option">-chapter</tt> <em class="replaceable"><code>1-4</code></em>
se budou z DVD enkódovat pouze kapitoly 1 až 4.
To se zvlášť hodí, pokud budete enkódovat film na velikost 1400 MB
určený pro dvě CD, jelikož budete mít jistotu, že zlom nastane přesně
na hranici kapitol místo uprostřed scény.
</p><p>
Pokud máte podporovanou TV zachytávací kartu, můžete rovněž enkódovat ze
zařízení TV vstupu.
Použijte <tt class="option">tv://</tt><em class="replaceable"><code>číslo_kanálu</code></em> jako
jméno souboru a volbu <tt class="option">-tv</tt> pro konfiguraci různých nastavení
zachytávání.
Vstup z DVB pracuje obdobně.
</p></div><div class="sect1" title='9.3. Dvouprůchodové enkódování MPEG-4 ("DivX")'><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-mpeg4"></a>9.3. Dvouprůchodové enkódování MPEG-4 ("DivX")</h2></div></div></div><p>
Název vychází z faktu, že soubor je enkódován <span class="emphasis"><em>dvakrát</em></span>.
První enkódování (dubbed pass) vytvoří dočasné soubory
(<tt class="filename">*.log</tt>) velikosti několika megabajtů, které zatím nemažte
(můžete smazat AVI, nebo raději žádné nevytvářejte a přesměrujte je do
<tt class="filename">/dev/null</tt>).
Ve druhém průchodu je vytvořen dvouprůchodový výstupní
soubor s použitím řízení datového toku z dočasných souborů. Výsledný soubor
bude mít lepší kvalitu obrazu. Pokud jste o tom teď slyšeli poprvé, měli byste
si prostudovat některé návody dostupné na netu.
</p><div class="example"><a name="copy_audio_track"></a><p class="title"><b>Příklad 9.2. Kopírování zvukové stopy</b></p><div class="example-contents"><p>
Dvouprůchodové enkódování druhé stopy z DVD do MPEG-4 ("DivX")
AVI zatímco se zvuk pouze zkopíruje.
</p><pre class="screen">
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o /dev/null
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -oac copy -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div></div><br class="example-break"><div class="example"><a name="encode_audio_track"></a><p class="title"><b>Příklad 9.3. Enkódování zvukové stopy</b></p><div class="example-contents"><p>
Dvouprůchodové enkódování DVD do MPEG-4 ("DivX") AVI a současně
enkódování zvukové stopy do MP3.
Při této metodě buďte opatrní, jelikož v některých případech může vést k rozjetí
zvuku s videem.
</p><pre class="screen">
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 \
    -oac mp3lame -lameopts vbr=3 -o /dev/null
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -oac mp3lame -lameopts vbr=3 -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div></div><br class="example-break"></div><div class="sect1" title="9.4. Enkódovánído video formátu Sony PSP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-handheld-psp"></a>9.4. Enkódovánído video formátu Sony PSP</h2></div></div></div><p>
<span class="application">MEncoder</span> podporuje enkódování do Sony PSP video
formátu, ale mohou se lišit, v závislosti na revizi PSP softwaru, s tím
spojená omezení.
Budete-li respektovat následující omezení, neměli byste narazit na potíže:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Datový tok</strong></span>: by neměl překročit 1500kbps,
  ale poslední verze podporovaly prakticky jakýkoli datový tok pokud hlavička
  tvrdí, že není příliš vysoký.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Rozměry</strong></span>: šířka a výška PSP videa
  by měly být násobky 16 a výsledek šířka * výška musí
  být &lt;= 64000.
  Za určitých okolností může být možné, aby PSP hrál i ve vyšším rozlišení.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Audio</strong></span>: jeho vzorkovací kmitočet by měl být 24kHz
  pro videa MPEG-4 a 48kHz pro H.264.
</p></li></ul></div><p>
</p><div class="example"><a name="encode_for_psp"></a><p class="title"><b>Příklad 9.4. Enkódování  do PSP</b></p><div class="example-contents"><p>
</p><pre class="screen">
mencoder -ofps 30000/1001 -af lavcresample=24000 -vf harddup -of lavf \
    -oac lavc -ovc lavc -lavcopts aglobal=1:vglobal=1:vcodec=mpeg4:acodec=aac \
    -lavfopts format=psp \
    <em class="replaceable"><code>vstupní.video</code></em> -o <em class="replaceable"><code>výstupní.psp</code></em>
</pre><p>
Poznamenejme, že můžete nastavit jméno videa pomocí
<tt class="option">-info name=<em class="replaceable"><code>JménoFilmu</code></em></tt>.
</p></div></div><br class="example-break"></div><div class="sect1" title="9.5. Enkódování do MPEG formátu"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-mpeg"></a>9.5. Enkódování do MPEG formátu</h2></div></div></div><p>
<span class="application">MEncoder</span> umí vytvořit výstupní soubor formátu
MPEG (MPEG-PS).
Pokud používáte MPEG-1 nebo MPEG-2 video, obvykle je to proto, že enkódujete
pro omezený formát jako je SVCD, VCD nebo DVD.
Konkrétní požadavky těchto formátů jsou objasněny v sekci
<a class="link" href="#menc-feat-vcd-dvd" title="10.8. Použití MEncoderu k vytváření VCD/SVCD/DVD-kompatibilních souborů.">návod pro vytvoření VCD a DVD</a>.
</p><p>
Výstupní souborový formát <span class="application">MEncoder</span>u změníte použitím
volby <tt class="option">-of mpeg</tt>.
</p><div class="informalexample"><p>
Příklad:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video \
    -oac copy <em class="replaceable"><code>ostatní_volby</code></em> -o <em class="replaceable"><code>výstupní.mpg</code></em>
</pre><p>
Vytvoření MPEG-1 souboru vhodného pro přehrávání na systémech s minimální
podporou multimédií, jako je výchozí instalace Windows:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -of mpeg -mpegopts format=mpeg1:tsaf:muxrate=2000 \
    -o <em class="replaceable"><code>výstupní.mpg</code></em> -oac lavc -lavcopts acodec=mp2:abitrate=224 -ovc lavc \
    -lavcopts vcodec=mpeg1video:vbitrate=1152:keyint=15:mbd=2:aspect=4/3
</pre><p>
To samé, ale použijeme <code class="systemitem">libavformat</code> MPEG muxer:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -o <em class="replaceable"><code>VCD.mpg</code></em> -ofps 25 -vf scale=352:288,harddup -of lavf \
    -lavfopts format=mpg -oac lavc -lavcopts acodec=mp2:abitrate=224 -ovc lavc \
    -lavcopts vcodec=mpeg1video:vrc_buf_size=327:keyint=15:vrc_maxrate=1152:vbitrate=1152:vmax_b_frames=0
</pre><p>
</p></div><div class="note" title="Tip:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip:</h3><p>
Pokud vás z nějakého důvodu neuspokojí kvalita videa z druhého průchodu,
můžete znovu spustit enkódování videa s jiným cílovým datovým tokem, s tím,
že máte uložen soubor se statistikami z předchozího průchodu.
To je možné proto, že cílem statistického souboru je především zaznamenat
komplexitu každého snímku, která příliš nezávisí na datovém toku.
Povšimněte si, že ačkoli nejvyšší kvality dosáhnete pokud všechny
průchody poběží při stejném datovém toku, tak se výsledek příliš neliší.
</p></div></div><div class="sect1" title="9.6. Škálování (změna velikosti) filmů"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-rescale"></a>9.6. Škálování (změna velikosti) filmů</h2></div></div></div><p>
Často potřebujeme změnit velikost obrázků ve filmu a to z mnoha důvodů: zmenšení
souboru, zátěže sítě atd. Mnoho lidí dokonce mění velikost při převodu DVD nebo
SVCD do DivX AVI. Pokud si přejete video přeškálovat, přečtěte si sekci
<a class="link" href="#aspect" title="9.10. Zachování poměru stran">Zachování poměru stran</a>.
</p><p>
Samotný proces škálování je prováděn video filtrem <code class="literal">scale</code>:
<tt class="option">-vf scale=<em class="replaceable"><code>šířka</code></em>:<em class="replaceable"><code>výška</code></em></tt>.
Jeho kvalita může být nastavena volbou <tt class="option">-sws</tt>.
Pokud ji neuvedete, <span class="application">MEncoder</span> použije 2: bikubickou.
</p><p>
Použití:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstup.mpg</code></em> -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell \
    -vf scale=640:480 -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div><div class="sect1" title="9.7. Proudové kopírování"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-streamcopy"></a>9.7. Proudové kopírování</h2></div></div></div><p>
<span class="application">MEncoder</span> může zpracovat vstupní datové proudy dvěma
způsoby:
<span class="bold"><strong>enkóduje</strong></span> je, nebo je
<span class="bold"><strong>kopíruje</strong></span>. Tato část je o
<span class="bold"><strong>kopírování</strong></span>.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Video proud</strong></span> (volba <tt class="option">-ovc copy</tt>):
  můžete dělat pěkné věci :) Jako umístění (nikoli konverze!) FLI nebo VIVO nebo
  MPEG-1 videa do AVI souboru! Samozřejmě takové soubory přehraje pouze
  <span class="application">MPlayer</span> :) A proto to nejspíš nemá žádnou rozumnou
  hodnotu. A teď vážně: kopírování video proudu může být užitečné například
  tehdy, když má být enkódován pouze zvuk (např. nekomprimovaný PCM do MP3).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Audio proud</strong></span> (volba <tt class="option">-oac copy</tt>):
  jednoduché. Je možné vzít externí zvukový soubor (MP3, WAV) a namultiplexovat
  jej do výstupního proudu. K tomu použijte volbu
  <tt class="option">-audiofile <em class="replaceable"><code>soubor</code></em></tt>.
</p></li></ul></div><p>
Použití <tt class="option">-oac copy</tt> pro kopírování z jednoho nosného fomátu
do jiného může vyžadovat použití <tt class="option">-fafmttag</tt> pro zachování
příznaku formátu zvuku původního souboru.
Například pokud konvertujete NSV soubor s AAC zvukem do nosného formátu AVI,
bude příznak formátu zvuku nesprávný a bude jej nutno změnit.
Seznam příznaků audio formátu naleznete v souboru
<tt class="filename">codecs.conf</tt>.
</p><p>
Příklad:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.nsv</code></em> -oac copy -fafmttag 0x706D \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -o <em class="replaceable"><code>výstupní.avi</code></em>
</pre><p>
</p></div><div class="sect1" title="9.8. Enkódování z množství vstupních obrázkových souborů (JPEG, PNG, TGA, atd.)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-images"></a>9.8. Enkódování z množství vstupních obrázkových souborů (JPEG, PNG, TGA, atd.)</h2></div></div></div><p>
<span class="application">MEncoder</span> je schopen vytvořit film z jednoho nebo více
JPEG, PNG nebo TGA souborů. Pomocí jednoduchého snímkového kopírování může
vytvořit MJPEG (Motion JPEG), MPNG (Motion PNG) nebo MTGA (Motion TGA) soubory.
</p><div class="orderedlist" title="Vysvětlení procesu:"><p class="title"><b>Vysvětlení procesu:</b></p><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="application">MEncoder</span> <span class="emphasis"><em>dekóduje</em></span> vstupní
  soubor(y) pomocí knihovny <code class="systemitem">libjpeg</code>
  (když dekóduje PNG, použije <code class="systemitem">libpng</code>).
  </p></li><li class="listitem"><p>
  Potom <span class="application">MEncoder</span> nakrmí dekódovaný snímek do
  zvoleného video kompresoru (DivX4, Xvid, FFmpeg msmpeg4, atd.).
  </p></li></ol></div><p title="Příklady"><b>Příklady. </b>
Vysvětlení volby <tt class="option">-mf</tt> je v man stránce.

</p><div class="informalexample"><p>
Vytvoření MPEG-4 souboru ze všech JPEG souborů v aktuálním adresáři:
</p><pre class="screen">
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc lavc \
    -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div><p title="Příklady">

</p><div class="informalexample"><p>
Vytvoření MPEG-4 souboru z některých JPEG souborů v aktuálním adresáři:
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>snímek001.jpg,snímek002.jpg</code></em> -mf w=800:h=600:fps=25:type=jpg \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div><p title="Příklady">

</p><div class="informalexample"><p>
Vytvoření MPEG-4 souboru ze seznamu vyjmenovaných JPEG souborů
(seznam.txt v aktuálním adresáři obsahuje seznam souborů k použití
jako zdroj, každý soubor na samostatném řádku):
</p><pre class="screen">
mencoder mf://<em class="replaceable"><code>@seznam.txt</code></em> -mf w=800:h=600:fps=25:type=jpg \
    -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell -oac copy -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div><p title="Příklady">

Můžete kombinovat různé typy, bez ohledu na metodu, kterou používáte
– individuální jména souborů, žolíky nebo soubor se seznamem – přičemž
musí mít přirozeně stejné rozměry.
Takže můžete např. vzít úvodní snímek z PNG souboru
a pak vložit slideshow z JPEG fotek.

</p><div class="informalexample"><p>
Vytvoření Motion JPEG (MJPEG) souboru ze všech JPEG souborů v aktuálním
adresáři:
</p><pre class="screen">
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -oac copy -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div><p title="Příklady">

</p><div class="informalexample"><p>
Vytvoření nekomprimovaného souboru ze všech PNG souborů v aktuálním adresáři:
</p><pre class="screen">
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <em class="replaceable"><code>výstup.avi</code></em>
</pre><p>
</p></div><p title="Příklady">

</p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
Šířka musí být celé číslo násobek 4, to je dáno omezením RAW RGB AVI
formátu.
</p></div><p title="Příklady">

</p><div class="informalexample"><p>
Vytvoření Motion PNG (MPNG) souboru ze všech PNG souborů v aktuálním adresáři:
</p><pre class="screen">
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <em class="replaceable"><code>výstup.avi</code></em></pre><p>
</p></div><p title="Příklady">

</p><div class="informalexample"><p>
Vytvoření Motion TGA (MTGA) souboru ze všech TGA souborů v aktuálním adresáři:
</p><pre class="screen">
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <em class="replaceable"><code>výstup.avi</code></em></pre><p>
</p></div><p title="Příklady">
</p></div><div class="sect1" title="9.9. Extrakce DVD titulků do VOBsub souboru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-extractsub"></a>9.9. Extrakce DVD titulků do VOBsub souboru</h2></div></div></div><p>
<span class="application">MEncoder</span> je schopen vyextrahovat titulky z DVD do
VOBsub formátovaných souborů. Ty sestávají ze dvou souborů zakončených
<tt class="filename">.idx</tt> a <tt class="filename">.sub</tt> a jsou obvykle zabaleny
v jediném <tt class="filename">.rar</tt> archivu.
<span class="application">MPlayer</span> je umí přehrávat s pomocí voleb
<tt class="option">-vobsub</tt> a <tt class="option">-vobsubid</tt>.
</p><p>
Zadejte základní jméno (čili bez přípony <tt class="filename">.idx</tt> nebo
<tt class="filename">.sub</tt>) výstupních souborů pomocí volby
<tt class="option">-vobsubout</tt> a index pro tyto titulky ve zbývajících souborech
pomocí <tt class="option">-vobsuboutindex</tt>.
</p><p>
Pokud není vstup z DVD, měli byste použít <tt class="option">-ifo</tt> pro indikaci
<tt class="filename">.ifo</tt> souboru nutného k vytvoření výsledného
<tt class="filename">.idx</tt> souboru.
</p><p>
Pokud vstup není z DVD a nemáte <tt class="filename">.ifo</tt> soubor, budete muset
použít volbu <tt class="option">-vobsubid</tt> k nastavení, pro které id jazyka se má
vytvořit <tt class="filename">.idx</tt> soubor.
</p><p>
Každým spuštěním se přidají běžící titulky pokud soubory <tt class="filename">.idx</tt>
a <tt class="filename">.sub</tt> již existují. Takže byste je měli všechny odstranit
dříve než začnete.
</p><div class="example"><a name="copying_two_subtitles_from_a_dvd_while_doing_two_pass_encoding"></a><p class="title"><b>Příklad 9.5. Kopírování dvojích titulků z DVD během dvouprůchodového enkódování</b></p><div class="example-contents"><pre class="screen">
rm <em class="replaceable"><code>titulky.idx</code></em> <em class="replaceable"><code>titulky.sub</code></em>
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 \
    -vobsubout <em class="replaceable"><code>titulky</code></em> -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:mbd=2:trell:vpass=2 \
    -vobsubout <em class="replaceable"><code>titulky</code></em> -vobsuboutindex 1 -sid 5</pre></div></div><br class="example-break"><div class="example"><a name="copying_a_french_subtitle_from_an_mpeg_file"></a><p class="title"><b>Příklad 9.6. Kopírování francouzských titulků z MPEG souboru</b></p><div class="example-contents"><pre class="screen">
rm <em class="replaceable"><code>titulky.idx</code></em> <em class="replaceable"><code>titulky.sub</code></em>
mencoder <em class="replaceable"><code>movie.mpg</code></em> -ifo <em class="replaceable"><code>movie.ifo</code></em> -vobsubout <em class="replaceable"><code>titulky</code></em> -vobsuboutindex 0 \
    -vobsuboutid fr -sid 1 -nosound -ovc copy
</pre></div></div><br class="example-break"></div><div class="sect1" title="9.10. Zachování poměru stran"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aspect"></a>9.10. Zachování poměru stran</h2></div></div></div><p>
DVD a SVCD (čili MPEG-1/2) soubory obsahují hodnotu poměru stran,
popisující, jak by měl přehrávač škálovat video proud, takže lidé nebudou mít
šišaté hlavy (př.: 480x480 + 4:3 = 640x480). Pokud ovšem enkódujeme do AVI
(DivX) souborů, mějte na paměti, že AVI hlavičky neukládají tuto hodnotu.
Přeškálování videa je odporné a časově náročné, takže musí být lepší způsob!
</p><p>A zde jej máte</p><p>
MPEG-4 má unikátní vlastnost: video proud může obsahovat svůj požadovaný poměr
stran. Ano, přesně jako MPEG-1/2 (DVD, SVCD) a H.263 soubory. Naneštěstí kromě
<span class="application">MPlayer</span>u jen málo video přehrávačů podporuje
tento atribut MPEG-4.
</p><p>
Tato vlastnost může být použita pouze s kodekem <code class="systemitem">mpeg4</code> z
<code class="systemitem">libavcodec</code>u.
Mějte na paměti: ačkoli
<span class="application">MPlayer</span> korektně přehraje vytvořený soubor, ostatní
přehrávače použijí špatný poměr stran.
</p><p>
Opravdu byste měli oříznout černé okraje nad a pod filmem.
Nastudujte si použití filtrů <code class="systemitem">cropdetect</code> a
<code class="systemitem">crop</code> v man stránce.
</p><p>
Použití
</p><pre class="screen">mencoder <em class="replaceable"><code>sample-svcd.mpg</code></em> -vf crop=714:548:0:14 -oac copy -ovc lavc \
    -lavcopts vcodec=mpeg4:mbd=2:trell:autoaspect -o <em class="replaceable"><code>output.avi</code></em></pre><p>
</p></div></div><div class="chapter" title="Kapitola 10. Enkódování s MEncoderem"><div class="titlepage"><div><div><h2 class="title"><a name="encoding-guide"></a>Kapitola 10. Enkódování s <span class="application">MEncoder</span>em</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#menc-feat-dvd-mpeg4">10.1. Vytvoření MPEG-4 ("DivX")
ripu DVD filmu ve vysoké kvalitě</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-preparing-encode">10.1.1. Příprava na enkódování: Určení zdrojového materiálu a datového toku</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-fps">10.1.1.1. Zjištění snímkové rychlosti zdroje</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-preparing-encode-material">10.1.1.2. Určení zdrojového materiálu</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-2pass">10.1.2. Pevný kvantizer vs. více průchodů</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-constraints">10.1.3. Omezení pro efektivní enkódování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-crop">10.1.4. Ořezávání a škálování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate">10.1.5. Volba rozlišení a datového toku</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-resolution-bitrate-compute">10.1.5.1. Výpočet rozlišení</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-filtering">10.1.6. Filtrování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-interlacing">10.1.7. Prokládání a Telecine</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-encoding-interlaced">10.1.8. Enkódování prokládaného videa</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-av-sync">10.1.9. Poznámky k Audio/Video synchronizaci</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-codec">10.1.10. Výběr video kodeku</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-audio">10.1.11. Zvuk</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-muxing">10.1.12. Muxování (multiplexování)</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-filter-issues">10.1.12.1. Zlepšování spolehlivosti muxování a A/V synchronizace</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-avi-limitations">10.1.12.2. Limitace nosného formátu AVI</a></span></dt><dt><span class="sect3"><a href="#menc-feat-dvd-mpeg4-muxing-matroska">10.1.12.3. Muxování do nosného formátu Matroska</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#menc-feat-telecine">10.2. Jak naložit s telecine a prokladem v NTSC DVD</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-telecine-intro">10.2.1. Představení</a></span></dt><dt><span class="sect2"><a href="#menc-feat-telecine-ident">10.2.2. Jak zjistit o jaký typ videa se jedná</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-ident-progressive">10.2.2.1. Progresivní (neprokládané)</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-telecined">10.2.2.2. Telecinováno (přepsáno pro NTSC televizi)</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-interlaced">10.2.2.3. Prokládané</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpt">10.2.2.4. Smíšené progresivní a telecinované</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-ident-mixedpi">10.2.2.5. Smíšené progresivní a prokládané</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-encode">10.2.3. Jak enkódovat jednotlivé kategorie</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-telecine-encode-progressive">10.2.3.1. Progresivní</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-telecined">10.2.3.2. Telecinované</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-interlaced">10.2.3.3. Prokládané</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpt">10.2.3.4. Smíšené progresivní a telecinované</a></span></dt><dt><span class="sect3"><a href="#menc-feat-telecine-encode-mixedpi">10.2.3.5. Smíšené progresivní a prokládané</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-telecine-footnotes">10.2.4. Poznámky pod čarou</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-enc-libavcodec">10.3. Enkódování s rodinou kodeků <code class="systemitem">libavcodec</code>
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-video-codecs">10.3.1. Video kodeky
<code class="systemitem">libavcodec</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-enc-libavcodec-audio-codecs">10.3.2. Audio kodeky
<code class="systemitem">libavcodec</code></a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-enc-libavcodec-audio-codecs-pcmadpcm">10.3.2.1. Pomocná tabulka pro PCM/ADPCM formát</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-lavc-encoding-options">10.3.3. Enkódovací volby libavcodecu</a></span></dt><dt><span class="sect2"><a href="#menc-feat-mpeg4-lavc-example-settings">10.3.4. Příklady nastavení enkódování</a></span></dt><dt><span class="sect2"><a href="#custommatrices">10.3.5. Uživatelské inter/intra matice</a></span></dt><dt><span class="sect2"><a href="#menc-feat-dvd-mpeg4-example">10.3.6. Příklad</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-xvid">10.4. Enkódování pomocí kodeku <code class="systemitem">Xvid</code>
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-xvid-intro">10.4.1. Jaké volby by měly být použity, abychom dosáhli nejlepších výsledků?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-options">10.4.2. Volby pro enkódování s <code class="systemitem">Xvid</code></a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-encoding-profiles">10.4.3. Enkódovací profily</a></span></dt><dt><span class="sect2"><a href="#menc-feat-xvid-example-settings">10.4.4. Příklady nastavení enkódování</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-x264">10.5. Enkódování
  <code class="systemitem">x264</code> kodekem</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-x264-encoding-options">10.5.1. Enkódovací volby x264</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-intro">10.5.1.1. Úvodem</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-speedvquality">10.5.1.2. Volby které primárně ovlivňují rychlost a kvalitu</a></span></dt><dt><span class="sect3"><a href="#menc-feat-x264-encoding-options-misc-preferences">10.5.1.3. Volby náležející různým preferencím</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-x264-example-settings">10.5.2. Příklady nastavení enkódování</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-video-for-windows">10.6. 
  Enkódování rodinou kodeků
  <code class="systemitem">Video For Windows</code>
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-enc-vfw-video-codecs">10.6.1. Podporované kodeky Video for Windows</a></span></dt><dt><span class="sect2"><a href="#menc-feat-video-for-windows-bitrate-settings">10.6.2. Použití vfw2menc pro vytvoření souboru s nastavením kodeku.</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-quicktime-7">10.7. Použití <span class="application">MEncoder</span>u pro vytvoření
<span class="application">QuickTime</span>-kompatibilních souborů</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-quicktime-7-why-use-it">10.7.1. Proč by někdo chtěl vytvářet
<span class="application">QuickTime</span>-kompatibilní soubory?</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-constraints">10.7.2. <span class="application">QuickTime</span> 7 omezení</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-crop">10.7.3. Ořez</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-scale">10.7.4. Škálování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-avsync">10.7.5. A/V synchronizace</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-bitrate">10.7.6. Datový tok</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-example">10.7.7. Příklad enkódování</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-remux">10.7.8. Přemuxování do MP4</a></span></dt><dt><span class="sect2"><a href="#menc-feat-quicktime-7-metadata">10.7.9. Přidání stop s meta daty</a></span></dt></dl></dd><dt><span class="sect1"><a href="#menc-feat-vcd-dvd">10.8. Použití <span class="application">MEncoder</span>u
  k vytváření VCD/SVCD/DVD-kompatibilních souborů.</a></span></dt><dd><dl><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-constraints">10.8.1. Omezení Formátů</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-resolution">10.8.1.1. Omezení Formátů</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-gop">10.8.1.2. Omezení velikosti GOP</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-constraints-bitrate">10.8.1.3. Omezení datového toku</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-output">10.8.2. Výstupní volby</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-aspect">10.8.2.1. Poměr stran</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-a-v-sync">10.8.2.2. Zachování A/V synchronizace</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-output-srate">10.8.2.3. Převod vzorkovacího kmitočtu</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-lavc">10.8.3. Použití libavcodec pro enkódování VCD/SVCD/DVD</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-intro">10.8.3.1. Úvodem</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-options">10.8.3.2. lavcopts</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-examples">10.8.3.3. Příklady</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-lavc-advanced">10.8.3.4. Pokročilé volby</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-audio">10.8.4. Enkódování zvuku</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-toolame">10.8.4.1. toolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-twolame">10.8.4.2. twolame</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-audio-lavc">10.8.4.3. libavcodec</a></span></dt></dl></dd><dt><span class="sect2"><a href="#menc-feat-vcd-dvd-all">10.8.5. Spojení všeho dohromady</a></span></dt><dd><dl><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-dvd">10.8.5.1. PAL DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-dvd">10.8.5.2. NTSC DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-ac3-copy">10.8.5.3. PAL AVI obsahující AC–3 zvuk do DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-ac3-copy">10.8.5.4. NTSC AVI obsahující AC–3 zvuk do DVD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-svcd">10.8.5.5. PAL SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-svcd">10.8.5.6. NTSC SVCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-pal-vcd">10.8.5.7. PAL VCD</a></span></dt><dt><span class="sect3"><a href="#menc-feat-vcd-dvd-all-ntsc-vcd">10.8.5.8. NTSC VCD</a></span></dt></dl></dd></dl></dd></dl></div><div class="sect1" title='10.1. Vytvoření MPEG-4 ("DivX") ripu DVD filmu ve vysoké kvalitě'><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-dvd-mpeg4"></a>10.1. Vytvoření MPEG-4 ("DivX")
ripu DVD filmu ve vysoké kvalitě</h2></div></div></div><p>
Velmi častou otázkou je "Jak mohu vytvořit rip v nejvyšší možné kvalitě pro
danou velikost?". Další otázkou je "Jak vytvořím DVD rip v nejvyšší možné
kvalitě? Velikost souboru mě nezajímá, chci tu nejvyšší kvalitu."
</p><p>
Druhá otázka je poněkud špatně položená. Konec konců, pokud je vám lhostejná
velikost souboru, proč prostě nezkopírujete celý MPEG-2 video proud z DVD?
Jistěže vaše AVI bude mít kolem 5 GB, ale pokud chcete nejvyšší kvalitu a
na velikosti nezáleží, je to jistě nejlepší volba.
</p><p>
Ve skutečnosti, důvodem převodu DVD do MPEG-4 je právě to, že vám na velikosti
souboru <span class="bold"><strong>záleží</strong></span>.
</p><p>
Je těžké nabídnout kuchařku jak vytvořit DVD rip ve velmi vysoké kvalitě. Je
nutné uvážit množství faktorů a měli byste rozumět těmto detailům, jinak
budete asi zklamáni výsledkem. Níže prozkoumáme některé z těchto věcí a
pak se podíváme na příklad. Předpokládáme, že použijete
<code class="systemitem">libavcodec</code> pro enkódování videa,
ačkoli teorie je stejná i pro ostatní kodeky.
</p><p>
Pokud je toho na vás moc, asi byste měli použít některý z pěkných frontendů,
které jsou zmíněny v
<a class="ulink" href="http://www.mplayerhq.hu/design7/projects.html#mencoder_frontends" target="_top">sekci MEncoder</a>
na naší stránce odvozených projektů.
Takto budete schopni dosahovat vysoce kvalitních ripů bez velkého přemýšlení,
protože většina těchto nástrojů je navržena tak, aby dělala vhodná rozhodnutí
za vás.
</p><div class="sect2" title="10.1.1. Příprava na enkódování: Určení zdrojového materiálu a datového toku"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode"></a>10.1.1. Příprava na enkódování: Určení zdrojového materiálu a datového toku</h3></div></div></div><p>
Předtím než i jen pomyslíte na enkódování filmu, budete muset učinit
několik přípravných kroků.
</p><p>
Prvním a nejdůležitějším krokem před enkódováním by mělo být zjištění
druhu obsahu se kterým máte co do činění.
Pokud vaše zdrojové video pochází z DVD nebo veřejné/kabelové/satelitní
TV, bude uložen v jednom ze dvou formátů: NTSC v Severní Americe a
Japonsku, PAL v Evropě, atd.
Je ovšem důležité si uvědomit, že to je pouze formátování pro prezentaci
v televizi a často <span class="bold"><strong>neodpovídá</strong></span>
originálnímu formátu filmu.
Zkušenosti ukazují, že NTSC materiál je mnohem těžší enkódovat,
jelikož musíme identifikovat více věcí ve zdrojovém videu.
Abyste dosáhli uspokojivého výsledku, musíte znát původní formát.
Nevezmete-li to správně v potaz, dostanete obraz plný nejrůznějších vad,
včetně ošklivých kombinačních (proklad) artefaktů a zdvojených nebo dokonce
zahozených snímků.
Kromě toho, že budete mít nekvalitní obraz, artefakty rovněž snižují
efektivitu kódování:
Dosáhnete horší kvalitu na jednotku datového toku.
</p><div class="sect3" title="10.1.1.1. Zjištění snímkové rychlosti zdroje"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode-fps"></a>10.1.1.1. Zjištění snímkové rychlosti zdroje</h4></div></div></div><p>
Zde máte seznam běžných typů zdrojového materiálu, kde na který nejspíš
narazíte a jejich volby:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Standardní film</strong></span>: Vytvořený pro promítání
  v kině při 24fps.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>PAL video</strong></span>: Zaznamenáno PAL
  video kamerou s rychlostí 50 půlsnímků za sekundu.
  Půlsnímek sestává jen z lichých nebo sudých řádků daného snímku.
  Televize je navržena pro jejich střídavé zobrazování jako laciná
  forma analogové komprese.
  Lidské oko to pravděpodobně vykompenzuje, ale jakmile porozumíte
  prokládání, naučíte se jej vidět i v TV a už si ji neužijete.
  Dva půlsnímky <span class="bold"><strong>netvoří</strong></span> úplný snímek,
  protože jsou zaznamenány s časovou odchylkou 1/50 sekundy a proto se
  nekryjí, dokud je zde pohyb.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC Video</strong></span>: Zaznamenáno
  NTSC video kamerou s rychlostí 60000/1001 půlsnímků za sekundu, nebo 60
  půlsnímků za sekundu v době před barevnou televizí.
  Jinak obdobné PAL.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Animovaný film</strong></span>: Obvykle kreslený při
  24 snímcích za sekundu, ale rovněž bývá v některé variantě prměnné snímkové
  rychlosti.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Počítačová grafika (CG)</strong></span>: Může mít jakoukoli
  snímkovou rychlost, ale některé jsou častější než jiné; 24 a 30 snímků za
  sekundu jsou typické pro NTSC a 25 snímků za sekundu zase pro PAL.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Starý film</strong></span>: Různé nižší snímkové rychlosti.
</p></li></ul></div></div><div class="sect3" title="10.1.1.2. Určení zdrojového materiálu"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-preparing-encode-material"></a>10.1.1.2. Určení zdrojového materiálu</h4></div></div></div><p>
Filmy sestávající ze snímků jsou nazývány progresivní,
zatímco ty složené z nezávislých půlsnímků buď prokládané, nebo
jen video – ačkoli druhý termín je zavádějící.
</p><p>
Abychom to ještě zkomplikovali, některé filmy mohou být směsí
všeho výše uvedeného.
</p><p>
Nejdůležitějším rozdílem mezi všemi těmito formáty je to, že základem
některých jsou snímky a jiných půlsnímky.
<span class="bold"><strong>Vždy</strong></span>, když je film připravován pro promítání
v televizi (včetně DVD), je převeden na půlsnímky.
Různé metody jak toho lze dosáhnout jsou souhrnně nazývány "telecine" a
nechvalně známé NTSC "3:2 pulldown" je jednou z variant.
Pokud nebyl základ vašeho filmu rovněž půlsnímkový (se stejnou půlsnímkovou
rychlostí), máte film v jiném formátu, než byl původně.
</p><div class="itemizedlist" title="Zde je několik běžných typů pulldown:"><p class="title"><b>Zde je několik běžných typů pulldown:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>PAL 2:2 pulldown</strong></span>: Je nejhezčí z nich.
  Každý snímek je zobrazován po dobu dvou půlsnímků tak, že se oddělí liché
  a sudé řádky a zobrazují se střídavě.
  Pokud měl originál 24 snímků za sekundu, zrychlí se film o 4%.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>PAL 2:2:2:2:2:2:2:2:2:2:2:3 pulldown</strong></span>:
  Každý 12 snímek je zobrazen po dobu tří půlsnímků, místo dvou.
  To odstraní nevýhodu 4% zrychlení, ale znesnadní obrácený proces.
  Obvykle je používán pouze u hudební produkce, jelikož zde by 4% zrychlení
  znatelně poškodilo hudební zážitek.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC 3:2 telecine</strong></span>: Snímky jsou zobrazovány
  po dobu 2 nebo 3 půlsnímků, čímž je dosaženo 2.5 krát
  vyšší půlsnímkové rychlosti, než je originální snímková rychlost.
  Výsledek je dále velmi mírně spomalen ze 60 půlsnímků za sekundu na
  60000/1001 půlsnímků za sekundu, aby se dosáhlo NTSC půlsnímkové rychlosti.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>NTSC 2:2 pulldown</strong></span>: Používá se pro
  promítání 30fps materiálu na NTSC.
  Pěkné, stejně jako 2:2 PAL pulldown.
</p></li></ul></div><p>
Existují rovněž metody pro konverzi mezi NTSC a PAL videem, ale to
již je nad rámec této příručky.
Pokud se setkáte s takovým filmem a budete jej chtít enkódovat,
bude pro vás nejlepší opatřit si jej v originálním formátu.
Konverze mezi těmito formáty je vysoce destruktivní a nelze ji
čistě zvrátit, takže výsledek velmi utrpí, pokud je vytvořen z
konvertovaného materiálu.
</p><p>
Když je video ukládáno na DVD, po sobě jdoucí páry půlsnímků jsou
seskupovány do snímků, dokonce i když nejsou určeny pro zobrazení
ve stejném okamžiku.
Standard MPEG-2 použitý na DVD a digitální televizi poskytuje možnost
jak pro enkódování originálních progresivních snímků, tak pro uložení
informací do hlavičky snímku o počtu půlsnímků, po jejichž dobu by měl
být daný snímek zobrazován.
Pokud je použita tato metoda, film bývá často označen jako
"soft-telecined", jelikož proces pouze řídí DVD přehrávač pro
aplikaci pulldown na film spíše než že mění samotný film.
Tento případ je velmi upřednostňován, jelikož může být snadno
zvrácen (ve skutečnosti ignorován) enkodérem a proto poskytuje maximální
kvalitu.
Mnoho DVD a televizních produkčních společností však nepoužívá vhodné
enkódovací techniky, ale místo toho produkují filmy s
"hard telecine", kdy jsou ve skutečnosti půlsnímky duplikovány
ve výsledném MPEG-2.
</p><p>
Postupy pro tyto případy budou uvedeny
<a class="link" href="#menc-feat-telecine" title="10.2. Jak naložit s telecine a prokladem v NTSC DVD">později v této příručce</a>.
Prozatím si řekneme několik návodů pro identifikaci o jaký typ materiálu jde:
</p><div class="itemizedlist" title="NTSC regiony:"><p class="title"><b>NTSC regiony:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Pokud <span class="application">MPlayer</span> při přehrávání vypíše, že se snímková
  rychlost změnila na 24000/1001 a již se to nezmění, pak se nejspíš jedná
  o progresivní obsah, který byl "soft telecinován".
</p></li><li class="listitem"><p>
  Pokud <span class="application">MPlayer</span> ukazuje, že se snímková rychlost
  mění tam a zpět mezi 24000/1001 a 30000/1001 a někdy vidíte
  "combing", pak je zde několik možností.
  Segmenty 24000/1001 fps mají téměř jistě "soft telecinovaný" progresivní
  obsah, ale 30000/1001 fps části mohou mít buď hard-telecined 24000/1001 fps
  obsah, nebo se jedná o 60000/1001 půlsnímků za sekundu NTSC video.
  Použijte stejný postup jako v následujících dvou případech pro určení
  který z nich to je.
</p></li><li class="listitem"><p>
  Pokud <span class="application">MPlayer</span> neukáže změnu snímkové rychlosti
  a všechny snímky jsou zubaté, je váš film ve formátu NTSC video s 60000/1001
  půlsnímky za sekundu.
</p></li><li class="listitem"><p>
  Pokud <span class="application">MPlayer</span> neukáže změnu snímkové rychlosti
  a dva snímky z pěti vypadají zubatě, má vaše video "hard telecinovaný"
  24000/1001fps obsah.
</p></li></ul></div><div class="itemizedlist" title="PAL regiony:"><p class="title"><b>PAL regiony:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Pokud není nikde vidět žádné zubatění, je váš film 2:2 pulldown.
</p></li><li class="listitem"><p>
  Pokud vidíte jak se objevuje a mizí zubatění každou půlsekundu,
  pak je váš film 2:2:2:2:2:2:2:2:2:2:2:3 pulldown.
</p></li><li class="listitem"><p>
  Pokud je zubatění vidět stále, je to PAL video s 50 půlsnímky za sekundu.
</p></li></ul></div><div class="note" title="Rada:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Rada:</h3><p>
  <span class="application">MPlayer</span> umí spomalit přehrávání videa
  pomocí volby -speed.
  Zkuste použít <tt class="option">-speed</tt> 0.2 pro velmi pomalé přehrávání
  nebo opakovaně stiskejte klávesu "<span class="keycap"><b>.</b></span>" pro krokováníé po
  snímcích a najděte vzor, pokud jej nevidíte při plné rychlosti.
</p></div></div></div><div class="sect2" title="10.1.2. Pevný kvantizer vs. více průchodů"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-2pass"></a>10.1.2. Pevný kvantizer vs. více průchodů</h3></div></div></div><p>
Enkódování vašeho videa je možné provést v široké škále kvality.
S moderními video enkodéry a trochou předkodekové komprese
(zmenšení a odšumování) je možné dosáhnout velmi dobré kvality v 700 MB,
pro 90-110 minut dlouhé širokoúhlé video.
Jinak lze všechna videa, snad kromě těch nejdelších, enkódovat v téměř
perfektní kvalitě do 1400 MB.
</p><p>
Jsou tři přístupy k enkódování videa: pevný datový tok (CBR), pevný kvantizer
a víceprůchodový (ABR, neboli průměrovaný datový tok).
</p><p>
Komplexnost snímků ve filmu a tím i počet bitů potřebných pro jejich
komprimaci, se může velmi lišit od scény ke scéně.
Moderní enkodéry se umí přizpůsobit těmto potřebám změnou datového toku.
V jednoduchých režiměch, jako je CBR, však enkodéry neznají nároky na
datový tok budoucích scén a tak nemohou překročit požadovaný střední
datový tok na dlouhou dobu.
Pokročilejší režimy, jako je víceprůchodové enkódování, umí vzít v
potaz statistiky z předchozích režimů, což odstraní výše zmíněný problém.
</p><div class="note" title="Poznámka:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka:</h3><p>
Většina kodeků, které podporují ABR enkódování, podporují pouze dvouprůchodové
enkódování, zatímco ostatní jako <code class="systemitem">x264</code>,
<code class="systemitem">Xvid</code>
a <code class="systemitem">libavcodec</code> podporují víceprůchodové
enkódování, které s každým průchodem trochu zlepší kvalitu, ačkoli toto
zlepšení již není viditelné, nebo měřitelné po asi čtvrtém průchodu.
V této sekci budeme považovat dvouprůchodové a víceprůchodové
enkódování za rovnocenné.
</p></div><p>
V každém z těchto režimů video kodek (jako je
<code class="systemitem">libavcodec</code>)
rozbije videosnímek na makrobloky 16x16 pixelů a potom na každý makroblok
aplikuje kvantizer. Čím je nižší kvantizer, tím je vyšší kvalita a datový tok.
Metoda, kterou enkodér filmu používá pro
určení jaký kvantizer použít pro daný makroblok, se liší a je vysoce
ovlivnitelná. (Toto je extrémní zjednodušení daného procesu, ale je vhodné
rozumět základnímu principu.)
</p><p>
Pokud nastavíte konstantní datový tok, bude videokodek enkódovat video tak,
že zahodí
detaily podle potřeby a jen tolik, aby se udržel pod zadaným datovým tokem.
Pokud je vám opravdu lhostejná velikost souboru, můžete také použít CBR a
nastavit datový tok na nekonečno. (V praxi to znamená nastavit hodnotu tak
vysoko, aby nijak neomezovala, jako 10000 Kbitů.) Bez reálného omezení
datového toku použije kodek
nejnižší možný kvantizer pro každý makroblok (ten je nastaven pomocí
<tt class="option">vqmin</tt> pro <code class="systemitem">libavcodec</code>,
kde je výchozí 2). Jakmile nastavíte dostatečně nižší
datový tok, takže je kodek
přinucen použít vyšší kvantizer, pak téměř jistě snížíte kvalitu svého videa.
Abyste se tomu vyhnuli, měli byste zvážit zmenšení videa podle postupu
popsaného později v této příručce.
Všeobecně byste se měli úplně vyhnout CBR, pokud vám záleží na kvalitě.
</p><p>
Při konstantním kvantizeru kodek
používá kvantizer nastavený volbou <tt class="option">vqscale</tt> (pro
<code class="systemitem">libavcodec</code>) na každý makroblok.
Pokud chcete maximálně kvalitní rip, opět bez ohledu na datový tok, můžete
použít <tt class="option">vqscale=2</tt>. To povede ke stejnému datovému toku a PSNR
(odstup signál – šum) jako CBR s <tt class="option">vbitrate</tt>=infinity a
výchozím <tt class="option">vqmin</tt> rovným 2.
</p><p>
Problém s konstantní kvantizací je ten, že používá zadaný kvantizer ať to daný
makroblok potřebuje či nikoli. Je totiž možné použít vyšší kvantizer na
makroblok bez obětování viditelné kvality. Proč tedy plýtvat bity s nemístně
nízkým kvantizerem? Váše CPU má tolik cyklů, kolik máte času, ale na harddisku
máte jen určitý počet bitů.
</p><p>
Při dvouprůchodovém enkódování se v prvním průchodu projde film jakoby měl být
CBR, ale vlastnosti každého snímku se zaznamenají do logu. Tato data jsou pak
použita při druhém průchodu pro inteligentní stanovení použitého kvantizeru.
V rychlých scénách nebo scénách s velkým počtem detailů budou častěji používány
vyšší kvantizery a v pomalých nebo méně detailních scénách zase nižší kvantizery.
Obvykle je důležitější množství pohybu než detailů.
</p><p>
Pokud použijete <tt class="option">vqscale=2</tt>, plýtváte bity. Pokud použijete
<tt class="option">vqscale=3</tt>, pak nedostanete nejkvalitnější možný rip.
Dejme tomu, že ripujete DVD při <tt class="option">vqscale=3</tt> a
výsledkem je 1800Kbit. Pokud provedete dvouprůchodové enkódování
s <tt class="option">vbitrate=1800</tt>, výsledné video bude mít <span class="bold"><strong>vyšší kvalitu</strong></span> při
<span class="bold"><strong>stejném datovém toku</strong></span>.
</p><p>
Jelikož jsme vás nyní přesvědčili, že dvouprůchodový režim je správná volba,
skutečnou otázkou je, jaký datový tok použít? Odpověď je, že není jediná
odpověď. Ideálně byste měli zvolit takový datový tok, který zajistí nejlepší
rovnováhu mezi kvalitou a velikostí souboru. Ten bude pokaždé jiný
v závislosti na zdrojovém videu.
</p><p>
Pokud na velikosti souboru nezáleží, pak je dobrý startovní můstek pro rip
s velmi vysokou kvalitou je kolem 2000 Kbitů plus-mínus 200 Kbitů.
Pro rychlé akční nebo vysoce detailní zdrojové video, nebo máte-li velmi
kritické oko, se budete rozhodovat mezi 2400 nebo 2600.
U některých DVD nepoznáte rozdíl při 1400 Kbitech. Je vhodné experimentovat
se scénami při různých datových tocích, abyste pro to dostali cit.
</p><p>
Pokud se snažíte o určitou velikost, budete muset nějak spočítat datový tok.
Ale ještě předtím musíte zjistit, kolik místa byste měli rezervovat pro
zvukové(ou) stopy(u), takže byste si
<a class="link" href="#menc-feat-dvd-mpeg4-audio" title="10.1.11. Zvuk">je měli ripnout</a> jako první.
Můžete si pak spočítat datový tok pomocí následující rovnice:
<code class="systemitem">datový_tok = (požadovaná_velikost_v_Mbajtech - velikost_zvuku_v_Mbajtech) *
1024 * 1024 / délka_v_sek * 8 / 1000</code>
Například abyste nacpali dvouhodinový film na 702MB CD, se 60MB zvukovou
stopou, bude muset být datový tok videa:
<code class="systemitem">(702 - 60) * 1024 * 1024 / (120*60) * 8 / 1000
= 740kbps (kilobitů za sekundu)</code>
</p></div><div class="sect2" title="10.1.3. Omezení pro efektivní enkódování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-constraints"></a>10.1.3. Omezení pro efektivní enkódování</h3></div></div></div><p>
Ze samé podstaty komprese typu MPEG vyplývají určitá omezení, která byste měli
ctít, pokud chcete maximální kvalitu.
MPEG rozdělí video na čtverce 16x16 nazývané makrobloky, které se skládají
ze čtyř bloků 8x8 jasové (luma) složky a dvou bloků 8x8 barevné (chroma)
složky v polovičním rozlišení (jeden pro osu červená-cyan (modrozelená) a druhý pro osu
modrá-žlutá).
Dokonce i když šířka a výška vašeho videa nejsou násobky 16, použije enkodér
dostatek 16x16 makrobloků, aby pokryl celou oblast obrazu a zabere místo
navíc, které přijde vniveč.
Takže chcete-li maximalizovat kvalitu při dané velikosti souboru, není dobrý
nápad používat rozměry které nejsou násobky 16.
</p><p>
Většina DVD má také různě velké černé okraje videa. Ponechání těchto ploch
různým způsobem <span class="bold"><strong>velmi</strong></span> snižuje kvalitu.
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Komprese typu MPEG je velmi závislá na plošných frekvenčních
  transformacích, konkrétně Diskrétní Kosinové Transformaci (DCT), která se
  podobá Fourierově transformaci. Tento druh enkódování je efektivní na
  reprezentaci opakujících se vzorů a pozvolné přechody, ale má potíže s ostrými
  přechody. Chcete-li je enkódovat, musíte použít mnoho bitů, jinak se objeví
  artefakty známé jako kroužkování.
  </p><p>
  Frekvenční transformace (DCT) je provedena zvlášť pro každý makroblok
  (ve skutečnosti na každý blok), takže problém nastane pouze tehdy, je-li ostrý
  přechod uvnitř bloku. Pokud vaše černé okraje začínají přesně na hranicích
  násobků 16 pixelů, pak to není problém. Černé okraje jsou však na DVD jen
  málokdy pěkně umístěny, takže je v praxi budete muset vždy odstranit, abyste
  se vyhnuli tomuto problému.
  </p></li></ol></div><p>
Navíc k plošně frekvenčním transformacím používá komprese typu MPEG vektory
pohybu k popisu změn od jednoho snímku ke druhému. Vektory pohybu přirozeně
pracují méně efektivně s novým obsahem přicházejícím zpoza okrajů snímku,
protože ten nebyl přítomen na předchozím snímku. Dokud se obraz rozšiřuje
směrem k okrajům snímku, nemají s tím vektory pohybu žádný problém, ale
jsou-li zde černé okraje, může problém nastat:
</p><div class="orderedlist"><ol class="orderedlist" start="2" type="1"><li class="listitem"><p>
  Komprese typu MPEG ukládá pro každý makroblok vektor, identifikující která
  část předchozího obrázku by měla být zkopírována onoho makrobloku jako základ
  pro predikci následujícího snímku. Pouze zbývající odlišnosti musí být
  enkódovány. Pokud makroblok přesahuje okraj obrázku a obsahuje část černého
  okraje, vektory pohybu z ostatních částí obrázku přepíší černý okraj.
  To znamená mnoho bitů spotřebovaných buď na znovuzačernění, nebo se (spíš)
  vektory pohybu nepoužijí vůbec a všechny změny v tomto makrobloku se budou
  kódovat přímo. Jinými slovy se velmi sníží efektivita enkódování.
  </p><p>
  Tento problém nastává opět jen v případě, že černé okraje nezačínají na lince
  jejíž pozice je násobkem 16.
  </p></li><li class="listitem"><p>
  Nakonec zde máme makroblok uvnitř obrázku do nějž se posunuje objekt z okraje
  obrázku. Kódování typu MPEG neumí říct "zkopíruj to co je na obrázku, ale ne
  černý okraj." Takže se zkopíruje i černý okraj a spotřebuje se spousta bitů
  na enkódování té části obrázku, která tu měla být.
  </p><p>
  Pokud se obrázek dostane úplně ven z enkódované oblasti, má MPEG speciální
  optimalizace pro opakované kopírování pixelů na okraj obrázku pokud přijde
  vektor pohybu zvenčí enkódované oblasti. Tato vlastnost bude k ničemu, pokud
  má film černé okraje. Na rozdíl od problémů 1 a 2 zde umístění okrajů na
  násobky 16 nepomůže.
  </p></li><li class="listitem"><p>
  Navzdory tomu, že okraje jsou úplně černé a nikdy se nemění, je zde vždy
  alespoň minimální datový tok spotřebovaný na větší množství makrobloků.
</p></li></ol></div><p>
Ze všech těchto důvodů doporučujeme zcela odstranit černé okraje. Dále, pokud
je na okraji obrázku oblast se šumem/zkreslením, jejím odstřižením se ještě
zvýší efektivita enkódování. Videofilní puristé, kteří chtějí zůstat tak
blízko originálu, jak je to jen možné, mohou protestovat proti tomuto ořezání,
ale pokud nehodláte enkódovat s konstantním kvantizerem, kvalita kterou
dostanete díky ořezání znatelně převýší množství ztracených informací na
okrajích.
</p></div><div class="sect2" title="10.1.4. Ořezávání a škálování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-crop"></a>10.1.4. Ořezávání a škálování</h3></div></div></div><p>
Připomeňme z předchozí části, že konečná velikost obrázku by měla mít
jak šířku, tak výšku beze zbytku dělitelnou 16, čehož můžete dosáhnout
pomocí ořezání, škálování, nebo kombinací obou.
</p><p>
Při ořezávání byste se měli držet několika zásad, abyste předešli poškození
svého filmu.
Normální YUV formát 4:2:0, ukládá barvonosnou (chroma) informaci
podvzorkovanou, čili hustota vzorkování barvy je poloviční oproti jasové
(černobílé) složce v obou směrech.
Prohlédněte si tento diagram, kde L označuje vzorkovací body jasu a C
barvy.
</p><div class="informaltable"><table border="1" width="40%"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr></tbody></table></div><p>
Jak vidíte, řádky i sloupce obrázku se přirozeně párují. Při ořezávání tedy
<span class="emphasis"><em>musí</em></span> být hodnoty odsazení i rozměrů sudá čísla.
Pokud nejsou, nebude se barvonosná informace zprávně krýt s jasovou.
Teoreticky lze stříhat s lichým odsazením, ale to vyžaduje převzorkování
barvy, což je potenciálně ztrátový úkon a není podporován filtrem crop.
</p><p>
Dále, prokládané video je vzorkováno takto:
</p><div class="informaltable"><table border="1" width="80%"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td colspan="8" align="center">Horní půlsnímek</td><td colspan="8" align="center">Spodní půlsnímek</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr><tr><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td><td colspan="2" align="center">C</td></tr><tr><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td><td align="center">L</td></tr></tbody></table></div><p>
Jak vidíte, tak se vzor opakuje každé 4 řádky, takže při ořezu
prokládaného videa musí být odsazení v ose y a výška beze
zbytku delitelné 4.
</p><p>
Nativní DVD rozlišení je 720x480 pro NTSC a 720x576 pro PAL, ale je zde ještě
příznak poměru stran, který udává, zda se jedná o obrazovku (full-screen)(4:3),
nebo širokoúhlý film (wide-screen)(16:9). Mnoho (jestli ne většina)
širokoúhlých DVD není přesně 16:9, ale bude buď 1.85:1 anebo 2.35:1
(cinescope). To znamená, že zde budou ve videu černé okraje, které bude nutné
odstřihnout.
</p><p>
<span class="application">MPlayer</span> poskytuje filtr pro detekci potřebného
ořezu, který stanoví ořezový obdélník (<tt class="option">-vf cropdetect</tt>).
Spusťte <span class="application">MPlayer</span> s volbou
<tt class="option">-vf cropdetect</tt> a on vám vypíše nastavení filtru crop pro
ořezání okrajů.
Měli byste nechat běžet film tak dlouho, dokud není použita celá plocha
obrázku, abyste dostali správné hodnoty crop.
</p><p>
Pak otestujte získané hodnoty z příkazového řádku
<span class="application">MPlayer</span>u vypisované <tt class="option">cropdetect</tt>em
a upravte obdélník podle potřeby.
V tom vám pomůže filtr <tt class="option">rectangle</tt>, který umožňuje interaktivně
nastavit obdélník pro váš film.
Nezapomeňte zachovat výše uvedená doporučení, abyste nepoškodili barevnou
mapu.
</p><p>
Škálování je obvykle nevhodné.
Škálování prokládaného videa je obtížné a pokud chcete zachovat prokládání,
měli byste se mu úplně vyhnout.
Pokud mebudete škálovat, ale budete chtít používat rozměry v násobcích 16,
budete muset oříznout i část obrazu.
Neponechávejte ani malé černé okraje, jelikož se velmi špatně kódují!
</p><p>
Protože MPEG-4 používá makrobloky 16x16, měli byste se ujistit, že oba rozměry
videa jsou násobkem 16, jinak snížíte kvalitu, zvlášť při nízkých datových
tocích. Můžete to zajistit zaokrouhlením šířky a výšky ořezového obdélníku
dolů na nejbližší násobek 16.
Jak jsme již řekli, měli byste při ořezávání zvýšit odsazení
(offset) v ose y o polovinu rozdílu mezi starou a novou výškou, takže bude
výsledné video bráno ze středu snímku. Z důvodu principu vzorkování DVD videa
se ujistěte, že je odsazení sudé číslo. (Popravdě, přijměte jako pravidlo,
nikdy nepoužívat liché hodnoty pro jakýkoli z parametrů při ořezávání a
škálování videa.) Pokud nechcete zahodit těch několik pixelů navíc, můžete
místo toho raději změnit velikost videa (škálovat). Na to se podíváme
v příkladu níže.
V praxi můžete nechat filtr <tt class="option">cropdetect</tt> udělat všechnu práci
zmíněnou výše, jelikož má volitelný parametr <tt class="option">round</tt>
(zaokrouhlení), jehož výchozí hodnota je 16.
</p><p>
Rovněž buďte opatrní na "napůl černé" pixely na okrajích. Vždy je rovněž
odstřihněte, jinak zde budete plýtvat bity, které můžete použít jinde.
</p><p>
Poté co provedete vše, co jsme si doposud řekli, budete mít video, které asi
nebude právě 1.85:1 nebo 2.35:1, ale někde poblíž. Můžete spočítat nový poměr
stran ručně, ale <span class="application">MEncoder</span> nabízí volbu pro
<code class="systemitem">libavcodec</code> nazývanou <tt class="option">autoaspect</tt>,
která to za vás udělá. Nezvětšujte video jen proto, abyste dosáhli čtvercových
pixelů, pokud je vám milé místo na disku. Škálování by mělo být provedeno při
přehrávání, kdy přehrávač použije poměr stran uložený v AVI pro zajištění
správného rozlišení.
Naneštěstí ne všechny přehrávače uplatňují tuto autoškálovací informaci,
takže můžete přece jen chtít škálovat.
</p></div><div class="sect2" title="10.1.5. Volba rozlišení a datového toku"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-resolution-bitrate"></a>10.1.5. Volba rozlišení a datového toku</h3></div></div></div><p>
Pokud nebudete enkódovat v režimu konstantního kvantizeru, musíte zvolit
velikost datového toku.
Koncepce datového toku je velmi jednoduchá.
Je to (průměrný) počet bitů spotřebovaný na jednu sekundu filmu.
Normálně se datový tok udává v kilobitech (1000 bitů) za sekundu.
Velikost vašeho filmu je pak datový tok násobený délkou filmu, plus malá
režie (viz například sekci
<a class="link" href="#menc-feat-dvd-mpeg4-muxing-avi-limitations" title="10.1.12.2. Limitace nosného formátu AVI">kontejner AVI</a>).
Ostatní parametry jako je škálování, ořezání atd.
<span class="bold"><strong>nezmění</strong></span> velikost souboru, pokud zároveň
nezměníte datový tok!
</p><p>
Datový tok se <span class="bold"><strong>nemění</strong></span> proporcionálně
k rozlišení.
Jinými slovy, soubor 320x240 při 200 kbit/sek nebude mít stejnou kvalitu
jako ten samý film při 640x480 a 800 kbitech/sek!
Jsou pro to dva důvody:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="bold"><strong>Dojem</strong></span>: MPEG artefakty jsou patrné
  tím více, čím jsou více zvětšené!
  Artefakty se objevují ve velikosti bloků (8x8).
  Vaše oko neodhalí chyby ve 4800 malých blocích tak snadno jako ve 1200
  velkých (předpokládáme, že oboje budete škálovat na celou obrazovku).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Teoretický</strong></span>: Když zmenšíte obrázek,
  ale stále použijete stejnou velikost bloků (8x8) pro frekvenční prostorovou
  transformaci, přesunete více dat do oblasti vyšších frekvencí.
  Zjednodušeně řečeno, každý pixel nyní obsahuje více detailů, než předtím.
  Dokonce i když připustíme, že jste zmenšili obraz obsahující 1/4 informací
  o daném prostoru, stále může obsahovat mnoho detailů v daném frekvenčním
  pásmu (předpokládáme, že vysoké frekvence byly v originálním 640x480 snímku
  ořezány).
</p></li></ol></div><p>
</p><p>
Dřívější návody doporučovaly volit datový tok a rozlišení rozpočítáním
bitů na pixely, ale to obvykle není správně ze zmíněných důvodů.
Mnohem lepším se zdá odhad, že je datový tok úměrný čtverci rozlišení,
takže 320x240 při 400 kbit/sek by mělo být srovnatelné s 640x480
při 800 kbit/sek.
Tato úměra však nebyla ověřena teoreticky ani empiricky.
Navíc, vezmeme-li v úvahu to, že se filmy velmi liší šumem, počtem detailů,
množstvím pohybu atd, je beznadějné vytvořit obecná doporučení pro počet
bitů na délku diagonály (analogie bitů na pixel, avšak používá plochu obrazu).
</p><p>
Tolik k obtížnosti volby datového toku a rozlišení.
</p><div class="sect3" title="10.1.5.1. Výpočet rozlišení"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-resolution-bitrate-compute"></a>10.1.5.1. Výpočet rozlišení</h4></div></div></div><p>
Následující kroky vás provedou výpočty rozlišení výsledného filmu tak,
abyste příliš nesnížili kvalitu videa s přihlédnutím k několika typům
informací o zdrojovém videu.
Nejdřív byste si měli spočítat enkódovaný poměr stran:
<code class="systemitem">PSo = (Šo x (PSa / PRdvd )) / Vo</code>

</p><div class="itemizedlist" title="kde:"><p class="title"><b>kde:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Šo a Vo jsou šířka a výška ořezaného videa,
</p></li><li class="listitem"><p>
  PSa je zobrazovaný poměr stran, jež je obvykle 4/3 nebo 16/9,
</p></li><li class="listitem"><p>
  PRdvd je poměr pixelů v DVD, který je roven 1.25=(720/576) pro DVD
  v PALu a 1.5=(720/480) pro DVD v NTSC,
</p></li></ul></div><p>
</p><p>
Pak si můžete spočítat rozlišení X a Y podle určitého
faktoru kvality komprese (CQ):
<code class="systemitem">RozY = INT(SQRT( 1000*Datový_tok/25/PSo/CQ )/16) * 16</code>
a
<code class="systemitem">RozX = INT( RozY * PSo / 16) * 16</code>
</p><p>
Dobře, ale co je CQ?
CQ odpovídá počtu bitů na pixel a na snímek po zakódování. Jinými slovy, čím
vyšší je CQ, tím nižší je šance uvidět enkódovací artefakty.
Pokud ovšem máte cílový rozměr vašeho filmu (1 nebo 2 CD například), máte jen
omezené množství bitů, které můžete spotřebovat; takže je nutné najít vhodný
kompromis mezi komprimovatelností a kvalitou.
</p><p>
CQ závisí na datovém toku, efektivitě video kodeku a na rozlišení filmu.
Abyste zvýšili CQ, obvykle zmenšíte daný film, takže je datový tok spočítán
ve funkci cílové velikosti a délky filmu, které jsou konstantní.
S MPEG-4 ASP kodeky jako jsou <code class="systemitem">Xvid</code>
a <code class="systemitem">libavcodec</code>, vede CQ pod 0.18
obvykle k velmi čtverečkovanému obrázku, protože není dostatek bitů pro
zakódování informací každého makrobloku. (MPEG4, stejně jako mnoho
jiných kodeků seskupuje pixely do bloků při komprimaci obrázku; pokud není
dostatek bitů, jsou viditelné hranice těchto bloků.)
Proto je rozumné volit CQ v rozmezí 0.20 až 0.22 pro rip na 1 CD a
0.26 až 0.28 pro rip na 2 CD při standardních enkódovacích volbách.
Pokročilejší volby podobné těm zmiňovaným zde pro
<a class="link" href="#menc-feat-mpeg4-lavc-example-settings" title="10.3.4. Příklady nastavení enkódování"><code class="systemitem">libavcodec</code></a>
a
<a class="link" href="#menc-feat-xvid-example-settings" title="10.4.4. Příklady nastavení enkódování"><code class="systemitem">Xvid</code></a>
by měly umožnit dosažení stejné kvality při CQ v rozsahu od
0.18 do 0.20 pro rip na 1 CD a 0.24 až 0.26 pro rip na 2 CD.
S MPEG-4 ASP kodeky jako je <code class="systemitem">x264</code>,
můžete použít CQ v rozmezí 0.14 až 0.16 při standardních enkódovacích volbách
a měli byste být schopni jít až na nízký od 0.10 do 0.12 s pokročilými
<a class="link" href="#menc-feat-x264-example-settings" title="10.5.2. Příklady nastavení enkódování"><code class="systemitem">x264</code> enkódovacími volbami</a>.
</p><p>
Prosíme berte v potaz, že CQ je jen informační pomůcka závisející na
enkódovaném obsahu. CQ okolo 0.18 může být dostatečně dobrý pro Bergmana,
na rozdíl od filmu jako je Matrix, který obsahuje mnoho rychlých scén.
Na druhou stranu je zbytečné zvyšovat CQ výš než 0.30, jelikož budete plýtvat
bity za minimální zisk kvality.
Také berte v potaz, jak jsme již řekli, že videa s nízkým rozlišením
vyžadují vyšší CQ (v porovnání s např. DVD rozlišením), aby vypadala dobře.
</p></div></div><div class="sect2" title="10.1.6. Filtrování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-filtering"></a>10.1.6. Filtrování</h3></div></div></div><p>
Naučit se používat video filtry <span class="application">MEncoder</span>u je
základem pro produkci dobrých videí.
Veškeré úpravy videa jsou prováděny pomocí filtrů  -- ořezání, škálování,
úprava barev, odstranění šumu, zaostření, odstranění prokladu, telecinování,
inverzní telecine a deblokování, abychom jmenovali alespoň některé.
Spolu s vyčerpávajícím počtem podporovaných vstupních formátů je nabídka
dostupných filtrů v <span class="application">MEncoder</span>u jednou z jeho
hlavních výhod oproti podobným aplikacím.
</p><p>
Filtry jsou nahrávány v řadě za použití volby -vf :

</p><pre class="screen">-vf filtr1=volby,filtr2=volby,...</pre><p>

Většina filtrů přebírá několik číselných voleb oddělených dvojtečkou, ale
syntaxe voleb se liší od filtru k filtru, takže si přečtěte  manuál
pro více informací o filtru který chcete použít.
</p><p>
Filtry zpracovávají video v pořadí, v jakém jsou načteny.
Například následující řada:

</p><pre class="screen">-vf crop=688:464:12:4,scale=640:464</pre><p>

nejprve vyřízne z obrázku oblast 688x464 s levým horním rohem v bodě (12,4)
a výsledek pak zmenší na 640x464.
</p><p>
Určité filtry potřebují být nahrány na začátku, nebo co nejblíž začátku
řetězu filtrů, aby mohly využívat informace z video dekodéru, které budou
ztraceny nebo znehodnoceny ostatními filtry.
Nejdůležitější příklady jsou <tt class="option">pp</tt> (postprocesing, pouze pokud
provádí deblok nebo dering operace),
<tt class="option">spp</tt> (další postprocesor pro odstranění MPEG artefaktů),
<tt class="option">pullup</tt> (inverzní telecine) a
<tt class="option">softpulldown</tt> (pro konverzi soft telecine na hard
telecine).
</p><p>
Všeobecně byste měli filtrovat co nejméně je to možné, abyste zůstali co
nejblíže DVD originálu. Ořezání je často nutné (vysvětleno výše), ale vyhněte
se škálování videa. Ačkoli je zmenšení občas preferováno před použitím
vyšších kvantizérů. My se musíme vyvarovat obou těchto případů: pamatujte,
že jsme se již na začátku rozhodli obětovat bity za kvalitu.
</p><p>
Rovněž neupravujte gamu, kontrast, jas, atd. Co vypadá dobře na vaší
obrazovce, nemusí vypadat dobře na ostatních. Tyto korekce by měly být
prováděny výhradně při přehrávání.
</p><p>
Jednu věc byste však udělat mohli, a to protáhnout video velmi lehkým
odšumovacím filtrem, jako je <tt class="option">-vf hqdn3d=2:1:2</tt>.
Zde je opět důvodem využití bitů k lepšímu účelu: proč jimi plýtvat na
enkódování šumu, když si můžete šum přidat až při přehrávání?
Zvýšením parametrů pro <tt class="option">hqdn3d</tt> dále zvýší komprimovatelnost,
ale pokud zvýšíte hodnoty příliš, riskujete zhoršení viditelnosti obrazu.
Výše zmíněné hodnoty (<tt class="option">2:1:2</tt>) jsou dost konzervativní;
měli byste si zaexperimentovat s vyššími hodnotami a zhodnotit výsledky sami.
</p></div><div class="sect2" title="10.1.7. Prokládání a Telecine"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-interlacing"></a>10.1.7. Prokládání a Telecine</h3></div></div></div><p>
Téměř veškeré filmy jsou natáčeny při 24 snímcích/s. Jelikož NTSC má
snímkovou rychlost 30000/1001 snímků/s, je třeba provést úpravu těchto
24 snímků/s videí, aby měly správnou NTSC snímkovou rychlost. Tato úprava se
jmenuje 3:2 pulldown a obecně je známa jako telecine (protože je pulldown
často prováděn během přenosu filmu na video) a, jednoduše řečeno, pracuje tak,
že se film zpomalí na 24000/1001 snímků/s a každý čtvrtý snímek se zopakuje.
</p><p>
Naopak žádné speciální úpravy se neprovádějí videu pro PAL DVD, která běží
při 25 snímcích/s. (Technicky lze na PAL provést telecine, tzv. 2:2 pulldown,
ale v praxi se nepoužívá.) Film s 24 snímky/s je jednoduše přehráván rychlostí
25 snímků/s. Výsledkem je, že video běží o něco rychleji, ale pokud nejste
vetřelec, tak si rozdílu ani nevšimnete. Většina filmů má navíc výškově
korigovaný zvuk, takže při přehrávání 25 snímků/s vše zní jak má i přesto, že
zvuk (a proto i celé video) má o 4% kratší dobu přehrávání než NTSC DVD.
</p><p>
Jelikož video na PAL DVD nebylo upravováno, nemusíte si dělat starosti s jeho
snímkovou rychlostí. Zdroj má 25 snímků/s, váš rip také. Pokud ovšem ripujete
NTSC DVD film, musíte provést inverzní telecine.
</p><p>
Filmy točené rychlostí 24 snímků/s jsou na NTSC DVD uloženy buď jako
30000/1001 po telecine, nebo jako progresivní (neprokládaný) se snímkovou
24000/1001 snímků/s, na kterých by měl provést telecine DVD přehrávač za letu.
Není to ale zákon: některé TV série jsou prokládané (např. Buffy Lovec upírů),
zatímco jiné jsou porůznu neprokládané nebo prokládané (např. Anděl, nebo 24
hodin).
</p><p>
Doporučujeme, abyste si přečetli sekci o tom
<a class="link" href="#menc-feat-telecine" title="10.2. Jak naložit s telecine a prokladem v NTSC DVD">Jak si poradit s telecine a prokladem na NTSC DVD</a>
a naučili se jak využít různé možnosti.
</p><p>
Pokud ovšem většinou ripujete pouze filmy, nejspíš se setkáváte
s neprokládaným nebo prokládaným videem 24 snímků/s. V tom případě můžete
použít <tt class="option">pullup</tt> filtr <tt class="option">-vf pullup,softskip</tt>.
</p></div><div class="sect2" title="10.1.8. Enkódování prokládaného videa"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-encoding-interlaced"></a>10.1.8. Enkódování prokládaného videa</h3></div></div></div><p>
Pokud je film, který chcete enkódovat, prokládaný (NTSC video nebo
PAL video), budete si muset vybrat, zda jej chcete "odproložit" nebo ne.
Zatímco odstranění prokladu učiní váš film použitelným na progresivně
vykreslovaných zobrazovačích jako jsou počítačové monitory a projektory.
Cenou za to je, snížení rychlosti z 50 nebo 60000/1001 půlsnímků za sekundu
na 25 nebo 30000/1001 snímků za sekundu a zhruba polovina informací bude
z vašeho filmu ztracena ve scénách s významným množstvím pohybu.
</p><p>
Proto pokud enkódujete ve vysoké kvalitě pro archivační účely, doporučujeme
ponechat film prokládaný.
Vždy můžete provést odstranění prokladu při přehrávání pokud zobrazujete
na progresivně zobrazujícím zařízení.
Výkon současných počítačů nutí přehrávače používat filtr prokladu, což
působí mírnou degradaci kvality obrazu.
Budoucí přehrávače však budou schopny napodobovat chování prokládané
TV obrazovky, odstraňovat proklad v plné půlsnímkové rychlosti a
odvozovat 50 nebo 60000/1001 úplných snímků za sekundu z prokládaného videa.
</p><p>
Když pracujete s prokládaným videem, musíte zvláště dbát na:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Výška a svislé odsazení pro ořezání musí být násobkem 4.
</p></li><li class="listitem"><p>
  Jakékoli svislé škálování musí být provedeno v prokládaném režimu.
</p></li><li class="listitem"><p>
  Postprocesní a odšumovací filtry nemusí pracovat podle očekávání,
  dokud nezařídíte, aby zpracovávaly najednou pouze jeden půlsnímek a
  mohou vám poškodit video při nesprávném použití.
</p></li></ol></div><p>
S vědomím těchto souvislostí vám předkládáme první příklad:
</p><pre class="screen">
mencoder <em class="replaceable"><code>capture.avi</code></em> -mc 0 -oac lavc -ovc lavc -lavcopts \
    vcodec=mpeg2video:vbitrate=6000:ilme:ildct:acodec=mp2:abitrate=224
</pre><p>
Povšimněte si voleb <tt class="option">ilme</tt> a <tt class="option">ildct</tt>.
</p></div><div class="sect2" title="10.1.9. Poznámky k Audio/Video synchronizaci"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-av-sync"></a>10.1.9. Poznámky k Audio/Video synchronizaci</h3></div></div></div><p>
<span class="application">MEncoder</span>ovy audio/video synchronizační
algoritmy byly navrženy se záměrem obnovy souborů s vadnou synchronizací.
V některých případech však můžou působit zbytečné zahazování a duplikaci snímků
a možná mírnou A/V desynchronizaci při použití s bezvadným vstupem
(přirozeně tyto A/V synchronizační omezení projeví pouze pokud kopírujete
zvukovou stopu při překódovávání videa, což je velmi doporučováno).
Můžete však přepnout do základní A/V synchronizace s volbou
<tt class="option">-mc 0</tt>, nebo ji přidejte do svého konfiguračního souboru
<code class="systemitem">~/.mplayer/mencoder</code> config file, aspoň pokud pracujete
pouze s kvalitními zdroji (DVD, zachytávaná TV, vysoce kvalitní MPEG-4 ripy,
atd) ale nikoli s vadnými ASF/RM/MOV soubory.
</p><p>
Chcete-li si dále pohlídat podivné zahazování snímků a duplikaci, můžete použít
<tt class="option">-mc 0</tt> spolu s <tt class="option">-noskip</tt>.
To zamezí <span class="emphasis"><em>veškeré</em></span> A/V synchronizaci a snímky se skopírují
jedna k jedné, takže to nelze použít ve spojení s filtry, které v nestřženém
okamžiku přidají nebo zahodí snímky, nebo pokud zdrojové video má proměnnou
snímkovou rychlost!
V tom případě není použití <tt class="option">-noskip</tt> obecně doporučováno.
</p><p>
O takzvaném "tříprůchodovém" enkódování zvuku podporovaném
<span class="application">MEncoder</span>em bylo hlášeno, že způsobuje A/V
desynchronizaci.
To nastává tehdy, pokud je použito v kombinaci s některými filtry, takže
<span class="emphasis"><em>není</em></span> v tuto chvíli doporučováno používat tříprůchodové
enkódování zvuku.
Tato vlastnost je zachována pouze z důvodu kompatibility a pro expertní
uživatele, kteří vědí, kdy je bezpečné ji použít a kdy ne.
Pokud jste o tomto režimu nikdy předtím neslyšeli, zapoměňte, že jsme se
o něm vůbec zmínili!
</p><p>
Existují rovněž hlášení o A/V desynchronizaci při enkódování ze stdin
<span class="application">MEncoder</span>em.
Nedělejte to! Vždy použijte jako zdroj soubor nebo CD/DVD/atd zařízení.
</p></div><div class="sect2" title="10.1.10. Výběr video kodeku"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-codec"></a>10.1.10. Výběr video kodeku</h3></div></div></div><p>
Výběr vhodného video kodeku k použití závisí na několika faktorech,
jako je velikost, kvalita, schopnost přehrávání po síti, použitelnost nebo
obliba, z nichž některé jsou čistě věcí osobního vkusu, jiné závisí
na technických omezeních.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Účinost komprimace</strong></span>:
  Jednoduše můžeme říct, že většina kodeků novější generace je vytvořena
  tak, aby dosahovala vyšší kvality a komrimace než předchozí generace.
  Proto se autoři této příručky a mnoho jiných lidí, domnívají že
  neuděláte chybu,
  <sup>[<a name="fn-menc-feat-dvd-mpeg4-codec-cpu" href="#ftn.fn-menc-feat-dvd-mpeg4-codec-cpu" class="footnote">1</a>]</sup>
  když zvolíte MPEG-4 AVC kodeky, jako
  <code class="systemitem">x264</code> místo MPEG-4 ASP kodeků
  jako jsou <code class="systemitem">libavcodec</code> MPEG-4, nebo
  <code class="systemitem">Xvid</code>.
  (Pokročilé vývojáře kodeků by mohl zajímat názor Michaela Niedermayera na
  "<a class="ulink" href="http://guru.multimedia.cx/?p=10" target="_top">proč mě štve MPEG4-ASP</a>".)
  Podobně byste měli dosáhnout lepší kvality použitím MPEG-4 ASP místo
  MPEG-2 kodeků.
  </p><p>
  Novější kodeky, které jsou v rozsáhlém vývoji, mohou obsahovat chyby,
  kterých si dosud nikdo nevšiml a které mohou zničit výsledek.
  To je daň za použití nejnovější technologie.
  </p><p>
  Navíc, v začátku používání nového kodeku se budete muset strávit nějaký
  čas seznámením se s jeho volbami, abyste se dověděli co kde nastavit pro
  dosažení požadované kvality obrazu.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Hardwarová kompatibilita</strong></span>:
  Obvykle trvá dlouhou dobu, než začnou stolní video přehrávače podporovat
  nejnovější videokodeky. Výsledkem toho je, že většina z nich podporuje
  pouze kodeky MPEG-1 (jako VCD, XVCD a KVCD), MPEG-2 (jako DVD, SVCD a KVCD)
  a MPEG-4 ASP (jako DivX,
  LMP4 z <code class="systemitem">libavcodec</code>u a
  <code class="systemitem">Xvid</code>)
  (Pozor: obvykle nejsou podporovány všechny vlastnosti (features) MPEG-4 ASP).
  Nahlédněte prosím do technických specifikací vašeho přehrávače (pokud jsou),
  nebo si vygooglete více informací.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Nejlepší kvalita na enkódovací čas</strong></span>:
  Kodeky, které již jsou zde nějakou dobu (jako
  <code class="systemitem">libavcodec</code> MPEG-4 a
  <code class="systemitem">Xvid</code>), jsou obvykle vysoce
  optimalizovány všemi druhy chytrých algoritmů a SIMD assembly kódem.
  Proto mají snahu dosahovat nejlepší poměr kvality na enkódovací čas.
  Mohou však mít některé velmi pokročilé volby, které, pokud jsou zapnuty,
  velmi spomalí enkódování při mizivém zisku.
  </p><p>
  Pokud vám jde o rychlost, měli byste se držet výchozího nastavení
  video kodeku (ačkoli byste stejně měli zkusit ostatní volby
  zmíněné v dalších částech této příručky).
  </p><p>
  Rovněž můžete zvážit použití kodeku, který umí vícevláknové zpracování,
  což je ovšem k něčemu jen uživatelům víceprocesorových strojů.
  <code class="systemitem">libavcodec</code> MPEG-4 to umožňuje,
  ale nárůst rychlosti je omezený a dostanete nepatrně méně kvalitní obraz.
  Vícevláknový režim <code class="systemitem">Xvid</code>, aktivovaný
  volbou <tt class="option">threads</tt>, můžete využít ke zvýšení rychlosti
  enkódování — obvykle o 40–60% — s velmi malým nebo žádným
  zhoršením obrazu.
  <code class="systemitem">x264</code> rovněž umožňuje vícevláknové
  enkódování, které v současnosti zrychluje enkódování asi o 94% na každé procesorové
  jádro, ale snížuje PSNR o 0.05dB.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Osobní vkus</strong></span>:
  Zde jsme v rovině téměř iracionální: Ze stejného důvodu, pro který někteří
  setrvávali léta u DivX 3 i když novější kodeky již dělaly zázraky,
  preferují někteří lidé <code class="systemitem">Xvid</code>
  nebo <code class="systemitem">libavcodec</code> MPEG-4 před
  <code class="systemitem">x264</code>.
  </p><p>
  Udělejte si vlastní úsudek a neposlouchejte lidi, kteří přísahají na jediný
  kodek.
  Udělejte si několik vzorků ze surových zdrojů a porovnejte různé volby
  enkódování a kodeky, abyste nalezli ten, který vám vyhovuje nejlépe.
  Nejlepší kodek je ten, který nejlépe
  ovládáte a který vypadá nejlépe na vaší obrazovce
  <sup>[<a name="fn-menc-feat-dvd-mpeg4-codec-playback" href="#ftn.fn-menc-feat-dvd-mpeg4-codec-playback" class="footnote">2</a>]</sup>!
  </p></li></ul></div><p>
Seznam podporovaných kodeků najdete v sekci
<a class="link" href="#menc-feat-selecting-codec" title="9.1. Výběr kodeků a nosných formátů">výběr kodeků a nosných formátů</a>.
</p></div><div class="sect2" title="10.1.11. Zvuk"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-audio"></a>10.1.11. Zvuk</h3></div></div></div><p>
Zvuk je mnohem jednodušší problém k řešení: pokud prahnete po kvalitě, prostě
jej nechte jak je.
Dokonce i AC–3 5.1 datové proudy mají nanejvýš 448Kbitů/s a stojí za každý bit.
Možná jste v pokušení převést zvuk do Ogg Vorbis při vysoké kvalitě, ale jen
proto, že dnes nemáte A/V receiver pro hardwarové dekódování AC–3 neznamená,
že jej nebudete mít zítra. Připravte své DVD ripy na budoucnost zachováním
AC–3 datových proudů.
Datový proud AC–3 můžete zachovat buď jeho zkopírováním přímo do video proudu
<a class="link" href="#menc-feat-mpeg4" title='9.3. Dvouprůchodové enkódování MPEG-4 ("DivX")'>během enkódování</a>.
Také můžete extrahovat AC–3 proud, abyste jej pak namixovali do nosičů jako je
NUT nebo Matroska.
</p><pre class="screen">
mplayer <em class="replaceable"><code>zdrojový_soubor.vob</code></em> -aid 129 -dumpaudio -dumpfile <em class="replaceable"><code>zvuk.ac3</code></em>
</pre><p>
vytáhne do souboru <em class="replaceable"><code>zvuk.ac3</code></em> zvukovou stopu
číslo 129 ze souboru <em class="replaceable"><code>zdrojový_soubor.vob</code></em> (NB: DVD
VOB soubory obvykle používají odlišné číslování audia,
což znamená, že VOB zvuková stopa 129 je druhou zvukovou stopou v souboru).
</p><p>
Někdy ovšem opravdu nemáte jinou možnost než dále komprimovat zvuk, aby vám
zbylo více bitů na video.
Většina lidí volí komprimaci buď pomocí MP3 nebo Vorbis audio kodeků.
Zatímco ten druhý je efektivnější z prostorového hlediska, MP3 je lépe
podporován hardwarovými přehrávači, ačkoli časy se mění.
</p><p>
<span class="emphasis"><em>Nepoužívejte</em></span> <tt class="option">-nosound</tt>, enkódujete-li
soubor se zvukem, dokonce i v tom případě, že budete enkódovat a muxovat
zvuk samostatně později.
Ačkoli to může v ideálním případě fungovat, použití <tt class="option">-nosound</tt>
spíše skryje určité problémy v nastaveních enkódování na příkazovém řádku.
Jinými slovy vám přítomnost zvukové stopy zajistí, pokud neuvidíte
hlášky typu
<span class="quote">„<span class="quote">Příliš mnoho audio paketů ve vyrovnávací paměti</span>“</span>, že budete
schopni dosáhnout správné synchronizace.
</p><p>
Musíte nechat <span class="application">MEncoder</span> zpracovat zvuk.
Můžete například skopírovat originální zvukovou stopu během enkódování
pomocí <tt class="option">-oac copy</tt>, nebo jej převést na "tenký" 4 kHz mono WAV
PCM pomocí <tt class="option">-oac pcm -channels 1 -srate 4000</tt>.
Jinak v některých případech vytvoříte video soubor, který nebude synchronní
se zvukem.
Tyto případy nastávají tehdy, když počet videosnímků ve zdroji neodpovídá
celkové délce zvukových vzorků, nebo pokud je zvuk přerušovaný či překrývaný
díky chybějícím či nadbývajícím audio vzorkům.
Správným způsobem jak toto řešit, je vložení ticha nebo odstřižení zvuku na
těchto místech.
<span class="application">MPlayer</span> to však neumí, takže pokud demuxujete
AC–3 zvuk a enkódujete jej zvláštní aplikací (nebo jej dumpnete do PCM
<span class="application">MPlayer</span>em), zůstanou zmíněné vady jak jsou a
jediný způsob jak je opravit je zahodit/namnožit video snímky v těchto
místech.
Dokud <span class="application">MEncoder</span> sleduje zvuk při enkódování
videa, může provádět toto zahazování/duplikování (což je obvykle OK,
jelikož nastává při černé obrazovce/změně scény), ale pokud
<span class="application">MEncoder</span> nevidí zvuk, zpracuje snímky jak jsou
a ty pak nepasují na konečnou zvukovou stopu když například spojíte svou
video a zvukovou stopu do Matroska souboru.
</p><p>
Nejdříve ze všeho budete muset převést DVD zvuk do WAV souboru, který pak
použije zvukový kodek jako vstup.
Například:
</p><pre class="screen">
mplayer <em class="replaceable"><code>zdrojový_soubor.vob</code></em> -ao pcm:file=<em class="replaceable"><code>výsledný_zvuk.wav</code></em> \
    -vc dummy -aid 1 -vo null
</pre><p>
vylije druhou zvukovou stopu ze souboru
<em class="replaceable"><code>zdrojový_soubor.vob</code></em> do souboru
<em class="replaceable"><code>výsledný_zvuk.wav</code></em>.
Měli byste normalizovat zvuk před enkódováním, protože DVD zvukové stopy jsou
obvykle nahrávány při nízkých hlasitostech.
Můžete například použít nástroj <span class="application">normalize</span>, který je
k dispozici ve většině distribucí.
Pokud používáte Windows, stejnou práci udělá nástroj jako
<span class="application">BeSweet</span>.
Komprimovat budete buď ve Vorbisu nebo MP3.
Například:
</p><pre class="screen">oggenc -q1 <em class="replaceable"><code>cílový_zvuk.wav</code></em></pre><p>
provede enkódování <em class="replaceable"><code>cílového_zvuku.wav</code></em> s kvalitou 1,
která přibližně odpovídá 80Kb/s a je to minimální kvalita na kterou byste měli
enkódovat, pokud vám záleží na kvalitě.
Poznamenejme, že <span class="application">MEncoder</span> v současnosti neumí
muxovat Vorbis zvukové stopy do výstupního souboru, protože podporuje pouze
AVI a MPEG kontejnery jako výstup. Pro oba platí, že některé přehrávače mohou
mít problémy s udržením audio/video synchronizace, pokud je přítomen VBR zvuk
jako je Vorbis.
Nemějte obavy, v tomto dokumentu vám ukážeme, jak to lze udělat pomocí
programů třetích stran.
</p></div><div class="sect2" title="10.1.12. Muxování (multiplexování)"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-muxing"></a>10.1.12. Muxování (multiplexování)</h3></div></div></div><p>
Nyní, když máte své video enkódované, budete jej nejspíš chtít muxovat
s jednou nebo více zvukovými stopami do nosného filmového formátu, jako je
AVI, MPEG, Matroska nebo NUT.
<span class="application">MEncoder</span> je zatím schopen nativně zapracovat
zvuk a video pouze do nosných formátů MPEG a AVI.
Například:
</p><pre class="screen">
mencoder -oac copy -ovc copy  -o <em class="replaceable"><code>výstupní_film.avi</code></em> \
    -audiofile <em class="replaceable"><code>vstupní_audio.mp2</code></em> <em class="replaceable"><code>vstupní_video.avi</code></em>
</pre><p>
To by mělo sloučit video soubor <em class="replaceable"><code>vstupní_video.avi</code></em>
a zvukový soubor <em class="replaceable"><code>vstupní_audio.mp2</code></em>
do AVI souboru <em class="replaceable"><code>výstupní_film.avi</code></em>.
Tento příkaz pracuje s MPEG-1 layer I, II a III (známým jako MP3) zvukem,
WAV a také několika dalšími formáty zvuku.
</p><p>
<span class="application">MEncoder</span> obsahuje experimentální podporu pro
<code class="systemitem">libavformat</code>, což je knihovna
z projektu FFmpeg, která podporuje muxování a demuxování celé řady nosných
formátů.
Například:
</p><pre class="screen">
mencoder -oac copy -ovc copy  -o <em class="replaceable"><code>výstupní_film.asf</code></em> -audiofile <em class="replaceable"><code>vstupní_audio.mp2</code></em> \
    <em class="replaceable"><code>vstupní_video.avi</code></em> -of lavf -lavfopts format=asf
</pre><p>
To provede stejnou činnost jako předchozí příklad, avšak výstupním formátem
bude ASF.
Prosím berte na vědomí, že tato podpora je velmi experimentální (ale den ode
dne lepší) a bude funkční pouze pokud jste zkompilovali
<span class="application">MPlayer</span> s podporou pro
<code class="systemitem">libavformat</code> (což znamená, že
předkompilovaná binární verze nebude většinou fungovat).
</p><div class="sect3" title="10.1.12.1. Zlepšování spolehlivosti muxování a A/V synchronizace"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-filter-issues"></a>10.1.12.1. Zlepšování spolehlivosti muxování a A/V synchronizace</h4></div></div></div><p>
Můžete se dostat do vážných problémů s A/V sychronizací, pokud se snažíte
muxovat video a některé zvukové stopy, kdy bez ohledu na nastavení zpoždění
zvuku nedosáhnete správné synchronizace.
To může nastat, pokud použijete některé video filtry, které zahodí nebo
zdvojí některé snímky, jako jsou filtry pro inverzi telecine.
Velmi doporučujeme přidat videofiltr <tt class="option">harddup</tt> na samý konec
řetězu videofiltrů pro potlačení tohoto problému.
</p><p>
Bez <tt class="option">harddup</tt>, pokud chce <span class="application">MEncoder</span>
duplikovat snímek, závisí na muxeru, aby vložil značku do nosiče, takže
bude poslední snímek zobrazen znovu, aby se dosáhlo synchronizace, přičemž
se nezapíše žádný snímek.
S <tt class="option">harddup</tt>, <span class="application">MEncoder</span>
pustí poslední zobrazený snímek znovu do řetězu filtrů.
To znamená, že enkodér obdrží stejný snímek dvakrát a comprimuje ho.
To povede k o něco většímu souboru, ale nezpůsobí problémy při demuxování
nebo remuxování do jiného nosného formátu.
</p><p>
Rovněž nemáte jinou možnost než použít <tt class="option">harddup</tt> s těmi
nosnými formáty, které nejsou těsně spjaty s
<span class="application">MEncoder</span>em, jako jsou ty, které jsou podporovány
přes <code class="systemitem">libavformat</code>, které nemusí
podporovat duplikaci na úrovni nosného formátu.
</p></div><div class="sect3" title="10.1.12.2. Limitace nosného formátu AVI"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-avi-limitations"></a>10.1.12.2. Limitace nosného formátu AVI</h4></div></div></div><p>
Ačkoli je to po MPEG-1 nejpodporovanější nosný formát, má AVI i jisté
zásadní nedostatky. Snad nejviditelnější je režie.
Na každý chunk AVI souboru je 24 bajtů ztraceno na hlavičky a index.
To se projeví asi 5 MB na hodinu, neboli 1-2.5% prodloužení 700 MB filmu.
Nevypadá to jako mnoho, ale může to znamenat rozdíl mezi možností použít
video při 700 kbitech/s nebo 714 kbitech/s a tady se každý bit projeví na
kvalitě.
</p><p>
Navíc k této neefektivitě má AVI také následující hlavní omezení:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Může být uchováván pouze obsah s konstantní snímkovou rychlostí. To je
  zvláště omezující, když má původní materiál, který chcete enkódovat, smíšený
  obsah. Například směs NTSC videa a filmového materiálu.
  Jistěže jsou zde cestičky, které umožní uložit obsah se smíšenou snímkovou
  rychlostí v AVI, ale ty zvyšují (již tak velkou) režii pětinásobně nebo víc,
  proto nejsou praktické.
</p></li><li class="listitem"><p>
  Zvuk v AVI musí mít buď konstantní datový tok (CBR) nebo konstantní velikost
  rámce (čili všechny rámce se dekódují na stejný počet vzorků).
  Naneštěstí ten nejefektivnější kodek, Vorbis, nesplňuje ani jeden z těchto
  požadavků.
  Pokud tedy plánujete uložit svůj film do AVI, budete muset použít méně
  efektivní kodek, jako MP3 nebo AC–3.
</p></li></ol></div><p>
Z výše uvedených důvodů <span class="application">MEncoder</span> zatím
nepodporuje proměnnou snímkovou rychlost ani enkódování Vorbis.
Nemusíte to však považovat za omezení, jestliže je
<span class="application">MEncoder</span> jediným nástrojem pro vaše
enkódování. Nakonec je možné použít <span class="application">MEncoder</span>
pouze pro enkódování videa a pak použít externí nástroje pro enkódování
zvuku a namuxování do jiného nosného formátu.
</p></div><div class="sect3" title="10.1.12.3. Muxování do nosného formátu Matroska"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-dvd-mpeg4-muxing-matroska"></a>10.1.12.3. Muxování do nosného formátu Matroska</h4></div></div></div><p>
Matroska je svobodný a otevřený standard nosného formátu, zaměřený na
nabídku mnoha pokročilých vlastností, které starší nosné formáty, jako AVI,
nemohou poskytnout.
Například Matroska podporuje zvuk s proměnným datovým tokem (VBR),
proměnné snímkové rychlosti (VFR), kapitoly, přílohy souborů, kód pro
detekci chyb (EDC) a moderní A/V kodeky jako "Advanced Audio
Coding" (AAC), "Vorbis" nebo "MPEG-4 AVC" (H.264), z nichž žádný nelze
použít v AVI.
</p><p>
Nástroje pro vytváření Matroska souborů jsou souhrnně nazvány
<span class="application">mkvtoolnix</span> a jsou dostupné pro většinu Unixových
platforem a stejně tak <span class="application">Windows</span>.
Protože je Matroska otevřený standard, můžete najít jiné nástroje, které vám
lépe padnou, ale protože mkvtoolnix je nejrozšířenější a je podporován
přímo Matroska týmem, pokryjeme jen jejich použití.
</p><p>
Asi nejsnazší způsob, jak začít s Matroskou je použít
<span class="application">MMG</span>, grafickou nadstavbu dodávanou s
<span class="application">mkvtoolnix</span> a řídit se
<a class="ulink" href="http://www.bunkus.org/videotools/mkvtoolnix/doc/mkvmerge-gui.html" target="_top">návodem k mkvmerge GUI (mmg)</a>
</p><p>
Můžete rovněž muxovat zvukové a video soubory z příkazového řádku:
</p><pre class="screen">
mkvmerge -o <em class="replaceable"><code>výstup.mkv</code></em> <em class="replaceable"><code>vstupní_video.avi</code></em> <em class="replaceable"><code>vstupní_audio1.mp3</code></em> <em class="replaceable"><code>vstupní_audio2.ac3</code></em>
</pre><p>
To spojí video soubor <em class="replaceable"><code>vstupní_video.avi</code></em>
a dva zvukové soubory <em class="replaceable"><code>vstupní_audio1.mp3</code></em>
a <em class="replaceable"><code>vstupní_audio2.ac3</code></em> do Matroska souboru
<em class="replaceable"><code>výstup.mkv</code></em>.
Matroska, jak jsme již řekli, umí mnohem víc než to, jako více zvukových stop
(včetně doladění audio/video synchronizace), kapitoly, titulky, stříhání,
atd...
Detaily naleznete v dokumentaci k těmto aplikacím.
</p></div></div></div><div class="sect1" title="10.2. Jak naložit s telecine a prokladem v NTSC DVD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-telecine"></a>10.2. Jak naložit s telecine a prokladem v NTSC DVD</h2></div></div></div><div class="sect2" title="10.2.1. Představení"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-intro"></a>10.2.1. Představení</h3></div></div></div><p title="Co je to telecine?"><b>Co je to telecine? </b>
Pokud moc nerozumíte tomu, co je napsáno v tomto dokumentu,
přečtěte si
<a class="ulink" href="http://en.wikipedia.org/wiki/Telecine" target="_top">článek na Wikipedii</a>.
Je to srozumitelný a rozumně vyčerpávající popis co je to
telecine.
</p><p title="Poznámka k číslům."><b>Poznámka k číslům. </b>
Mnoho dokumentů, včetně výše odkazované příručky, udává hodnotu půlsnímků za
sekundu NTSC videa jako 59.94 a odpovídající snímky za sekundu jako 29.97
(pro telecinované a prokládané video) a 23.976 (pro neprokládané).
Pro jednoduchost některé dokumenty zaokrouhlují tyto hodnoty na 60, 30 a 24.
</p><p>
Přesně řečeno jsou všechna tato čísla přibližná. Černobílé NTSC video mělo
přesně 60 půlsnímků za sekundu, ale později byla zvolena hodnota 60000/1001,
aby bylo možné přidat barevná data a zůstat kompatibilní se starými
černobílými televizemi. Digitální NTSC (např. na DVD) má rovněž rychlost
60000/1001 půlsnímků za sekundu. Z toho vyplývá, že prokládané a telecinované
video má 30000/1001 snímků za sekundu; neprokládané video má 24000/1001 snímků
za sekundu.
</p><p>
Starší verze dokumentace <span class="application">MEncoder</span>u a mnoho zpráv
v archivu konference hovoří o 59.94, 29.97 a 23.976.
Všechna dokumentace <span class="application">MEncoder</span>u byla aktualizována
a používá zlomkových hodnot. Vy byste je měli používat také.
</p><p>
<tt class="option">-ofps 23.976</tt> je nesprávně.
Místo toho byste měli použít <tt class="option">-ofps 24000/1001</tt>.
</p><p title="Jak je používáno telecine."><b>Jak je používáno telecine. </b>
Veškeré video určené k zobrazení na NTSC televizi musí mít 60000/1001
půlsnímků za sekundu. Filmy vyráběné pro televizi jsou často natáčeny přímo
ve 60000/1001 půlsnímcích za sekundu, ale většina filmů do kin je natáčena při
24 nebo 24000/1001 snímcích za sekundu. Když je film přepisován na DVD, je
video upraveno pro televizi v procesu zvaném telecine.
</p><p>
Na DVD není video ve skutečnosti nikdy uloženo v 60000/1001 půlsnímcích za
sekundu. Video jež bylo původně 60000/1001, bude mít každý pár půlsnímků
zkombinován do podoby snímku s rychlostí 30000/1001 snímků za sekundu.
Hardwarové DVD přehrávače pak čtou příznak, zabudovaný ve video proudu, který
udává jestli první půlsnímek tvoří liché nebo sudé řádky.
</p><p>
Obsah ve 24000/1001 snímcích za sekundu obvykle zůstává tak jak byl v době
přepisu na DVD a DVD přehrávač musí provést telecine za letu. Někdy je však
video telecinováno <span class="emphasis"><em>před</em></span> uložením na DVD; dokonce i když
mělo původně 24000/1001 snímků za sekundu, bude mít 60000/1001 půlsnímků za
sekundu. Pokud je uložen na DVD, páry půlsnímků jsou zkombinovány do formy
30000/1001 snímků za sekundu.
</p><p>
Když se podíváme na jednotlivé snímky vzniklé z videa o 60000/1001 půlsnímcích
za sekundu, telecinovaného nebo ne, je zřetelně vidět toto prokládání jakmile
je zde nějaký pohyb, jelikož jeden půlsnímek (řekněme liché řádky)
reprezentuje časový okamžik o 1/(60000/1001) sekundy pozdější než ten druhý.
Přehrávání prokládaného videa na počítači vypadá škaredě jak proto, že monitor
má vyšší rozlišení, ale i proto, že video je zobrazováno snímek po snímku místo
půlsnímek po půlsnímku.
</p><div class="itemizedlist" title="Poznámky:"><p class="title"><b>Poznámky:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Tento odstavec platí pouze pro NTSC DVD, nikoli PAL.
</p></li><li class="listitem"><p>
  Řádky s příklady spuštění <span class="application">MEncoder</span>u v dokumentu
  <span class="bold"><strong>nejsou</strong></span> určeny pro opravdové použití.
  Obsahují pouze nutné minimum vyžadované pro enkódování příslušné ke kategorii
  videa. Jak dělat dobré DVD ripy nebo doladit
  <code class="systemitem">libavcodec</code> pro maximální kvalitu
  není v záběru tohoto dokumentu.
</p></li><li class="listitem"><p>
  Poznámky pod čarou příslušné pro tuto příručku jsou linkovány takto:
  <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Poznámky pod čarou">[1]</a>
</p></li></ul></div></div><div class="sect2" title="10.2.2. Jak zjistit o jaký typ videa se jedná"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-ident"></a>10.2.2. Jak zjistit o jaký typ videa se jedná</h3></div></div></div><div class="sect3" title="10.2.2.1. Progresivní (neprokládané)"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-progressive"></a>10.2.2.1. Progresivní (neprokládané)</h4></div></div></div><p>
Progresivní video je původně natočeno při 24000/1001 snímcích za sekundu a
uloženo na DVD beze změn.
</p><p>
Když přehrajete progresivní DVD v <span class="application">MPlayer</span>u,
<span class="application">MPlayer</span> vypíše následující řádek jakmile začne
přehrávat:
</p><pre class="screen">
demux_mpg: 24000/1001 fps progressive NTSC content detected, switching framerate.
</pre><p>
Od tohoto okamžiku by demux_mpg neměl nikdy říct že našel
"30000/1001 fps NTSC obsah"
</p><p>
Když sledujete progresivní video, neměli byste nikdy vidět žádný proklad.
Dejte si ale pozor, jelikož je občas trošku telecine namixováno tam, kde byste
to vůbec nečekali. Setkal jsem se s TV show na DVD, které měly sekundu
telecine při každé změně scény nebo na zcela náhodných místech. Jednou jsem se
díval na DVD, které bylo do půlky progresivní a od půlky telecinováno. Pokud
chcete být <span class="emphasis"><em>opravdu</em></span> důkladní, můžete oskenovat celý film:
</p><pre class="screen">mplayer dvd://1 -nosound -vo null -benchmark</pre><p>
Použití volby <tt class="option">-benchmark</tt> nechá
<span class="application">MPlayer</span> přehrát film tak rychle, jak je to jen
možné; stejně to ale, podle výkonu hardware, chvíli potrvá.
Vždy, když demux_mpg ohlásí změnu snímkové rychlosti, řádek těsně nad hlášením
ukáže čas ve kterém ke změně došlo.
</p><p>
Občas je progresivní video na DVD označeno jako
"soft-telecine" protože je zamýšleno, aby telecine provedl DVD
přehrávač.
</p></div><div class="sect3" title="10.2.2.2. Telecinováno (přepsáno pro NTSC televizi)"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-telecined"></a>10.2.2.2. Telecinováno (přepsáno pro NTSC televizi)</h4></div></div></div><p>
Telecinované video bylo původně natočeno při 24000/1001, ale bylo telecinováno
<span class="emphasis"><em>před</em></span> zápisem na DVD.
</p><p>
<span class="application">MPlayer</span> (nikdy) nehlásí žádnou změnu snímkové
rychlosti, když přehrává telecinované video.
</p><p>
Při sledování telecinovaného videa uvidíte prokladové artefakty, které jako by
"blikaly": opakovaně mizí a objevují se.
Blíže se na to můžete podívat:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><pre class="screen">mplayer dvd://1</pre></li><li class="listitem"><p>
  Převiňte na část s pohybem.
</p></li><li class="listitem"><p>
  Použijte klávesu <span class="keycap"><b>.</b></span> pro krokování po jednom snímku.
</p></li><li class="listitem"><p>
  Sledujte vzor prokládaně vypadajících a progresivně vypadajících snímků.
  Pokud je vzor, který sledujete PPPII,PPPII,PPPII,..., pak je video
  telecinováno. Pokud vidíte jiný vzor, pak mohlo být video telecinováno
  použitím nějaké nestandardní metody; <span class="application">MEncoder</span>
  neumí bezztrátově převést nestandardní telecine do progresivního. Pokud
  nevidíte žádný vzor, pak je video nejspíš prokládané.
</p></li></ol></div><p>
</p><p>
Někdy je telecinované video na DVD označeno jako "hard-telecine".
Jelikož hard-telecine již je ve 60000/1001 půlsnímcích za sekundu, DVD
přehrávač přehraje video bez jakýchkoli manipulací.
</p><p>
Dalším způsobem jak zjistíte, že je váš zdroj telecinován, je přehrát
jej s volbami <tt class="option">-vf pullup</tt> a <tt class="option">-v</tt> a
uvidíte, jak <tt class="option">pullup</tt> nachází vzor.
Pokud je zdroj telecinován, mělibyste vidět na konzoli vzor 3:2 s opakujícím
se <code class="systemitem">0+.1.+2</code> a <code class="systemitem">0++1</code>.
Tato technika má tu výhodu, že nemusíte sledovat zdroj, abyste jej
identifikovali, což se může hodit, pokud chcete automatizovat enkódovací
proceduru, nebo ji provést vzdáleně přes pomalou linku.
</p></div><div class="sect3" title="10.2.2.3. Prokládané"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-interlaced"></a>10.2.2.3. Prokládané</h4></div></div></div><p>
Prokládané video bylo od samého začátku filmováno při 60000/1001 půlsnímcích
za sekundu a uloženo na DVD ve 30000/1001 snímcích za sekundu. Efekt
prokládání (často označovaný jako "roztřepení") je výsledkem
skládání půlsnímků do snímků. Vzdálenost mezi půlsnímky má být 1/(60000/1001)
sekundy a proto když jsou zobrazeny současně, je rozdíl jasně patrný.
</p><p>
Stejně jako u telecinovaného videa by <span class="application">MPlayer</span> neměl
hlásit jakékoli změny snímkové rychlosti při přehrávání prokládaného obsahu.
</p><p>
Když si prohlédnete video blíže pomocí krokování snímků pomocí klávesy
<span class="keycap"><b>.</b></span>, uvidíte, že každý jednotlivý snímek je prokládaný.
</p></div><div class="sect3" title="10.2.2.4. Smíšené progresivní a telecinované"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-mixedpt"></a>10.2.2.4. Smíšené progresivní a telecinované</h4></div></div></div><p>
Veškerý obsah "smíšeného progresivního a telecinovaného" videa měl
původně 24000/1001 snímků za sekundu, ale některé části prošly telecine.
</p><p>
Když <span class="application">MPlayer</span> přehrává tuto kategorii, bude
(častoi opakovaně) přepínat mezi "30000/1001 snímky/s NTSC"
a "24000/1001 snímky/s progresivním NTSC". Sledujte spodek
<span class="application">MPlayer</span>ova výstupu, abyste zachytili tyto zprávy.
</p><p>
Měli byste prověřit části se "30000/1001 snímky/s NTSC", abyste měli
jistotu, že jsou skutečně telecinovány a ne jen prokládané.
</p></div><div class="sect3" title="10.2.2.5. Smíšené progresivní a prokládané"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-ident-mixedpi"></a>10.2.2.5. Smíšené progresivní a prokládané</h4></div></div></div><p>
Ve "smíšeném progresivním a prokládaném" obsahu bylo progresivní a
prokládané video splácáno dohromady.
</p><p>
Tato kategorie vypadá jako "smíšené progresivní a telecine",
dokud si neprohlédnete části se 30000/1001 snímky/s a neuvidíte, že nemají
telecine vzor.
</p></div></div><div class="sect2" title="10.2.3. Jak enkódovat jednotlivé kategorie"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-encode"></a>10.2.3. Jak enkódovat jednotlivé kategorie</h3></div></div></div><p>
Jak jsem se zmínil na začátku, příklady příkazových řádků
<span class="application">MEncoder</span>u níže <span class="bold"><strong>nejsou</strong></span>
určeny pro praktické použití; pouze demonstrují, minimum voleb nutných k tomu,
abyste správně enkódovali každou kategorii.
</p><div class="sect3" title="10.2.3.1. Progresivní"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-progressive"></a>10.2.3.1. Progresivní</h4></div></div></div><p>
Progresivní video nevyžaduje žádné speciální filtrování pro enkódování.
Jediná volba, která by určitě neměla chybět je
<tt class="option">-ofps 24000/1001</tt>. Jinak se <span class="application">MEncoder</span>
pokusí enkódovat při 30000/1001 snímcích/s a bude opakovat snímky.
</p><p>
</p><pre class="screen">mencoder dvd://1 -oac copy -ovc lavc -ofps 24000/1001</pre><p>
</p><p>
Často se stává, že video, které vypadá progresivně, má v sobě zamíchány
kratičké telecinované části. Pokud si nejste jisti, je nejbezpečnější
považovat video za
<a class="link" href="#menc-feat-telecine-encode-mixedpt" title="10.2.3.4. Smíšené progresivní a telecinované">smíšené progresivní a
telecinované</a>. Ztráta výkonu je jen malá
<a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Poznámky pod čarou">[3]</a>.
</p></div><div class="sect3" title="10.2.3.2. Telecinované"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-telecined"></a>10.2.3.2. Telecinované</h4></div></div></div><p>
Telecine lze obrátit a dostat tak původní 24000/1001 obsah, za použití metody
zvané inverzní telecine.
<span class="application">MPlayer</span> má několik filtrů právě pro tuto činnost;
nejlepší z těchto filtrů, <tt class="option">pullup</tt>, je popsán v části
<a class="link" href="#menc-feat-telecine-encode-mixedpt" title="10.2.3.4. Smíšené progresivní a telecinované">smíšené progresivní a
telecinované</a>.
</p></div><div class="sect3" title="10.2.3.3. Prokládané"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-interlaced"></a>10.2.3.3. Prokládané</h4></div></div></div><p>
V praxi není většinou možné dostat kompletní progresivní video z prokládaného
obsahu. Jediný způsob jak to udělat bez ztráty poloviny svislého rozlišení je
zdvojením snímkové rychlosti a zkusit "odhadnout" co mám provést
s odpovídajícími linkami každého z půlsnímků (má to ovšem i nevýhody –
viz metoda 3).
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Enkódujte video v prokládané formě. Obvykle prokládání způsobí těžkou újmu
  schopnosti enkodéru dobře komprimovat, ale
  <code class="systemitem">libavcodec</code> má dvě volby určené právě
  pro lepší ukládání prokládaného videa: <tt class="option"> ildct</tt> a
  <tt class="option">ilme</tt>. Rovněž velmi doporučujeme použití volby
  <tt class="option">mbd=2</tt> <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Poznámky pod čarou">[2] </a>
  protože bude enkódovat makrobloky jako neprokládané tam, kde není žádný pohyb.
  Volba <tt class="option">-ofps</tt> zde <span class="bold"><strong>není</strong></span> nutná.
  </p><pre class="screen">mencoder dvd://1 -oac copy -ovc lavc -lavcopts ildct:ilme:mbd=2</pre><p>
</p></li><li class="listitem"><p>
  Použijte filtr odstraňující proklad před enkódováním. Je jich zde několik,
  můžete si vybrat. Každý z nich má svá pro i proti. Prohlédněte si výstup
  <tt class="option">mplayer -pphelp</tt> a <tt class="option">mplayer -vf help</tt>
  abyste zjistili, které jsou k dispozici
  (grep pro "deint"), přečtěte si
  <a class="ulink" href="http://guru.multimedia.cx/deinterlacing-filters/" target="_top">Deinterlacing filters comparison</a> od Michaela Niedermayera
  a vyhledejte
  <a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">
  e-mailové konference MPlayeru</a>, kde naleznete mnoho diskusí o různých
  filtrech.
  Snímková rychlost se ani zde nemění, takže žádné
  <tt class="option">-ofps</tt>. Odstranění proklady by rovněž mělo být provedeno po
  ořezání <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Poznámky pod čarou">[1]</a>, ale před
  škálováním.
  </p><pre class="screen">mencoder dvd://1 -oac copy -vf yadif -ovc lavc</pre><p>
  </p></li><li class="listitem"><p>
  Naneštěstí je tato volba vadná v <span class="application">MEncoder</span>u;
  měla by dobře pracovat v <span class="application">MEncoder G2</span>, ale ten tu
  zatím není. Stejně je určením <tt class="option"> -vf tfields</tt> vytvoření
  kompletního snímku z každého půlsnímku, což zvýší snímkovou rychlost na
  60000/1001. Výhoda tohoto přístupu je v tom, že nepřijdete o žádná data;
  Protože však každý snímek pochází jen z jediného půlsnímku, musí být chybějící
  linky nějak dopočítány. Neexistuje mnoho dobrých metod, generujících chybějící
  data, takže výsledek bude trochu podobný tomu, když se použije některý filtr
  odstraňující proklad.
  Generováním chybějících linek vznikají další problémy tím, že se zdvojnásobí
  množství dat. Takže jsou potřeba vyšší datové toky pro enkódování, aby byla
  zachována kvalita a spotřebuje se více výkonu CPU jak pro enkódování, tak pro
  dekódování. tfields má několik různých voleb pro volbu způsobu generování
  chybějících linek. Pokud použijete tuto možnost, prostudujte si manuál a
  zvolte si volbu, která s vaším materiálem vypadá nejlépe.
  Poznamenejme, že při použití <tt class="option">tfields</tt>
  <span class="bold"><strong>musíte</strong></span> nastavit <tt class="option">-fps</tt> a
  <tt class="option">-ofps</tt> na dvojnásobek snímkové rychlosti originálu.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf tfields=2 -ovc lavc \
    -fps 60000/1001 -ofps 60000/1001</pre><p>
</p></li><li class="listitem"><p>
  Pokud plánujete výrazné zmenšování, můžete extrahovat a enkódovat jen jeden
  z půlsnímků. Samozřejmě přijdete o polovinu svislého rozlišení, ale pokud
  plánujete zmenšení ideálně na 1/2 originální velikosti, nebude na této ztrátě
  vůbec záležet. Výsledek bude progresivní soubor s 30000/1001 snímky za sekundu.
  Celý postup spočívá v použití <tt class="option">-vf field</tt> a následném ořezu
  <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Poznámky pod čarou">[1]</a> a příslušném
  škálování. Pamatujte, že musíte nastavit scale tak, aby kompenzoval
  zmenšení svislého rozměru na polovinu.
  </p><pre class="screen">mencoder dvd://1 -oac copy -vf field=0 -ovc lavc</pre><p>
</p></li></ol></div></div><div class="sect3" title="10.2.3.4. Smíšené progresivní a telecinované"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-mixedpt"></a>10.2.3.4. Smíšené progresivní a telecinované</h4></div></div></div><p>
Abychom převedli smíšené progresivní a telecinované video zcela na progresivní
video, musí být telecinované části inverzně telecinovány. K tomu lze dospět
třemi postupy popsanými níže. Poznamenejme, že byste měli
<span class="bold"><strong>vždy</strong></span> provést inverzní telecine před
jakýmkoliv škálováním; a v případě, že přesně nevíte co děláte, také před
ořezáním <a class="link" href="#menc-feat-telecine-footnotes" title="10.2.4. Poznámky pod čarou">[1]</a>.
Volba <tt class="option">-ofps 24000/1001</tt> je vyžadována, protože výstupní video
bude mít 24000/1001 snímků za sekundu.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <tt class="option">-vf pullup</tt> je navržen tak, aby inverzně telecinoval, ale
  progresivní data nechával jak jsou. Pro správnou funkci
  <span class="bold"><strong>musí</strong></span> být <tt class="option">pullup</tt> následován
  filtrem <tt class="option">softskip</tt>, jinak <span class="application">MEncoder</span>
  zhavaruje. <tt class="option">pullup</tt> je však nejčistší a nejpřesnější dostupnou
  metodou pro enkódování jak telecinovaného, tak "smíšeného progresivního a
  telecinovaného".
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf pullup,softskip
    -ovc lavc -ofps 24000/1001</pre><p>
</p></li><li class="listitem"><p>
  Starší metodou je, spíše než inverzně telecinovat telecinované části,
  telecinovat progresivní části a poté inverzně telecinovat celé video.
  Zní to zmateně? softpulldown je filtr, který projde celé video a převede celý
  soubor na telecinovaný. Pokud budeme následovat softpulldown buď
  <tt class="option">detc</tt> nebo <tt class="option">ivtc</tt>, bude konečný výsledek zcela
  progresivní. Nutná je volba <tt class="option">-ofps 24000/1001</tt>.
  </p><pre class="screen">
mencoder dvd://1 -oac copy -vf softpulldown,ivtc=1 -ovc lavc -ofps 24000/1001
  </pre><p>
</p></li><li class="listitem"><p>
  Osobně jsem nepoužil <tt class="option">-vf filmdint</tt>, ale toto o něm (přibližně)
  řekl D Richard Felker III:

  </p><div class="blockquote"><blockquote class="blockquote"><p>Je to OK, ale IMO to zkouší až příliš často odstraňovat
      proklad místo provádění inverzního telecine (stejně jako settop DVD
      přehrávače &amp; progresivní televize) což vede ke škaredému třepotání a
      dalším artefaktům. Pokud jej chcete používat, měli byste předtím alespoň
      trochu času věnovat ladění voleb a sledováním výstupu, abyste měli jistotu,
      že vám to něco nekazí.
    </p></blockquote></div><p>
  </p></li></ul></div></div><div class="sect3" title="10.2.3.5. Smíšené progresivní a prokládané"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-telecine-encode-mixedpi"></a>10.2.3.5. Smíšené progresivní a prokládané</h4></div></div></div><p>
Máme dvě volby pro práci s touto kategorií, obě jsou však
kompromisem. Měli byste se rozhodnout podle
trvání/umístění každého typu.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Považujte to za progresivní. Prokládané části budou vypadat prokládaně a
  některé z prokládaných políček bude muset být zahozeno, což povede
  k nestejnoměrnému poskakování. Můžete proti tomu nasadit postprocesní filtr,
  pokud chcete, ale tím mírně degradujete progresivní části.
  </p><p>
  Této volbě byste se měli rozhodně vyhnout, pokud chcete nakonec zobrazovat
  video na zobrazovači s prokládaným obrazem (přes TV kartu například).
  Pokud máte prokládané snímky ve videu s rychlostí 24000/1001 snímků za
  sekundu, budou telecinovány spolu s progresivními snímky. Polovina
  prokládaných "snímků" bude zobrazena po dobu trvání třech snímků
  (3/(60000/1001) sekund), což povede k poskakování. Efekt
  "cukání zpět" vypadá skutečně zle. Pokud se o to přece pokusíte,
  <span class="bold"><strong>musíte</strong></span> použít filtr odstraňující proklad,
  jako je <tt class="option">lb</tt> nebo <tt class="option">l5</tt>.
  </p><p>
  Špatnou volbou je to i pro progresivní zobrazovač. Ten zahodí páry po sobě
  jdoucích snímků, což povede k přerušování, které může být více viditelné, než
  při druhé metodě, která zobrazuje některé progresivní snímky dvakrát.
  Prokládané video se 30000/1001 snímky za sekundu je totiž poněkud trhané,
  protože by ve skutečnosti mělo být promítáno při 60000/1001 půlsnímcích za
  sekundu, takže zdvojení některých snímků není tak moc vidět.
  </p><p>
  V každém případě je nejlepší posoudit obsah a způsob, jakým bude zobrazován.
  Pokud je vaše video z 90% progresivní a nikdy jej nebudete pouštět na
  televizi, měli byste volit progresivní přístup.
  Pokud je progresívní jen z poloviny, pravděpodobně jej bude lepší enkódovat
  jako by bylo celé prokládané.
  </p></li><li class="listitem"><p>
  Pokládat jej za prokládané. Některé snímky v progresivních částech budou muset
  být duplikovány, což povede k nepravidelnému poskakování. Opět platí, že
  filtry pro odstranění prokladu mohou poněkud degradovat progresivní části.
</p></li></ul></div></div></div><div class="sect2" title="10.2.4. Poznámky pod čarou"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-telecine-footnotes"></a>10.2.4. Poznámky pod čarou</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p title="K ořezu:"><b>K ořezu: </b>
  Video data na DVD jsou ukládána ve formátu zvaném YUV 4:2:0. V YUV videu jsou,
  jasová ("černobílá"; angl. luma) a barvonosná (angl. chroma) složka
  ukládány odděleně. Protože je lidské oko méně citlivé na změnu barvy, než na
  jas, připadá v YUV 4:2:0 obrázku pouze jeden barvonosný pixel na každé čtyři
  jasové pixely. V progresivním obrázku má každý čtverec 2x2 jasových pixelů
  právě jeden barvonosný pixel. Proto musíte ořezávat progresivní YUV 4:2:0
  na sudé rozměry a používat sudé odsazení (offsety). Například
  <tt class="option">crop=716:380:2:26</tt> je OK, ale
  <tt class="option">crop=716:380:3:26 </tt> není.
  </p><p>
  Když máte co do činění s prokládaným YUV 4:2:0, je situace mnohem
  komplikovanější. Místo každých čtyřech pixelů ve <span class="emphasis"><em>snímku</em></span>
  sdílejících barvonosný pixel, každé čtyři jasové pixely v každém
  <span class="emphasis"><em>půlsnímku</em></span> sdílejí barvonosný pixel. Když jsou půlsnímky
  proloženy do snímku, každá linka má výšku jeden pixel. A nyní místo aby dané
  čtyři pixely tvořily čtverec, jsou první dva vedle sebe a druhé dva jsou vedle
  sebe o dvě linky níž. Dva pixely těsně pod nimi patří do jiného půlsnímku a
  proto sdílí jiný barvonosný pixel se dvěma jasovými pixely o dva řádky níž.
  Všechno tohle nás nutí mít svislé rozměry ořezání a odsazení bezezbytku
  dělitelné čtyřmi. Vodorovné stačí když budou sudé.
  </p><p>
  Pro telecinované video doporučuji, abyste ořezání prováděli až po inverzi
  telecine. Jakmile je video progresivní, stačí řezat jen na sudé rozměry.
  Pokud si však přece jen chcete dopřát mírné zrychlení, které může poskytnout
  časný ořez, musíte svisle dodržet násobky čtyřech, jinak nebude mít filtr
  pro inverzi telecine správná data.
  </p><p>
  Prokládané (nikoli telecinované) video musíte vždy ořezávat svisle násobky
  čtyř, pokud před ořezáním nepoužijete <tt class="option">-vf field</tt>.
  </p></li><li class="listitem"><p title="K volbám pro enkódování a kvalitě:"><b>K volbám pro enkódování a kvalitě: </b>
  Jen proto, že doporučuji <tt class="option">mbd=2</tt> zde neznamená, že by tato
  volba nemohla být použita jinde. V kombinaci s <tt class="option">trell</tt>, je
  <tt class="option">mbd=2</tt> jednou ze dvou voleb
  <code class="systemitem">libavcodec</code>u, které nejvíce zvyšují
  kvalitu a vy byste měli vždy použít alespoň tyto dvě, pokud není na škodu
  zpomalení rychlosti enkódování (např. při enkódování v reálném čase).
  Mnoho dalších voleb <code class="systemitem">libavcodec</code>u
  zvyšuje kvalitu enkódování (a snižuje jeho rychlost), ale to je mimo zaměření
  tohoto textu.
  </p></li><li class="listitem"><p title="K výkonu filtru pullup:"><b>K výkonu filtru pullup: </b>
  Použití <tt class="option">pullup</tt> je bezpečné (spolu se <tt class="option">softskip
  </tt>) na progresivní video a je to obvykle dobrá volba, pokud nebyl zdroj
  prověřen, že je celý progresivní. Ve většině případů je ztráta výkonu malá.
  V ojedinělých případech enkódování způsobí <tt class="option">pullup</tt>, že je
  <span class="application">MEncoder</span> o 50% pomalejší. Přidání zpracování zvuku
  a pokročilých <tt class="option">lavcopts</tt> zastíní tento rozdíl tak, že rozdíl
  v rychlosti působený použitím <tt class="option">pullup</tt> se sníží na 2%.
  </p></li></ol></div></div></div><div class="sect1" title="10.3. Enkódování s rodinou kodeků libavcodec"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-enc-libavcodec"></a>10.3. Enkódování s rodinou kodeků <code class="systemitem">libavcodec</code>
</h2></div></div></div><p>
<code class="systemitem">libavcodec</code>
zajišťuje jednoduché enkódování do mnoha zajímavých video a audio formátů.
Můžete enkódovat do následujících kodeků (více méně aktuální):

</p><div class="sect2" title="10.3.1. Video kodeky libavcodec"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-video-codecs"></a>10.3.1. Video kodeky
<code class="systemitem">libavcodec</code></h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Jméno video kodeku</th><th>Popis</th></tr></thead><tbody><tr><td>mjpeg</td><td>Motion JPEG</td></tr><tr><td>ljpeg</td><td>lossless (bezztrátový) JPEG</td></tr><tr><td>jpegls</td><td>JPEG LS</td></tr><tr><td>targa</td><td>Targa obrázek</td></tr><tr><td>gif</td><td>GIF obrázek</td></tr><tr><td>bmp</td><td>BMP obrázek</td></tr><tr><td>png</td><td>PNG obrázek</td></tr><tr><td>h261</td><td>H.261</td></tr><tr><td>h263</td><td>H.263</td></tr><tr><td>h263p</td><td>H.263+</td></tr><tr><td>mpeg4</td><td>standardní ISO MPEG-4 (DivX, Xvid kompatibilní)</td></tr><tr><td>msmpeg4</td><td>prvotní MPEG-4 varianta od MS, v3 (DivX3)</td></tr><tr><td>msmpeg4v2</td><td>prvotní MPEG-4 od MS, v2 (použitý ve starých ASF souborech)</td></tr><tr><td>wmv1</td><td>Windows Media Video, verze 1 (WMV7)</td></tr><tr><td>wmv2</td><td>Windows Media Video, verze 2 (WMV8)</td></tr><tr><td>rv10</td><td>RealVideo 1.0</td></tr><tr><td>rv20</td><td>RealVideo 2.0</td></tr><tr><td>mpeg1video</td><td>MPEG-1 video</td></tr><tr><td>mpeg2video</td><td>MPEG-2 video</td></tr><tr><td>huffyuv</td><td>bezztrátová komprese</td></tr><tr><td>ffvhuff</td><td>FFmpeg modifikovaná huffyuv bezztrátová komprese</td></tr><tr><td>asv1</td><td>ASUS Video v1</td></tr><tr><td>asv2</td><td>ASUS Video v2</td></tr><tr><td>ffv1</td><td>bezztrátový video kodek z FFmpeg</td></tr><tr><td>svq1</td><td>Sorenson video 1</td></tr><tr><td>flv</td><td>Sorenson H.263 používaný ve Flash Video</td></tr><tr><td>flashsv</td><td>Flash Screen Video</td></tr><tr><td>dvvideo</td><td>Sony Digital Video</td></tr><tr><td>snow</td><td>Experimentální vlnkově orientovaný kodek z FFmpeg</td></tr><tr><td>zbmv</td><td>Zip Blocks Motion Video</td></tr></tbody></table></div><p>

První pole obsahuje názvy kodeků, které můžete přiřadit konfiguračnímu parametru
<code class="literal">vcodec</code>,
např: <tt class="option">-lavcopts vcodec=msmpeg4</tt>
</p><div class="informalexample"><p>
Příklad s MJPEG kompresí:
</p><pre class="screen">
mencoder dvd://2 -o <em class="replaceable"><code>titul2.avi</code></em> -ovc lavc -lavcopts vcodec=mjpeg -oac copy
</pre><p>
</p></div></div><div class="sect2" title="10.3.2. Audio kodeky libavcodec"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs"></a>10.3.2. Audio kodeky
<code class="systemitem">libavcodec</code></h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Jméno audio kodeku</th><th>Popis</th></tr></thead><tbody><tr><td>ac3</td><td>Dolby Digital (AC-3)</td></tr><tr><td>adpcm_*</td><td>Adaptivní PCM formáty – viz pomocnou tabulku</td></tr><tr><td>flac</td><td>Free Lossless Audio Codec (FLAC)</td></tr><tr><td>g726</td><td>G.726 ADPCM</td></tr><tr><td>libamr_nb</td><td>3GPP Adaptive Multi-Rate (AMR) narrow-band</td></tr><tr><td>libamr_wb</td><td>3GPP Adaptive Multi-Rate (AMR) wide-band</td></tr><tr><td>libfaac</td><td>Advanced Audio Coding (AAC) – používá FAAC</td></tr><tr><td>libgsm</td><td>ETSI GSM 06.10 plný rozsah</td></tr><tr><td>libgsm_ms</td><td>Microsoft GSM</td></tr><tr><td>libmp3lame</td><td>MPEG-1 audio layer 3 (MP3) – používá LAME</td></tr><tr><td>mp2</td><td>MPEG-1 audio layer 2 (MP2)</td></tr><tr><td>pcm_*</td><td>PCM formáty – viz pomocnou tabulku</td></tr><tr><td>adpcm_ima_wav</td><td>IMA adaptivní PCM (4 bity na vzorek, komprese 4:1)</td></tr><tr><td>sonic</td><td>experimentální FFmpeg ztrátový kodek</td></tr><tr><td>roq_dpcm</td><td>Id Software RoQ DPCM</td></tr><tr><td>sonicls</td><td>experimentální FFmpeg bezztrátový kodek</td></tr><tr><td>vorbis</td><td>Vorbis</td></tr><tr><td>wmav1</td><td>Windows Media Audio v1</td></tr><tr><td>wmav2</td><td>Windows Media Audio v2</td></tr></tbody></table></div><p>

Vprvním sloupci naleznate jména kodeků, které byste měli přiřadit parametru
<code class="literal">acodec</code>, například: <tt class="option">-lavcopts acodec=ac3</tt>
</p><div class="informalexample"><p>
Příklad s kompresí AC–3:
</p><pre class="screen">
mencoder dvd://2 -o <em class="replaceable"><code>titul2.avi</code></em> -oac lavc -lavcopts acodec=ac3 -ovc copy
</pre><p>
</p></div><p>
Narozdíl od jejích videokodeků,  audio kodeky z knihovny
<code class="systemitem">libavcodec</code>
neprovádějí inteligentní rozdělení přidělených bitů,
jelikož jim chybí byť jen minimální psychoakustický model (pokud vůbec),
který obsahuje většina implementací ostatních kodeků.
Vězte však, že všechny tyto kodeky zvuku jsou velmi rychlé a pracují
bez potíží všude, kde máte <span class="application">MEncoder</span> se
zakompilovanou knihovnou <code class="systemitem">libavcodec</code>
(což je naprostá většina případů) a nezávisejí na externích knihovnách.
</p><div class="sect3" title="10.3.2.1. Pomocná tabulka pro PCM/ADPCM formát"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-enc-libavcodec-audio-codecs-pcmadpcm"></a>10.3.2.1. Pomocná tabulka pro PCM/ADPCM formát</h4></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Název PCM/ADPCM kodeku</th><th>Popis</th></tr></thead><tbody><tr><td>pcm_s32le</td><td>signed 32-bit little-endian</td></tr><tr><td>pcm_s32be</td><td>signed 32-bit big-endian</td></tr><tr><td>pcm_u32le</td><td>unsigned 32-bit little-endian</td></tr><tr><td>pcm_u32be</td><td>unsigned 32-bit big-endian</td></tr><tr><td>pcm_s24le</td><td>signed 24-bit little-endian</td></tr><tr><td>pcm_s24be</td><td>signed 24-bit big-endian</td></tr><tr><td>pcm_u24le</td><td>unsigned 24-bit little-endian</td></tr><tr><td>pcm_u24be</td><td>unsigned 24-bit big-endian</td></tr><tr><td>pcm_s16le</td><td>signed 16-bit little-endian</td></tr><tr><td>pcm_s16be</td><td>signed 16-bit big-endian</td></tr><tr><td>pcm_u16le</td><td>unsigned 16-bit little-endian</td></tr><tr><td>pcm_u16be</td><td>unsigned 16-bit big-endian</td></tr><tr><td>pcm_s8</td><td>signed 8-bit</td></tr><tr><td>pcm_u8</td><td>unsigned 8-bit</td></tr><tr><td>pcm_alaw</td><td>G.711 A-LAW </td></tr><tr><td>pcm_mulaw</td><td>G.711 μ-LAW</td></tr><tr><td>pcm_s24daud</td><td>signed 24-bit D-Cinema Audio format</td></tr><tr><td>pcm_zork</td><td>Activision Zork Nemesis</td></tr><tr><td>adpcm_ima_qt</td><td>Apple QuickTime</td></tr><tr><td>adpcm_ima_wav</td><td>Microsoft/IBM WAVE</td></tr><tr><td>adpcm_ima_dk3</td><td>Duck DK3</td></tr><tr><td>adpcm_ima_dk4</td><td>Duck DK4</td></tr><tr><td>adpcm_ima_ws</td><td>Westwood Studios</td></tr><tr><td>adpcm_ima_smjpeg</td><td>SDL Motion JPEG</td></tr><tr><td>adpcm_ms</td><td>Microsoft</td></tr><tr><td>adpcm_4xm</td><td>4X Technologies</td></tr><tr><td>adpcm_xa</td><td>Phillips Yellow Book CD-ROM eXtended Architecture</td></tr><tr><td>adpcm_ea</td><td>Electronic Arts</td></tr><tr><td>adpcm_ct</td><td>Creative 16-&gt;4-bit</td></tr><tr><td>adpcm_swf</td><td>Adobe Shockwave Flash</td></tr><tr><td>adpcm_yamaha</td><td>Yamaha</td></tr><tr><td>adpcm_sbpro_4</td><td>Creative VOC SoundBlaster Pro 8-&gt;4-bit</td></tr><tr><td>adpcm_sbpro_3</td><td>Creative VOC SoundBlaster Pro 8-&gt;2.6-bit</td></tr><tr><td>adpcm_sbpro_2</td><td>Creative VOC SoundBlaster Pro 8-&gt;2-bit</td></tr><tr><td>adpcm_thp</td><td>Nintendo GameCube FMV THP</td></tr><tr><td>adpcm_adx</td><td>Sega/CRI ADX</td></tr></tbody></table></div><p>
</p></div></div><div class="sect2" title="10.3.3. Enkódovací volby libavcodecu"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-lavc-encoding-options"></a>10.3.3. Enkódovací volby libavcodecu</h3></div></div></div><p>
V ideálním případě byste asi chtěli jen říct enkodéru, aby se přepnul do
režimu "vysoká kvalita" a šel na to.
To by bylo jistě hezké, ale naneštěstí je to těžké zavést, jelikož různé
volby enkódování vedou k různé kvalitě v závislosti na zdrojovém materiálu.
To proto, že komprese závisí na vizuálních vlastnostech daného videa.
Například anime a živá akce mají zcela rozdílné vlastnosti a tedy vyžadují
odlišné volby pro dosažení optimálního enkódování.
Dobrá zpráva je, že některé volby by nikdy neměly chybět, jako
<tt class="option">mbd=2</tt>, <tt class="option">trell</tt> a <tt class="option">v4mv</tt>.
Podrobný popis obvyklých enkódovacích voleb naleznete níže.
</p><div class="itemizedlist" title="Volby k nastavení:"><p class="title"><b>Volby k nastavení:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>vmax_b_frames</strong></span>: 1 nebo 2 je v pořádku,
  v závislosti na filmu.
  Poznamenejme, že pokud chcete mít svá videa dekódovatelná kodekem DivX5,
  budete muset zapnout podporu uzavřeného GOP, pomocí volby
  <code class="systemitem">libavcodec</code>u <tt class="option">cgop</tt>,
  ale budete také muset vypnout detekci scény, což není dobrý nápad, jelikož
  tak trochu zhoršíte efektivitu enkódování.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vb_strategy=1</strong></span>: pomáhá ve scénách s rychlým
  pohybem.
  Vyžaduje vmax_b_frames &gt;= 2.
  V některých videích může vmax_b_frames snížit kvalitu, ale vmax_b_frames=2
  spolu s vb_strategy=1 pomůže.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>dia</strong></span>: okruh vyhledávání pohybu. Čím větší, tím
  lepší a pomalejší.
  Záporné hodnoty mají úplně jiný význam.
  Dobrými hodnotami jsou -1 pro rychlé enkódování, nebo 2-4 pro pomalejší.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>predia</strong></span>: předprůchod pro vyhledávání pohybu.
  Není tak důležitý jako dia. Dobré hodnoty jsou 1 (výchozí) až 4. Vyžaduje
  preme=2, aby byla opravdu k něčemu.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cmp, subcmp, precmp</strong></span>: Porovnávací funkce pro
  odhad pohybu.
  Experimentujte s hodnotami 0 (výchozí), 2 (hadamard), 3 (dct) a 6 (omezení
  datového toku).
  0 je nejrychlejší a dostatečná pro precmp.
  Pro cmp a subcmp je 2 dobrá pro anime a 3 zase pro živou akci.
  6 může, ale nemusí být o něco lepší, ale je pomalá.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>last_pred</strong></span>: Počet prediktorů pohybu
  přebíraných z předchozího snímku.
  1-3 nebo tak pomůžou za cenu menšího zdržení.
  Vyšší hodnoty jsou však pomalé a nepřináší žádný další užitek.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>cbp, mv0</strong></span>: Ovládá výběr makrobloků.
  Malá ztráta rychlosti za malý zisk kvality.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qprd</strong></span>: adaptivní kvantizace založená na
  komplexnosti makrobloku.
  Může pomoci i uškodit v závislosti na videu a ostatních volbách.
  Toto může způsobovat artefakty, pokud nenastavíte vqmax na nějakou rozumně
  malou hodnotu (6 je dobrá, možná byste ale měli jít až na 4); vqmin=1 může
  také pomoci.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qns</strong></span>: velmi pomalá, zvlášť v kombinaci
  s qprd.
  Tato volba nutí enkodér minimalizovat šum díky kompresi artefaktů, místo aby
  se snažil striktně zachovávat věrnost videa. Nepoužívejte ji, pokud jste již
  nezkusili všechno ostatní kam až to šlo a výsledek přesto není dost dobrý.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vqcomp</strong></span>: Vylepšení ovládání datového toku.
  Dobré hodnoty se liší podle videa. Můžete to bezpečně ponechat jak to je,
  pokud chcete.
  Snížením vqcomp pustíte více bitů do scén s nízkou komplexností, zvýšením je
  pošlete do scén s vysokou komplexností (výchozí: 0.5, rozsah: 0-1. doporučený
  rozsah: 0.5-0.7).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vlelim, vcelim</strong></span>: Nastaví jediný koeficient
  prahu eliminace pro jasové a barevné roviny.
  Ty jsou enkódovány odděleně ve všech MPEGu podobných algoritmech.
  Myšlenka stojící za těmito volbami je použití dobré heuristiky pro určení,
  zda je změna v bloku menší než vámi nastavený práh a v tom případě se blok
  enkóduje jako "nezměněný".
  To šetří bity a možná i zrychlí enkódování. vlelim=-4 a vcelim=9 se zdají být
  dobré pro hrané filmy, ale příliš nepomohou s anime; pokud enkódujete
  animované vido, měli byste je asi nechat beze změn.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>: Odhad pohybu s přesností na čtvrt
  pixelu. MPEG-4 používá přesnost na půl pixelu jako výchozí při vyhledávání
  pohybu, proto je tato volba spojena s určitou režií, jelikož se do výstupního
  souboru ukládá více informací.
  Kompresní zisk/ztráta závisí na filmu, ale obvykle to není příliš efektivní
  na anime.
  qpel vždy způsobí zvýšení výpočetní náročnosti dekódování (v praxi +25% času
  CPU).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>psnr</strong></span>: neovlivní aktuální enkódování, ale
  zaznamená typ/velikost/kvalitu každého snímku do log souboru a na konci vypíše
  souhrnný PSNR (odstup signálu od šumu).
</p></li></ul></div><div class="itemizedlist" title="Volby se kterými nedoporučujeme si hrát:"><p class="title"><b>Volby se kterými nedoporučujeme si hrát:</b></p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>vme</strong></span>: Výchozí je nejlepší.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask, dark_mask</strong></span>: Psychovizuálně
  adaptivní kvantizace.
  Nehrajte si s těmito volbami, pokud vám jde o kvalitu. Rozumné hodnoty mohou
  být efektivní ve vašem případě, ale pozor, je to velmi subjektivní.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>scplx_mask</strong></span>: Snaží se předcházet blokovým
  artefaktům, ale postprocesing je lepší.
</p></li></ul></div></div><div class="sect2" title="10.3.4. Příklady nastavení enkódování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-mpeg4-lavc-example-settings"></a>10.3.4. Příklady nastavení enkódování</h3></div></div></div><p>
Následující nastavení jsou příklady nastavení různých kombinací voleb
enkodéru, které ovlivňují poměr rychlost versus kvalita při shodném
cílovém datovém toku.
</p><p>
Veškerá nastavení byla testována na video vzorku 720x448 @30000/1001
snímků za sekundu, cílový datový tok byl 900kbps a prováděly se na
AMD-64 3400+ při 2400 MHz v režimu 64 bitů.
Každá kombinace nastavení má uvedenu změřenou rychlost enkódování
(ve snímcích za sekundu) a ztrátu PSNR (v dB) oproti nastavení
"velmi vysoká kvalita".
Rozumějte však že, v závislosti na vašem zdrojovém materiálu, typu
počítače a pokrokům ve vývoji, můžete dospět k velmi odlišným výsledkům.
</p><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Popis</th><th>Volby</th><th>Rychlost [fps]</th><th>Relativní ztráta PSNR [dB]</th></tr></thead><tbody><tr><td>Velmi vysoká kvalita</td><td><tt class="option">vcodec=mpeg4:mbd=2:mv0:trell:v4mv:cbp:last_pred=3:predia=2:dia=2:vmax_b_frames=2:vb_strategy=1:precmp=2:cmp=2:subcmp=2:preme=2:qns=2</tt></td><td>6</td><td>0</td></tr><tr><td>Vysoká kvalita</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:last_pred=2:dia=-1:vmax_b_frames=2:vb_strategy=1:cmp=3:subcmp=3:precmp=0:vqcomp=0.6:turbo</tt></td><td>15</td><td>-0.5</td></tr><tr><td>Rychlé enkódování</td><td><tt class="option">vcodec=mpeg4:mbd=2:trell:v4mv:turbo</tt></td><td>42</td><td>-0.74</td></tr><tr><td>Enkódování v reálném čase</td><td><tt class="option">vcodec=mpeg4:mbd=2:turbo</tt></td><td>54</td><td>-1.21</td></tr></tbody></table></div><p>
</p></div><div class="sect2" title="10.3.5. Uživatelské inter/intra matice"><div class="titlepage"><div><div><h3 class="title"><a name="custommatrices"></a>10.3.5. Uživatelské inter/intra matice</h3></div></div></div><p>
Díky této vlastnosti
<code class="systemitem">libavcodec</code>u
můžete nastavit uživatelskou inter (I-snímky/klíčové snímky) a intra
(P-snímky/predikované (rozumějte vypočítané) snímky) matice. To je podporováno
mnoha kodeky:
<code class="systemitem">mpeg1video</code> a <code class="systemitem">mpeg2video</code>
jsou hlášeny jako funkční.
</p><p>
Typické použití této vlastnosti je nastavení matic preferovaných
<a class="ulink" href="http://www.kvcd.net/" target="_top">KVCD</a> specifikacemi.
</p><p>
<span class="bold"><strong>Kvantizační Matice KVCD "Notch":</strong></span>
</p><p>
Intra:
</p><pre class="screen">
 8  9 12 22 26 27 29 34
 9 10 14 26 27 29 34 37
12 14 18 27 29 34 37 38
22 26 27 31 36 37 38 40
26 27 29 36 39 38 40 48
27 29 34 37 38 40 48 58
29 34 37 38 40 48 58 69
34 37 38 40 48 58 69 79
</pre><p>

Inter:
</p><pre class="screen">
16 18 20 22 24 26 28 30
18 20 22 24 26 28 30 32
20 22 24 26 28 30 32 34
22 24 26 30 32 32 34 36
24 26 28 32 34 34 36 38
26 28 30 32 34 36 38 40
28 30 32 34 36 38 42 42
30 32 34 36 38 40 42 44
</pre><p>
</p><p>
Použití:
</p><pre class="screen">
$ mencoder <em class="replaceable"><code>vstup.avi</code></em> -o <em class="replaceable"><code>výstup.avi</code></em> -oac copy -ovc lavc \
    -lavcopts inter_matrix=...:intra_matrix=...
</pre><p>
</p><p>
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstup.avi</code></em> -ovc lavc -lavcopts \
vcodec=mpeg2video:intra_matrix=8,9,12,22,26,27,29,34,9,10,14,26,27,29,34,37,\
12,14,18,27,29,34,37,38,22,26,27,31,36,37,38,40,26,27,29,36,39,38,40,48,27,\
29,34,37,38,40,48,58,29,34,37,38,40,48,58,69,34,37,38,40,48,58,69,79\
:inter_matrix=16,18,20,22,24,26,28,30,18,20,22,24,26,28,30,32,20,22,24,26,\
28,30,32,34,22,24,26,30,32,32,34,36,24,26,28,32,34,34,36,38,26,28,30,32,34,\
36,38,40,28,30,32,34,36,38,42,42,30,32,34,36,38,40,42,44 -oac copy -o svcd.mpg
</pre><p>
</p></div><div class="sect2" title="10.3.6. Příklad"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-dvd-mpeg4-example"></a>10.3.6. Příklad</h3></div></div></div><p>
Takže jste si koupili zbrusu novou kopii filmu Harry Potter a Tajemná komnata
(širokoúhlou verzi samozřejmě) a chcete si toto DVD ripnout, takže si jej
můžete přidat do svého Domácího PC kina. Je to region 1 DVD, takže je
v NTSC. Níže uvedený příklad je stále vhodný i pro PAL, jen musíte vynechat
<tt class="option">-ofps 24000/1001</tt> (protože výstupní snímková rychlost je
shodná se vstupní) a přirozeně budou rozdílné souřadnice pro ořez.
</p><p>
Po spuštění <tt class="option">mplayer dvd://1</tt>, postupujeme podle informací
obsažených v sekci <a class="link" href="#menc-feat-telecine" title="10.2. Jak naložit s telecine a prokladem v NTSC DVD">Jak naložit s telecine
a prokladem v NTSC DVD</a> a zjistíme že je to 24000/1001 neprokládané
video, takže nepotřebujeme použít inverzní telecine filtr, jako je
<tt class="option">pullup</tt> nebo <tt class="option">filmdint</tt>.
</p><p><a name="menc-feat-dvd-mpeg4-example-crop"></a>
Dále musíme zjistit vhodný ořezový obdélník, takže použijeme filtr cropdetect:
</p><pre class="screen">mplayer dvd://1 -vf cropdetect</pre><p>
Ujistěte se, že jste přešli přes zaplněný snímek (nějakou jasnou scénu
mimo úvodní a koncové titulky) a
v konzoli <span class="application">MPlayer</span>u uvidíte:
</p><pre class="screen">crop area: X: 0..719  Y: 57..419  (-vf crop=720:362:0:58)</pre><p>
Potom přehrajeme film s tímto filtrem, abychom otestovali jeho správnost:
</p><pre class="screen">mplayer dvd://1 -vf crop=720:362:0:58</pre><p>
A zjistíme, že to vypadá zcela v pořádku. Dále se ujistíme, že šířka i výška
jsou násobky 16. Šířka je v pořádku, výška ovšem ne. Protože jsme nepropadli
v sedmé třídě z matematiky, víme, že nejbližším násobkem 16 nižším než 362 je
352.
</p><p>
Mohli bychom použít <tt class="option">crop=720:352:0:58</tt>, ale bude lepší
ustřihnout kousek nahoře i dole, takže zachováme střed. Zkrátili jsme výšku
o 10 pixelů, ale nechceme zvýšit odsazení v ose y o 5 pixelů, protože je to
liché číslo, což by nepříznivě ovlivnilo kvalitu. Místo toho zvýšíme odsazení
v ose y o 4 pixely:
</p><pre class="screen">mplayer dvd://1 -vf crop=720:352:0:62</pre><p>
Další důvod pro odstřižení pixelů shora i zdola je to, že si můžeme být jisti
odstřižením napůl černých pixelů pokud existují. Pokud je však vaše video
telecinováno, ujistěte se, že máte v řetězu filtrů <tt class="option">pullup</tt>
filtr (nebo jiný filtr pro inverzi telecine, který hodláte použít) ještě před
odstraněním prokladu a ořezem. (Pokud se rozhodnete zachovat vaše video
prokládané, pak se ujistěte, že vaše vertikální odsazení (offset)
je násobkem 4.)
</p><p>
Pokud si děláte starosti se ztrátou těch 10 pixelů, možná raději snížíte
rozměry na nejbližší násobek 16. Řetězec filtrů by pak vypadal asi takto:
</p><pre class="screen">-vf crop=720:362:0:58,scale=720:352</pre><p>
Takto malé zmenšení videa bude znamenat ztrátu malého množství detailů,
což bude pravděpodobně stěží postřehnutelné. Zvětšování by naopak vedlo
ke snížení kvality (pokud byste nezvýšili datový tok). Ořez odstraní tyto
pixely úplně. To je jedna z věcí, kterou byste si měli uvážit pro každý případ
zvlášť. Například pokud bylo DVD video vyrobeno pro televizi, měli byste se
vyvarovat vertikálnímu škálování, jelikož počet řádků odpovídá
originální nahrávce.
</p><p>
Při prohlídce jsme zjistili, že video je poměrně akční, s vysokým počtem
detailů, takže jsme zvolili datový tok 2400 Kbitů.
</p><p>
Nyní jsme připraveni provést dvouprůchodové enkódování. Průchod jedna:
</p><pre class="screen">
+mencoder dvd://1 -ofps 24000/1001 -oac copy -o <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -ovc lavc \
    -lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:autoaspect:vpass=1 \
    -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2
</pre><p>
A průchod dva je stejný, jen nastavíme <tt class="option">vpass=2</tt>:
</p><pre class="screen">
mencoder dvd://1 -ofps 24000/1001 -oac copy -o <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -ovc lavc \
    -lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:autoaspect:vpass=2 \
    -vf pullup,softskip,crop=720:352:0:62,hqdn3d=2:1:2
</pre><p>
</p><p>
Volby <tt class="option">v4mv:mbd=2:trell</tt> velmi zvýší kvalitu za cenu časové
náročnosti enkódování. Vcelku není důvod tyto volby vypustit, pokud je
primárním cílem kvalita. Volby <tt class="option">cmp=3:subcmp=3</tt>
vyberou porovnávací funkci, která poskytuje lepší kvalitu, než výchozí.
S tímto parametrem můžete zkusit experimentovat (nahlédněte do man stránky pro
seznam možných hodnot), jelikož různé funkce mohou mít velký vliv na kvalitu
v závislosti na zdrojovém materiálu. Například pokud zjistíte, že
<code class="systemitem">libavcodec</code> produkuje příliš mnoho
čtverečkových artefaktů, můžete zkusit zvolit experimentální NSSE jako
porovnávací funkci přes <tt class="option">*cmp=10</tt>.
</p><p>
V případě tohoto filmu bude výsledné AVI dlouhé 138 minut a veliké kolem 3GB.
A protože jste řekli, že na velikosti nezáleží, je to přijatelná velikost.
Ale pokud byste jej chtěli menší, můžete zkusit nižší datový tok.
Efekt zvyšování datového toku se totiž neustále snižuje, takže zatímco je
zlepšení po zvýšení z 1800 Kbitů na 2000 Kbitů zjevné, nemusí být již tak
velké nad 2000 Kbitů. Beze všeho s tím experimentujte, dokud nebudete
spokojeni.
</p><p>
Jelikož jsme protáhli video odšumovacím filtrem, měli bychom jej trochu přidat
během přehrávání. To, spolu s <tt class="option">spp</tt> post-procesním filtrem,
znatelně zvýší vnímanou kvalitu a pomůže odstranit čtverečkové artefakty ve
videu. S <span class="application">MPlayer</span>ovou volbou <tt class="option">autoq</tt>
může být množství postprocesingu prováděného filtrem spp přizpůsobováno
vytížení CPU. V tuto chvíli rovněž můžete provést korekci gama a/nebo barevnou
korekci k dosažení nejlepších výsledků. Například:
</p><pre class="screen">
mplayer <em class="replaceable"><code>Harry_Potter_2.avi</code></em> -vf spp,noise=9ah:5ah,eq2=1.2 -autoq 3
</pre><p>
</p></div></div><div class="sect1" title="10.4. Enkódování pomocí kodeku Xvid"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-xvid"></a>10.4. Enkódování pomocí kodeku <code class="systemitem">Xvid</code>
</h2></div></div></div><p>
<code class="systemitem">Xvid</code> je svobodná knihovna pro
enkódování MPEG-4 ASP video datových proudů.
Před začátkem enkódování budete muset <a class="link" href="#xvid" title="2.5.1. Xvid">
nastavit <span class="application">MEncoder</span> pro její podporu</a>.
</p><p>
Tato příručka se zaměřuje na poskytování stejného druhu informací
jako příručka enkódování s x264.
Takže prosím začněte přečtením
<a class="link" href="#menc-feat-x264-encoding-options-intro" title="10.5.1.1. Úvodem">první části</a>
této příručky.
</p><div class="sect2" title="10.4.1. Jaké volby by měly být použity, abychom dosáhli nejlepších výsledků?"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-intro"></a>10.4.1. Jaké volby by měly být použity, abychom dosáhli nejlepších výsledků?</h3></div></div></div><p>
Začněte prosím pročtením sekce
<code class="systemitem">Xvid</code> v manuálové stránce
<span class="application">MPlayer</span>u.
Tato část má být doplněním man stránky.
</p><p>
Výchozí nastavení Xvid jsou dobrým kompromisem mezi
rychlostí a kvalitou, takže je můžete bez obav použít, pokud
vám nebude něco v dalším textu jasné.
</p></div><div class="sect2" title="10.4.2. Volby pro enkódování s Xvid"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-options"></a>10.4.2. Volby pro enkódování s <code class="systemitem">Xvid</code></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>vhq</strong></span>
  Tato volba ovlivní rozhodovací algoritmus makrobloku, kde vyšší nastavení
  znamená lepší rozhodování.
  Výchozí nastavení mohou být bezpečně použita pro každé enkódování,
  zatímco vyšší nastavení vždy pomohou PSNR, ale je znatelně pomalejší.
  Poznamenejme, že lepší PSNR nemusí nutně znamenat, že bude obraz vypadat lépe,
  ale udává, že je blíže originálu.
  Vypnutí této volby viditelně zrychlí enkódování; pokud je pro vás
  rychlost kritická, pak to stojí za to.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bvhq</strong></span>
  Tato volba provádí to samé co vhq, ale v B-snímcích.
  Má zanedbatelný vliv na rychlost a trochu vylepšuje kvalitu
  (kolem +0.1dB PSNR).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>max_bframes</strong></span>
  Větší počet povolených po sobě jdoucích B-snímků obvykle zvyšuje
  komprimovatelnost, ačkoli to může vést k většímu počtu blokových artefaktů.
  Výchozí nastavení je dobrým kompromisem mezi komprimovatelností a
  kvalitou, ale můžete ji zvýšit nad 3, pokud toužíte po nízkém datovém toku.
  Můžete ji rovněž snížit na 1 nebo 0, pokud vám jde o perfektní kvalitu,
  ale v tom případě byste se měli ujistit, že máte nastaven dostatečně
  vysoký datový tok, aby byla jistota, že komrimátor nebude zvyšovat kvantizer,
  aby jej dosáhl.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bf_threshold</strong></span>
  Tato volba ovládá B-snímkovou citlivost enkodéru, kdy vyšší hodnota
  vede k častějšímu použití B-snímků (a naopak).
  Má být použita spolu s <tt class="option">max_bframes</tt>;
  pokud jste blázen do datového toku, měli byste  zvýšit jak
  <tt class="option">max_bframes</tt>, tak <tt class="option">bf_threshold</tt>,
  nebo naopak můžete zvýšit <tt class="option">max_bframes</tt> a snížit
  <tt class="option">bf_threshold</tt>, takže bude enkodér používat více
  B-snímků pouze na místech, které je <span class="bold"><strong>opravdu</strong></span>
  potřebují.
  Nízká hodnota <tt class="option">max_bframes</tt> a vysoká
  <tt class="option">bf_threshold</tt> asi není nejrozumnější volbou, jelikož přinutí
  enkodér umísťovat B-snímky na místa, které z nich nebudou těžit,
  ale sníží se jejich vizuální kvalita.
  Pokud však potřebujete být kompatibilní s domácími přehrávači, které
  podporují pouze staré DivX profily (ty podporují pouze 1 po sobě jdoucí
  B-snímek), je to vaše jediná cesta ke zvýšení komprimovatelnosti pomocí
  B-snímků.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>trellis</strong></span>
  Optimalizuje proces kvantizace pro dosažení nejlepšího kompromisu
  mezi PSNR a datovým tokem, což umožňuje znatelnou úsporu bitů.
  Ušetřené bity budou využity v jiných částech videa, což zvýší
  celkovou vizuální kvalitu.
  Měli byste ji vždy mít zapnutou, jelikož její kvalitativní přínos je značný.
  Dokonce i když potřebujete vyšší rychlost, nevypínejte ji, dokud jste
  nevypli <tt class="option">vhq</tt> a nezredukovali ostatní volby
  náročné na CPU na minimum.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>hq_ac</strong></span>
  Aktivuje metodu odhadu s menšími náklady na koeficienty, což trochu
  zmenší výstupní soubor (okolo  0,15 až 0,19%, což odpovídá zvýšení PSNR
  o méně než 0.01dB) při zanedbatelném vlivu na rychlost.
  Je proto doporučeno ponechat ji vždy zapnutou.
</p></li><li class="listitem"><p>
 <span class="bold"><strong>cartoon</strong></span>
  Volba navržená pro lepší enkódování kresleného obsahu. Nemá vliv
  na rychlost, pouze doladí heuristiku pro výběr režimu pro tento
  druh obsahu.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>me_quality</strong></span>
  Tato volba ovládá přesnost vyhledávání pohybu.
  Čím vyšší <tt class="option">me_quality</tt>, tím bude
  přesnější odhad původního pohybu a výsledný snímek
  přesněji zachytí originální pohyb.
  </p><p>
  Výchozí nastavení je nejlepší ve všech případech;
  takže ji nedoporučujeme vypínat, pokud nepotřebujete za každou cenu
  zvýšit rychlost, jelikož všechny bity ušetřené dobrým odhadem pohybu
  mohou být použity jinde a zvýšit tak celkovou kvalitu.
  Každopádně nechoďte níž než na 5, a když, tak jen jako poslední možnost.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_me</strong></span>
  Zlepšuje odhad pohybu tím, že bere v potaz i chroma (barevnou)
  informaci, zatímco samotné <tt class="option">me_quality</tt>
  používá pouze černobílou (luma).
  To spomalí enkódování o 5-10%, ale docela vylepší vizuální kvalitu
  omezením blokových artefaktů a zmenší velikost souboru asi o 1.3%.
  Pokud vám jde hlavně o rychlost, měli byste tuto volbu vypnout dříve,
  než začnete snižovat <tt class="option">me_quality</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>chroma_opt</strong></span>
  Je určena spíše ke zvýšení kvality barev a vyčištění bílých/černých
  okrajů, než k vylepšení koprimovatelnosti.
  To vám může pomoci omezit "red stairs" efekt.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>lumi_mask</strong></span>
  Zkouší přiřadit nižší datový tok částem obrázku, které lidské oko
  dobře nevidí, což umožní enkodéru použít ušetřené bity na
  důležitějších místech obrázku.
  Kvalita výsledku značně závisí na osobních preferencích a
  na typu a nastavení monitoru použitého pro prohlížení
  (typicky to nebude vypadat dobře pokud je jasný, nebo je
  to TFT monitor).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qpel</strong></span>
  Zvýší počet možných vektorů pohybu zvýšením
  přesnosti vyhledávání pohybu z poloviny pixelu na
  čtvrtinu pixelu.
  Ideou je nalezení lepších vektorů pohybu, které naoplátku
  sníží datový tok (což zvýší kvalitu).
  Vektory pohybu s přesností na čtvrt pixelu však vyžadují pro sebe
  pár bitů navíc a výsledné vektory ne vždy dávají (o mnoho) lepší
  výsledky.
  Docela často vydá kodek bity na vyšší přesnost, ale dosáhne jen malého
  nebo žádného zvýšení kvality.
  Naneštěstí není způsob jak zjistit možný zisk <tt class="option">qpel</tt>
  předem, takže musíte enkódovat s a bez ní, abyste měli jistotu.
  </p><p>
  <tt class="option">qpel</tt> může až zdvojnásobit čas enkódování a
  vyžaduje až o 25% více výpočetního výkonu pro dekódování.
  Volba není podporována všemi stolními přehrávači.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>gmc</strong></span>
  Pokouší se ušetřit bity v panoramatických scénách použitím jediného
  vektoru pohybu pro celý snímek.
  To téměř vždy zvýší PSNR, ale znatelně zpomalí enkódování
  (stejně jako dekódování).
  V každém případě byste ji měli používat pouze pokud máte
  <tt class="option">vhq</tt> nastavené na maximum.
  GMC v <code class="systemitem">Xvid</code> je mnohem
  sofistikovanější než v DivX, ale je podporována jen několika
  stolními přehrávači.
</p></li></ul></div></div><div class="sect2" title="10.4.3. Enkódovací profily"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-encoding-profiles"></a>10.4.3. Enkódovací profily</h3></div></div></div><p>
Xvid podporuje enkódovací profily pomocí volby <tt class="option">profile</tt>,
což je využíváno pro k zařazení omezení nastavení Xvid videoproudu tak,
aby byl přehratelný na všem, co podporuje vybraný profil.
Omezení se vstahují k rozlišením, datovému toku a různým MPEG-4
vlastnostem.
Následující tabulka ukazuje, co který profil podporuje.
</p><div class="informaltable"><table border="1"><colgroup><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><tbody><tr><td align="center"> </td><td colspan="4" align="center">Simple</td><td colspan="6" align="center">Advanced Simple</td><td colspan="6" align="center">DivX</td></tr><tr><td align="center">Název profilu</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">Handheld</td><td align="center">Portable NTSC</td><td align="center">Portable PAL</td><td align="center">Home Theater NTSC</td><td align="center">Home Theater PAL</td><td align="center">HDTV</td></tr><tr><td align="center">Šířka [pixely]</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">176</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">176</td><td align="center">352</td><td align="center">352</td><td align="center">720</td><td align="center">720</td><td align="center">1280</td></tr><tr><td align="center">Výška [pixely]</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">144</td><td align="center">144</td><td align="center">288</td><td align="center">288</td><td align="center">576</td><td align="center">576</td><td align="center">144</td><td align="center">240</td><td align="center">288</td><td align="center">480</td><td align="center">576</td><td align="center">720</td></tr><tr><td align="center">Snímková rychlost [fps]</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">30</td><td align="center">30</td><td align="center">15</td><td align="center">30</td><td align="center">25</td><td align="center">30</td><td align="center">25</td><td align="center">30</td></tr><tr><td align="center">Max průměrný datový tok [kbps]</td><td align="center">64</td><td align="center">64</td><td align="center">128</td><td align="center">384</td><td align="center">128</td><td align="center">128</td><td align="center">384</td><td align="center">768</td><td align="center">3000</td><td align="center">8000</td><td align="center">537.6</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">4854</td><td align="center">9708.4</td></tr><tr><td align="center">Nejvyšší průměrný datový tok za poslední 3 sekundy [kbps]</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">800</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">8000</td><td align="center">16000</td></tr><tr><td align="center">Max. B-snímků</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">2</td></tr><tr><td align="center">MPEG kvantizace</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Adaptivní kvantizace</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Enkódování prokládaného</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td></tr><tr><td align="center">Čtvrtpixelová přesnost</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">Globální kompenzace pohybu</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center">X</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div></div><div class="sect2" title="10.4.4. Příklady nastavení enkódování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-xvid-example-settings"></a>10.4.4. Příklady nastavení enkódování</h3></div></div></div><p>
Následující nastavení jsou příklady nastavení různých kombinací voleb
enkodéru, které ovlivňují poměr rychlost versus kvalita při shodném
cílovém datovém toku.
</p><p>
Veškerá nastavení byla testována na video vzorku 720x448 @30000/1001
snímků za sekundu, cílový datový tok byl 900kbps a prováděly se na
AMD-64 3400+ při 2400 MHz v režimu 64 bitů.
Každá kombinace nastavení má uvedenu změřenou rychlost enkódování
(ve snímcích za sekundu) a ztrátu PSNR (v dB) oproti nastavení
"velmi vysoká kvalita".
Rozumějte však že, v závislosti na vašem zdrojovém materiálu, typu
počítače a pokrokům ve vývoji, můžete dospět k velmi odlišným výsledkům.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Popis</th><th>Volby</th><th>Rychlost [fps]</th><th>Relativní ztráta PSNR [dB]</th></tr></thead><tbody><tr><td>Velmi vysoká kvalita</td><td><tt class="option">chroma_opt:vhq=4:bvhq=1:quant_type=mpeg</tt></td><td>16</td><td>0</td></tr><tr><td>Vysoká kvalita</td><td><tt class="option">vhq=2:bvhq=1:chroma_opt:quant_type=mpeg</tt></td><td>18</td><td>-0.1</td></tr><tr><td>Rychlé enkódování</td><td><tt class="option">turbo:vhq=0</tt></td><td>28</td><td>-0.69</td></tr><tr><td>Enkódování v reálném čase</td><td><tt class="option">turbo:nochroma_me:notrellis:max_bframes=0:vhq=0</tt></td><td>38</td><td>-1.48</td></tr></tbody></table></div></div></div><div class="sect1" title="10.5. Enkódování x264 kodekem"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-x264"></a>10.5. Enkódování
  <code class="systemitem">x264</code> kodekem</h2></div></div></div><p>
<code class="systemitem">x264</code> je svobodná knihovna pro
enkódování H.264/AVC video proudů.
Pře zahájením enkódování budete muset
<a class="link" href="#x264" title="2.5.2. x264">nastavit její podporu v <span class="application">MEncoder</span>u</a>.
</p><div class="sect2" title="10.5.1. Enkódovací volby x264"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-x264-encoding-options"></a>10.5.1. Enkódovací volby x264</h3></div></div></div><p>
Začněte prosím prohlídkou sekce
<code class="systemitem">x264</code> man stránky
<span class="application">MPlayer</span>u.
Tato sekce je zamýšlena jako doplněk manuálové stránky.
Zde naleznete tipy, které volby budou nejspíše zajímat většinu lidí.
Man stránka je více uhlazená, ale také více vyčerpávající a
občas nabízí mnohem lepší technické detaily.
</p><div class="sect3" title="10.5.1.1. Úvodem"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-intro"></a>10.5.1.1. Úvodem</h4></div></div></div><p>
Tato příručka pokrývá dvě hlavní kategorie enkódovacích voleb:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  Volby které mění dobu enkódování za kvalitu
</p></li><li class="listitem"><p>
  Volby které mohou být použitelné pro naplnění různých
  osobních preferencí a speciálních požadavků
</p></li></ol></div><p>
Nakonec jen vy můžete rozhodnout, které volby jsou nejlepší pro
vaše účely. Rozhodování v první kategorii voleb je nejjednodušší:
stačí když zhodnotíte zda změny kvality ospravedlní rychlostní rozdíly.
Druhá skupina voleb může být mnohem subjektivnější záležitostí a
v úvahu může přijít více faktorů. Poznamenejme, že některé volby
"osobních preferencí a speciálních požadavků" mohou také značně
ovlivnit kvalitu nebo rychlost enkódování, ale to není jejich hlavní funkce.
Několik voleb "osobních preferencí" může dokonce způsobit změny,
po kterých se někomu zdá být výsledek lepší a jinému horší.
</p><p>
Než budeme pokračovat, poznamenejme, že tento návod používá jediné měřítko
kvality: celkový PSNR.
Stručné vysvětlení co je to PSNR, naleznete
<a class="ulink" href="http://en.wikipedia.org/wiki/PSNR" target="_top">ve Wikipedii pod heslem PSNR</a>.
Celkové PSNR je poslední hlášené PSNR číslo při zařazení volby
<tt class="option">psnr</tt> v <tt class="option">x264encopts</tt>.
Kdykoli píšeme o PSNR, je jedním z předpokladů tohoto sdělení
to, že jsou použity shodné datové toky.
</p><p>
Téměř všechny komentáře v tomto návodu předpokládají, že enkódujete
dvouprůchodově.
Při porovnávání voleb jsou zde dva hlavní důvody pro použití dvouprůchodového
enkódování.
Zaprvé, dvouprůchodové enkódování vám získá zhruba 1dB PSNR, což je
znatelný rozdíl.
Zadruhé, testování voleb pomocí přímého porovnání kvality v jednoprůchodových
výsledcích je pochybné, jelikož se datový tok značně liší s každým
enkódováním.
Není vždy snadné určit, zda se změnila kvalita díky změně voleb, nebo
z větší části odpovídají změnám datového toku.
</p></div><div class="sect3" title="10.5.1.2. Volby které primárně ovlivňují rychlost a kvalitu"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-speedvquality"></a>10.5.1.2. Volby které primárně ovlivňují rychlost a kvalitu</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>subq</strong></span>:
  Z voleb, které umožňují vyměnit čas za kvalitu, jsou obvykle nejdůležitější
  <tt class="option">subq</tt> a <tt class="option">frameref</tt> (viz níže).
  Máte-li zájem ovlivnit jak rychlost, tak kvalitu, jsou to první volby,
  které byste měli zvážit.
  Ve smyslu rychlosti se spolu volby <tt class="option">frameref</tt> a
  <tt class="option">subq</tt> velmi silně ovlivňují.
  Zkušenosti ukazují, že při jednom referenčním snímku si
  <tt class="option">subq=5</tt> vezme asi o 35% více času než
  <tt class="option">subq=1</tt>.
  Při 6 referenčních snímcích naroste spomalení nad 60%.
  Vliv <tt class="option">subq</tt> na PSNR se zdá být poměrně stálý,
  bez ohledu na počet referenčních snímků.
  Typicky <tt class="option">subq=5</tt> získá 0.2-0.5 dB
  celkového PSNR přes <tt class="option">subq=1</tt>.
  To je obvykle již viditelné.
  </p><p>
  Režim <tt class="option">subq=6</tt> je pomalejší a vede k vyšší kvalitě
  za rozumnou cenu.
  Oproti <tt class="option">subq=5</tt> obvykle získává 0.1-0.4 dB
  celkového PSNR za cenu ztráty rychlosti 25%-100%.
  Narozdíl od ostatních úrovní <tt class="option">subq</tt> nezávisí chování
  <tt class="option">subq=6</tt> tolik na <tt class="option">frameref</tt>
  a <tt class="option">me</tt>. Místo toho závisí efektivita <tt class="option">subq=6
  </tt> hlavně na počtu použitých B-snímků. Při běžném použití
  to znamená, že <tt class="option">subq=6</tt> má velký vliv jak na rychlost, tak na
  kvalitu v komplexních, velmi pohyblivých scénách, ale nemusí mít takový vliv
  ve scénách s malým pohybem. Poznamenejme, že stále doporučujeme nastavit
  <tt class="option">bframes</tt> na nenulovou hodnotu (viz níže).
  </p><p>
  <tt class="option">subq=7</tt> je nejpomalejší, s nejvyšší kvalitou.
  V porovnání s <tt class="option">subq=6</tt>, obvykle získá 0.01–0.05 dB
  globálního PSNR za zpomalení v rozmezí 15%–33%.
  Jelikož je poměr získané kvality ku ztrátě rychlosti docela malý, měli byste
  tuto volbu používat pouze pokud chcete ušetřit každý možný bit a doba
  enkódování není problém.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>frameref</strong></span>:
  Výchozí nastavení <tt class="option">frameref</tt> je 1, ale nemělo by to být bráno
  tak, že je rozumné nastavovat jej na 1.
  Pouhé zvýšení <tt class="option">frameref</tt> na 2 získá okolo
  0.15dB PSNR s 5-10% spomalením, což je zřejmě dobrý obchod.
  <tt class="option">frameref=3</tt> získá kolem 0.25dB PSNR navíc k
  <tt class="option">frameref=1</tt>, což již může být viditelný
  rozdíl.
  <tt class="option">frameref=3</tt> je asi o 15% pomalejší než
  <tt class="option">frameref=1</tt>.
  Naneštěstí se zisk rychle vytrácí.
  Při <tt class="option">frameref=6</tt> můžete očekávat zisk pouze
  0.05-0.1 dB nad <tt class="option">frameref=3</tt> při dodatečném
  15% zpomalení.
  Nad <tt class="option">frameref=6</tt> je zisk kvality obvykle velmi malý
  (ačkoli byste měli mít na paměti, že se to může výrazně lišit v závislosti
  na zdrojovém materiálu).
  V poměrně typickém případě zlepší <tt class="option">frameref=12</tt>
  celkový PSNR o pouhé 0.02dB nad <tt class="option">frameref=6</tt>,
  při spomalení o 15%-20%.
  Při tak vysokých hodnotách <tt class="option">frameref</tt> lze říct pouze
  jedinou dobrou věc, a to že jejich další zvyšování téměř nikdy
  <span class="bold"><strong>nesníží</strong></span> PSNR, ale další zisk kvality
  je stěží měřitelný, natož viditelný.
  </p><div class="note" title="Poznámka:" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka:</h3><p>
  Zvýšení <tt class="option">frameref</tt> na nemístně vysokou hodnotu
  <span class="bold"><strong>může</strong></span> a
  <span class="bold"><strong>obvykle taky sníží</strong></span>
  efektivitu kódování, pokud vypnete CABAC.
  Se zapnutým CABAC (výchozí chování) se zdá být možnost nastavit
  <tt class="option">frameref</tt> "příliš vysoko" příliš vzdálená na to,
  abyste se tím museli trápit a v budoucnu mohou optimalizace
  tuto možnost zcela vyloučit.
  </p></div><p>
  Pokud vám záleží na rychlosti, bývá vhodným kompromisem použít
  nízké hodnoty <tt class="option">subq</tt> a <tt class="option">frameref</tt>
  v prvním průchodu a zvýšit je ve druhém.
  Typicky to má zanedbatelný záporný vliv na konečnou kvalitu:
  Pravděpodobně stratíte méně než 0.1dB PSNR, což by měl být až příliš
  malý rozdíl, než aby byl vidět.
  Odlišné hodnoty <tt class="option">frameref</tt> však mohou místy ovlivnit
  volbu typu snímku.
  Nejspíš to budou ojedinělé případy, ale chcete-li si být zcela jisti,
  zjistěte, jestli vaše video obsahuje buď blýskavé vzory přes celou obrazovku,
  nebo rozsáhlé krátkodobé změny, které by mohly vynutit I-snímek.
  Nastavte <tt class="option">frameref</tt> pro první průchod tak, aby byl
  dostatečně velký pro pokrytí doby bliknutí (nebo změny).
  Například, pokud scéna přepíná tam a zpět mezi dvěma obrázky přes tři snímky,
  nastavte <tt class="option">frameref</tt> pro první průchod na 3 a více.
  Tento případ je nejspíš zcela ojedinělý v hraných filmech, ale občas se
  vyskytuje v záznamech z videoher.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>me</strong></span>:
  Tato volba je určena pro výběr metody vyhledávání pohybu.
  Změnou této volby jednoduše měníte poměr kvalita-versus-rychlost.
  Volba <tt class="option">me=dia</tt> je jen o málo procent rychlejší než
  výchozí vyhledávání za cenu pod 0.1dB globálního PSNR.
  Výchozí nastavení (<tt class="option">me=hex</tt>) je rozumným kompromisem
  mezi rychlostí a kvalitou. Volba <tt class="option">me=umh</tt> získá o trošku méně
  než 0.1dB globální PSNR, při spomalení, které se liší v závislosti na
  <tt class="option">frameref</tt>.  Při vysokých hodnotách
  <tt class="option">frameref</tt> (řekněme 12 nebo tak), je <tt class="option">me=umh</tt>
  asi o 40% pomalejší než výchozí <tt class="option"> me=hex</tt>. Při
  <tt class="option">frameref=3</tt>, klesne způsobené spomalení na
  25%-30%.
  </p><p>
  Volba <tt class="option">me=esa</tt> používá tak rozsáhlé vyhledávání, že je příliš
  pomalá pro praktické využití.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>partitions=all</strong></span>:
  Tato volba zapíná použití bloků 8x4, 4x8 a 4x4 v predikovaných
  makroblocích (navíc k výchozím blokům).
  Její aktivace vede k poměrně stálé
  10%-15% ztrátě rychlosti. Tato volba je poměrně neužitečná ve zdroji
  obsahujícím pouze pomalý pohyb, naproti tomu u některých zdrojů s rychlým
  pohybem, přesněji zdrojů s velkým množstvím malých pohyblivých objektů,
  můžete očekávat zisk okolo 0.1dB.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>bframes</strong></span>:
  Použitelnost B-snímků je ve většině ostatních kodeků diskutabilní.
  V H.264 se to změnilo: jsou zde nové techniky a typy bloků pro použití
  v B-snímcích.
  Obvykle i naivní algoritmus pro výběr B-snímku může zajistit znatelný
  zisk PSNR.
  Také je zajímavé, že pokud vypnete adaptivní rozhodování o B-snímku
  (<tt class="option">nob_adapt</tt>), zvýší obvykle enkódování s
  <tt class="option">bframes</tt> o trochu rychlost enkódování.
  </p><p>
  S vypnutým adaptivním rozhodováním o B-snímku
  (<tt class="option">x264encopts</tt> - volba <tt class="option">nob_adapt</tt>),
  optimální hodnota tohoto nastavení nebývá obvykle vyšší než
  <tt class="option">bframes=1</tt>, jinak mouhou utrpět velmi pohyblivé scény.
  Se zapnutým adaptivním rozhodováním o B-snímku (výchozí chování),
  je obvykle bezpečné použít vyšší hodnoty; enkodér se pokusí snížit
  použití B-snímků ve scénách, kde by snížily kompresi.
  Enkodér zřídka použije více než 3 nebo 4 B-snímky;
  nastavení této volby na vyšší hodnotu bude mít jen nepatrný vliv.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>b_adapt</strong></span>:
  Poznámka: Výchozí je zapnuto.
  </p><p>
  Je-li tato volba zapnuta, bude enkodér používat rychlou
  heuristiku pro snížení počtu B-snímků ve scénách, kde by jejich
  použitím příliš nezískaly.
  Můžete použít <tt class="option">b_bias</tt> pro nastavení jak přátelský
  bude enkodér k B-snímkům.
  Spomalení působené adaptivními B-snímky je nyní spíše malé, ale
  stejně tak potenciální zisk kvality.
  Obvykle však nijak neškodí.
  Poznamenejme, že ovlivňuje rychlost a rozhodování o typu snímku pouze
  v prvním průchodu.
  <tt class="option">b_adapt</tt> a <tt class="option">b_bias</tt> nemají žádný vliv
  v následných průchodech.
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>b_pyramid</strong></span>:
  Pokud používáte &gt;=2 B-snímky, můžete také zapnout tuto volbu; jak
  říká man stránka, dostanete malé zvýšení kvality bez ztráty rychlosti.
  Poznamenejme, že tato videa nelze číst dekodéry založenými na libavcodec
  staršími než 5. března 2005.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>weight_b</strong></span>:
  V typických případech tato volba nepřináší velký zisk.
  V prolínacích nebo stmívacích scénách však vážená predikce
  umožňuje poměrně velkou úsporu datového toku.
  V MPEG-4 ASP bývá stmívání obvykle nejlépe kódováno jako série
  velkých I-snímků; použití vážené predikce v B-snímcích umožňuje
  změnit alespoň některé z nich na rozumně menší B-snímky.
  Spomalení enkódování se zdá být minimální, pokud nějaké je.
  Rovněž, v rozporu s tím, co si někteří lidé mohou myslet,
  požadavky dekodéru na CPU nejsou váženou predikcí ovlivněny,
  ostatní možnosti jsou stejně náročné.
  </p><p>
  Naneštěstí má aktuálně algoritmus adaptivního rozhodování o B-snímcích
  výraznou tendenci vyvarovat se B-snímků při stmívání.
  Dokud se to nezmění, bude dobré přidat
  <tt class="option">nob_adapt</tt> do x264encopts, pokud očekáváte, že stmívání
  bude mít znatelný vliv ve vašem konkrétním klipu.
  </p></li><li class="listitem"><p><a name="menc-feat-x264-encoding-options-speedvquality-threads"></a>
  <span class="bold"><strong>threads</strong></span>:
  Tato volba umožňuje vytvořit více vláken pro enkódování na více procesorech.
  Jejich počet si můžete nastavit ručně, nebo raději nastavte
  <tt class="option">threads=auto</tt> a ponechte
  <code class="systemitem">x264</code> detekovat kolik máte procesorů
  k dispozici a zvolit vhodný počet vláken.
  Pokud máte víceprocesorový stroj, měli byste tuto volbu uvážit, jelikož dokáže
  lineárně zvýšit rychlost podle počtu procesorových jader
  (okolo 94% na jádro) při velmi malém snížení kvality (asi 0,005dB pro duální procesor
  a okolo 0,01dB pro čtyřprocesorový stroj).
  </p></li></ul></div></div><div class="sect3" title="10.5.1.3. Volby náležející různým preferencím"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-x264-encoding-options-misc-preferences"></a>10.5.1.3. Volby náležející různým preferencím</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>Dvouprůchodové enkodování</strong></span>:
  Výše jsme doporučovali vždy používat dvouprůchodové enkódování, ale
  stále existují důvody proč jej nepoužít. Například pokud zachytáváte
  TV vysílání a enkódujete v reálném čase, nemáte jinou možnost, než
  použít jeden průchod. Jeden průchod je samozřejmě rychlejší
  než dva; pokud použijete stejné volby v obou průchodech, pak je dvouprůchodové
  enkódování téměř dvakrát pomalejší.
  </p><p>
  Stále jsou však velmi dobré důvody pro použití dvouprůchodového režimu.
  Volič datového toku v jednoprůchodovém režimu není oduševnělý a často
  dělá nerozumné volby, protože nevidí celkový obraz. Předpokládejme, že
  máte například dvouminutové video skládající se ze dvou částí.
  První polovina je vysoce pohyblivá scéna dlouhá 60 sekund, která samostatně
  vyžaduje kolem 2500kbps, aby vypadala slušně.
  Hned za ní následuje méně náročná 60 sekundová scéna, která vypadá dobře
  při 300kbps. Vyžádáte si 1400kbps, což je teoreticky dostatečné pro pokrytí
  obou scén. Jednoprůchodový volič datového toku v tom případě učiní
  několik "chyb". První blok může skončit těžce překvantizovaný, takže
  bude nepoužitelně a zbytečně čtverečkovaný. Druhá část bude velmi
  podkvantizovaná; to může vypadat dobře, ale spotřeba bitů na tento
  vzhled je nerozumně vysoká. Čeho se dá ještě hůře vyvarovat je problém
  přechodu mezi těmito scénami. První sekundy málo pohyblivé poloviny
  budou těžce překvantizovány, protože volič toku stále očekává nároky na
  datový tok, se kterými se potýkal v první polovině videa.
  Tato "chybová doba" překvantizované málo pohyblivé scény bude vypadat
  neskutečně špatně a skutečně použije méně než 300kbps, které by potřebovala,
  aby vypadala dobře. Existují způsoby pro zmírnění nástrah jednoprůchodového
  enkódování, ale ty mohou tíhnout ke zvyšování nepřesnosti datového toku.
  </p><p>
  Víceprůchodový volič datového toku nabízí velké výhody oproti jednomu
  průchodu. Díky statistikám generovaným v prvním průchodu může enkodér
  určit, s rozumnou přesností, bitovou náročnost enkódování každého snímku
  při jakémkoli kvantizéru. To umožňuje mnohem racionálnější, lépe naplánovanou
  spotřebu bitů mezi drahými (hodně pohyblivými) a levnými (málo pohyblivými)
  scénami. Několik nápadů jak upravit tuto spotřebu podle svého naleznete níže
  viz <tt class="option">qcomp</tt>.
  </p><p>
  Navíc dva průchody nemusí trvat dvakrát tak dlouho jako jeden. Můžete upravit
  volby prvního průchodu pro nejvyšší rychlost a nižší kvalitu.
  Pokud si dobře zvolíte své volby, můžete mít velmi rychlý první průchod.
  Výsledná kvalita  ve druhém průchodu bude trochu horší, protože predikce
  velikosti je méně přesná, ale rozdíl v kvalitě je obvykle příliž malý, aby
  byl vidět. Zkuste např. přidat
  <tt class="option">subq=1:frameref=1</tt> do <tt class="option">x264encopts</tt>
  prvnímu průchodu. Pak ve druhém průchodu použijte pomalejší volby pro
  vyšší kvalitu:
  <tt class="option">subq=6:frameref=15:partitions=all:me=umh</tt>
  </p></li><li class="listitem"><p>
  <span class="bold"><strong>Tříprůchodové enkódování</strong></span>?
  x264 nabízí možnost provádět větší počet následných průchodů.
  Pokud zadáte <tt class="option">pass=1</tt> v prvním průchodu a pak použijete
  <tt class="option">pass=3</tt> v následujícím průchodu, pak tento průchod
  jak načte statistiky z předchozího, tak zapíše své vlastní. Další průchod
  po něm pak bude mít velmi dobrou základnu pro vysoce přesnou predikci
  velikosti snímků při zvoleném kvantizéru. V praxi se celková kvalita
  z toho vzešlá blíží nule a je možné, že třetí průchod bude mít horší
  celkový PSNR než jeho předchúdce. Při běžném použití tři průchody pomůžou,
  pokud dostanete buď špatnou predikci datového toku, nebo špatně vypadající
  přechody mezi scénami po použití pouze dvou průchodů.
  To se nejspíš může stát v extrémně krátkých klipech. Je rovněž několik
  zvláštních případů, ve kterých jsou tři a více průchodů dobré pro
  pokročilé uživatele, ale pro stručnost se zde těmito případy zabývat nebudeme.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>qcomp</strong></span>:
  <tt class="option">qcomp</tt> mění poměr počtu bitů alokovaných "drahým"
  velmi pohyblivým snímkům k "levným" málo pohyblivým snímkům. V jednom
  extrému, <tt class="option">qcomp=0</tt> vede k čistě konstantnímu datovému toku.
  Což typicky činí velmi pohyblivé scény velmi ošklivé, zatímco scény
  s malým pohybem vypadají perfektně, ale spotřebovávají mnohem větší datový
  tok, než by potřebovaly k tomu, aby ještě vypadaly skvěle.
  Ve druhém extrému, <tt class="option">qcomp=1</tt>, dostanete téměř konstantní
  kvantizační parametr (QP). Konstantní QP nevypadá špatně, ale většina
  lidí soudí, že je rozumnější snížit trochu datový tok v extrémně
  náročných scénách (kde snížení kvality není tak vidět) a realokovat je
  do scén, které je snadnější enkódovat při excelentní kvalitě.
  Výchozí hodnota <tt class="option">qcomp</tt> je 0.6, což může být, podle
  některých lidí poněkud málo (běžně se rovněž používá 0.7-0.8).
</p></li><li class="listitem"><p>
  <span class="bold"><strong>keyint</strong></span>:
  <tt class="option">keyint</tt> je výhradně pro výměnu míry převinutelnosti
  za efektivitu kódování. Výchozí hodnota <tt class="option">keyint</tt> je 250.
  V materiálu 25 snímků za sekundu to zajišťuje schopnost převíjení
  s 10 sekundovou přesností. Pokud soudíte, že bude důležité a užitečné
  být schopen převíjet s přesností 5 sekund, nastavte
  <tt class="option">keyint=125</tt>;
  to ovšem trochu sníží kvalitu/datový tok. Pokud vám jde jen o kvalitu, nikoli
  převinutelnost, můžete si nastavit mnohem vyšší hodnoty
  (rozumějte že zisk z toho klesá a může být neznatelný až žádný).
  Video proud bude stále mít převíjecí body, pokud jsou zde nějaké změny scény.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>deblock</strong></span>:
  Tato věc začíná být trochu kontroverzní.
  </p><p>
  H.264 definuje jednoduchou deblokovací proceduru I-bloků, která používá
  přednastavených sil a prahů závislých na QP daného bloku.
  Výchozí je, že bloky s vysokým QP jsou filtrovány silně a bloky s nízkým QP
  nejsou deblokovány vůbec.
  Přednastavené síly definované standardem jsou dobře zvoleny a
  vyváženy tak, že jsou optimální z hlediska PSNR pro libovolné
  video, které zkoušíte enkódovat.
  Volba <tt class="option">deblock</tt> umožňuje nastavit offsety přednastaveným
  deblokovacím prahům.
  </p><p>
  Zdá se, že si mnoho lidí myslí, že je dobré snížit sílu deblokovacího filtru
  o vysokou hodnotu (řekněme, -3).
  To však není téměř nikdy dobrý nápad a v mnoha případech lidé,
  kteří to dělají, nerozumí dobře tomu, jak pracuje výchozí deblokování.
  </p><p>
  První a nejdůležitější věc, kterou byste měli vědět o in-loop
  deblokovacím filtru, je, že výchozí prahy jsou téměř vždy optimální
  z hlediska PSNR.
  V řídkých případech, kdy nejsou, je ideální offset plusmínus 1.
  Úprava deblokovacích parametrů o větší hodnotu téměř zaručeně
  poškodí PSNR.
  Zesílení filtru setře více detailů; oslabení filtru povede k
  zvýšené viditelnosti blokování.
  </p><p>
  Rozhodně je hloupost snižovat deblokovací prahy pokud má vaše video
  převážně nízkou plošnou komplexnost (čili málo detailů nebo šumu).
  In-loop filtr odvádí téměř výbornou práci v ukrývání
  artefaktů, které se mohou vyskytnout.
  Pokud má zdroj vysokou plšnou komplexnost, pak jsou artefakty méně viditelné.
  To proto, že kroužkování vypadá podobně jako detail nebo šum.
  Lidské oko snadno rozpozná, pokud je odstraněn detail, ale ne
  už tak snadno pozná, že je šum reprezentován špatně.
  Když příjde na subjektivní kvalitu, pak jsou detaily a šum do jisté míry
  zaměnitelné.
  Oslabením deblokovacího filtru nejspíše zvýšíte chybu, přidáním
  kroužkových artefaktů, ale oko si toho nevšimne, jelikož je zamění
  za detaily.
  </p><p>
  <span class="bold"><strong>Ani to</strong></span> však neospravedlňuje
  oslabení deblokovacího filtru.
  Obecně dostanete kvalitnější šum pomocí postprocesingu.
  Pokud vaše H.264 videa vypadají příliš neostře nebo rozmazaně, zkuste si
  pohrát s <tt class="option">-vf noise</tt> při přehrávání.
  Volba <tt class="option">-vf noise=8a:4a</tt> by měla skrýt většinu středně silných
  artefaktů.
  Téměř určitě to bude vypadat lépe, než výsledky, které byste mohli dosáhnout
  pohráváním si s deblokovacím filtrem.
  </p></li></ul></div></div></div><div class="sect2" title="10.5.2. Příklady nastavení enkódování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-x264-example-settings"></a>10.5.2. Příklady nastavení enkódování</h3></div></div></div><p>
Následující nastavení jsou příklady nastavení různých kombinací voleb
enkodéru, které ovlivňují poměr rychlost versus kvalita při shodném
cílovém datovém toku.
</p><p>
Veškerá nastavení byla testována na video vzorku 720x448 @30000/1001
snímků za sekundu, cílový datový tok byl 900kbps a prováděly se na
AMD-64 3400+ při 2400 MHz v režimu 64 bitů.
Každá kombinace nastavení má uvedenu změřenou rychlost enkódování
(ve snímcích za sekundu) a ztrátu PSNR (v dB) oproti nastavení
"velmi vysoká kvalita".
Rozumějte však že, v závislosti na vašem zdrojovém materiálu, typu
počítače a pokrokům ve vývoji, můžete dospět k velmi odlišným výsledkům.
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Popis</th><th>Volby</th><th>Rychlost [fps]</th><th>Relativní ztráta PSNR [dB]</th></tr></thead><tbody><tr><td>Velmi vysoká kvalita</td><td><tt class="option">subq=6:partitions=all:8x8dct:me=umh:frameref=5:bframes=3:b_pyramid:weight_b</tt></td><td>6</td><td>0</td></tr><tr><td>Vysoká kvalita</td><td><tt class="option">subq=5:8x8dct:frameref=2:bframes=3:b_pyramid:weight_b</tt></td><td>13</td><td>-0.89</td></tr><tr><td>Rychlé enkódování</td><td><tt class="option">subq=4:bframes=2:b_pyramid:weight_b</tt></td><td>17</td><td>-1.48</td></tr></tbody></table></div></div></div><div class="sect1" title="10.6. Enkódování rodinou kodeků Video For Windows"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-video-for-windows"></a>10.6. 
  Enkódování rodinou kodeků
  <code class="systemitem">Video For Windows</code>
</h2></div></div></div><p>
Video for Windows poskytuje jednoduché enkódování pomocí binárních videokodeků.
Můžete enkódovat následujícími kodeky (pokud jich máte víc, řekněte nám to
prosím!)
</p><p>
Pamatujte, že podpora těchto kodeků je velmi experimentální a některé z nich
nemusí pracovat správně. Některé kodeky budou pracovat pouze v určitých
barevných prostorech. Pokud kodek selže, zkuste
<tt class="option">-vf format=bgr24</tt> a <tt class="option">-vf format=yuy2</tt>.
</p><div class="sect2" title="10.6.1. Podporované kodeky Video for Windows"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-enc-vfw-video-codecs"></a>10.6.1. Podporované kodeky Video for Windows</h3></div></div></div><p>
</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Název souboru videokodeku</th><th>Popis (FourCC)</th><th>md5sum</th><th>Poznámka</th></tr></thead><tbody><tr><td>aslcodec_vfw.dll</td><td>Alparysoft bezztrátový kodek vfw (ASLC)</td><td>608af234a6ea4d90cdc7246af5f3f29a</td><td> </td></tr><tr><td>avimszh.dll</td><td>AVImszh (MSZH)</td><td>253118fe1eedea04a95ed6e5f4c28878</td><td>vyžaduje <tt class="option">-vf format</tt></td></tr><tr><td>avizlib.dll</td><td>AVIzlib (ZLIB)</td><td>2f1cc76bbcf6d77d40d0e23392fa8eda</td><td> </td></tr><tr><td>divx.dll</td><td>DivX4Windows-VFW</td><td>acf35b2fc004a89c829531555d73f1e6</td><td> </td></tr><tr><td>huffyuv.dll</td><td>HuffYUV (bezztrátový) (HFYU)</td><td>b74695b50230be4a6ef2c4293a58ac3b</td><td> </td></tr><tr><td>iccvid.dll</td><td>Cinepak Video (cvid)</td><td>cb3b7ee47ba7dbb3d23d34e274895133</td><td> </td></tr><tr><td>icmw_32.dll</td><td>Motion Wavelets (MWV1)</td><td>c9618a8fc73ce219ba918e3e09e227f2</td><td> </td></tr><tr><td>jp2avi.dll</td><td>ImagePower MJPEG2000 (IPJ2)</td><td>d860a11766da0d0ea064672c6833768b</td><td><tt class="option">-vf flip</tt></td></tr><tr><td>m3jp2k32.dll</td><td>Morgan MJPEG2000 (MJ2C)</td><td>f3c174edcbaef7cb947d6357cdfde7ff</td><td> </td></tr><tr><td>m3jpeg32.dll</td><td>Morgan Motion JPEG Codec (MJPG)</td><td>1cd13fff5960aa2aae43790242c323b1</td><td> </td></tr><tr><td>mpg4c32.dll</td><td>Microsoft MPEG-4 v1/v2</td><td>b5791ea23f33010d37ab8314681f1256</td><td> </td></tr><tr><td>tsccvid.dll</td><td>TechSmith Camtasia Screen Codec (TSCC)</td><td>8230d8560c41d444f249802a2700d1d5</td><td>shareware chyba na windows</td></tr><tr><td>vp31vfw.dll</td><td>On2 Open Source VP3 Codec (VP31)</td><td>845f3590ea489e2e45e876ab107ee7d2</td><td> </td></tr><tr><td>vp4vfw.dll</td><td>On2 VP4 Personal Codec (VP40)</td><td>fc5480a482ccc594c2898dcc4188b58f</td><td> </td></tr><tr><td>vp6vfw.dll</td><td>On2 VP6 Personal Codec (VP60)</td><td>04d635a364243013898fd09484f913fb</td><td> </td></tr><tr><td>vp7vfw.dll</td><td>On2 VP7 Personal Codec (VP70)</td><td>cb4cc3d4ea7c94a35f1d81c3d750bc8d</td><td>vadné FourCC?</td></tr><tr><td>ViVD2.dll</td><td>SoftMedia ViVD V2 kodek VfW (GXVE)</td><td>a7b4bf5cac630bb9262c3f80d8a773a1</td><td> </td></tr><tr><td>msulvc06.DLL</td><td>MSU Lossless kodek (MSUD)</td><td>294bf9288f2f127bb86f00bfcc9ccdda</td><td>
  Dekódovatelný <span class="application">Window Media Player</span>em,
  <span class="application">MPlayer</span>em nikoli (zatím).
  </td></tr><tr><td>camcodec.dll</td><td>CamStudio lossless video kodek (CSCD)</td><td>0efe97ce08bb0e40162ab15ef3b45615</td><td>sf.net/projects/camstudio</td></tr></tbody></table></div><p>

První pole obsahuje názvy kodeků, které by měly být zadány parametru
<code class="literal">codec</code>, například:
<tt class="option">-xvfwopts codec=divx.dll</tt>
Kód FourCC používaný jednotlivými kodeky jsou uvedeny v závorce.
</p><div class="informalexample"><p>
Příklad převodu ISO DVD upoutávku na VP6 flash video soubor
s použitím compdata nastavení datového toku:
</p><pre class="screen">
mencoder -dvd-device <em class="replaceable"><code>zeiram.iso</code></em> dvd://7 -o <em class="replaceable"><code>upoutavka.flv</code></em> \
-ovc vfw -xvfwopts codec=vp6vfw.dll:compdata=onepass.mcf -oac mp3lame \
-lameopts cbr:br=64 -af lavcresample=22050 -vf yadif,scale=320:240,flip \
-of lavf
</pre><p>
</p></div></div><div class="sect2" title="10.6.2. Použití vfw2menc pro vytvoření souboru s nastavením kodeku."><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-video-for-windows-bitrate-settings"></a>10.6.2. Použití vfw2menc pro vytvoření souboru s nastavením kodeku.</h3></div></div></div><p>
  Pro enkódování s Video for Windows kodeky, budete muset nastavit datový tok
  a další volby. Funkčnost je potvrzena na platformně x86 na *NIX i Windows.
</p><p>
  Nejprve musíte sestavit program <span class="application">vfw2menc</span>.
  Ten je umístěn v podadresáři <tt class="filename">TOOLS</tt>
  zdrojových kódů MPlayeru.
  Pro sestavení na Linuxu můžete použít <span class="application">Wine</span>:
</p><pre class="screen">winegcc vfw2menc.c -o vfw2menc -lwinmm -lole32</pre><p>

Pro sestavení na Windows v <span class="application">MinGW</span> nebo
<span class="application">Cygwin</span> použijte:
</p><pre class="screen">gcc vfw2menc.c -o vfw2menc.exe -lwinmm -lole32</pre><p>

Pro sestavení v <span class="application">MSVC</span> budete potřebovat getopt.
Getopt lze najít v originálním <span class="application">vfw2menc</span>
archivu dostupném na stránkách:
<a class="ulink" href="http://oss.netfarm.it/mplayer-win32.php" target="_top">MPlayer on win32</a> projektu.
</p><div class="informalexample"><p>
  Níže uvádíme příklad s VP6 kodekem.
</p><pre class="screen">
vfw2menc -f VP62 -d vp6vfw.dll -s firstpass.mcf
</pre><p>
To otevře dialogové okno VP6 kodeku.
Pro druhý průchod opakujte tento krok, ale
použijte <tt class="option">-s <em class="replaceable"><code>secondpass.mcf</code></em></tt>.
</p></div><p>
Uživatelé Windows mohou použít
<tt class="option">-xvfwopts codec=vp6vfw.dll:compdata=dialog</tt>, aby dostali
dialogové okno kodeku před zahájením enkódování.
</p></div></div><div class="sect1" title="10.7. Použití MEncoderu pro vytvoření QuickTime-kompatibilních souborů"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-quicktime-7"></a>10.7. Použití <span class="application">MEncoder</span>u pro vytvoření
<span class="application">QuickTime</span>-kompatibilních souborů</h2></div></div></div><div class="sect2" title="10.7.1. Proč by někdo chtěl vytvářet QuickTime-kompatibilní soubory?"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-why-use-it"></a>10.7.1. Proč by někdo chtěl vytvářet
<span class="application">QuickTime</span>-kompatibilní soubory?</h3></div></div></div><p>
  Je několik důvodů, proč můžete chtít vytvářet
  <span class="application">QuickTime</span>-kompatibilní soubory.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Chcete, aby byl každý počítačový anlfabet schopen sledovat vaše
  videa na jakékoli rozšířené platformě (Windows, Mac OS X, Unixy …).
</p></li><li class="listitem"><p>
  <span class="application">QuickTime</span> je schopen využít více
  harwarových i softwarových urychlovacích funkcí Mac OS X, než
  platformně nezávislý přehrávač, jako <span class="application">MPlayer</span>
  nebo <span class="application">VLC</span>.
  To znamená, že vaše soubory mají šanci na plynulé přehrávání na starších
  strojích s G4.
</p></li><li class="listitem"><p>
  <span class="application">QuickTime</span> 7 podporuje H.264, kodek nové
  generace, který poskytuje podstatně lepší kvalitu obrazu, než předchozí
  generace kodeků (MPEG-2, MPEG-4 …).
</p></li></ul></div></div><div class="sect2" title="10.7.2. QuickTime 7 omezení"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-constraints"></a>10.7.2. <span class="application">QuickTime</span> 7 omezení</h3></div></div></div><p>
  <span class="application">QuickTime</span> 7 podporuje H.264 video a AAC zvuk,
  ale nepodporuje je, pokud jsou namuxovány v AVI kontejneru.
  Můžete však použít <span class="application">MEncoder</span> pro enkódování
  videa a zvuku a pak použít externí program, např.
  <span class="application">mp4creator</span> (součást
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a>)
  pro přemuxování do MP4 kontejneru.
</p><p>
  Podpora H.264 v <span class="application">QuickTime</span> je omezená,
  takže se budete muset vzdát některých pokročilých vlastností.
  Pokud enkódujete video s vlastnostmi, které
  <span class="application">QuickTime</span> 7 nepodporuje,
  budou přehrávače založené na <span class="application">QuickTime</span>
  zobrazovat pouze hezky bílou obrazovku, místo očekávaného videa.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>B-snímky</strong></span>:
  <span class="application">QuickTime</span> 7 podporuje maximálně 1 B-snímek, čili
  <tt class="option">-x264encopts bframes=1</tt>. To znamená, že
  <tt class="option">b_pyramid</tt> a <tt class="option">weight_b</tt> nebudou mít žádný
  efekt, jelikož vyžadují, aby <tt class="option">bframes</tt> bylo vyšší než 1.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Makrobloky</strong></span>:
  <span class="application">QuickTime</span> 7 nepodporuje 8x8 DCT makrobloky.
  Tato volba (<tt class="option">8x8dct</tt>) je výchozí vypnuto, takže se ujistěte,
  že ji explicitně nezapnete. To také znamená, že volba <tt class="option">i8x8</tt>
  nebude mít žádný efekt, jelikož vyžaduje <tt class="option">8x8dct</tt>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Poměr stran</strong></span>:
  <span class="application">QuickTime</span> 7 nepodporuje SAR (sample
  aspect ratio) informace v MPEG-4 souborech; předpokládá, že SAR=1. Přečtěte
  si <a class="link" href="#menc-feat-quicktime-7-scale" title="10.7.4. Škálování">sekci o škálování</a>,
  abyste to obešli.
</p></li></ul></div></div><div class="sect2" title="10.7.3. Ořez"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-crop"></a>10.7.3. Ořez</h3></div></div></div><p>
  Řekněme, že chcete ripnout svou nově zakoupenou kopii "Letopisů
  Narnie". Vaše DVD je region 1,
  což znamená že je v NTSC. Příklad níže lze aplikovat na PAL,
  jen musíte vynechat <tt class="option">-ofps 24000/1001</tt> a použijete trošku
  jiné <tt class="option">crop</tt> a <tt class="option">scale</tt> rozměry.
</p><p>
  Po spuštění <tt class="option">mplayer dvd://1</tt>, postupujete podle pokynů
  uvedených v sekci <a class="link" href="#menc-feat-telecine" title="10.2. Jak naložit s telecine a prokladem v NTSC DVD">Jak si poradit s telecine
  a prokladem v NTSC DVD</a> a zjistíte, že je to
  24000/1001 fps progresivní video. To poněkud zjednoduší proces,
  jelikož nepotřebujete použít inverzní telecine filtr jako
  <tt class="option">pullup</tt> nebo filtr odstranění prokladu jako
  <tt class="option">yadif</tt>.
</p><p>
  Dále potřebujete odstřihnout černé okraje na zhora a zdola obrazu, podle postupu
  uvedeného v <a class="link" href="#menc-feat-dvd-mpeg4-example-crop">této</a>
  předešlé sekci.
</p></div><div class="sect2" title="10.7.4. Škálování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-scale"></a>10.7.4. Škálování</h3></div></div></div><p>
  Další krok je opravdu srdcervoucí.
  <span class="application">QuickTime</span> 7 nepodporuje MPEG-4 videa
  se vzorkovým poměrem stran jiným než 1, takže budete muset obraz roztáhnout
  (to vyplýtvá spoustu diskového prostoru) nebo zmenšit (čímž ztratíme některé
  detaily ze zdrojového videa) na čtvercové pixely.
  Ať zvolíte jakkoli, je to velmi neefektivní, ale nelze se tomu vyhnout,
  pokud chcete, aby se video dalo přehrávat pomocí
  <span class="application">QuickTime</span> 7.
  <span class="application">MEncoder</span> může provést vhodné zvětšení nebo
  zmenšení uvedením buď <tt class="option">-vf scale=-10:-1</tt>
  nebo <tt class="option">-vf scale=-1:-10</tt>.
  Takto naškálujete video na správnou šířku pro ořezanou výšku,
  zarovnanou na nejbližší násobek 16 pro optimální kompresi.
  Pamatujte, že pokud ořezáváte, měli byste nejprve ořezávat, potom
  škálovat:

  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1</pre><p>
</p></div><div class="sect2" title="10.7.5. A/V synchronizace"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-avsync"></a>10.7.5. A/V synchronizace</h3></div></div></div><p>
  Protože budete muxovat do odlišného nosného formátu, měli byste
  vždy použít volbu <tt class="option">harddup</tt>, abyste se ujistili, že
  duplikované snímky budou duplikovány ve video výstupu. Bez této volby
  <span class="application">MEncoder</span> jen vloží do video proudu značky
  pro duplikované snímky a je jen na přehrávači, aby zobrazil snímek dvakrát.
  Naneštěstí tato "měkká duplikace" nepřežije přemuxování, takže se zvuk
  může pomalu rozjíždět s videem.
</p><p>
  Celý řetěz filtrů pak vypadá takto:
  </p><pre class="screen">-vf crop=720:352:0:62,scale=-10:-1,harddup</pre><p>
</p></div><div class="sect2" title="10.7.6. Datový tok"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-bitrate"></a>10.7.6. Datový tok</h3></div></div></div><p>
  Jako vždy je výběr datového toku otázkou technických parametrů
  zdroje, jak jsou objasněny
  <a class="link" href="#menc-feat-dvd-mpeg4-resolution-bitrate" title="10.1.5. Volba rozlišení a datového toku">zde</a>,
  stejně jako otázkou vkusu.
  Tento film je dost akční a obsahuje mnoho detailů, ale H.264 video
  vypadá dobře při mnohem menším datovém toku než XviD nebo jiné
  MPEG-4 kodeky.
  Po dlouhém experimentování se autor této příručky rozhodl enkódovat
  tento film při 900kbps a myslí, že vypadá dobře.
  Můžete snížit datový tok, pokud potřebujete ušetřit místo, nebo jej zvýšit,
  chcete-li zvýšit kvalitu.
</p></div><div class="sect2" title="10.7.7. Příklad enkódování"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-example"></a>10.7.7. Příklad enkódování</h3></div></div></div><p>
  Nyní jste připraveni enkódovat video. Jelikož nám leží na srdci kvalita,
  samozřejmě použijeme víceprůchodové enkódování. Chcete-li poněkud
  urychlit enkódování, můžete přidat volbu <tt class="option">turbo</tt>
  do prvního průchodu; to snižuje <tt class="option">subq</tt> a
  <tt class="option">frameref</tt> na 1. Pro zvýšení diskového prostoru, můžete
  použít volbu <tt class="option">ss</tt> pro odstranění prvních několika sekund
  videa. (Zjistil jsem, že tento konkrétní film má 32 sekund
  log a titulků.)  <tt class="option">bframes</tt> může být 0 nebo 1.
  Ostatní volby jsou dokumentovány v <a class="link" href="#menc-feat-x264-encoding-options-speedvquality" title="10.5.1.2. Volby které primárně ovlivňují rychlost a kvalitu">Enkódování s
  <code class="systemitem">x264</code> kodekem</a> a
  v man stránce.

  </p><pre class="screen">mencoder dvd://1 -o /dev/null -ss 32 -ovc x264 \
-x264encopts pass=1:turbo:bitrate=900:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>

  Pokud máte víceprocesorový stroj, nenechte si ujít příležitost podstatně zvýšit
  enkódování zapnutím
  <a class="link" href="#menc-feat-x264-encoding-options-speedvquality-threads">
  <code class="systemitem">x264</code> vícevláknového režimu</a>
  přidáním <tt class="option">threads=auto</tt> do <tt class="option">x264encopts</tt>
  na příkazovém řádku.
</p><p>
  Druhý průchod je stejný, jen nastavíte výstupní soubor
  a nastavíte <tt class="option">pass=2</tt>.

  </p><pre class="screen">mencoder dvd://1 <span class="bold"><strong>-o narnia.avi</strong></span> -ss 32 -ovc x264 \
-x264encopts <span class="bold"><strong>pass=2</strong></span>:turbo:bitrate=900:frameref=5:bframes=1:\
me=umh:partitions=all:trellis=1:qp_step=4:qcomp=0.7:direct_pred=auto:keyint=300 \
-vf crop=720:352:0:62,scale=-10:-1,harddup \
-oac faac -faacopts br=192:mpeg=4:object=2 -channels 2 -srate 48000 \
-ofps 24000/1001</pre><p>
</p><p>
  Výsledné AVI by mělo perfektně hrát v
  <span class="application">MPlayer</span>u, ale
  <span class="application">QuickTime</span> jej nepřehraje, jelikož
  nepodporuje H.264 muxovaný v AVI.
  Takže dalším krokem je přemuxovat video do MP4 konteineru.
</p></div><div class="sect2" title="10.7.8. Přemuxování do MP4"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-remux"></a>10.7.8. Přemuxování do MP4</h3></div></div></div><p>
  Existuje spousta způsobů, jak remuxovat AVI do MP4. Můžete použít
  <span class="application">mp4creator</span>, který je součástí
  <a class="ulink" href="http://mpeg4ip.sourceforge.net/" target="_top">MPEG4IP suite</a>.
</p><p>
  Nejprve demuxujte AVI do oddělených zvukových a video proudů, pomocí
  <span class="application">MPlayer</span>u.

  </p><pre class="screen">mplayer narnia.avi -dumpaudio -dumpfile narnia.aac
mplayer narnia.avi -dumpvideo -dumpfile narnia.h264</pre><p>

  Jména souborů jsou důležitá; <span class="application">mp4creator</span>
  vyžaduje, aby AAC zvukové proudy byly pojmenovány <code class="systemitem">.aac</code>
  a H.264 video proudy zase <code class="systemitem">.h264</code>.
</p><p>
  Nyní použijte <span class="application">mp4creator</span> pro vytvoření nového
  MP4 souboru ze zvukového a video proudů.

  </p><pre class="screen">mp4creator -create=narnia.aac narnia.mp4
mp4creator -create=narnia.h264 -rate=23.976 narnia.mp4</pre><p>

  Narozdíl od enkódovacího kroku, musíte zadat snímkovou rychlost jako
  desetinné číslo (např. 23.976), nikoli zlomek (např. 24000/1001).
</p><p>
  Tento <code class="systemitem">narnia.mp4</code> soubor by měl být přehratelný
  jakoukoli <span class="application">QuickTime</span> 7 aplikací, jako je
  <span class="application">QuickTime Player</span> nebo
  <span class="application">iTunes</span>. Pokud plánujete sledovat video ve
  webovém prohlížeči s <span class="application">QuickTime</span>
  pluginem, měli byste rovněž označkovat film, aby jej
  <span class="application">QuickTime</span> plugin mohl začít přehrávat už
  v době stahování.  <span class="application">mp4creator</span>
  umí vytvořit značkovací (hint) stopy:

  </p><pre class="screen">mp4creator -hint=1 narnia.mp4
mp4creator -hint=2 narnia.mp4
mp4creator -optimize narnia.mp4</pre><p>

  Můžete ověřit výsledek, abyste se ujistili, že značkovací stopy byly vytvořeny
  úspěšně:

  </p><pre class="screen">mp4creator -list narnia.mp4</pre><p>

  Měli byste vidět seznam stop: 1 zvukovou, 1 video a 2 značkovací stopy.

</p><pre class="screen">Track   Type    Info
1       audio   MPEG-4 AAC LC, 8548.714 secs, 190 kbps, 48000 Hz
2       video   H264 Main@5.1, 8549.132 secs, 899 kbps, 848x352 @ 23.976001 fps
3       hint    Payload mpeg4-generic for track 1
4       hint    Payload H264 for track 2
</pre><p>
</p></div><div class="sect2" title="10.7.9. Přidání stop s meta daty"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-quicktime-7-metadata"></a>10.7.9. Přidání stop s meta daty</h3></div></div></div><p>
  Pokud chcete přidat stopy, které se objevují v iTunes, můžete použít
  <a class="ulink" href="http://atomicparsley.sourceforge.net/" target="_top">AtomicParsley</a>.

  </p><pre class="screen">AtomicParsley narnia.mp4 --metaEnema --title "The Chronicles of Narnia" --year 2005 --stik Movie --freefree --overWrite</pre><p>

  Volba <tt class="option">--metaEnema</tt> odstraňuje existující metadata
  (<span class="application">mp4creator</span> vkládá své jméno do
  "encoding tool" tagu) a <tt class="option">--freefree</tt> uvolní místo
  po smazaných metadatech.
  Volba <tt class="option">--stik</tt> nastaví typ videa (jako Film
  nebo TV šou), což iTunes používá pro sdružování podobných video souborů.
  Volba <tt class="option">--overWrite</tt> přepisuje původní soubor;
  bez ní vytvoří <span class="application">AtomicParsley</span> nový
  automaticky pojmenovaný soubor ve stejném adresáři a ponechá
  původní soubor nedotčen.
</p></div></div><div class="sect1" title="10.8. Použití MEncoderu k vytváření VCD/SVCD/DVD-kompatibilních souborů."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="menc-feat-vcd-dvd"></a>10.8. Použití <span class="application">MEncoder</span>u
  k vytváření VCD/SVCD/DVD-kompatibilních souborů.</h2></div></div></div><div class="sect2" title="10.8.1. Omezení Formátů"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-constraints"></a>10.8.1. Omezení Formátů</h3></div></div></div><p>
<span class="application">MEncoder</span> je schopen vytvořit soubory ve
formátu MPEG pro VCD, SCVD a DVD pomocí knihovny
<code class="systemitem">libavcodec</code>.
Tyto soubory pak mohou být použity ve spojení s programem
<a class="ulink" href="http://www.gnu.org/software/vcdimager/vcdimager.html" target="_top">vcdimager</a>
nebo
<a class="ulink" href="http://dvdauthor.sourceforge.net/" target="_top">dvdauthor</a>
pro vytváření disků přehratelných na stolním přehrávači.
</p><p>
Formáty DVD, SVCD a VCD mají silná omezení.
K dispozici máte pouze malý výběr velikostí enkódovaného
obrazu a poměrů stran.
Pokud váš film nesplňuje tyto požadavky, budete jej muset škálovat, ořezat
nebo přidat černé okraje, aby byl kompatibilní.
</p><div class="sect3" title="10.8.1.1. Omezení Formátů"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-resolution"></a>10.8.1.1. Omezení Formátů</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>Formát</th><th>Rozlišení</th><th>V. kodec</th><th>V. dat. tok</th><th>Vzork. kmitočet</th><th>A. kodec</th><th>A. dat. tok</th><th>FPS</th><th>Poměr stran</th></tr></thead><tbody><tr><td>NTSC DVD</td><td>720x480, 704x480, 352x480, 352x240</td><td>MPEG-2</td><td>9800 kbps</td><td>48000 Hz</td><td>AC–3,PCM</td><td>1536 kbps (max)</td><td>30000/1001, 24000/1001</td><td>4:3, 16:9 (pouze pro 720x480)</td></tr><tr><td>NTSC DVD</td><td>352x240<sup>[<a name="fn-rare-resolutions" href="#ftn.fn-rare-resolutions" class="footnote">a</a>]</sup></td><td>MPEG-1</td><td>1856 kbps</td><td>48000 Hz</td><td>AC–3,PCM</td><td>1536 kbps (max)</td><td>30000/1001, 24000/1001</td><td>4:3, 16:9</td></tr><tr><td>NTSC SVCD</td><td>480x480</td><td>MPEG-2</td><td>2600 kbps</td><td>44100 Hz</td><td>MP2</td><td>384 kbps (max)</td><td>30000/1001</td><td>4:3</td></tr><tr><td>NTSC VCD</td><td>352x240</td><td>MPEG-1</td><td>1150 kbps</td><td>44100 Hz</td><td>MP2</td><td>224 kbps</td><td>24000/1001, 30000/1001</td><td>4:3</td></tr><tr><td>PAL DVD</td><td>720x576, 704x576, 352x576, 352x288</td><td>MPEG-2</td><td>9800 kbps</td><td>48000 Hz</td><td>MP2,AC–3,PCM</td><td>1536 kbps (max)</td><td>25</td><td>4:3, 16:9 (pouze pro 720x576)</td></tr><tr><td>PAL DVD</td><td>352x288<sup>[<a href="#ftn.fn-rare-resolutions" class="footnoteref">a</a>]</sup></td><td>MPEG-1</td><td>1856 kbps</td><td>48000 Hz</td><td>MP2,AC–3,PCM</td><td>1536 kbps (max)</td><td>25</td><td>4:3, 16:9</td></tr><tr><td>PAL SVCD</td><td>480x576</td><td>MPEG-2</td><td>2600 kbps</td><td>44100 Hz</td><td>MP2</td><td>384 kbps (max)</td><td>25</td><td>4:3</td></tr><tr><td>PAL VCD</td><td>352x288</td><td>MPEG-1</td><td>1152 kbps</td><td>44100 Hz</td><td>MP2</td><td>224 kbps</td><td>25</td><td>4:3</td></tr></tbody><tbody class="footnotes"><tr><td colspan="9"><div class="footnote"><p><sup>[<a name="ftn.fn-rare-resolutions" href="#fn-rare-resolutions" class="para">a</a>] </sup>
    Tato rozlišení jsou zřídka použita pro DVD, protože
    mají docela nízkou kvalitu.</p></div></td></tr></tbody></table></div><p>
Pokud má vaše video poměr stran 2.35:1 (většina současných akčních filmů),
budete muset přidat černé okraje, nebo ořezat video na 16:9, abyste mohli
vytvořit DVD nebo VCD.
Pokud přidáváte černé okraje, zkuste je napasovat do 16 pixelových okrajů,
abyste minimalizovali vliv na výkon enkódování.
Naštěstí má DVD dostatečně vysoký datový tok, takže se nemusíte příliš
zabývat efektivitou enkódování, ale u SVCD a VCD je k dispozici jen malý
datový tok, takže vyžaduje větší snahu pro dosažení přijatelné kvality.
</p></div><div class="sect3" title="10.8.1.2. Omezení velikosti GOP"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-gop"></a>10.8.1.2. Omezení velikosti GOP</h4></div></div></div><p>
DVD, VCD a SVCD vás rovněž omezují na relativně nízké GOP (skupina obrázků)
velikosti.
Pro materiál 30 snímků za sekundu je největší povolená GOP velikost 18.
Pro 25 nebo 24 snímků/s je maximum 15.
Velikost GOP je nastavena pomocí volby <tt class="option">keyint</tt>.
</p></div><div class="sect3" title="10.8.1.3. Omezení datového toku"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-constraints-bitrate"></a>10.8.1.3. Omezení datového toku</h4></div></div></div><p>
VCD video musí být CBR při 1152 kbps.
Tento velmi omezující požadavek je zde spolu s velmi malou vbv vyrovnávací
pamětí 327 kilobitů.
SVCD umožňuje proměnné datové toky až do 2500 kbps a poněkud méně
omezující velikost vbv bufferu 917 kilobitů.
Datové toky pro DVD mohou být libovolné až do 9800 kbps (ačkoli typické
datové toky jsou asi poloviční) a velikost vbv buferu je 1835 kilobitů.
</p></div></div><div class="sect2" title="10.8.2. Výstupní volby"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-output"></a>10.8.2. Výstupní volby</h3></div></div></div><p>
<span class="application">MEncoder</span> má volby pro ovládání výstupního formátu.
Pomocí těchto voleb jej můžete instruovat, aby použil správný typ souboru.
</p><p>
Volby pro VCD a SVCD se nazývají xvcd a xsvcd, protože to jsou rozšířené
formáty.
Nejsou přesně kompatibilní hlavně proto, že výstup neobsahuje skenovací
offsety.
Pokud potřebujete generovat SVCD obraz, měli byste protáhnout výstupní soubor
programem
<a class="ulink" href="http://www.gnu.org/software/vcdimager/vcdimager.html" target="_top">vcdimager</a>.
</p><p>
VCD:
</p><pre class="screen">-of mpeg -mpegopts format=xvcd</pre><p>
</p><p>
SVCD:
</p><pre class="screen">-of mpeg -mpegopts format=xsvcd</pre><p>
</p><p>
DVD (s časovými značkami v každém snímku, je-li to možné):
</p><pre class="screen">-of mpeg -mpegopts format=dvd:tsaf</pre><p>
</p><p>
DVD s NTSC Pullup:
</p><pre class="screen">-of mpeg -mpegopts format=dvd:tsaf:telecine -ofps 24000/1001</pre><p>
Toto umožňuje enkódovat 24000/1001 fps progresivní materiál při 30000/1001
fps při zachování slučitelnosti s DVD.
</p><div class="sect3" title="10.8.2.1. Poměr stran"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-output-aspect"></a>10.8.2.1. Poměr stran</h4></div></div></div><p>
Argument aspect z <tt class="option">-lavcopts</tt> se používá pro zakódování
poměru stran souboru.
Během přehrávání je pak tato hodnota použita pro obnovení videa na
správnou velikost.
</p><p>
16:9 neboli "Widescreen"
</p><pre class="screen">-lavcopts aspect=16/9</pre><p>
</p><p>
4:3 neboli "Fullscreen"
</p><pre class="screen">-lavcopts aspect=4/3</pre><p>
</p><p>
2.35:1 neboli "Cinemascope" NTSC
</p><pre class="screen">-vf scale=720:368,expand=720:480 -lavcopts aspect=16/9</pre><p>
Pro výpočet správné velikosti pro škálování, použijte rozšířenou NTSC šířku
854/2.35 = 368
</p><p>
2.35:1 neboli "Cinemascope" PAL
</p><pre class="screen">-vf scale=720:432,expand=720:576 -lavcopts aspect=16/9</pre><p>
Pro výpočet správné velikosti pro škálování, použijte rozšířenou PAL šířku
1024/2.35 = 432
</p></div><div class="sect3" title="10.8.2.2. Zachování A/V synchronizace"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-a-v-sync"></a>10.8.2.2. Zachování A/V synchronizace</h4></div></div></div><p>
Aby byla zachována synchronizace zvuku s videem během enkódování, musí
<span class="application">MEncoder</span> zahazovat nebo duplikovat snímky.
To funguje celkem dobře při muxování do AVI souboru, ale téměř s jistotou
neudrží A/V synchronizaci s jinými muxery jako MPEG.
To je důvodem pro nutnost přidání video fitru <tt class="option">harddup</tt> na
konec řetězu filtrů, abychom se tomuto problému vyhnuli.
Více technických informací o <tt class="option">harddup</tt> naleznete v sekci
<a class="link" href="#menc-feat-dvd-mpeg4-muxing-filter-issues" title="10.1.12.1. Zlepšování spolehlivosti muxování a A/V synchronizace">Zlepšení muxování a
A/V synchronizace</a>, nebo v man stránce.
</p></div><div class="sect3" title="10.8.2.3. Převod vzorkovacího kmitočtu"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-output-srate"></a>10.8.2.3. Převod vzorkovacího kmitočtu</h4></div></div></div><p>
Pokud není vzorkovací kmitočet zvuku takový, jaký je vyžadován
cílovým formátem, je nutný převod vzorkovacího kmitočtu.
To zajišťuje použití volby <tt class="option">-srate</tt> spolu se zvukovým filtrem
<tt class="option">-af lavcresample</tt>.
</p><p>
DVD:
</p><pre class="screen">-srate 48000 -af lavcresample=48000</pre><p>
</p><p>
VCD a SVCD:
</p><pre class="screen">-srate 44100 -af lavcresample=44100</pre><p>
</p></div></div><div class="sect2" title="10.8.3. Použití libavcodec pro enkódování VCD/SVCD/DVD"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-lavc"></a>10.8.3. Použití libavcodec pro enkódování VCD/SVCD/DVD</h3></div></div></div><div class="sect3" title="10.8.3.1. Úvodem"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-intro"></a>10.8.3.1. Úvodem</h4></div></div></div><p>
<code class="systemitem">libavcodec</code> můžete použít pro
vytvoření videa kompatibilního s VCD/SVCD/DVD použitím příslušných voleb.
</p></div><div class="sect3" title="10.8.3.2. lavcopts"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-options"></a>10.8.3.2. lavcopts</h4></div></div></div><p>
Zde máte seznam polí v <tt class="option">-lavcopts</tt>, která je nutné
změnit, abyste dostali video vhodné pro VCD, SVCD,
nebo DVD:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>acodec</strong></span>:
  <tt class="option">mp2</tt> pro VCD, SVCD nebo PAL DVD;
  <tt class="option">ac3</tt> je obecně používán pro DVD.
  PCM zvuk může být rovněž použitý pro DVD, ale většinou je to velké plýtvání
  místem.
  Poznamenejme, že MP3 není slučitelné s žádným z těchto formátů, ale
  přehrávače s jeho přehrátím obvykle nemají problém.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>abitrate</strong></span>:
  224 pro VCD; do 384 pro SVCD; do 1536 pro  DVD, ale obvykle se hodnoty
  pohybují od 192 kbps pro stereo do 384 kbps pro 5.1 kanálový zvuk.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vcodec</strong></span>:
  <tt class="option">mpeg1video</tt> pro VCD;
  <tt class="option">mpeg2video</tt> pro SVCD;
  <tt class="option">mpeg2video</tt> je obvykle použitý pro DVD, ale můžete použít také
  <tt class="option">mpeg1video</tt> pro CIF rozlišení.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>keyint</strong></span>:
  Použitý pro nastavení velikosti GOP.
  18 pro 30fps materiál, nebo 15 pro 25/24 fps materiál.
  Zdá se, že komerční producenti preferují interval mezi klíčovými snímky 12.
  Je možné použít vyšší hodnotu a stále být kompatibilní s většinou
  přehrávačů.
  <tt class="option">keyint</tt> na 25 by neměla nikdy způsobit potíže.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_buf_size</strong></span>:
  327 pro VCD, 917 pro SVCD a 1835 pro DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_minrate</strong></span>:
  1152, pro VCD. Může být vynecháno pro SVCD a DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vrc_maxrate</strong></span>:
  1152 pro VCD; 2500 pro SVCD; 9800 pro DVD.
  Pro SVCD a DVD, můžete použít nižší hodnoty v závislosti na vašich
  osobních preferencích a potřebách.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vbitrate</strong></span>:
  1152 pro VCD;
  do 2500 pro SVCD;
  do 9800 pro DVD.
  Pro dva poslední formáty by mělo být vbitrate nastaveno podle vlastního
  uvážení.
  Například pokud trváte na umístění asi 20 hodin na DVD, mohli byste použít
  vbitrate=400.
  Výsledná kvalita bude nejspíš hrozná.
  Pokud se pokoušíte dosáhnout maximální možné kvality na DVD, použijte
  vbitrate=9800, ale pak se vám nevejde ani celá hodina záznamu na jednovrstvé
  DVD.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>vstrict</strong></span>:
  Pro vytváření DVD by mělo být použito <tt class="option">vstrict</tt>=0.
  Bez této volby vytvoří <span class="application">MEncoder</span> datový
  proud, který některé stolní přehrávače neumí správně dekódovat.
</p></li></ul></div></div><div class="sect3" title="10.8.3.3. Příklady"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-examples"></a>10.8.3.3. Příklady</h4></div></div></div><p>
Toto je typická minimální sada <tt class="option">-lavcopts</tt> pro
enkódování videa:
</p><p>
VCD:
</p><pre class="screen">
-lavcopts vcodec=mpeg1video:vrc_buf_size=327:vrc_minrate=1152:\
vrc_maxrate=1152:vbitrate=1152:keyint=15:acodec=mp2
</pre><p>
</p><p>
SVCD:
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=917:vrc_maxrate=2500:vbitrate=1800:\
keyint=15:acodec=mp2
</pre><p>
</p><p>
DVD:
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:acodec=ac3
</pre><p>
</p></div><div class="sect3" title="10.8.3.4. Pokročilé volby"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-lavc-advanced"></a>10.8.3.4. Pokročilé volby</h4></div></div></div><p>
Pro vyšší kvalitu enkódování můžete také přidat kvalitu zlepšující volby
do lavcopts, jako je <tt class="option">trell</tt>,
<tt class="option">mbd=2</tt> a další.
Poznamenejme, že <tt class="option">qpel</tt> a <tt class="option">v4mv</tt>, které jsou
často dobré pro MPEG-4, nejsou použitelné s MPEG-1 nebo MPEG-2.
Pokud se snažíte vytvořit DVD s velmi vasokou kvalitou, může být vhodné
přidat <tt class="option">dc=10</tt> do lavcopts.
Takto to můžete pomoci omezit oběvování bloků ve stálobarevných plochách.
Podtrženo sečteno, zde máte příklad nastavení lavcopts pro DVD s vyšší
kvalitou:
</p><p>
</p><pre class="screen">
-lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=8000:\
keyint=15:trell:mbd=2:precmp=2:subcmp=2:cmp=2:dia=-10:predia=-10:cbp:mv0:\
vqmin=1:lmin=1:dc=10:vstrict=0
</pre><p>
</p></div></div><div class="sect2" title="10.8.4. Enkódování zvuku"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-audio"></a>10.8.4. Enkódování zvuku</h3></div></div></div><p>
VCD a SVCD podporují zvuk MPEG-1 layer II. Použít můžete
<code class="systemitem">toolame</code>,
<code class="systemitem">twolame</code>,
nebo MP2 enkodér z <code class="systemitem">libavcodec</code>u.
MP2 libavcodecu je dalek toho, aby byl stejně dobrý jako druhé dvě knihovny,
avšak měl by být vždy po ruce.
VCD podporuje pouze zvuk s konstantním datovým tokem (CBR), zatímco SVCD
podporuje také proměnný datový tok (VBR).
Používejte VBR opatrně, jelikož některé mizerné stolní přehrávače jej
nemusí dobře podporovat.
</p><p>
Pro DVD zvuk se používá AC–3 kodek z
<code class="systemitem">libavcodec</code>.
</p><div class="sect3" title="10.8.4.1. toolame"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-toolame"></a>10.8.4.1. toolame</h4></div></div></div><p>
Pro VCD a SVCD:
</p><pre class="screen">-oac toolame -toolameopts br=224</pre><p>
</p></div><div class="sect3" title="10.8.4.2. twolame"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-twolame"></a>10.8.4.2. twolame</h4></div></div></div><p>
Pro VCD a SVCD:
</p><pre class="screen">-oac twolame -twolameopts br=224</pre><p>
</p></div><div class="sect3" title="10.8.4.3. libavcodec"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-audio-lavc"></a>10.8.4.3. libavcodec</h4></div></div></div><p>
Pro DVD s 2 kanálovým zvukem:
</p><pre class="screen">-oac lavc -lavcopts acodec=ac3:abitrate=192</pre><p>
</p><p>
Pro DVD s 5.1 kanálovým zvukem:
</p><pre class="screen">-channels 6 -oac lavc -lavcopts acodec=ac3:abitrate=384</pre><p>
</p><p>
Pro VCD a SVCD:
</p><pre class="screen">-oac lavc -lavcopts acodec=mp2:abitrate=224</pre><p>
</p></div></div><div class="sect2" title="10.8.5. Spojení všeho dohromady"><div class="titlepage"><div><div><h3 class="title"><a name="menc-feat-vcd-dvd-all"></a>10.8.5. Spojení všeho dohromady</h3></div></div></div><p>
Tato sekce obsahuje kompletní příkazy pro vytvoření VCD/SVCD/DVD
kompatibilních videí.
</p><div class="sect3" title="10.8.5.1. PAL DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-dvd"></a>10.8.5.1. PAL DVD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:576,harddup -srate 48000 -af lavcresample=48000 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:acodec=ac3:abitrate=192:aspect=16/9 -ofps 25 \
  -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.2. NTSC DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-dvd"></a>10.8.5.2. NTSC DVD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:480,harddup -srate 48000 -af lavcresample=48000 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=18:vstrict=0:acodec=ac3:abitrate=192:aspect=16/9 -ofps 30000/1001 \
  -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.3. PAL AVI obsahující AC–3 zvuk do DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-ac3-copy"></a>10.8.5.3. PAL AVI obsahující AC–3 zvuk do DVD</h4></div></div></div><p>
Pokud již má zdroj AC–3 zvuk, použijte -oac copy místo reenkódování.
</p><pre class="screen">
mencoder -oac copy -ovc lavc -of mpeg -mpegopts format=dvd:tsaf \
  -vf scale=720:576,harddup -ofps 25 \
  -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:vrc_maxrate=9800:vbitrate=5000:\
keyint=15:vstrict=0:aspect=16/9 -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.4. NTSC AVI obsahující AC–3 zvuk do DVD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-ac3-copy"></a>10.8.5.4. NTSC AVI obsahující AC–3 zvuk do DVD</h4></div></div></div><p>
Pokud již má zdroj AC–3 zvuk a video je NTSC @ 24000/1001 fps:
</p><pre class="screen">
mencoder -oac copy -ovc lavc -of mpeg -mpegopts format=dvd:tsaf:telecine \
  -vf scale=720:480,harddup -lavcopts vcodec=mpeg2video:vrc_buf_size=1835:\
  vrc_maxrate=9800:vbitrate=5000:keyint=15:vstrict=0:aspect=16/9 -ofps 24000/1001 \
  -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.5. PAL SVCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-svcd"></a>10.8.5.5. PAL SVCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xsvcd -vf \
    scale=480:576,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg2video:mbd=2:keyint=15:vrc_buf_size=917:vrc_minrate=600:\
vbitrate=2500:vrc_maxrate=2500:acodec=mp2:abitrate=224 -ofps 25 \
    -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.6. NTSC SVCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-svcd"></a>10.8.5.6. NTSC SVCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xsvcd  -vf \
    scale=480:480,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg2video:mbd=2:keyint=18:vrc_buf_size=917:vrc_minrate=600:\
vbitrate=2500:vrc_maxrate=2500:acodec=mp2:abitrate=224 -ofps 30000/1001 \
    -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.7. PAL VCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-pal-vcd"></a>10.8.5.7. PAL VCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xvcd -vf \
    scale=352:288,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg1video:keyint=15:vrc_buf_size=327:vrc_minrate=1152:\
vbitrate=1152:vrc_maxrate=1152:acodec=mp2:abitrate=224 -ofps 25 \
    -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div><div class="sect3" title="10.8.5.8. NTSC VCD"><div class="titlepage"><div><div><h4 class="title"><a name="menc-feat-vcd-dvd-all-ntsc-vcd"></a>10.8.5.8. NTSC VCD</h4></div></div></div><p>
</p><pre class="screen">
mencoder -oac lavc -ovc lavc -of mpeg -mpegopts format=xvcd -vf \
    scale=352:240,harddup -srate 44100 -af lavcresample=44100 -lavcopts \
    vcodec=mpeg1video:keyint=18:vrc_buf_size=327:vrc_minrate=1152:\
vbitrate=1152:vrc_maxrate=1152:acodec=mp2:abitrate=224 -ofps 30000/1001 \
    -o <em class="replaceable"><code>film.mpg</code></em> <em class="replaceable"><code>film.avi</code></em>
</pre><p>
</p></div></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.fn-menc-feat-dvd-mpeg4-codec-cpu" href="#fn-menc-feat-dvd-mpeg4-codec-cpu" class="para">1</a>] </sup>
  Buďte však opartní: Dekódování MPEG-4 AVC videa v DVD
  rozlišení vyžaduje rychlý stroj (např.Pentium 4 nad 1.5GHz, nebo
  Pentium M nad 1GHz).
  </p></div><div class="footnote"><p><sup>[<a name="ftn.fn-menc-feat-dvd-mpeg4-codec-playback" href="#fn-menc-feat-dvd-mpeg4-codec-playback" class="para">2</a>] </sup>
  Stejný film nemusí vypadat stejně na monitoru někoho jiného, nebo
  když je přehráván jiným dekodérem, takže si prověřujte své výtvory
  přehráváním na různých sestavách.
  </p></div></div></div><div class="chapter" title="Kapitola 11. Často Kladené Dotazy (FAQ)"><div class="titlepage"><div><div><h2 class="title"><a name="faq"></a>Kapitola 11. Často Kladené Dotazy (FAQ)</h2></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="id2600729"></a><dl><dt>11.1.  <a href="#faq-development">Vývoj</a></dt><dd><dl><dt>Otázka: <a href="#id2600743">
Jak vytvořím správně patch pro MPlayer?
</a></dt><dt>Otázka: <a href="#id2601338">
Jak přeložím MPlayer do nového jazyka?
</a></dt><dt>Otázka: <a href="#id2601374">
Jak mohu podpořit vývoj MPlayeru?
</a></dt><dt>Otázka: <a href="#id2601407">
Jak se mohu stát vývojářem MPlayeru?
</a></dt><dt>Otázka: <a href="#id2601454">
Proč nepoužíváte autoconf/automake?
</a></dt></dl></dd><dt>11.2.  <a href="#faq-compilation-installation">Kompilace a instalace</a></dt><dd><dl><dt>Otázka: <a href="#id2601495">
Kompilace skončí s chybou a gcc vypíše nějakou
záhadnou zprávu obsahující frázi
internal compiler error nebo
unable to find a register to spill nebo
can't find a register in class `GENERAL_REGS'
while reloading `asm'.
</a></dt><dt>Otázka: <a href="#id2601565">
Existují binární (RPM/Debian) balíčky MPlayeru?
</a></dt><dt>Otázka: <a href="#id2601598">
Jak mohu skompilovat 32 bitový MPlayer na 64 bitovém
Athlonu?
</a></dt><dt>Otázka: <a href="#id2601626">
Configure skončí s následujícím textem a MPlayer se nezkompiluje!
Your gcc does not support even i386 for '-march' and '-mcpu'
</a></dt><dt>Otázka: <a href="#id2601661">
Mám Matrox G200/G400/G450/G550, jak zkompiluji/použiji ovladač
mga_vid?
</a></dt><dt>Otázka: <a href="#id2601689">
Během 'make', si MPlayer stěžuje na chybějící
X11 knihovny. Tomu nerozumím, vždyť mám nainstalovány X11!?
</a></dt><dt>Otázka: <a href="#id2601754">
Kompilace na Mac OS 10.3 vede k několika linkovacím chybám.
</a></dt></dl></dd><dt>11.3.  <a href="#faq-general">Obecné dotazy</a></dt><dd><dl><dt>Otázka: <a href="#id2601890">
Existují nějaké e-mailové konference pro MPlayer?
</a></dt><dt>Otázka: <a href="#id2601918">
Našel/našla jsem odpornou chybu když jsem chtěl(a) přehrát svůj oblíbený film!
Komu to mám oznámit?
</a></dt><dt>Otázka: <a href="#id2601944">
Mám potíže s přehráváním souborů s ... kodekem. Mohu je používat?
</a></dt><dt>Otázka: <a href="#id2601973">
Při startu přehrávání dostanu následující hlášku, ale jinak vše vypadá dobře:
Linux RTC init: ioctl (rtc_pie_on): Permission denied
</a></dt><dt>Otázka: <a href="#id2602006">
Jak si mohu udělat snímek obrazovky?
</a></dt><dt>Otázka: <a href="#id2602060">
Co znamenají čísla na stavovém řádku?
</a></dt><dt>Otázka: <a href="#id2602306">
Objevuje se chybová zpráva o chybějícím souboru
/usr/local/lib/codecs/ ...
</a></dt><dt>Otázka: <a href="#id2602334">
Jak zařídit, aby si MPlayer pamatoval volby, které
používám pro konkrétní soubor, např. film.avi?
</a></dt><dt>Otázka: <a href="#id2602378">
Titulky jsou hezké, nejkrásnější jaké jsem viděl, ale zpomalují přehrávání!
Vím že je to nepravděpodobné ...
</a></dt><dt>Otázka: <a href="#id2602420">
Nemohu se dostat do GUI menu. Kliknu pravým tlačítkem, ale nemám přístup
k žádné z položek!
</a></dt><dt>Otázka: <a href="#id2602491">
Jak mohu spustit MPlayer na pozadí?
</a></dt></dl></dd><dt>11.4.  <a href="#faq-playback">Potíže s přehráváním</a></dt><dd><dl><dt>Otázka: <a href="#id2602538">
Nemohu přijít na příčinu nějakého podivného problému při přehrávání.
</a></dt><dt>Otázka: <a href="#id2602607">
Jak dostanu titulky do černých okrajů kolem filmu?
</a></dt><dt>Otázka: <a href="#id2602638">
Jak mohu vybrat audio/titulkové stopy z DVD, OGM, Matroska nebo NUT souboru?
</a></dt><dt>Otázka: <a href="#id2602700">
Zkouším přehrávat náhodný stream z internetu, ale nedaří se mi to.
</a></dt><dt>Otázka: <a href="#id2602719">
Stáhnul jsem si film přes P2P síť ale nefunguje!
</a></dt><dt>Otázka: <a href="#id2602742">
Nedaří se mi přimět titulky, aby se zobrazovaly, pomoc!!
</a></dt><dt>Otázka: <a href="#id2602783">
Proč MPlayer nefunguje na Fedora Core?
</a></dt><dt>Otázka: <a href="#id2602950">
MPlayer zhavaruje s hláškou
MPlayer interrupted by signal 4 in module: decode_video
nebo
MPlayer přerušen signálem 4 v modulu: decode_video
</a></dt><dt>Otázka: <a href="#id2602998">
Když zkouším grabovat z tuneru, funguje to, ale jsou divné barvy. V jiných
programech je to OK.
</a></dt><dt>Otázka: <a href="#id2603026">
Dostávám podivné procentní hodnoty (příliš velké)
při přehrávání na notebooku.
</a></dt><dt>Otázka: <a href="#id2603061">
Synchronizace zvuku a videa se úplně rozpadne když spustím
MPlayer jako
root na notebooku.
Když jej spustím jako uživatel, pracuje normálně.
</a></dt><dt>Otázka: <a href="#id2603106">
Při přehrávání souboru se začne přehrávání zadrhávat a dostanu následující
hlášení:
Badly interleaved AVI file detected - switching to -ni mode...
nebo
Detekován špatně prokládaný AVI soubor – přepínám do režimu -ni...
</a></dt></dl></dd><dt>11.5.  <a href="#faq-driver">Potíže video/audio ovaldače (vo/ao)</a></dt><dd><dl><dt>Otázka: <a href="#id2603160">
Když přejdu do celoobrazovkového režimu, dostanu pouze černé okraje kolem
obrazu bez jeho zvětšení na celou obrazovku.
</a></dt><dt>Otázka: <a href="#id2603220">
Právě jsem nainstaloval MPlayer. Když chci však
otevřít video soubor, nastane fatální chyba:
Error opening/initializing the selected video_out (-vo) device.
nebo

Selhalo otevření/inicializace vybraného video_out (-vo) rozhraní.

Jak mohu vyřašit své problémy?
</a></dt><dt>Otázka: <a href="#id2603304">
Mám problémy s [váš okenní manažer]
a celoobrazovkovými xv/xmga/sdl/x11 režimy ...
</a></dt><dt>Otázka: <a href="#id2603337">
Zvuk se během přehrávání AVI souboru rozejde s videem.
</a></dt><dt>Otázka: <a href="#id2603368">
Můj počítač přehrává MS DivX AVI s rozlišeními ~ 640x300 a stereo MP3 zvukem
příliš pomalu.
Když použiji volbu -nosound, vše je v pořádku (jen bez zvuku).
</a></dt><dt>Otázka: <a href="#id2603394">
Jak mohu použít dmix spolu s
MPlayerem?
</a></dt><dt>Otázka: <a href="#id2603431">
Nemám zvuk při přehrávání videa a dostanu chybovou zprávu podobnou této:

AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
audio_setup: Nelze otevřít audio zařízení /dev/dsp: Zařízení nebo rozhraní je již používáno
nelze otevřít/inicializovat audio zařízení -&gt; BEZ ZVUKU
Audio: bez zvuku!!!
Začínám přehrávat...

</a></dt><dt>Otázka: <a href="#id2603488">
Pokus spustím MPlayer pod KDE, dostanu pouze černou
obrazovku a nic se neděje. Asi po minutě se video spustí.
</a></dt><dt>Otázka: <a href="#id2603536">
Mám problémy s A/V synchronizací.
Některé mé AVI hrají dobře, ale některé s dvojnásobnou rychlostí!
</a></dt><dt>Otázka: <a href="#id2603563">
Když přehrávám tento soubor, rozjede se mi zvuk s obrazem a/nebo
MPlayer havaruje s hláškou:

DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!

nebo

DEMUXER: Příliš mnoho (945 v 8390980 bytech) video paketů ve vyrovnávací paměti!

</a></dt><dt>Otázka: <a href="#id2603676">
Jak se zbavím A/V desynchronizace
při převíjení v RealMedia proudech?
</a></dt></dl></dd><dt>11.6.  <a href="#faq-dvd">Přehrávání DVD</a></dt><dd><dl><dt>Otázka: <a href="#id2603708">
Což takhle DVD navigace/nabídky?
</a></dt><dt>Otázka: <a href="#id2603763">
Nepřehraji žádná současná DVD od Sony Pictures/BMG.
</a></dt><dt>Otázka: <a href="#id2603800">
Co takhle titulky? Umí je MPlayer zobrazovat?
</a></dt><dt>Otázka: <a href="#id2603826">
Jak nastavím kód regionu na mé DVD mechanice? Nemám Windows!
</a></dt><dt>Otázka: <a href="#id2603847">
Nemohu přehrát DVD, MPlayer skončí nebo vypíše chyby "Encrypted VOB file!".
</a></dt><dt>Otázka: <a href="#id2603866">
Musím být (setuid) root, abych mohl(a) přehrávat DVD?
</a></dt><dt>Otázka: <a href="#id2603891">
Je možné přehrát/enkódovat pouze vybrané kapitoly?
</a></dt><dt>Otázka: <a href="#id2603909">
Přehrávání DVD je zdlouhavé!
</a></dt><dt>Otázka: <a href="#id2603943">
Zkopíroval(a) jsem DVD pomocí vobcopy. Jak jej mohu přehrát/enkódovat
z harddisku?
</a></dt></dl></dd><dt>11.7.  <a href="#faq-features">Požadavky na vlastnosti</a></dt><dd><dl><dt>Otázka: <a href="#id2603986">
Pokud je MPlayer v pauze a já se pokusím převíjet,
nebo stisknu jakoukoli klávesu, MPlayer se odpauzuje.
Rád(a) bych převíjel(a) film v pauze.
</a></dt><dt>Otázka: <a href="#id2604019">
Rád(a) bych převíjel(a) o +/- 1 snímek místo o 10 sekund.
</a></dt></dl></dd><dt>11.8.  <a href="#faq-encoding">Enkódování</a></dt><dd><dl><dt>Otázka: <a href="#id2604059">
Jak mohu enkódovat?
</a></dt><dt>Otázka: <a href="#id2604082">
Jak mohu "nahrát" celý DVD titul do souboru?
</a></dt><dt>Otázka: <a href="#id2604123">
Jak vytvořím (S)VCD automaticky?
</a></dt><dt>Otázka: <a href="#id2604155">
Jak vytvořím (S)VCD?
</a></dt><dt>Otázka: <a href="#id2604194">
Jak spojím dva video soubory?
</a></dt><dt>Otázka: <a href="#id2604258">
Jak mohu opravit AVI soubory s vadným indexem nebo prokládáním?
</a></dt><dt>Otázka: <a href="#id2604307">
Jak mohu opravit poměr stran videa v AVI souboru?
</a></dt><dt>Otázka: <a href="#id2604349">
Jak mohu zálohovat a enkódovat VOB soubor s poškozeným začátkem?
</a></dt><dt>Otázka: <a href="#id2604421">
Nemohu zakódovat DVD titulky do AVI!
</a></dt><dt>Otázka: <a href="#id2604439">
Jak mohu enkódovat pouze některé kapitoly z DVD?
</a></dt><dt>Otázka: <a href="#id2604461">
Zkouším pracovat s 2GB+ soubory na souborovém systému VFAT. Bude to fungovat?
</a></dt><dt>Otázka: <a href="#id2604476">
Co znamenají čísla na stavovém řádku během enkódování?
</a></dt><dt>Otázka: <a href="#id2604628">
Jakto že je doporučený datový tok vypisovaný
MEncoderem záporný?
</a></dt><dt>Otázka: <a href="#id2604654">
Nemohu kompilovat ASF soubor do AVI/MPEG-4 (DivX) protože používá 1000 fps.
</a></dt><dt>Otázka: <a href="#id2604676">
Jak vložím titulky do výstupního souboru?
</a></dt><dt>Otázka: <a href="#id2604705">
Jak zakóduji pouze zvuk z hudebního videa?
</a></dt><dt>Otázka: <a href="#id2604777">
Proč přehrávače třetích stran selhávají při přehrávání MPEG-4 filmů enkódovaných
MEncoderem pozdější verze než 1.0pre7?
</a></dt><dt>Otázka: <a href="#id2601206">
Jak mohu enkódovat soubor jen se zvukem?
</a></dt><dt>Otázka: <a href="#id2601236">
Jak mohu přehrát titulky zabudované v AVI?
</a></dt><dt>Otázka: <a href="#id2601274">
MPlayer neumí...
</a></dt></dl></dd></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-development"></a>11.1. Vývoj</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2600743">
Jak vytvořím správně patch pro MPlayer?
</a></dt><dt>Otázka: <a href="#id2601338">
Jak přeložím MPlayer do nového jazyka?
</a></dt><dt>Otázka: <a href="#id2601374">
Jak mohu podpořit vývoj MPlayeru?
</a></dt><dt>Otázka: <a href="#id2601407">
Jak se mohu stát vývojářem MPlayeru?
</a></dt><dt>Otázka: <a href="#id2601454">
Proč nepoužíváte autoconf/automake?
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2600743"></a><a name="id2600745"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak vytvořím správně patch pro <span class="application">MPlayer</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Sepsali jsme <a class="ulink" href="../../tech/patches.txt" target="_top">krátký dokument</a>
popisující všechny nezbytné detaily. Následujte tyto instrukce.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601338"></a><a name="id2601340"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak přeložím <span class="application">MPlayer</span> do nového jazyka?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Přečtěte si <a class="ulink" href="../../tech/translations.txt" target="_top">translation HOWTO</a>,
to vám objasní vše. Podrobnější pomoc můžete dostat v e-mailové konferenci
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-translations" target="_top">MPlayer–translations</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601374"></a><a name="id2601376"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu podpořit vývoj <span class="application">MPlayer</span>u?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Rádi přijmeme vaše hardwarové a softwarové
<a class="ulink" href="http://www.mplayerhq.hu/donations.html" target="_top">příspěvky</a>.
Ty nám pomáhají neustále vylepšovat <span class="application">MPlayer</span>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601407"></a><a name="id2601409"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak se mohu stát vývojářem <span class="application">MPlayer</span>u?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Vždy uvítáme nové kodéry i dokumentaristy. Přečtěte si
<a class="ulink" href="../../tech/" target="_top">technickou dokumentaci</a>
abyste dostali obecnou představu. Pak byste se měli přihlásit do
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dev-eng" target="_top">MPlayer-dev-eng</a>
e-mailové konference a začít psát kód. Pokud chcete pomoci s dokumentací, připojte se do
konference
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-docs" target="_top">MPlayer-docs</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601454"></a><a name="id2601456"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Proč nepoužíváte autoconf/automake?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Máme modulární, ručně dělaný konfigurační a překladový systém, který odvádí
docela dobrou práci, tak proč to měnit? Konec konců se nám nelíbí auto*
nástroje, stejně jako
<a class="ulink" href="http://freshmeat.net/articles/view/889/" target="_top">ostatním lidem</a>.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-compilation-installation"></a>11.2. Kompilace a instalace</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2601495">
Kompilace skončí s chybou a gcc vypíše nějakou
záhadnou zprávu obsahující frázi
internal compiler error nebo
unable to find a register to spill nebo
can't find a register in class `GENERAL_REGS'
while reloading `asm'.
</a></dt><dt>Otázka: <a href="#id2601565">
Existují binární (RPM/Debian) balíčky MPlayeru?
</a></dt><dt>Otázka: <a href="#id2601598">
Jak mohu skompilovat 32 bitový MPlayer na 64 bitovém
Athlonu?
</a></dt><dt>Otázka: <a href="#id2601626">
Configure skončí s následujícím textem a MPlayer se nezkompiluje!
Your gcc does not support even i386 for '-march' and '-mcpu'
</a></dt><dt>Otázka: <a href="#id2601661">
Mám Matrox G200/G400/G450/G550, jak zkompiluji/použiji ovladač
mga_vid?
</a></dt><dt>Otázka: <a href="#id2601689">
Během 'make', si MPlayer stěžuje na chybějící
X11 knihovny. Tomu nerozumím, vždyť mám nainstalovány X11!?
</a></dt><dt>Otázka: <a href="#id2601754">
Kompilace na Mac OS 10.3 vede k několika linkovacím chybám.
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601495"></a><a name="id2601497"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Kompilace skončí s chybou a <span class="application">gcc</span> vypíše nějakou
záhadnou zprávu obsahující frázi
<code class="systemitem">internal compiler error</code> nebo
<code class="systemitem">unable to find a register to spill</code> nebo
<code class="systemitem">can't find a register in class `GENERAL_REGS'
while reloading `asm'</code>.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Právě jste narazili na chybu v <span class="application">gcc</span>.
<a class="ulink" href="http://gcc.gnu.org/bugs.html" target="_top">Nahlaste ji prosím týmu gcc</a>,
nikoli nám. Z nějakého důvodu se zdá, že <span class="application">MPlayer</span>
často spouští chyby kompileru. Přesto je však nebudeme odstraňovat, ani je
v našich zdrojových textech obcházet. Chcete-li se vyhnout těmto problémům,
zůstaňte věrni té verzi kompileru, která je známa jako spolehlivá a stabilní,
nebo často upgradujte.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601565"></a><a name="id2601567"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Existují binární (RPM/Debian) balíčky <span class="application">MPlayer</span>u?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Podrobnosti viz sekce <a class="link" href="#debian" title="8.1.1. Vytvoření balíčku pro Debian">Debian</a> a <a class="link" href="#rpm" title="8.1.2. Balení RPM">RPM</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601598"></a><a name="id2601600"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu skompilovat 32 bitový <span class="application">MPlayer</span> na 64 bitovém
Athlonu?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Vyzkoušejte následující volby configure:
</p><pre class="screen">
./configure --target=i386-linux --cc="gcc -m32" --as="as --32" --with-extralibdir=/usr/lib
</pre><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601626"></a><a name="id2601629"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Configure skončí s následujícím textem a <span class="application">MPlayer</span> se nezkompiluje!
</p><pre class="screen">Your gcc does not support even i386 for '-march' and '-mcpu'</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Vaše gcc není správně nainstalováno, detaily naleznete v souboru
<tt class="filename">configure.log</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601661"></a><a name="id2601663"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Mám Matrox G200/G400/G450/G550, jak zkompiluji/použiji ovladač
<code class="systemitem">mga_vid</code>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Přečtěte si sekci <a class="link" href="#mga_vid" title="7.7. Matrox framebuffer (mga_vid)">mga_vid</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601689"></a><a name="id2601691"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Během 'make', si <span class="application">MPlayer</span> stěžuje na chybějící
X11 knihovny. Tomu nerozumím, vždyť <span class="emphasis"><em>mám</em></span> nainstalovány X11!?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
... ale nemáte nainstalován vývojářský (dev/devel) balíček pro X11.
Nebo ne zprávně.
V Red Hatu se nazývá <tt class="filename">XFree86-devel*</tt>,
v Debianu Woody je to <tt class="filename">xlibs-dev</tt>,
v Debianu Sarge je to <tt class="filename">libx11-dev</tt>. Také se přesvědčte,
že symlinky <tt class="filename">/usr/X11</tt> a
<tt class="filename">/usr/include/X11</tt> existují.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601754"></a><a name="id2601757"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Kompilace na Mac OS 10.3 vede k několika linkovacím chybám.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Chyba linkování, kterou zakoušíte vypadá nejspíš takto:
</p><pre class="screen">
ld: Undefined symbols:
_LLCStyleInfoCheckForOpenTypeTables referenced from QuartzCore expected to be defined in ApplicationServices
_LLCStyleInfoGetUserRunFeatures referenced from QuartzCore expected to be defined in ApplicationServices
</pre><p>
Tento problém působí vývojáři Apple, kteří používají 10.4 pro kompilaci
svého software a distribuují binárky uživatelům 10.3 přes
Software Update.
Nedefinované symboly jsou přítomny v Mac OS 10.4,
ale nikoli 10.3.
Jedním z řešení může být downgrade na QuickTime 7.0.1.
Následující řešení je však lepší.
</p><p>
Získejte
<a class="ulink" href="http://rapidshare.de/files/20281171/CompatFrameworks.tgz.html" target="_top">starší verzi frameworků</a>.
Získáte zde komprimovaný soubor obsahující QuickTime
7.0.1 Framework a 10.3.9 QuartzCore Framework.
</p><p>
Rozbalte soubory někde mimo adresář System.
(čili neinstalujte tyto frameworky do svého
<tt class="filename">/System/Library/Frameworks</tt>!
Použití těchto starších verzí slouží jen k obejití linkovacích chyb!)
</p><pre class="screen">gunzip &lt; CompatFrameworks.tgz | tar xvf -</pre><p>
V config.mak byste měli přidat
<code class="systemitem">-F/cesta/kam/jste/to/rozbalili</code>
do proměnné <code class="systemitem">OPTFLAGS</code>.
Pokud používáte <span class="application">X-Code</span>, můžete prostě zvolit tyto
frameworky místo systémových.
</p><p>
Výsledná binárka <span class="application">MPlayer</span>u bude využívat
framework nainstalovaný na vašem systému přes dynamické linkování
prováděné za běhu.
(Můžete si to ověřit pomocí <code class="systemitem">otool -l</code>).
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-general"></a>11.3. Obecné dotazy</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2601890">
Existují nějaké e-mailové konference pro MPlayer?
</a></dt><dt>Otázka: <a href="#id2601918">
Našel/našla jsem odpornou chybu když jsem chtěl(a) přehrát svůj oblíbený film!
Komu to mám oznámit?
</a></dt><dt>Otázka: <a href="#id2601944">
Mám potíže s přehráváním souborů s ... kodekem. Mohu je používat?
</a></dt><dt>Otázka: <a href="#id2601973">
Při startu přehrávání dostanu následující hlášku, ale jinak vše vypadá dobře:
Linux RTC init: ioctl (rtc_pie_on): Permission denied
</a></dt><dt>Otázka: <a href="#id2602006">
Jak si mohu udělat snímek obrazovky?
</a></dt><dt>Otázka: <a href="#id2602060">
Co znamenají čísla na stavovém řádku?
</a></dt><dt>Otázka: <a href="#id2602306">
Objevuje se chybová zpráva o chybějícím souboru
/usr/local/lib/codecs/ ...
</a></dt><dt>Otázka: <a href="#id2602334">
Jak zařídit, aby si MPlayer pamatoval volby, které
používám pro konkrétní soubor, např. film.avi?
</a></dt><dt>Otázka: <a href="#id2602378">
Titulky jsou hezké, nejkrásnější jaké jsem viděl, ale zpomalují přehrávání!
Vím že je to nepravděpodobné ...
</a></dt><dt>Otázka: <a href="#id2602420">
Nemohu se dostat do GUI menu. Kliknu pravým tlačítkem, ale nemám přístup
k žádné z položek!
</a></dt><dt>Otázka: <a href="#id2602491">
Jak mohu spustit MPlayer na pozadí?
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601890"></a><a name="id2601892"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Existují nějaké e-mailové konference pro <span class="application">MPlayer</span>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ano. Podívejte se do sekce
<a class="ulink" href="http://www.mplayerhq.hu/design7/mailing_lists.html" target="_top">e-mailových konferencí</a>
naší domácí stránky.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601918"></a><a name="id2601920"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Našel/našla jsem odpornou chybu když jsem chtěl(a) přehrát svůj oblíbený film!
Komu to mám oznámit?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Přečtěte si prosím <a class="link" href="#bugreports" title="Příloha A. Jak hlásit chyby">postupy hlášení chyb</a>
a následujte instrukce.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601944"></a><a name="id2601946"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Mám potíže s přehráváním souborů s ... kodekem. Mohu je používat?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Prověřte
<a class="ulink" href="../../codecs-status.html" target="_top">stav kodeku</a>,
pokud neobsahuje váš kodek, přečtěte si
<a class="ulink" href="../../tech/win32-codec-howto" target="_top">Win32 codec HOWTO</a>
a kontaktujte nás.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601973"></a><a name="id2601976"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Při startu přehrávání dostanu následující hlášku, ale jinak vše vypadá dobře:
</p><pre class="screen">Linux RTC init: ioctl (rtc_pie_on): Permission denied</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Potřebujete speciálně nastavené jádro, abychom mohli použít
RTC časování. Detaily naleznete v <a class="link" href="#rtc" title="2.6. RTC">RTC</a> části
dokumentace.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602006"></a><a name="id2602009"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak si mohu udělat snímek obrazovky?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Abyste si mohli udělat snímek, musíte použít video výstupní rozhraní, které
nepoužívá překrývání. Jde to například pod X11 s <tt class="option">-vo x11</tt>, pod
Windows funguje <tt class="option">-vo directx:noaccel</tt>.
</p><p>
Alternativně můžete spustit <span class="application">MPlayer</span> s video filtrem
<code class="systemitem">screenshot</code>
(<tt class="option">-vf screenshot</tt>) a stisknout tlačítko <span class="keycap"><b>s</b></span>
pro sejmutí obrazu.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602060"></a><a name="id2602062"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Co znamenají čísla na stavovém řádku?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Příklad:
</p><pre class="screen">
A: 2.1 V: 2.2 A-V: -0.167 ct: 0.042 57/57 41% 0% 2.6% 0 4 49% 1.00x
</pre><p>
</p><div class="variablelist"><dl><dt><span class="term"><code class="systemitem">A: 2.1</code></span></dt><dd><p>pozice zvukové stopy v sekundách</p></dd><dt><span class="term"><code class="systemitem">V: 2.2</code></span></dt><dd><p>pozice videa v sekundách</p></dd><dt><span class="term"><code class="systemitem">A-V: -0.167</code></span></dt><dd><p>odchylka audio-video v sekundách (zpoždění (delay))</p></dd><dt><span class="term"><code class="systemitem">ct: 0.042</code></span></dt><dd><p>celková provedená korekce A-V synchronizace</p></dd><dt><span class="term"><code class="systemitem">57/57</code></span></dt><dd><p>snímků přehráno/dekódováno (počítáno od posledního převíjení)</p></dd><dt><span class="term"><code class="systemitem">41%</code></span></dt><dd><p>
  zatížení CPU video kodekem v procentech
  (při slice renderování a direct renderování zahrnuje i video_out)
  </p></dd><dt><span class="term"><code class="systemitem">0%</code></span></dt><dd><p>video_out zatížení CPU</p></dd><dt><span class="term"><code class="systemitem">2.6%</code></span></dt><dd><p>procentuální zatížení CPU audio kodekem</p></dd><dt><span class="term"><code class="systemitem">0</code></span></dt><dd><p>počet zahozených snímků pro zachování A-V synchronizace</p></dd><dt><span class="term"><code class="systemitem">4</code></span></dt><dd><p>aktuální úroveň postprocesingu obrazu (při použití
<tt class="option">-autoq</tt>)</p></dd><dt><span class="term"><code class="systemitem">49%</code></span></dt><dd><p>aktuální naplnění vyrovnávací paměti (běžně okolo 50%)</p></dd><dt><span class="term"><code class="systemitem">1.00x</code></span></dt><dd><p>rychlost přehrávání v násobcích původní rychlosti</p></dd></dl></div><p>
Většina z nich je určena pro ladění chyb. Použijte volbu <tt class="option">-quiet</tt>,
aby zmizely.
U některých souborů můžete vidět, že zatížení CPU video_outem je nulové (0%).
To proto, že je volán přímo video kodekem a nelze jej měřit odděleně.
Pokud chcete znát rychlost video_out, porovnejte rozdíl při přehrávání souboru
do <tt class="option">-vo null</tt> a do obvyklého video výstupního zařízení.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602306"></a><a name="id2602308"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Objevuje se chybová zpráva o chybějícím souboru
<tt class="filename">/usr/local/lib/codecs/</tt> ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Stáhněte si a nainstalujte binární kodeky z naší
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html" target="_top">download stránky</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602334"></a><a name="id2602336"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak zařídit, aby si <span class="application">MPlayer</span> pamatoval volby, které
používám pro konkrétní soubor, např. <tt class="filename">film.avi</tt>?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Vytvořte soubor s názvem <tt class="filename">film.avi.conf</tt> s volbami jen pro
tento soubor a umístěte jej do <tt class="filename">~/.mplayer</tt>
nebo do adresáře s filmem.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602378"></a><a name="id2602380"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Titulky jsou hezké, nejkrásnější jaké jsem viděl, ale zpomalují přehrávání!
Vím že je to nepravděpodobné ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Poté co provedete <tt class="filename">./configure</tt>,
vyeditujte <tt class="filename">config.h</tt> a nahraďte
<code class="systemitem">#undef FAST_OSD</code> za
<code class="systemitem">#define FAST_OSD</code>. Pak rekompilujte.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602420"></a><a name="id2602422"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nemohu se dostat do GUI menu. Kliknu pravým tlačítkem, ale nemám přístup
k žádné z položek!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Používáte FVWM? Zkuste následující:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <span class="guimenu">Start</span> → <span class="guisubmenu">Settings</span> → <span class="guisubmenu">Configuration</span> → <span class="guimenuitem">Base Configuration</span>
</p></li><li class="listitem"><p>
  Set <code class="systemitem">Use Applications position hints</code>
  to <code class="systemitem">Yes</code>
</p></li></ol></div><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602491"></a><a name="id2602494"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu spustit <span class="application">MPlayer</span> na pozadí?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte:
</p><pre class="screen">
mplayer <em class="replaceable"><code>volby</code></em> <em class="replaceable"><code>soubor</code></em> &lt; /dev/null &amp;
</pre><p>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-playback"></a>11.4. Potíže s přehráváním</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2602538">
Nemohu přijít na příčinu nějakého podivného problému při přehrávání.
</a></dt><dt>Otázka: <a href="#id2602607">
Jak dostanu titulky do černých okrajů kolem filmu?
</a></dt><dt>Otázka: <a href="#id2602638">
Jak mohu vybrat audio/titulkové stopy z DVD, OGM, Matroska nebo NUT souboru?
</a></dt><dt>Otázka: <a href="#id2602700">
Zkouším přehrávat náhodný stream z internetu, ale nedaří se mi to.
</a></dt><dt>Otázka: <a href="#id2602719">
Stáhnul jsem si film přes P2P síť ale nefunguje!
</a></dt><dt>Otázka: <a href="#id2602742">
Nedaří se mi přimět titulky, aby se zobrazovaly, pomoc!!
</a></dt><dt>Otázka: <a href="#id2602783">
Proč MPlayer nefunguje na Fedora Core?
</a></dt><dt>Otázka: <a href="#id2602950">
MPlayer zhavaruje s hláškou
MPlayer interrupted by signal 4 in module: decode_video
nebo
MPlayer přerušen signálem 4 v modulu: decode_video
</a></dt><dt>Otázka: <a href="#id2602998">
Když zkouším grabovat z tuneru, funguje to, ale jsou divné barvy. V jiných
programech je to OK.
</a></dt><dt>Otázka: <a href="#id2603026">
Dostávám podivné procentní hodnoty (příliš velké)
při přehrávání na notebooku.
</a></dt><dt>Otázka: <a href="#id2603061">
Synchronizace zvuku a videa se úplně rozpadne když spustím
MPlayer jako
root na notebooku.
Když jej spustím jako uživatel, pracuje normálně.
</a></dt><dt>Otázka: <a href="#id2603106">
Při přehrávání souboru se začne přehrávání zadrhávat a dostanu následující
hlášení:
Badly interleaved AVI file detected - switching to -ni mode...
nebo
Detekován špatně prokládaný AVI soubor – přepínám do režimu -ni...
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602538"></a><a name="id2602540"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nemohu přijít na příčinu nějakého podivného problému při přehrávání.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Máte zatoulaný soubor <tt class="filename">codecs.conf</tt> v
<tt class="filename">~/.mplayer/</tt>, <tt class="filename">/etc/</tt>,
<tt class="filename">/usr/local/etc/</tt> a podobně? Odstraňte jej, protože
zastaralé <tt class="filename">codecs.conf</tt> soubory mohou způsobit obskurní
potíže a jsou zamýšleny jen pro použití vývojáři pracujícími na podpoře kodeků.
Tento soubor má přednost před vestavěným nastavením kodeků
<span class="application">MPlayer</span>u, což způsobí katastrofu, jakmile dojde
k nekompatibilním změnám v nových verzích programu.
Pokud není používán experty, jedná se jistou cestu do pekel, působící
náhodné a těžko odhalitelné pády aplikace a problémy s přehráváním.
Pokud jej tedy stále ještě někde máte, ihned se jej zbavte.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602607"></a><a name="id2602609"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak dostanu titulky do černých okrajů kolem filmu?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte video filtr <code class="systemitem">expand</code> pro rozšíření vertikálního
rozměru oblasti do které je film renderován a umístěte film do její horní části,
například:
</p><pre class="screen">mplayer -vf expand=0:-100:0:0 -slang de dvd://1</pre><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602638"></a><a name="id2602640"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu vybrat audio/titulkové stopy z DVD, OGM, Matroska nebo NUT souboru?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Musíte použít <tt class="option">-aid</tt> (ID zvuku) nebo <tt class="option">-alang</tt>
(jazyk zvuku), <tt class="option">-sid</tt>(ID titulků) nebo <tt class="option">-slang</tt>
(jazyk titulků), například:
</p><pre class="screen">
mplayer -alang eng -slang eng <em class="replaceable"><code>example.mkv</code></em>
mplayer -aid 1 -sid 1 <em class="replaceable"><code>example.mkv</code></em>
</pre><p>
Chcete-li vědět jaké jsou k dispozici:
</p><pre class="screen">
mplayer -vo null -ao null -frames 0 -v <em class="replaceable"><code>filename</code></em> | grep sid
mplayer -vo null -ao null -frames 0 -v <em class="replaceable"><code>filename</code></em> | grep aid
</pre><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602700"></a><a name="id2602702"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Zkouším přehrávat náhodný stream z internetu, ale nedaří se mi to.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Zkuste přehrávat stream s volbou <tt class="option">-playlist</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602719"></a><a name="id2602721"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Stáhnul jsem si film přes P2P síť ale nefunguje!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Váš soubor je poškozený nebo falešný. Pokud jej máte od kámoše a jemu funguje,
zkuste si porovnat
<span class="application">md5sum</span> hashe.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602742"></a><a name="id2602744"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nedaří se mi přimět titulky, aby se zobrazovaly, pomoc!!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ujistěte se, že máte správně nainstalovány fonty. Znovu proveďte kroky v části
<a class="link" href="#fonts-osd" title="2.4. Fonty a OSD">Fonty a OSD</a> sekce instalace.
Pokud používáte TrueType fonty, ověřte zda máte nainstalovánu
<code class="systemitem">FreeType</code> knihovnu.
Další postup zahrnuje prověření vašich titulků v textovém editoru nebo v jiných
přehrávačích. Také je zkuste převézt do jiného formátu.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602783"></a><a name="id2602785"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Proč <span class="application">MPlayer</span> nefunguje na Fedora Core?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ve Fedoře je špatná spolupráce mezi exec-shieldem,
prelinkem a jakoukoli aplikací používající Windows DLL
(tak jako <span class="application">MPlayer</span>).
</p><p>
Problém je v tom, že exec-shield znáhodní načítací adresy všech systémových
knihoven. Toto znáhodnění nastane v době předlinkování (prelink time)(jednou
za dva týdny).
</p><p>
Když se <span class="application">MPlayer</span> pokouší nahrát Windows DLL, chce ji
umístit na specifickou adresu (0x400000). Pokud tam ale již je důležitá
systémová knihovna, <span class="application">MPlayer</span>
zhavaruje.
(Typickým projevem je segmentation fault při pokusu o přehrání
Windows Media 9 souborů.)
</p><p>
Pokud narazíte na tento problém, máte dvě možnosti:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Počkat dva týdny. Možná to bude opět fungovat.
</p></li><li class="listitem"><p>
  Přelinkovat všechny knihovny systému s odlišnými prelink
  volbami. Zde jsou instrukce krok za krokem:
  </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Krok 1"><p>
    Vyeditujte <tt class="filename">/etc/syconfig/prelink</tt> a změňte
    </p><pre class="programlisting">PRELINK_OPTS=-mR</pre><p> na
    </p><pre class="programlisting">PRELINK_OPTS="-mR --no-exec-shield"</pre><p>
  </p></li><li class="step" title="Krok 2"><p>
    <span class="command"><strong>touch /var/lib/misc/prelink.force</strong></span>
  </p></li><li class="step" title="Krok 3"><p>
    <span class="command"><strong>/etc/cron.daily/prelink</strong></span>
    (To přelinkuje všechny aplikace a bude to trvat opravdu dlouho.)
  </p></li><li class="step" title="Krok 4"><p>
    <span class="command"><strong>execstack -s <em class="replaceable"><code>/cesta/k/</code></em>mplayer</strong></span>
    (Tohle vypne exec-shield pro binárku <span class="application">MPlayer</span>u.)
  </p></li></ol></div></li></ul></div><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602950"></a><a name="id2602952"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> zhavaruje s hláškou
</p><pre class="screen">MPlayer interrupted by signal 4 in module: decode_video</pre><p>
nebo
</p><pre class="screen">MPlayer přerušen signálem 4 v modulu: decode_video</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Nepoužívejte <span class="application">MPlayer</span> na CPU odlišném než na jakém
byl kompilován, nebo jej rekompilujte s detekcí CPU za běhu
(<span class="command"><strong>./configure --enable-runtime-cpudetection</strong></span>).
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2602998"></a><a name="id2603000"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Když zkouším grabovat z tuneru, funguje to, ale jsou divné barvy. V jiných
programech je to OK.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Pravděpodobně vaše karta hlásí některé barevné režimy jako podporované,
i když je nepodporuje. Zkuste to s YUY2 místo výchozího
YV12 (viz sekci <a class="link" href="#tv-input" title="5.1. TV vstup">TV</a>).
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603026"></a><a name="id2603028"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Dostávám podivné procentní hodnoty (příliš velké)
při přehrávání na notebooku.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
To je práce power managementu / systému šetřícímu energií vašeho notebooku
(BIOS, nikoli jádro). Zapojte konektor vnějšího napájení
<span class="bold"><strong>před</strong></span> zapnutím notebooku. Můžete také
zkusit zda vám pomůže
<a class="ulink" href="http://www.kernel.org/pub/linux/utils/kernel/cpufreq/cpufreq.html" target="_top">cpufreq</a>
(rozhraní k SpeedStep pro Linux).
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603061"></a><a name="id2603063"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Synchronizace zvuku a videa se úplně rozpadne když spustím
<span class="application">MPlayer</span> jako
<code class="systemitem">root</code> na notebooku.
Když jej spustím jako uživatel, pracuje normálně.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Toto je opět práce power managementu (viz výš). Zapněte externí napájení
<span class="bold"><strong>před</strong></span> zapnutím notebooku, nebo použijte
volbu <tt class="option">-nortc</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603106"></a><a name="id2603108"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Při přehrávání souboru se začne přehrávání zadrhávat a dostanu následující
hlášení:
</p><pre class="screen">Badly interleaved AVI file detected - switching to -ni mode...</pre><p>
nebo
</p><pre class="screen">Detekován špatně prokládaný AVI soubor – přepínám do režimu -ni...</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Špatně prokládané soubory a volba <tt class="option">-cache</tt> nejdou moc dohromady.
Zkuste <tt class="option">-nocache</tt>.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-driver"></a>11.5. Potíže video/audio ovaldače (vo/ao)</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2603160">
Když přejdu do celoobrazovkového režimu, dostanu pouze černé okraje kolem
obrazu bez jeho zvětšení na celou obrazovku.
</a></dt><dt>Otázka: <a href="#id2603220">
Právě jsem nainstaloval MPlayer. Když chci však
otevřít video soubor, nastane fatální chyba:
Error opening/initializing the selected video_out (-vo) device.
nebo

Selhalo otevření/inicializace vybraného video_out (-vo) rozhraní.

Jak mohu vyřašit své problémy?
</a></dt><dt>Otázka: <a href="#id2603304">
Mám problémy s [váš okenní manažer]
a celoobrazovkovými xv/xmga/sdl/x11 režimy ...
</a></dt><dt>Otázka: <a href="#id2603337">
Zvuk se během přehrávání AVI souboru rozejde s videem.
</a></dt><dt>Otázka: <a href="#id2603368">
Můj počítač přehrává MS DivX AVI s rozlišeními ~ 640x300 a stereo MP3 zvukem
příliš pomalu.
Když použiji volbu -nosound, vše je v pořádku (jen bez zvuku).
</a></dt><dt>Otázka: <a href="#id2603394">
Jak mohu použít dmix spolu s
MPlayerem?
</a></dt><dt>Otázka: <a href="#id2603431">
Nemám zvuk při přehrávání videa a dostanu chybovou zprávu podobnou této:

AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
audio_setup: Nelze otevřít audio zařízení /dev/dsp: Zařízení nebo rozhraní je již používáno
nelze otevřít/inicializovat audio zařízení -&gt; BEZ ZVUKU
Audio: bez zvuku!!!
Začínám přehrávat...

</a></dt><dt>Otázka: <a href="#id2603488">
Pokus spustím MPlayer pod KDE, dostanu pouze černou
obrazovku a nic se neděje. Asi po minutě se video spustí.
</a></dt><dt>Otázka: <a href="#id2603536">
Mám problémy s A/V synchronizací.
Některé mé AVI hrají dobře, ale některé s dvojnásobnou rychlostí!
</a></dt><dt>Otázka: <a href="#id2603563">
Když přehrávám tento soubor, rozjede se mi zvuk s obrazem a/nebo
MPlayer havaruje s hláškou:

DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!

nebo

DEMUXER: Příliš mnoho (945 v 8390980 bytech) video paketů ve vyrovnávací paměti!

</a></dt><dt>Otázka: <a href="#id2603676">
Jak se zbavím A/V desynchronizace
při převíjení v RealMedia proudech?
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603160"></a><a name="id2603162"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Když přejdu do celoobrazovkového režimu, dostanu pouze černé okraje kolem
obrazu bez jeho zvětšení na celou obrazovku.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Vaše výstupní video rozhraní nepodporuje hardwarové škálování a protože
softwarové škálování může být neskutečně pomalé, nezapíná jej
<span class="application">MPlayer</span> automaticky. Pravděpodobně používáte
rozhraní <code class="systemitem">x11</code> místo <code class="systemitem">xv</code>.
Zkuste přidat <tt class="option">-vo xv</tt> do příkazového řádku, nebo si
najděte v <a class="link" href="#video" title="Kapitola 7. Výstupní video zařízení/rozhraní">sekci video</a> alternativní video
výstupní rozhraní. Volba <tt class="option">-zoom</tt>
explicitně zapne softwarové škálování.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603220"></a><a name="id2603222"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Právě jsem nainstaloval <span class="application">MPlayer</span>. Když chci však
otevřít video soubor, nastane fatální chyba:
</p><pre class="screen">Error opening/initializing the selected video_out (-vo) device.</pre><p>
nebo
</p><pre class="screen">
Selhalo otevření/inicializace vybraného video_out (-vo) rozhraní.
</pre><p>
Jak mohu vyřašit své problémy?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Změňte své video výstupní zařízení. Spusťte následující příkaz, abyste
dostali seznam dostupných video rozhraní:
</p><pre class="screen">mplayer -vo help</pre><p>
Jakmile jste si vybrali správné video výstupní rozhraní, přidejte jej
do svého konfiguračního souboru. Přidejte
</p><pre class="programlisting">
vo = <em class="replaceable"><code>vybraný_vo</code></em>
</pre><p>
do <tt class="filename">~/.mplayer/config</tt> a/nebo
</p><pre class="programlisting">
vo_driver = <em class="replaceable"><code>vybraný_vo</code></em>
</pre><p>
do <tt class="filename">~/.mplayer/gui.conf</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603304"></a><a name="id2603306"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Mám problémy s <em class="replaceable"><code>[váš okenní manažer]</code></em>
a celoobrazovkovými xv/xmga/sdl/x11 režimy ...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Přečtěte si <a class="link" href="#bugreports" title="Příloha A. Jak hlásit chyby">postup hlášení chyb</a> a pošlete nám
správné hlášení chyby.
Rovněž zkuste experimentovat s volbou <tt class="option">-fstype</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603337"></a><a name="id2603339"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Zvuk se během přehrávání AVI souboru rozejde s videem.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Zkuste volbu <tt class="option">-bps</tt> nebo <tt class="option">-nobps</tt>. Pokud se to
nezlepší, přečtěte si
<a class="link" href="#bugreports" title="Příloha A. Jak hlásit chyby">postup hlášení chyb</a>
a nahrejte soubor na FTP.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603368"></a><a name="id2603370"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Můj počítač přehrává MS DivX AVI s rozlišeními ~ 640x300 a stereo MP3 zvukem
příliš pomalu.
Když použiji volbu <tt class="option">-nosound</tt>, vše je v pořádku (jen bez zvuku).
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Váš počítač je příliš pomalý, nebo máte vadný ovladač zvukové karty. Prostudujte
si dokumentaci, abyste zjistili, zda nemůžete zvýšit výkon.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603394"></a><a name="id2603396"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu použít <span class="application">dmix</span> spolu s
<span class="application">MPlayer</span>em?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Poté co nastavíte
<a class="ulink" href="http://alsa.opensrc.org/index.php?page=DmixPlugin" target="_top">asoundrc</a>
musíte použít <tt class="option">-ao alsa:device=dmix</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603431"></a><a name="id2603433"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nemám zvuk při přehrávání videa a dostanu chybovou zprávu podobnou této:
</p><pre class="screen">
AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian)
audio_setup: Nelze otevřít audio zařízení /dev/dsp: Zařízení nebo rozhraní je již používáno
nelze otevřít/inicializovat audio zařízení -&gt; BEZ ZVUKU
Audio: bez zvuku!!!
Začínám přehrávat...
</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Máte spuštěno KDE nebo GNOME s aRts nebo ESD zvukovým démonem? Zkuste zakázat
zvukový démon, nebo použijte volbu <tt class="option">-ao arts</tt> nebo
<tt class="option">-ao esd</tt>, aby <span class="application">MPlayer</span> použil aRts
nebo ESD.
Možná provozujete ALSA bez OSS emulace, zkuste nahrát jaderné moduly pro ALSA
OSS, nebo nařiďte použití výstupního rozhraní ALSA přidáním volby
<tt class="option">-ao alsa</tt> do příkazového řádku.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603488"></a><a name="id2603490"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Pokus spustím <span class="application">MPlayer</span> pod KDE, dostanu pouze černou
obrazovku a nic se neděje. Asi po minutě se video spustí.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Zvukový démon KDE aRts blokuje zvukové zařízení. Buď čekejte až se video spustí,
nebo zakažte démona aRts v ovládacím centru. Chcete-li použít aRts zvuk,
nastavte výstup zvuku přes naše nativní aRts zvukové rozhraní
(<tt class="option">-ao arts</tt>). Pokud selže, nebo není zakompilováno, zjuste SDL
(<tt class="option">-ao sdl</tt>). Ujistěte se však, že vaše SDL umí pracovat s aRts
zvukem. Další možností je spustit <span class="application">MPlayer</span> s artsdsp.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603536"></a><a name="id2603538"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Mám problémy s A/V synchronizací.
Některé mé AVI hrají dobře, ale některé s dvojnásobnou rychlostí!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Máte vadnou zvukovou kartu nebo její ovladač. Nejspíš je pevně nastavena na
44100Hz a vy se pokoušíte přehrát soubor s 22050Hz zvukem. Zkuste zvukový filtr
<code class="systemitem">resample</code>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603563"></a><a name="id2603565"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Když přehrávám tento soubor, rozjede se mi zvuk s obrazem a/nebo
<span class="application">MPlayer</span> havaruje s hláškou:
</p><pre class="screen">
DEMUXER: Too many (945 in 8390980 bytes) video packets in the buffer!
</pre><p>
nebo
</p><pre class="screen">
DEMUXER: Příliš mnoho (945 v 8390980 bytech) video paketů ve vyrovnávací paměti!
</pre><p>
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
To může mít několik příčin.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Váš CPU <span class="emphasis"><em>a/nebo</em></span> video karta <span class="emphasis"><em>a/nebo</em></span>
sběrnice je příliš pomalá. <span class="application">MPlayer</span> v tom případě
vypíše hlášku (a počet zahozených snímků rychle narůstá).
</p></li><li class="listitem"><p>
Pokud je to AVI, možná je špatně prokládané. Zkuste to obejít
volbou <tt class="option">-ni</tt>.
Nebo může mít špatnou hlavičku, v tom případě může pomoci
<tt class="option">-nobps</tt> a/nebo <tt class="option">-mc 0</tt>.
</p></li><li class="listitem"><p>
  Mnoho FLV souborů bude správně hrát s <tt class="option">-correct-pts</tt>.
  Naneštěstí <span class="application">MEncoder</span> takovou volbu nemá,
  ale můžete zkusit nastavit <tt class="option">-fps</tt> na zprávnou hodnotu ručně,
  pokud ji znáte.
</p></li><li class="listitem"><p>
Ovladač vaší zvukové karty je vadný.
</p></li></ul></div><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603676"></a><a name="id2603678"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak se zbavím A/V desynchronizace
při převíjení v RealMedia proudech?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
<tt class="option">-mc 0.1</tt> může pomoci.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-dvd"></a>11.6. Přehrávání DVD</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2603708">
Což takhle DVD navigace/nabídky?
</a></dt><dt>Otázka: <a href="#id2603763">
Nepřehraji žádná současná DVD od Sony Pictures/BMG.
</a></dt><dt>Otázka: <a href="#id2603800">
Co takhle titulky? Umí je MPlayer zobrazovat?
</a></dt><dt>Otázka: <a href="#id2603826">
Jak nastavím kód regionu na mé DVD mechanice? Nemám Windows!
</a></dt><dt>Otázka: <a href="#id2603847">
Nemohu přehrát DVD, MPlayer skončí nebo vypíše chyby "Encrypted VOB file!".
</a></dt><dt>Otázka: <a href="#id2603866">
Musím být (setuid) root, abych mohl(a) přehrávat DVD?
</a></dt><dt>Otázka: <a href="#id2603891">
Je možné přehrát/enkódovat pouze vybrané kapitoly?
</a></dt><dt>Otázka: <a href="#id2603909">
Přehrávání DVD je zdlouhavé!
</a></dt><dt>Otázka: <a href="#id2603943">
Zkopíroval(a) jsem DVD pomocí vobcopy. Jak jej mohu přehrát/enkódovat
z harddisku?
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603708"></a><a name="id2603710"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Což takhle DVD navigace/nabídky?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
<span class="application">MPlayer</span> nepodporuje DVD nabídky díky závažným
omezením svého návrhu znemožňujícím správné nakládání se stabilními obrázky a
interaktivním obsahem. Pokud chcete mít své oblíbené nabídky (menu), budete
muset použít jiný přehrávač jako <span class="application">xine</span>,
<span class="application">vlc</span> nebo <span class="application">Ogle</span>.
Pokud chcete mít DVD navigaci v <span class="application">MPlayer</span>u, musíte si
ji naprogramovat, ale uvědomte si, že to bude velká akce.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603763"></a><a name="id2603765"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nepřehraji žádná současná DVD od Sony Pictures/BMG.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
To je normální; byli jste podfouknuti a prodali vám uměle defektní disk.
Jediný způsob, jak přehrávat tato DVD je obcházet špatné bloky na disku
použitím DVDnav místo mpdvdkit2.
Toho lze dosáhnout kompilací <span class="application">MPlayer</span>u s podporou
DVDnav a následně záměnou dvd:// za dvdnav:// na příkazovém řádku.
DVDnav se zatím vzájemně vylučuje s mpdvdkit2, takže musíte configure skriptu
předat volbu <tt class="option">--disable-mpdvdkit</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603800"></a><a name="id2603802"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Co takhle titulky? Umí je <span class="application">MPlayer</span> zobrazovat?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ano. Viz <a class="link" href="#dvd" title="4.2. Přehrávání DVD">kapitola DVD</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603826"></a><a name="id2603828"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak nastavím kód regionu na mé DVD mechanice? Nemám Windows!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte nástroj
<a class="ulink" href="http://linvdr.org/projects/regionset/" target="_top">regionset</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603847"></a><a name="id2603849"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nemohu přehrát DVD, MPlayer skončí nebo vypíše chyby "Encrypted VOB file!".
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
CSS dešifrovací kód nepracuje s některými DVD mechanikami, pokud správně
nenastavíte kód regionu. Viz odpověď na předchozí otázku.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603866"></a><a name="id2603869"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Musím být (setuid) root, abych mohl(a) přehrávat DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ne. Ačkoli musíte mít příslušná práva k souboru DVD zařízení
(v <tt class="filename">/dev/</tt>).
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603891"></a><a name="id2603893"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Je možné přehrát/enkódovat pouze vybrané kapitoly?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ano, vyzkoušejte volbu <tt class="option">-chapter</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603909"></a><a name="id2603911"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Přehrávání DVD je zdlouhavé!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte volbu <tt class="option">-cache</tt> (popsanou v man stránce) a zkuste
zapnout DMA pro DVD mechaniku pomocí nástroje <span class="command"><strong>hdparm</strong></span>
(popsaného v <a class="link" href="#drives" title="4.1. CD/DVD mechaniky">CD kapitole</a>).
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603943"></a><a name="id2603945"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Zkopíroval(a) jsem DVD pomocí vobcopy. Jak jej mohu přehrát/enkódovat
z harddisku?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte volbu <tt class="option">-dvd-device</tt> pro nastavení adresáře, které
obsahují soubory:
</p><pre class="screen">
mplayer dvd://1 -dvd-device <em class="replaceable"><code>/cesta/do/adresáře</code></em>
</pre><p>
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-features"></a>11.7. Požadavky na vlastnosti</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2603986">
Pokud je MPlayer v pauze a já se pokusím převíjet,
nebo stisknu jakoukoli klávesu, MPlayer se odpauzuje.
Rád(a) bych převíjel(a) film v pauze.
</a></dt><dt>Otázka: <a href="#id2604019">
Rád(a) bych převíjel(a) o +/- 1 snímek místo o 10 sekund.
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2603986"></a><a name="id2603988"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Pokud je <span class="application">MPlayer</span> v pauze a já se pokusím převíjet,
nebo stisknu jakoukoli klávesu, <span class="application">MPlayer</span> se odpauzuje.
Rád(a) bych převíjel(a) film v pauze.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Je velmi choulostivé zavést tuto vlastnost bez ztráty A/V synchronizace.
Všechny pokusy zatím selhaly, ale patche jsou vítány.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604019"></a><a name="id2604021"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Rád(a) bych převíjel(a) o +/- 1 snímek místo o 10 sekund.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Můžete se posunout o jedno pole vpřed stiskem <span class="keycap"><b>.</b></span>.
Pokud není film pauzován, zapauzuje se pak (detaily viz man stránka).
Krokování zpět pravděpodobně nebude v dohledné době implementováno.
</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="faq-encoding"></a>11.8. Enkódování</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>Otázka: <a href="#id2604059">
Jak mohu enkódovat?
</a></dt><dt>Otázka: <a href="#id2604082">
Jak mohu "nahrát" celý DVD titul do souboru?
</a></dt><dt>Otázka: <a href="#id2604123">
Jak vytvořím (S)VCD automaticky?
</a></dt><dt>Otázka: <a href="#id2604155">
Jak vytvořím (S)VCD?
</a></dt><dt>Otázka: <a href="#id2604194">
Jak spojím dva video soubory?
</a></dt><dt>Otázka: <a href="#id2604258">
Jak mohu opravit AVI soubory s vadným indexem nebo prokládáním?
</a></dt><dt>Otázka: <a href="#id2604307">
Jak mohu opravit poměr stran videa v AVI souboru?
</a></dt><dt>Otázka: <a href="#id2604349">
Jak mohu zálohovat a enkódovat VOB soubor s poškozeným začátkem?
</a></dt><dt>Otázka: <a href="#id2604421">
Nemohu zakódovat DVD titulky do AVI!
</a></dt><dt>Otázka: <a href="#id2604439">
Jak mohu enkódovat pouze některé kapitoly z DVD?
</a></dt><dt>Otázka: <a href="#id2604461">
Zkouším pracovat s 2GB+ soubory na souborovém systému VFAT. Bude to fungovat?
</a></dt><dt>Otázka: <a href="#id2604476">
Co znamenají čísla na stavovém řádku během enkódování?
</a></dt><dt>Otázka: <a href="#id2604628">
Jakto že je doporučený datový tok vypisovaný
MEncoderem záporný?
</a></dt><dt>Otázka: <a href="#id2604654">
Nemohu kompilovat ASF soubor do AVI/MPEG-4 (DivX) protože používá 1000 fps.
</a></dt><dt>Otázka: <a href="#id2604676">
Jak vložím titulky do výstupního souboru?
</a></dt><dt>Otázka: <a href="#id2604705">
Jak zakóduji pouze zvuk z hudebního videa?
</a></dt><dt>Otázka: <a href="#id2604777">
Proč přehrávače třetích stran selhávají při přehrávání MPEG-4 filmů enkódovaných
MEncoderem pozdější verze než 1.0pre7?
</a></dt><dt>Otázka: <a href="#id2601206">
Jak mohu enkódovat soubor jen se zvukem?
</a></dt><dt>Otázka: <a href="#id2601236">
Jak mohu přehrát titulky zabudované v AVI?
</a></dt><dt>Otázka: <a href="#id2601274">
MPlayer neumí...
</a></dt></dl></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604059"></a><a name="id2604061"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu enkódovat?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Přečtěte si sekci
<a class="link" href="#mencoder" title="Kapitola 9. Základní použití MEncoderu"><span class="application">MEncoder</span></a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604082"></a><a name="id2604084"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu "nahrát" celý DVD titul do souboru?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Jakmile jste vybrali svůj titul a ujistili se, že jej lze dobře přehrát
<span class="application">MPlayer</span>em, použijte volbu <tt class="option">-dumpstream</tt>.
Například:
</p><pre class="screen">
mplayer dvd://5 -dumpstream -dumpfile <em class="replaceable"><code>dvd_dump.vob</code></em>
</pre><p>
nahraje 5. titul z DVD do souboru
<em class="replaceable"><code>dvd_dump.vob</code></em>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604123"></a><a name="id2604125"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak vytvořím (S)VCD automaticky?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Zkuste skript <tt class="filename">mencvcd.sh</tt> z podadresáře
<tt class="filename">TOOLS</tt>.
Pomocí něj můžete enkódovat DVD nebo jiné filmy do VCD
nebo SVCD formátu a dokonce je vypálit přímo na CD.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604155"></a><a name="id2604157"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak vytvořím (S)VCD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Novější verze <span class="application">MEncoder</span>u umí přímo generovat
MPEG-2 soubory, které mohou být použity jako základ pro vytvoření VCD nebo SVCD
a měly by být přehratelné jak jsou na všech platformách (například pro
sdílení videa z digitálního kamkodéru se svými počítačově negramotnými přáteli).
Více informací naleznete v sekci
<a class="link" href="#menc-feat-vcd-dvd" title="10.8. Použití MEncoderu k vytváření VCD/SVCD/DVD-kompatibilních souborů.">Použití MEncoderu pro vytvoření VCD/SVCD/DVD-kompatibilních souborů</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604194"></a><a name="id2604196"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak spojím dva video soubory?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
MPEGy mohou být spojeny do jediného souboru s trochou štěstí přímo.
Pro AVI soubory můžete využít podporu pro více souborů
v <span class="application">MEncoder</span>u takto:
</p><pre class="screen">
mencoder -ovc copy -oac copy -o <em class="replaceable"><code>výstupní.avi</code></em> <em class="replaceable"><code>soubor1.avi</code></em> <em class="replaceable"><code>soubor2.avi</code></em>
</pre><p>
To však bude pracovat pouze tehdy, mají-li soubory stejné rozlišení a
používají stejný kodek.
Také můžete zkusit
<a class="ulink" href="http://fixounet.free.fr/avidemux/" target="_top">avidemux</a> a
<span class="application">avimerge</span> (součást sady nástrojů
<a class="ulink" href="http://www.transcoding.org/" target="_top">transcode</a>).
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604258"></a><a name="id2604260"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu opravit AVI soubory s vadným indexem nebo prokládáním?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Abyste se zbavili nutnosti používat <tt class="option">-idx</tt> pro zprovoznění
převíjení v AVI souborech s vadným indexem nebo <tt class="option">-ni</tt> pro
přehrávání špatně prokládaných souborů, použijte příkaz
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -idx -ovc copy -oac copy -o <em class="replaceable"><code>výstupní.avi</code></em>
</pre><p>
který zkopíruje video a audio proudy do nového AVI souboru, přičenž vygeneruje
správný index a správně uloží data (opraví proklad).
Tento způsob samozřejmě nedokáže odstranit chyby ve video a/nebo audio proudech.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604307"></a><a name="id2604310"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu opravit poměr stran videa v AVI souboru?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Poměr stran lze opravit díky volbě <span class="application">MEncoder</span>u
<tt class="option">-force-avi-aspect</tt>, která přepíše poměr stran uložený
v AVI OpenDML vprp hlavičce. Například:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -ovc copy -oac copy -o <em class="replaceable"><code>výstupní.avi</code></em> -force-avi-aspect 4/3
</pre><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604349"></a><a name="id2604352"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu zálohovat a enkódovat VOB soubor s poškozeným začátkem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Hlavní problém, když chcete enkódovat VOB soubor, který je poškozen
<sup>[<a name="fn-corrupted-files-or-copy-protection" href="#ftn.fn-corrupted-files-or-copy-protection" class="footnote">3</a>]</sup>,
je to, že bude velmi těžké získat enkódovaný soubor s perfektní A/V synchronizací.
Jedna z možností je vystřihnout poškozenou část a enkódovat jen
čistou část.
Nejdřív musíte zjistit, kde čistá část začíná:
</p><pre class="screen">
mplayer <em class="replaceable"><code>input.vob</code></em> -sb <em class="replaceable"><code>nb_of_bytes_to_skip</code></em>
</pre><p>
Pak můžete vytvořit nový soubor obsahující pouze bezchybnou část:
</p><pre class="screen">
dd if=<em class="replaceable"><code>input.vob</code></em> of=<em class="replaceable"><code>output_cut.vob</code></em> skip=1 ibs=<em class="replaceable"><code>nb_of_bytes_to_skip</code></em>
</pre><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604421"></a><a name="id2604423"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nemohu zakódovat DVD titulky do AVI!
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Musíte správně nastavit volbu <tt class="option">-sid</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604439"></a><a name="id2604441"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu enkódovat pouze některé kapitoly z DVD?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte správně volbu <tt class="option">-chapter</tt>,
jako: <tt class="option">-chapter 5-7</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604461"></a><a name="id2604463"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Zkouším pracovat s 2GB+ soubory na souborovém systému VFAT. Bude to fungovat?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Ne, VFAT nepodporuje 2GB+ soubory.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604476"></a><a name="id2604478"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Co znamenají čísla na stavovém řádku během enkódování?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Příklad:
</p><pre class="screen">
Pos: 264.5s   6612f ( 2%)  7.12fps Trem: 576min 2856mb  A-V:0.065 [2126:192]
</pre><p>
</p><div class="variablelist"><dl><dt><span class="term"><code class="systemitem">Pos: 264.5s</code></span></dt><dd><p>časová značka (pozice) v enkódovaném proudu</p></dd><dt><span class="term"><code class="systemitem">6612f</code></span></dt><dd><p>počet dokončených video snímků</p></dd><dt><span class="term"><code class="systemitem">( 2%)</code></span></dt><dd><p>enkódovaná část vstupního proudu</p></dd><dt><span class="term"><code class="systemitem">7.12fps</code></span></dt><dd><p>rychlost enkódování</p></dd><dt><span class="term"><code class="systemitem">Trem: 576min</code></span></dt><dd><p>odhadovaný čas potřebný pro dokončení enkódování</p></dd><dt><span class="term"><code class="systemitem">2856mb</code></span></dt><dd><p>odhadovaná velikost výsledného souboru</p></dd><dt><span class="term"><code class="systemitem">A-V:0.065</code></span></dt><dd><p>aktuální odchylka datových proudů zvuku a videa</p></dd><dt><span class="term"><code class="systemitem">[2126:192]</code></span></dt><dd><p>
  průměrný datový tok videa (v Mb/s) a průměrný datový tok zvuku (v Mb/s)
  </p></dd></dl></div><p>
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604628"></a><a name="id2604630"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jakto že je doporučený datový tok vypisovaný
<span class="application">MEncoder</span>em záporný?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Protože datový tok při kterém enkódujete audio je příliš velký, aby se film
vešel na jakékoli CD. Ověřte si, že máte dobře nainstalovaný libmp3lame.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604654"></a><a name="id2604656"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Nemohu kompilovat ASF soubor do AVI/MPEG-4 (DivX) protože používá 1000 fps.
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Protože ASF používá variabilní snímkovou rychlost zatímco AVI pevnou, musíte
ji nastavit ručně pomocí volby <tt class="option">-ofps</tt>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604676"></a><a name="id2604678"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak vložím titulky do výstupního souboru?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Jen přidejte volbu <tt class="option">-sub &lt;soubor&gt;</tt> (nebo obdobně volbu
<tt class="option">-sid</tt>) do příkazového řádku
<span class="application">MEncoder</span>u.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604705"></a><a name="id2604707"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak zakóduji pouze zvuk z hudebního videa?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Přímo to není možné, ale můžete zkusit toto (všimněte si
<span class="bold"><strong>&amp;</strong></span> na konci příkazu
<span class="command"><strong>mplayer</strong></span>):
</p><pre class="screen">
mkfifo <em class="replaceable"><code>encode</code></em>
mplayer -ao pcm -aofile <em class="replaceable"><code>encode</code></em> dvd://1 &amp;
lame <em class="replaceable"><code>your_opts</code></em> <em class="replaceable"><code>encode</code></em> <em class="replaceable"><code>music.mp3</code></em>
rm <em class="replaceable"><code>encode</code></em>
</pre><p>
Toto vám umožňuje použít jakýkoli enkodér, ne jen <span class="application">LAME</span>,
jen zaměňte <span class="command"><strong>lame</strong></span> svým oblíbeným enkodérem zvuku v příkazu
výše.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2604777"></a><a name="id2604779"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Proč přehrávače třetích stran selhávají při přehrávání MPEG-4 filmů enkódovaných
<span class="application">MEncoder</span>em pozdější verze než 1.0pre7?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
<code class="systemitem">libavcodec</code>, nativní knihovna pro
enkódování MPEG-4, obvykle přibalovaná k <span class="application">MEncoder</span>u,
nastavovala FourCC na 'DIVX' při enkódování MPEG-4 videí
(FourCC je AVI značka pro identifikaci software použitého k enkódování a
zamýšleného software k použití pro dekódování videa).
To vede mnoho lidí k názoru, že
<code class="systemitem">libavcodec</code>
byla enkódovací knihovna DivX, zatímco ve skutečnosti je to zcela odlišná
knihovna pro enkódování MPEG-4, která tento standard implementuje mnohem
lépe, než DivX.
Takže je novým výchozím FourCC používaným knihovnou
<code class="systemitem">libavcodec</code> 'FMP4', ale toto chování
můžete změnit použitím volby <tt class="option">-ffourcc</tt> v
<span class="application">MEncoder</span>u.
Rovněž můžete změnit FourCC existujících souborů stejným způsobem:
</p><pre class="screen">
mencoder <em class="replaceable"><code>vstupní.avi</code></em> -o <em class="replaceable"><code>výstupní.avi</code></em> -ffourcc XVID
</pre><p>
Poznamenejme, že takto nastavíte FourCC na XVID spíše než DIVX.
Toto doporučujeme, protože DIVX FourCC znamená DivX4, což je velmi jednoduchý
MPEG-4 kodek, zatímco jak DX50, tak XVID jsou plnohodnotné MPEG-4 (ASP).
Takže pokud nastavíte FourCC na DIVX, nekteré špatné softwarové nebo
hardwarové přehrávače si mohou vylámat zuby na pokročilýchvlastnostech, které
<code class="systemitem">libavcodec</code> podporuje, ale DivX
nikoli; naproti tomu je <code class="systemitem">Xvid</code>
blíže <code class="systemitem">libavcodec</code>u z hlediska funkčnosti
a je podporován všemi dobrými přehrávači.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601206"></a><a name="id2601208"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu enkódovat soubor jen se zvukem?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte <tt class="filename">aconvert.sh</tt> z podadresáře
<tt class="filename">TOOLS</tt>
ve zdrojových kódech MPlayeru.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601236"></a><a name="id2601238"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
Jak mohu přehrát titulky zabudované v AVI?
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Použijte <tt class="filename">avisubdump.c</tt> z podadresáře
<tt class="filename">TOOLS</tt>, nebo si přečtěte
<a class="ulink" href="http://xlife.zuavra.net/curse/0012/" target="_top">tento dokument o extrakci/demultiplexování titulků zabudovaných v OpenDML AVI souborech</a>.
</p></td></tr><tr class="question" title="Otázka:"><td align="left" valign="top"><a name="id2601274"></a><a name="id2601276"></a><p><b>Otázka:</b></p></td><td align="left" valign="top"><p>
MPlayer neumí...
</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>Odpověď:</b></p></td><td align="left" valign="top"><p>
Proberte se podadresářem <tt class="filename">TOOLS</tt>,
ve kterém naleznete řadu skriptů a udělátek. Dokumentaci k nim naleznete
v souboru <tt class="filename">TOOLS/README</tt>.
</p></td></tr></tbody></table></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.fn-corrupted-files-or-copy-protection" href="#fn-corrupted-files-or-copy-protection" class="para">3</a>] </sup>
Navíc některé formy ochrany proti kopírování používané na DVD mohou
být považovány za poškození obsahu.
</p></div></div></div><div class="appendix" title="Příloha A. Jak hlásit chyby"><div class="titlepage"><div><div><h2 class="title"><a name="bugreports"></a>Příloha A. Jak hlásit chyby</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#bugreports_security">A.1. Hlášení bezpečnostních chyb</a></span></dt><dt><span class="sect1"><a href="#bugreports_fix">A.2. Jak napravovat chyby</a></span></dt><dt><span class="sect1"><a href="#bugreports_regression_test">A.3. Jak provádět regresní testování pomocí Subversion</a></span></dt><dt><span class="sect1"><a href="#bugreports_report">A.4. Jak oznamovat chyby</a></span></dt><dt><span class="sect1"><a href="#bugreports_where">A.5. Kam hlásit chyby</a></span></dt><dt><span class="sect1"><a href="#bugreports_what">A.6. Co nahlásit</a></span></dt><dd><dl><dt><span class="sect2"><a href="#bugreports_system">A.6.1. Systémové informace</a></span></dt><dt><span class="sect2"><a href="#bugreports_hardware">A.6.2. Hardware a rozhraní (ovladače)</a></span></dt><dt><span class="sect2"><a href="#bugreports_configure">A.6.3. Problémy s konfigurací</a></span></dt><dt><span class="sect2"><a href="#bugreports_compilation">A.6.4. Problémy s kompilací</a></span></dt><dt><span class="sect2"><a href="#bugreports_playback">A.6.5. Problémy s přehráváním</a></span></dt><dt><span class="sect2"><a href="#bugreports_crash">A.6.6. Pády</a></span></dt><dd><dl><dt><span class="sect3"><a href="#bugreports_debug">A.6.6.1. Jak uchovat informace o zopakovatelném pádu</a></span></dt><dt><span class="sect3"><a href="#bugreports_core">A.6.6.2. Jak získat smysluplné informace z core dump</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#bugreports_advusers">A.7. Vím co dělám...</a></span></dt></dl></div><p>
Dobrá hlášení chyb jsou velmi cenným příspěvkem do vývoje jakéhokoli
softwarového projektu. Ale je to s nimi jako se psaním dobrého
programu, sepsání dobrého hlášení problému vyžaduje trochu práce.
Prosím berte na vědomí, že většina vývojářů je velmi zaneprázdněna a
dostává kvanta e-mailů. Takže ačkoli je vaše zpětná vazba kritická pro
vylepšování <span class="application">MPlayer</span>u a velmi ceněná, prosíme
pochopte, že musíte poskytnout <span class="bold"><strong>veškeré</strong></span>
informace které požadujeme a postupovat přesně podle instrukcí v tomto
dokumentu.
</p><div class="sect1" title="A.1. Hlášení bezpečnostních chyb"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_security"></a>A.1. Hlášení bezpečnostních chyb</h2></div></div></div><p>
V případě že jste nalezli exploitovatelnou chybu, chtěli byste udělat správnou
věc a nechali nás ji opravit než ji odhalíte, budeme rádi, když nám pošlete
bezpečnostní hlášení na
<a class="ulink" href="mailto:security@mplayerhq.hu" target="_top">security@mplayerhq.hu</a>.
Do hlavičky prosíme přidejte [SECURITY] nebo [ADVISORY].
Ujistěte se, že vaše hlášení obsahuje úplnou a podrobnou analýzu chyby.
Zaslání opravy je velice žádoucí.
Prosíme neodkládejte hlášení do doby než vytvoříte 'dokazovací' exploit, ten nám
můžete zaslat dalším mailem.
</p></div><div class="sect1" title="A.2. Jak napravovat chyby"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_fix"></a>A.2. Jak napravovat chyby</h2></div></div></div><p>
Pokud si myslíte, že máte potřebné schopnosti, pak vás vybízíme abyste
opravil(a) chybu samostatně. Nebo jste to již udělal(a)? Přečtěte si prosím
<a class="ulink" href="../../tech/patches.txt" target="_top">tento krátký dokument</a>, abyste se
dozvěděli jak zahrnout váš kód do <span class="application">MPlayer</span>u.
Lidé z konference
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dev-eng" target="_top">MPlayer-dev-eng</a>
vám pomohou, pokud budete mít otázky.
</p></div><div class="sect1" title="A.3. Jak provádět regresní testování pomocí Subversion"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_regression_test"></a>A.3. Jak provádět regresní testování pomocí Subversion</h2></div></div></div><p>
Občas nastane problém typu 'předtím to fungovalo, teď už ne...'.
Zde přinášíme postup krok za krokem, jak vyhledat, kdy problém
nastal. Toto <span class="bold"><strong>není</strong></span> určeno příležitostným
uživatelům.
</p><p>
Nejprve si musíte opatřit zdrojové kódy MPlayeru ze Subversion.
Instrukce lze nalést v
<a class="ulink" href="http://www.mplayerhq.hu/design7/dload.html#svn" target="_top">sekci Subversion stránky download</a>.
</p><p>
Tak dostanete v adresáři mplayer/ obraz Subversion stromu na straně klienta.
Nyní aktualizujte tento obraz k datu, které chcete:
</p><pre class="screen">
cd mplayer/
svn update -r {"2004-08-23"}
</pre><p>
Formát data je YYYY-MM-DD HH:MM:SS.
Požití tohoto datového formátu zajišťuje, že budete schopni extrahovat
patche podle data, kdy byly zapsány (commit) stejně, jak jsou v
<a class="ulink" href="http://lists.mplayerhq.hu/pipermail/mplayer-cvslog/" target="_top">MPlayer-cvslog archivu</a>.
</p><p>
A teď proveďte sestavení jako při normální aktualizaci:
</p><pre class="screen">
./configure
make
</pre><p>
</p><p>
Pokud to čte nějaký neprogramátor, nejrychlejší metodou, jak se dostat
k bodu, kde problém nastal, je použití binárního vyhledávání – to je
vyhledávání data poruchy opakovaným dělením vyhledávacího intervalu napůl.
Například pokud problém nastal v 2003, začneme v polovině roku a ptáme se,
„Už je tu problém?“.
Pokud ano, vraťte se na prvního dubna; pokud ne, běžte na prvního října
a tak dále.
</p><p>
Pokud máte spoustu místa na disku (plná kompilace obvykle zabírá 100 MB
a kolem 300–350 MB, pokud jsou zapnuty debugovací symboly), zkopírujte
nejstarší známou funkční verzi před jejím updatem; to vám ušetří čas,
pokud se budete vracet.
(Obvykla je nutné spustit 'make distclean' před rekompilací starší verze,
takže pokud si neuděláte záložní kopii originálního zdrojového stromu,
budete v něm muset rekompilovat vše, až se vrátíte do současnosti.)
</p><p>
Pokud jste našli den, kdy k problému došlo, pokračujte v hledání pomocí
archivu mplayer-cvslog (řazeného podle data) a preciznějším cvs update
s uvedením hodiny, minuty a sekundy:
</p><pre class="screen">
cvs update -PAd -D "2004-08-23 15:17:25"
</pre><p>
To vám umožní lehce najít patch, který problém způsobil.
</p><p>
Pokud jste našli patch, který je příčinou problému, máte téměř vyhráno;
ohlaste to do
<a class="ulink" href="http://bugzilla.mplayerhq.hu/" target="_top">MPlayer Bugzilly</a> nebo
se přihlaste do
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users" target="_top">MPlayer-users</a>
a pošlete to tam.
Je šance, že autor navrhne opravu.
Rovněž si můžete patch rozpitvat, dokud z něj nevytlučete, kde je chyba :-).
</p></div><div class="sect1" title="A.4. Jak oznamovat chyby"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_report"></a>A.4. Jak oznamovat chyby</h2></div></div></div><p>
Nejprve, prosím, vyzkoušejte poslední Subversion verzi
<span class="application">MPlayer</span>u, jelikož vaše chyba již mohla být
odstraněna. Vývoj je velmi rychlý, většina chyb v oficiálních balíčcích je
nahlášena během několika dnů, nebo dokonce hodin, takže prosím používejte
<span class="bold"><strong>pouze Subversion</strong></span> pro hlášení chyb. To zahrnuje binární
balíčky <span class="application">MPlayer</span>u. Subversion instrukce naleznete na konci
<a class="ulink" href="http://www.mplayerhq.hu/dload.html" target="_top">této stránky</a>,
nebo v souboru README. Pokud to nepomůže, prostudujte si prosím seznam
známých chyb a zbytek dokumentace. Pokud je váš
problém neznámý nebo jej nelze řešit pomocí našich instrukcí pak jej nahlaste
jako chybu.
</p><p>
Prosíme, neposílejte hlášení chyb soukromě jednotlivým vývojářům. Toto je týmová
práce a proto se o ně může zajímat více lidí. Čas od času měli ostatní uživatelé
stejný problém a vědí jak jej obejít, dokonce i když se jedná o chybu v kódu
<span class="application">MPlayer</span>u.
</p><p>
Prosíme popište svůj problém tak podrobně, jak je to jen možné. Proveďte malé
pátrání po okolnostech za kterých problém nastává. Projevuje se ta chyba jen
v určitých situacích? Je vlastní určitým souborům nebo typům souborů? Stává se
pouze s jedním kodekem, nebo je nezávislá na použitém kodeku? Dokážete ji
zopakovat se všemi výstupními rozhraními nebo ovladači?
Čím více nám poskytnete informací, tím je větší šance na odstranění problému.
Nezapomeňte také připojit hodnotné informace požadované níže, jinak nebudeme
schopni stanovit příčinu problému.
</p><p>
Skvělá, dobře napsaná příručka jak se ptát ve veřejných konferencích je
<a class="ulink" href="http://www.catb.org/~esr/faqs/smart-questions.html" target="_top">How To Ask Questions The Smart Way</a> od
<a class="ulink" href="http://www.catb.org/~esr/" target="_top">Erica S. Raymonda</a>.
Další příručka je
<a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">How to Report Bugs Effectively</a>
od <a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/" target="_top">Simona Tathama</a>.
Pokud budete postupovat podle těchto rad, jistě se vám dostane pomoci. Pochopte
však, že my všichni sledujeme konference dobrovolně ve svém volném čase. Máme
mnoho práce a nemůžeme vám zaručit že vyřešíme váš problém nebo že vůbec
dostanete odpověď.
</p></div><div class="sect1" title="A.5. Kam hlásit chyby"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_where"></a>A.5. Kam hlásit chyby</h2></div></div></div><p>
Přihlaste se do e-mailové konference MPlayer-users:
<a class="ulink" href="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users" target="_top">http://lists.mplayerhq.hu/mailman/listinfo/mplayer-users</a>
a pošlete své hlášení o chybách na adresu
<a class="ulink" href="mailto:mplayer-users@mplayerhq.hu" target="_top">mailto:mplayer-users@mplayerhq.hu</a> kde o tom můžeme diskutovat.
</p><p>
Pokud chcete, můžete místo toho použít zbrusu novou
<a class="ulink" href="http://bugzilla.mplayerhq.hu/" target="_top">Bugzillu</a>.
</p><p>
Jazykem konference je <span class="bold"><strong>Angličtina</strong></span>.
Zachovávejte prosím
<a class="ulink" href="http://www.ietf.org/rfc/rfc1855.txt" target="_top">Pravidla Netikety</a> a
<span class="bold"><strong>neposílejte HTML mail</strong></span> do žádné z našich
konferencí. Jinak můžete být ignorováni nebo vyhozeni. Pokud nevíte co je to
HTML mail, nebo proč je tak zatracován, přečtěte si tento
<a class="ulink" href="http://efn.no/html-bad.html" target="_top">výborný dokument</a>. Zde se
dovíte detaily včetně instrukcí pro vypnutí HTML. Poznamenejme též, že nebudeme
individuálně dělat CC (kopie) lidem, takže je dobré se přihlásit, abyste
obdrželi svou odpověď.
</p></div><div class="sect1" title="A.6. Co nahlásit"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_what"></a>A.6. Co nahlásit</h2></div></div></div><p>
Bude potřeba připojit log, konfiguraci nebo vzorky souborů ke svému hlášení chyb.
Pokud jsou některé z nich opravdu velké, pak je raději nahrajte na náš
<a class="ulink" href="ftp://upload.mplayerhq.hu/MPlayer/incoming/" target="_top">FTP server</a>
v komprimovaném formátu (preferujeme gzip a bzip2) a do zprávy zahrňte pouze
cestu a název souboru. Naše konference mají limit velikosti zprávy 80k, pokud
máte něco většího, musíte to zkomprimovat a nahrát na FTP.
</p><div class="sect2" title="A.6.1. Systémové informace"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_system"></a>A.6.1. Systémové informace</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Vaše Linuxová distribuce nebo operační systém a jeho verze jako:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Red Hat 7.1</p></li><li class="listitem"><p>Slackware 7.0 + devel packs from 7.1 ...</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  verze jádra:
  </p><pre class="screen">uname -a</pre><p>
</p></li><li class="listitem"><p>
  verze libc:
  </p><pre class="screen">ls -l /lib/libc[.-]*</pre><p>
</p></li><li class="listitem"><p>
  verze gcc a ld:
  </p><pre class="screen">
gcc -v
ld -v</pre><p>
</p></li><li class="listitem"><p>
  verze binutils:
  </p><pre class="screen">as --version</pre><p>
</p></li><li class="listitem"><p>
  Pokud máte problémy s celoobrazovkovým režimem:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Druh Window manageru a jeho verze</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Pokud máte problémy s XVIDIX:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>
    Hloubka barev v X:
    </p><pre class="screen">xdpyinfo | grep "depth of root"</pre><p>
  </p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Pokud je chybné pouze GUI:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>verze GTK</p></li><li class="listitem"><p>verze GLIB</p></li><li class="listitem"><p>GUI situace kdy se chyba projevila</p></li></ul></div><p>
</p></li></ul></div><p>
</p></div><div class="sect2" title="A.6.2. Hardware a rozhraní (ovladače)"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_hardware"></a>A.6.2. Hardware a rozhraní (ovladače)</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  CPU info (to funguje pouze v Linuxu):
  </p><pre class="screen">cat /proc/cpuinfo</pre><p>
</p></li><li class="listitem"><p>
  Výrobce a model videokarty, např:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>ASUS V3800U chip: nVidia TNT2 Ultra pro 32MB SDRAM</p></li><li class="listitem"><p>Matrox G400 DH 32MB SGRAM</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Typ video ovladače a jeho verze, např.:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>vestavěný ovladač z X</p></li><li class="listitem"><p>nVidia 0.9.623</p></li><li class="listitem"><p>Utah-GLX CVS 2001-02-17</p></li><li class="listitem"><p>DRI z X 4.0.3</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Typ zvukové karty a ovladač, např.:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Creative SBLive! Gold s OSS ovladačem od oss.creative.com</p></li><li class="listitem"><p>Creative SB16 s OSS ovladači z jádra</p></li><li class="listitem"><p>GUS PnP s ALSA OSS emulací</p></li></ul></div><p>
</p></li><li class="listitem"><p>
  Pokud si nejste jisti a používáte systém Linux, přidejte výstup
  z <span class="command"><strong>lspci -vv</strong></span>.
</p></li></ul></div><p>
</p></div><div class="sect2" title="A.6.3. Problémy s konfigurací"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_configure"></a>A.6.3. Problémy s konfigurací</h3></div></div></div><p>
Pokud nastanou chyby během běhu <span class="command"><strong>./configure</strong></span>, nebo selže
autodetekce něčeho, prostudujte <tt class="filename">configure.log</tt>. Možná
naleznete odpověď zde. Například několik verzí stejné knihovny v systému, nebo
jste zapomněli nainstalovat vývojový (devel) balíček (to jsou ty s koncovkou
-dev). Pokud si myslíte, že je zde chyba, přidejte
<tt class="filename">configure.log</tt> do svého hlášení.
</p></div><div class="sect2" title="A.6.4. Problémy s kompilací"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_compilation"></a>A.6.4. Problémy s kompilací</h3></div></div></div><p>
Zahrňte prosím tyto soubory:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>config.h</p></li><li class="listitem"><p>config.mak</p></li></ul></div><p>
</p></div><div class="sect2" title="A.6.5. Problémy s přehráváním"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_playback"></a>A.6.5. Problémy s přehráváním</h3></div></div></div><p>
Zahrňte prosíme výstup <span class="application">MPlayer</span>u v upovídaném
režimu úrovně 1 ale dejte pozor, abyste jej
<span class="bold"><strong>nezkrátili</strong></span>
při kopírování do mailu. Vývojáři potřebují všechny zprávy pro dobrou diagnózu
problému. Takto můžete přesměrovat výstup do souboru:
</p><pre class="screen">
mplayer -v <em class="replaceable"><code>volby</code></em> <em class="replaceable"><code>film</code></em> &gt; mplayer.log 2&gt;&amp;1
</pre><p>
</p><p>
Pokud se problém vztahuje k jednomu nebo více souborům, pak prosím nahrajte
potížisty na:
<a class="ulink" href="ftp://upload.mplayerhq.hu/MPlayer/incoming/" target="_top">ftp://upload.mplayerhq.hu/MPlayer/incoming/</a>
</p><p>
Rovněž zde nahrajte malý textový soubor se stejným základním jménem a příponou
.txt. Popište problém který máte s daným souborem a připojte svůj e-mail a také
výstup <span class="application">MPlayer</span>u v upovídaném režimu úrovně 1.
Pro reprodukci problému stačí obvykle prvních 1-5 MB souboru, ale pro jistotu
vás žádáme o:
</p><pre class="screen">
dd if=<em class="replaceable"><code>váš_soubor</code></em> of=<em class="replaceable"><code>malý_soubor</code></em> bs=1024k count=5
</pre><p>
To vezme prvních pět megabajtů '<span class="bold"><strong>vašeho_souboru</strong></span>'
a zapíše je do '<span class="bold"><strong>malého_souboru</strong></span>'. Pak znovu
zkuste tento malý vzorek a pokud se na něm chyba projeví, pak je tento vzorek
pro nás dostatečný.
Prosíme <span class="bold"><strong>nikdy</strong></span> neposílejte tyto soubory e-mailem!
Nahrajte je na FTP a pošlete pouze cestu/název_souboru daného souboru na FTP
serveru. Pokud je soubor přístupný na internetu, pak stačí poslat
<span class="bold"><strong>přesnou</strong></span> adresu URL.
</p></div><div class="sect2" title="A.6.6. Pády"><div class="titlepage"><div><div><h3 class="title"><a name="bugreports_crash"></a>A.6.6. Pády</h3></div></div></div><p>
Musíte spustit <span class="application">MPlayer</span> z <span class="command"><strong>gdb</strong></span>
a poslat nám úplný výstup nebo pokud máte <tt class="filename">core</tt> dump
z pádu, můžete nám vyextrahovat užitečné informace ze souboru Core.
Jak to udělat:
</p><div class="sect3" title="A.6.6.1. Jak uchovat informace o zopakovatelném pádu"><div class="titlepage"><div><div><h4 class="title"><a name="bugreports_debug"></a>A.6.6.1. Jak uchovat informace o zopakovatelném pádu</h4></div></div></div><p>
Překompilujte <span class="application">MPlayer</span> se zapnutým debugovacím kódem:
</p><pre class="screen">
./configure --enable-debug=3
make
</pre><p>
a spusťte <span class="application">MPlayer</span> z gdb pomocí:
</p><pre class="screen">gdb ./mplayer</pre><p>
Nyní jste v gdb. Zadejte:
</p><pre class="screen">
run -v <em class="replaceable"><code>volby-pro-mplayer</code></em> <em class="replaceable"><code>soubor</code></em>
</pre><p>
a zopakujte pád. Jakmile to dokážete, vrátí se gdb do režimu příkazového řádku,
kde musíte zadat
</p><pre class="screen">
bt
disass $pc-32 $pc+32
info all-registers
</pre><p>
</p></div><div class="sect3" title="A.6.6.2. Jak získat smysluplné informace z core dump"><div class="titlepage"><div><div><h4 class="title"><a name="bugreports_core"></a>A.6.6.2. Jak získat smysluplné informace z core dump</h4></div></div></div><p>
Vytvořte následující příkazový řádek:
</p><pre class="screen">
bt
disass $pc-32 $pc+32
info all-registers
</pre><p>
Pak jednoduše spusťte tento příkaz:
</p><pre class="screen">
gdb mplayer --core=core -batch --command=příkazový_soubor &gt; mplayer.bug
</pre><p>
</p></div></div></div><div class="sect1" title="A.7. Vím co dělám..."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="bugreports_advusers"></a>A.7. Vím co dělám...</h2></div></div></div><p>
Pokud jste vytvořili příkladné hlášení chyby pomocí výšeuvedených kroků a
jste si jisti, že chyba je v <span class="application">MPlayer</span>u, nikoli
v kompilátoru nebo poškozený soubor, již jste si přečetli dokumentaci,
ale nenalezli řešení, vaše ovladače zvuku jsou OK, pak byste se měli
přihlásit do konference MPlayer-advusers a poslat hlášení chyb zde,
abyste dostali lepší a rychlejší odpověď.
</p><p>
Mějte na paměti, že pokud zde pošlete nováčkovské otázky nebo otázky zodpovězené
v manuálu, budete ignorováni nebo peskováni, místo abyste dostali vhodnou odpověď.
Takže nám nenadávejte a přihlaste se do -advusers pouze pokud opravdu víte co
děláte a cítíte se být pokročilým uživatelem <span class="application">MPlayer</span>u,
nebo vývojářem. Pokud splňujete tato kritéria, nebude pro vás těžké se
přihlásit...
</p></div></div><div class="appendix" title="Příloha B. Formát skinů MPlayeru"><div class="titlepage"><div><div><h2 class="title"><a name="skin"></a>Příloha B. Formát skinů <span class="application">MPlayer</span>u</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#skin-overview">B.1. Přehled</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-overview-directories">B.1.1. Adresáře</a></span></dt><dt><span class="sect2"><a href="#skin-overview-formats">B.1.2. Formáty obrázků</a></span></dt><dt><span class="sect2"><a href="#skin-overview-components">B.1.3. Součásti skinu</a></span></dt><dt><span class="sect2"><a href="#skin-files">B.1.4. Soubory</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-file">B.2. Soubor skin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-file-main">B.2.1. Hlavní okno a ovládací panel</a></span></dt><dt><span class="sect2"><a href="#skin-file-subwindow">B.2.2. Ovládací panel</a></span></dt><dt><span class="sect2"><a href="#skin-file-menu">B.2.3. Nabídka</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-fonts">B.3. Fonty</a></span></dt><dd><dl><dt><span class="sect2"><a href="#skin-fonts-symbols">B.3.1. Symboly</a></span></dt></dl></dd><dt><span class="sect1"><a href="#skin-gui">B.4. GUI zprávy</a></span></dt><dt><span class="sect1"><a href="#skin-quality">B.5. Tvorba kvalitních skinů</a></span></dt></dl></div><div class="sect1" title="B.1. Přehled"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-overview"></a>B.1. Přehled</h2></div></div></div><p>
Nemá to sice nic společného s formátem skinu, ale měli byste vědět, že
<span class="application">MPlayer</span> <span class="bold"><strong>nemá</strong></span>
vestavěný skin, takže <span class="bold"><strong>si musíte alespoň jeden skin
nainstalovat, chcete-li používat GUI.</strong></span>
</p><div class="sect2" title="B.1.1. Adresáře"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-directories"></a>B.1.1. Adresáře</h3></div></div></div><p>
Adresáře prohledávané na skiny jsou (v tomto pořadí):
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
  <tt class="filename">$(DATADIR)/skins/</tt>
</p></li><li class="listitem"><p>
  <tt class="filename">$(PREFIX)/share/mplayer/skins/</tt>
</p></li><li class="listitem"><p>
  <tt class="filename">~/.mplayer/skins/</tt>
</p></li></ol></div><p>
</p><p>
Poznamenejme, že první z cest se může lišit podle toho, jak je
<span class="application">MPlayer</span> zkonfigurován (viz volby  configure skriptu
<tt class="option">--prefix</tt> a <tt class="option">--datadir</tt>).
</p><p>
Každý skin je instalován do vlastního adresáře v některém z výše uvedených.
Například:
</p><pre class="screen">$(PREFIX)/share/mplayer/skins/default/</pre><p>
</p></div><div class="sect2" title="B.1.2. Formáty obrázků"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-formats"></a>B.1.2. Formáty obrázků</h3></div></div></div><p>Obrázky musí být truecolor (24 nebo 32 bpp) PNG.</p><p>
V hlavním okně a v přehrávači (viz níž) můžete použít obrázky s 'průhledností':
Oblasti vyplněné barvou #FF00FF (magenta) jsou plně průhledné, pokud jsou
zobrazovány <span class="application">MPlayer</span>em. To znamená, že můžete mít
tvarovaná okna, pokud má váš X server XShape rozšíření.
</p></div><div class="sect2" title="B.1.3. Součásti skinu"><div class="titlepage"><div><div><h3 class="title"><a name="skin-overview-components"></a>B.1.3. Součásti skinu</h3></div></div></div><p>
Skiny mají poměrně volný formát (narozdíl například od pevného formátu skinů
<span class="application">Winamp</span>u/<span class="application">XMMS</span>),
takže je jen na vás, zda vytvoříte něco skvělého.
</p><p>
V současnosti jsou zde čtyři okna, která můžete dekorovat:
<a class="link" href="#skin-file-main" title="B.2.1. Hlavní okno a ovládací panel">hlavní okno</a>,
<a class="link" href="#skin-file-subwindow" title="B.2.2. Ovládací panel">podokno</a>,
<a class="link" href="#skin-file-main" title="B.2.1. Hlavní okno a ovládací panel">ovládací panel</a> a
<a class="link" href="#skin-file-menu" title="B.2.3. Nabídka">nabidka</a> (tu lze aktivovat
pravým myšítkem).

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="application">MPlayer</span> je ovládán v
  <span class="bold"><strong>hlavním okně</strong></span> a/nebo v
  <span class="bold"><strong>ovládacím panelu</strong></span>. Pozadím okna je obrázek.
  Následující součásti mohou (a musí) být umístěny v okně:
  <span class="emphasis"><em>tlačítka</em></span>, <span class="emphasis"><em>potenciometry</em></span> (šoupátka)
  a <span class="emphasis"><em>popisky</em></span>.
  Každé součásti musíte nastavit pozici a velikost.
  </p><p>
  A <span class="bold"><strong>tlačítko</strong></span> má tři stavy (stisknuto, puštěno a
  zakázáno), proto musí být jeho obraz svisle rozdělen do tří částí.
  Detaily viz součást <a class="link" href="#skin-button">tlačítko</a>.
  </p><p>
  A <span class="bold"><strong>potenciometr</strong></span> (hlavně používaný pro
  lištu převíjení a ovládání hlasitosti/stereováhy) může mít libovolný počet
  fází dělících jeho obraz na jednotlivé části pod sebou. Detaily viz
  <a class="link" href="#skin-hpotmeter">hpotenciometr</a> a
  <a class="link" href="#skin-potmeter">potenciometr</a>.
  </p><p>
  <span class="bold"><strong>Popisky</strong></span> jsou poněkud zvláštní: Znaky potřebné
  pro jejich vykreslení jsou brány z obrazového souboru a znaky v obrázku jsou
  popsány <a class="link" href="#skin-fonts" title="B.3. Fonty">souborem popisu fontu</a>.
  Tento (druhý) soubor je prostý textový soubor, který popisuje pozici x,y a
  velikost každého znaku v obrázku (obrázkový soubor a soubor popisu fontu
  <span class="emphasis"><em>spolu</em></span> tvoří font). Detaily viz
  <a class="link" href="#skin-dlabel">dlabel</a>.
  </p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
  Všechny obrázky mohou mít plnou průhlednost, jak je popsána v sekci
  o <a class="link" href="#skin-overview-formats" title="B.1.2. Formáty obrázků">formátech obrázků</a>. Pokud X
  server nepodporuje rozšíření XShape, budou průhledné části černé. Pokud byste
  chtěli využít tuto vlastnost, musí být šířka pozadí hlavního okna celočíselně
  dělitelná 8.
  </p></div></li><li class="listitem"><p>
  <span class="bold"><strong>Podokno</strong></span> je to okno, kde se zobrazuje film.
  Může v něm být zobrazen určený obrázek, pokud není načten žádný film (je
  docela únavné, pokud zde není nic :-)).
  <span class="bold"><strong>Poznámka:</strong></span> průhlednost zde
  <span class="bold"><strong>není povolena</strong></span>.
</p></li><li class="listitem"><p>
  <span class="bold"><strong>Nabídka</strong></span> je jen způsob, jak ovládat
  <span class="application">MPlayer</span> položkami menu. Vyžadovány jsou dva
  obrázky: jeden z nich jako menu v normálním stavu a druhý se zvýrazněnými
  položkami. Když pak vyvoláte menu, je zobrazen první obrázek. Při pohybu myší
  přes položky, je zkopírována aktuálně vybraná položka z druhého obrázku přes
  ten první pod kursorem (druhý obrázek není nikdy zobrazen celý).
  </p><p>
  Položka menu je definována svou pozicí a velikostí v obrázku (detaily viz
  sekce <a class="link" href="#skin-file-menu" title="B.2.3. Nabídka">nabídka</a>).
  </p></li></ul></div><p>
</p><p>
Jednu důležitou věc jsme ještě nezmínili: Mají-li tlačítka,
potenciometry a položky menu pracovat, musí <span class="application">MPlayer</span>
vědět, co má udělat, pokud je na ně kliknuto. To je zajištěno pomocí
<a class="link" href="#skin-gui" title="B.4. GUI zprávy">zpráv</a> (událostí). Pro tyto členy tedy musíte
definovat zprávy, které budou při kliku generovány.
</p></div><div class="sect2" title="B.1.4. Soubory"><div class="titlepage"><div><div><h3 class="title"><a name="skin-files"></a>B.1.4. Soubory</h3></div></div></div><p>
Pro výrobu skinu budete potřebovat následující:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Konfigurační soubor jménem <a class="link" href="#skin-file" title="B.2. Soubor skin">skin</a> řekne
  <span class="application">MPlayer</span>u, jak má dát jednotlivé části skinu
  dohromady a co udělat, kliknete-li někde v okně.
</p></li><li class="listitem"><p>
  Obrázek pozadí hlavního okna.
</p></li><li class="listitem"><p>
  Obrázky položek hlavního okna (včetně jednoho nebo více souborů s popisem
  fontu pro vykreslování popisek).
</p></li><li class="listitem"><p>
  Obrázek pro zobrazení v podokně (volitelný).
</p></li><li class="listitem"><p>
  Dva obrázky pro nabídku (ty jsou potřeba pouze pokud chcete vytvořit menu).
</p></li></ul></div><p>
  S výjimkou konfiguračního souboru skinu si můžete pojmenovat ostatní soubory
  jak chcete (s tím, že vaše soubory s popisem fontu budou mít příponu
  <tt class="filename">.fnt</tt>).
</p></div></div><div class="sect1" title="B.2. Soubor skin"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-file"></a>B.2. Soubor skin</h2></div></div></div><p>
Jak jsme již řekli, je to konfigurační soubor skinu. Soubor je řádkově
orientován; řádky s komentářem začínají znakem '<code class="literal">;</code>'
(před ním jsou povoleny jen mezery a tabulátory).
</p><p>
Soubor je složen ze sekcí. Každá sekce popisuje skin pro aplikaci a má
následující formu:
</p><pre class="programlisting">
section = <em class="replaceable"><code>název cekce</code></em>
.
.
.
end
</pre><p>
</p><p>
Zatím máme jen jednu aplikaci, takže potřebujete jen jednu sekci: její název je
<span class="bold"><strong>movieplayer</strong></span>.
</p><p>
Uvnitř sekce je každé okno posáno blokem, který má následující formu:
</p><pre class="programlisting">
window = <em class="replaceable"><code>název okna</code></em>
.
.
.
end
</pre><p>
</p><p>
kde <em class="replaceable"><code>název okna</code></em> může být jeden z těchto řetězců:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  <span class="bold"><strong>main</strong></span> - pro hlavní okno
</p></li><li class="listitem"><p>
  <span class="bold"><strong>sub</strong></span> - pro podokno
</p></li><li class="listitem"><p>
  <span class="bold"><strong>menu</strong></span> - pro nabídku
</p></li><li class="listitem"><p>
  <span class="bold"><strong>playbar</strong></span> - ovládací panel
</p></li></ul></div><p>
</p><p>
(Bloky sub a menu jsou volitelné - nemusíte vytvářet nabídku nebo vyzdobit
podokno.)
</p><p>
Uvnitř window bloku můžete definovat každou položku okna řádkem v tomto tvaru:
</p><pre class="programlisting">položka = parametr</pre><p>
Kde <code class="literal">položka</code> je řetězec označující typ položky GUI a
<code class="literal">parametr</code> je číselná nebo textová hodnota (nebo seznam hodnot
oddělených čárkami).
</p><p>
Dáte-li to všechno dohromady, celý soubor vypadá asi takto:
</p><pre class="programlisting">
section = movieplayer
  window = main
  ; ... položky hlavního okna ...
  end

  window = sub
  ; ... položky podokna ...
  end

  window = menu
  ; ... položky menu ...
  end

  window = playbar
  ; ... položky ovládacího panelu ...
  end
end
</pre><p>
</p><p>
Jméno souboru s obrázkem musí být zadáno bez úvodních adresářů - obrázky jsou
vyhledávány v adresáři <tt class="filename">skins</tt>.
Měli byste (ale nemusíte) zadat příponu souboru. Pokud soubor neexistuje,
zkouší <span class="application">MPlayer</span> načíst soubor
<tt class="filename">&lt;jméno&gt;.&lt;příp&gt;</tt>, kdy jsou za
<tt class="filename">&lt;příp&gt;</tt> zkoušeny přípony <code class="literal">png</code>
a <code class="literal">PNG</code> (v tomto pořadí). Použitý bude první vyhovující soubor.
</p><p>
Aby bylo vše jasné, uvedeme příklad. Řekněme, že máte obrázek jménem
<tt class="filename">main.png</tt>, který použijeme pro hlavní okno:
</p><pre class="programlisting">base = main, -1, -1</pre><p>
<span class="application">MPlayer</span> se pokusí nahrát soubory
<tt class="filename">main</tt>, <tt class="filename">main.png</tt>, <tt class="filename">main.PNG</tt>.
</p><p>
Nakonec několik slov o pozicování. Hlavní okno a podokno lze
umístit do odlišných rohů obrazovky zadáním souřadnic <code class="literal">X</code>
a <code class="literal">Y</code>. <code class="literal">0</code> horní nebo levý,
<code class="literal">-1</code> je střed a <code class="literal">-2</code> je vpravo nebo dole, jak
je vidět na obrázku:
</p><div class="informalfigure"><pre class="screen">
(0, 0)----(-1, 0)----(-2, 0)
  |          |          |
  |          |          |
(0,-1)----(-1,-1)----(-2,-1)
  |          |          |
  |          |          |
(0,-2)----(-1,-2)----(-2,-2)
</pre></div><p>
</p><div class="sect2" title="B.2.1. Hlavní okno a ovládací panel"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-main"></a>B.2.1. Hlavní okno a ovládací panel</h3></div></div></div><p>
Níže uvádíme seznam položek, které mohou být použity v blocích
'<code class="literal">window = main</code>' ... '<code class="literal">end</code>',
a '<code class="literal">window = playbar</code>' ... '<code class="literal">end</code>'.
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">
  <a name="skin-main-base"></a>base = obrázek, X, Y
  </code></span></dt><dd><p>
  Umožňuje nastavit obrázek pozadí hlavního okna. Okno bude vykresleno na
  zadaných souřadnicích <code class="literal">X,Y</code> na obrazovce a bude mít velikost
  obrázku.
  </p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
  Tyto koordináty zatím nefungují pro okno display.
  </p></div><div class="warning" title="Varování" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Varování</h3><p>Průhledné oblasti v obrázku (obarvené #FF00FF) budou černé
  na X serverech bez XShape rozšíření. Šířka obrázku musí být celočíselně
  dělitelná 8.</p></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-button"></a>button = obrázek, X, Y, šířka, výška, zpráva
  </code></span></dt><dd><p>
  Umístí tlačítko rozměru <code class="literal">šířka</code> * <code class="literal">výška</code>
  na pozici <code class="literal">X,Y</code>. Zadaná <code class="literal">zpráva</code> je
  generována při kliku na tlačítko. Zadaný <code class="literal">obrázek</code> musí
  mít tři části pod sebou (odpovídající možným stavům tlačítka) takto:
  </p><div class="informalfigure"><pre class="screen">
+------------+
| stisknuto  |
+------------+
|  uvolněno  |
+------------+
|  zakázáno  |
+------------+</pre></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-decoration"></a>decoration = enable|disable
  </code></span></dt><dd><p>
  Zapne (enable) nebo vypne (disable) dekoraci hlavního okna, produkovanou
  okenním manažerem. Výchozí je <span class="bold"><strong>disable</strong></span>.
  </p><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
  V okně display to nefunguje, není to potřeba.
  </p></div></dd><dt><span class="term"><code class="literal">
  <a name="skin-hpotmeter"></a>hpotmeter = tlačítko, tšířka, tvýška, fáze, počet_fází, výchozí, X, Y, šířka, výška, zpráva
  </code></span></dt><dd><p>
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-vpotmeter"></a>vpotmeter = tlačítko, tšířka, tvýška, fáze, počet_fází, výchozí, X, Y, šířka, výška, zpráva
  </code></span></dt><dd><p>
  Umístí vodorovný (hpotmeter) nebo svislý (vpotmeter) potenciometr velikosti
  <code class="literal">šířka</code> * <code class="literal">výška</code> na pozici
  <code class="literal">X,Y</code>. Obrázek může být rozdělen do různých částí pro různé
  fáze potenciometru (Například můžete mít potenciometr pro nastavení hlasitosti,
  jehož dráha se barví ze zelené na červenou, jak se jeho hodnota mění od nejmenší
  do největší.). <code class="literal">hpotmeter</code> může mít táhlo, které může být
  vodorovně taženo. Význam parametrů:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
    <code class="literal">tlačítko</code> - obrázek, který se použije pro
    tlačítko (musí mít tři části pod sebou, stejně jako v případě tohoto
    <a class="link" href="#skin-button">tlačítka</a>)
  </p></li><li class="listitem"><p>
    <code class="literal">tšířka</code>, <code class="literal">tvýška</code> -
    velikost tlačítka
  </p></li><li class="listitem"><p>
    <code class="literal">fáze</code> - obrázek použitý pro různé fáze
    hpotmetru. Pokud žádný obrázek nechcete, můžete použít speciální hodnotu
    <code class="literal">NULL</code>. Obrázek musí být rozdělen svisle na
    <code class="literal">počet_fází</code> částí takto:
    </p><div class="informalfigure"><pre class="screen">
+------------+
|   fáze #1  |
+------------+
|   fáze #2  |
+------------+
     ...
+------------+
|   fáze #n  |
+------------+</pre></div><p>
  </p></li><li class="listitem"><p>
    <code class="literal">numphases</code> - number of phases stored in the
    <code class="literal">počet_fází</code> - počet fází uložených v
    obrázku <code class="literal">fáze</code>
    </p></li><li class="listitem"><p>
      <code class="literal">výchozí</code> - výchozí hodnota pro hpotmeter
      (v rozsahu <code class="literal">0</code> až <code class="literal">100</code>)
      </p></li><li class="listitem"><p>
      <code class="literal">X</code>, <code class="literal">Y</code> - pozice pro hpotmeter
    </p></li><li class="listitem"><p>
      <code class="literal">šířka</code>, <code class="literal">výška</code> - šířka a výška
      <code class="literal">hpotmeter</code>u
    </p></li><li class="listitem"><p>
      <code class="literal">zpráva</code> - zpráva generovaná při změně
      hodnoty <code class="literal">hpotmeter</code>u
  </p></li></ul></div><p>
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-potmeter"></a>potmeter = fáze, počet_fází, výchozí, X, Y, šířka, výška, zpráva
  </code></span></dt><dd><p>
  <code class="literal">hpotmeter</code> bez tlačítka. (soudil bych, že byl míněn jako
  otočný, ale reaguje pouze na horizontální tažení.) Popis parametrů je stejný
  jako v <a class="link" href="#skin-hpotmeter">hpotmeter</a>.
  <code class="literal">fáze</code> mohou být <code class="literal">NULL</code>, ale je to vcelku
  k ničemu, jelikož nemůžete vidět, jak je nastaven <code class="literal">potmeter</code>.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-font"></a>font = soubor_fontu, id_fontu
  </code></span></dt><dd><p>
  Definuje font. <code class="literal">soubor_fontu</code> je jméno souboru popisu fontu
  s příponou <tt class="filename">.fnt</tt> (zde příponu nezadávejte).
  <code class="literal">id_fontu</code> je použit jako ukazatel na font
  (viz <a class="link" href="#skin-dlabel">dlabel</a>
  a <a class="link" href="#skin-slabel">slabel</a>). Definováno může být více než 25 fontů.
  </p></dd><dt><span class="term"><code class="literal">
    <a name="skin-slabel"></a>slabel = X, Y, id_fontu, "text";
  </code></span></dt><dd><p>
  Umístí statický popisek na pozici <code class="literal">X,Y</code>.
  <code class="literal">text</code> je zobrazen fontem identifikovaným pomocí
  <code class="literal">id_fontu</code>. Text je surový řetězec
  (<code class="literal">$x</code> proměnné nefungují), který musí být uzavřen
  ve dvojitých uvozovkách (ale znak " nesmí být součástí textu).
  Popisek je zobrazen fontem identifikovaným pomocí <code class="literal">id_fontu</code>.
  </p></dd><dt><span class="term"><code class="literal">
    <a name="skin-dlabel"></a>dlabel = X, Y, délka, zarovnání, id_fontu, "text"
  </code></span></dt><dd><p>
  Umístí dynamický popisek na pozici <code class="literal">X,Y</code>. Popisek je
  dynamický proto, že je jeho text periodicky obnovován. Maximální délka
  popisku je nastavena na <code class="literal">délka</code> (jeho výškou je výška
  znaku). Pokud je zobrazovaný text širší, pak bude rolován,
  jinak bude zarovnán do určeného prostoru podle hodnoty parametru
  <code class="literal">zarovnání</code>: <code class="literal">0</code> je zarovnání vpravo,
  <code class="literal">1</code> na střed, <code class="literal">2</code> vlevo.
  </p><p>
  Text k zobrazení je zadán parametrem <code class="literal">text</code>: Musí být uzavřen
  do dvojitých uvozovek (ale znak " nesmí být součástí textu).
  Popisek je zobrazen fontem identifikovaným pomocí <code class="literal">id_fontu</code>.
  V textu můžete použít tyto proměnné:
  </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Proměnná</th><th>Význam</th></tr></thead><tbody><tr><td>$1</td><td>čas přehrávání ve formátu <span class="emphasis"><em>hh:mm:ss</em></span></td></tr><tr><td>$2</td><td>čas přehrávání ve formátu <span class="emphasis"><em>mmmm:ss</em></span></td></tr><tr><td>$3</td><td>čas přehrávání ve formátu <span class="emphasis"><em>hh</em></span> (hodiny)</td></tr><tr><td>$4</td><td>čas přehrávání ve formátu <span class="emphasis"><em>mm</em></span> (minuty)</td></tr><tr><td>$5</td><td>čas přehrávání ve formátu <span class="emphasis"><em>ss</em></span> (sekundy)</td></tr><tr><td>$6</td><td>délka filmu ve formátu <span class="emphasis"><em>hh:mm:ss</em></span></td></tr><tr><td>$7</td><td>délka filmu ve formátu <span class="emphasis"><em>mmmm:ss</em></span></td></tr><tr><td>$8</td><td>čas přehrávání ve formátu <span class="emphasis"><em>h:mm:ss</em></span></td></tr><tr><td>$v</td><td>hlasitost ve formátu <span class="emphasis"><em>xxx.xx</em></span>%</td></tr><tr><td>$V</td><td>hlasitost ve formátu <span class="emphasis"><em>xxx.xx</em></span></td></tr><tr><td>$b</td><td>stereováha ve formátu <span class="emphasis"><em>xxx.xx</em></span>%</td></tr><tr><td>$B</td><td>stereováha ve formátu <span class="emphasis"><em>xxx.xx</em></span></td></tr><tr><td>$$</td><td>znak $</td></tr><tr><td>$a</td><td>znak podle typu audia (žádné: <code class="literal">n</code>,
    mono: <code class="literal">m</code>, stereo: <code class="literal">t</code>)</td></tr><tr><td>$t</td><td>číslo stopy (v playlistu)</td></tr><tr><td>$o</td><td>název souboru</td></tr><tr><td>$f</td><td>název souboru malými písmeny</td></tr><tr><td>$F</td><td>název souboru velkými písmeny</td></tr><tr><td>$T</td><td>znak podle typu datového proudu (soubor: <code class="literal">f</code>,
    Video CD: <code class="literal">v</code>, DVD: <code class="literal">d</code>,
    URL: <code class="literal">u</code>)
    </td></tr><tr><td>$p</td><td>znak <span class="keycap"><b>p</b></span> (pokud přehráváte soubor a font obsahuje
    znak <span class="keycap"><b>p</b></span>)</td></tr><tr><td>$s</td><td>znak <span class="keycap"><b>s</b></span> character (pokud přehráváte soubor a font obsahuje
    znak <span class="keycap"><b>s</b></span>)</td></tr><tr><td>$e</td><td>znak <span class="keycap"><b>e</b></span> (pokud je přehrávání pozastaveno a font obsahuje
    znak <span class="keycap"><b>e</b></span>)</td></tr><tr><td>$x</td><td>šířka filmu</td></tr><tr><td>$y</td><td>výška filmu</td></tr><tr><td>$C</td><td>název použitého kodeku</td></tr></tbody></table></div><div class="note" title="Poznámka" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Poznámka</h3><p>
  Proměnné <code class="literal">$a, $T, $p, $s</code> a <code class="literal">$e</code>
  vracejí znaky, které by měly být zobrazovány jako speciální symboly
  (například, <span class="keycap"><b>e</b></span> vrací symbol pauza, který obvykle vypadá
  jako ||). Měli byste mít font pro normální znaky a
  jiný font pro symboly. Více informací viz sekce o
  <a class="link" href="#skin-fonts-symbols" title="B.3.1. Symboly">symbolech</a>.
  </p></div></dd></dl></div></div><div class="sect2" title="B.2.2. Ovládací panel"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-subwindow"></a>B.2.2. Ovládací panel</h3></div></div></div><p>
Následující vstupy mohou být použity v bloku
'<code class="literal">window = sub</code>' . . . '<code class="literal">end</code>'.
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">
  <a name="skin-sub-base"></a>base = obrázek, X, Y, šířka, výška
  </code></span></dt><dd><p>
  Obrázek, který bude zobrazen v okně. Okno se zobrazí na pozici zadané
  souřadnicemi <code class="literal">X,Y</code> na obrazovce (<code class="literal">0,0</code> je
  levý horní roh). Můžete nastavit <code class="literal">-1</code> pro střed a
  <code class="literal">-2</code> pro vpravo (<code class="literal">X</code>) a dole
  (<code class="literal">Y</code>). Okno bude stejně velké jako obrázek.
  <code class="literal">šířka</code> a <code class="literal">výška</code>
  udávají velikost okna; jsou volitelné (pokud chybí, má okno
  rozměry shodné  s obrázkem).
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-background"></a>background = R, G, B
  </code></span></dt><dd><p>
  Umožňuje nastavit barvu pozadí. To je užitečné, pokud je obrázek menší než
  okno. <code class="literal">R</code>, <code class="literal">G</code> a <code class="literal">B</code>
  označují červenou, zelenou a modrou složku barvy
  (každá z nich je dekadická hodnota 0 až 255).
  </p></dd></dl></div></div><div class="sect2" title="B.2.3. Nabídka"><div class="titlepage"><div><div><h3 class="title"><a name="skin-file-menu"></a>B.2.3. Nabídka</h3></div></div></div><p>
Jak již bylo dříve řečeno, nabídka je zobrazena pomocí dvou obrázků. Normální
položky nabídky jsou brány z obrázku určeného položkou <code class="literal">base</code>,
zatímco aktuálně zvolený vstup je brán z obrázku určeného položkou
<code class="literal">selected</code>. Musíte definovat pozici a rozměr každé položky
nabídky.
</p><p>
Následující vstupy mohou být použity v bloku
'<code class="literal">window = menu</code>'. . .'<code class="literal">end</code>'.
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">
  <a name="skin-menu-base"></a>base = obrázek
  </code></span></dt><dd><p>
  Obrázek normálních položek nabídky.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-selected"></a>selected = obrázek
  </code></span></dt><dd><p>
  Obrázek nabídky kde jsou všechny položky vybrány.
  </p></dd><dt><span class="term"><code class="literal">
  <a name="skin-menu"></a>menu = X, Y, šířka, výška, zpráva
  </code></span></dt><dd><p>
  Definuje pozici <code class="literal">X,Y</code> a rozměr položky nabídky v obrázku.
  <code class="literal">zpráva</code> je zpráva, generovaná jakmile je uvolněno tlačítko
  myši nad položkou.
  </p></dd></dl></div></div></div><div class="sect1" title="B.3. Fonty"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-fonts"></a>B.3. Fonty</h2></div></div></div><p>
Jak jsme již zmínili v sekci o částech skinu, font je definován obrázkem a
souborem popisu. Můžete rozmístit znaky v obrázku libovolně, ale ujistěte
se, že je jejich velikost a pozice je uvedena v souboru popisu přesně.
</p><p>
Soubor popisu fontu (s příponou <tt class="filename">.fnt</tt>) může obsahovat
řádky s komentářem začínající '<code class="literal">;</code>'. Soubor musí obsahovat
řádek ve formě
<a name="skin-font-image"></a>
</p><pre class="programlisting">image = <em class="replaceable"><code>obrázek</code></em></pre><p>
Kde <code class="literal"><em class="replaceable"><code>obrázek</code></em></code> je název obrázku
použitého pro font (nemusíte zadávat příponu).
<a name="skin-font-char"></a>
</p><pre class="programlisting">"char" = X, Y, šířka, výška</pre><p>
Zde <code class="literal">X</code> a <code class="literal">Y</code> udávají pozici
<code class="literal">char</code> znaku v obrázku (<code class="literal">0,0</code> je levý
horní roh). <code class="literal">šířka</code> a <code class="literal">výška</code> jsou
rozměry znaku v pixelech.
</p><p>
Tento příklad definuje znaky A, B, C s použítím <tt class="filename">font.png</tt>.
</p><pre class="programlisting">
; Zde může být jen "font" místo "font.png".
image = font.png

; Tři znaky pro ilustraci stačí :-)
"A" =  0,0, 7,13
"B" =  7,0, 7,13
"C" = 14,0, 7,13
</pre><p>
</p><div class="sect2" title="B.3.1. Symboly"><div class="titlepage"><div><div><h3 class="title"><a name="skin-fonts-symbols"></a>B.3.1. Symboly</h3></div></div></div><p>
Některé znaky mají speciální význam, jsou-li vráceny některou z proměnných
použitých v <a class="link" href="#skin-dlabel">dlabel</a>. Tyto znaky mají být
zobrazovány jako symboly, takže mohou být zobrazeny věci jako pěkné DVD logo
 místo znaku '<code class="literal">d</code>' pro DVD datový proud.
</p><p>
Následující tabulka obsahuje znaky, které mohou být použity k zobrazení
symbolů (a tudíž vyžadují odlišný font).
</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>Znak</th><th>Symbol</th></tr></thead><tbody><tr><td><span class="keycap"><b>p</b></span></td><td>play</td></tr><tr><td><span class="keycap"><b>s</b></span></td><td>stop</td></tr><tr><td><span class="keycap"><b>e</b></span></td><td>pauza</td></tr><tr><td><span class="keycap"><b>n</b></span></td><td>bez zvuku</td></tr><tr><td><span class="keycap"><b>m</b></span></td><td>mono zvuk</td></tr><tr><td><span class="keycap"><b>t</b></span></td><td>stereo zvuk</td></tr><tr><td><span class="keycap"><b>f</b></span></td><td>datový proud je soubor</td></tr><tr><td><span class="keycap"><b>v</b></span></td><td>datový proud je Video CD</td></tr><tr><td><span class="keycap"><b>d</b></span></td><td>datový proud je DVD</td></tr><tr><td><span class="keycap"><b>u</b></span></td><td>datový proud je URL</td></tr></tbody></table></div></div></div><div class="sect1" title="B.4. GUI zprávy"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-gui"></a>B.4. GUI zprávy</h2></div></div></div><p>
Tyto zprávy mohou být generovány tlačítky, potenciometry a položkami
nabídky.
</p><div class="variablelist" title="Ovládání přehrávání:"><p class="title"><b>Ovládání přehrávání:</b></p><dl><dt><span class="term"><span class="bold"><strong>evNext</strong></span></span></dt><dd><p>
  Skočí na následující stopu v playlistu.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPause</strong></span></span></dt><dd><p>
  Tvoří přepínač společně s <code class="literal">evPlaySwitchToPause</code>. Ty mohou
  být použity k vytvoření tradičního play/pauza tlačítka. Obě zprávy by měly
  být přiřazeny tlačítkům umístěným na stejné pozici v okně. Tato zpráva
  pozastaví přehrávání a zobrazen bude obrázek pro
  <code class="literal">evPlaySwitchToPause</code> talčítko (pro indikaci, že tlačítko
  může být stisknuto pro obnovení přehrávání).
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlay</strong></span></span></dt><dd><p>
  Zahájí přehrávání.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlaySwitchToPause</strong></span></span></dt><dd><p>
  Protiklad <code class="literal">evPauseSwitchToPlay</code>. Tato zpráva zahájí přehrávání
  a zobrazí obrázek pro tlačítko <code class="literal">evPauseSwitchToPlay</code>
  (pro indikaci, že tlačítko může být stisknuto pro pozastavení přehrávání).
  </p></dd><dt><span class="term"><span class="bold"><strong>evPrev</strong></span></span></dt><dd><p>
  Skočí na předchozí stopu v playlistu.
  </p></dd><dt><span class="term"><span class="bold"><strong>evStop</strong></span></span></dt><dd><p>
  Zastaví přehrávání.
  </p></dd></dl></div><div class="variablelist" title="Převíjení:"><p class="title"><b>Převíjení:</b></p><dl><dt><span class="term"><span class="bold"><strong>evBackward10sec</strong></span></span></dt><dd><p>
  Převine zpět o 10 sekund.
  </p></dd><dt><span class="term"><span class="bold"><strong>evBackward1min</strong></span></span></dt><dd><p>
  Převine zpět o 1 minutu.
  </p></dd><dt><span class="term"><span class="bold"><strong>evBackward10min</strong></span></span></dt><dd><p>
  Převine zpět o 10 minut.
  </p></dd><dt><span class="term"><span class="bold"><strong>evForward10sec</strong></span></span></dt><dd><p>
  Převine vpřed o 10 sekund.
  </p></dd><dt><span class="term"><span class="bold"><strong>evForward1min</strong></span></span></dt><dd><p>
  Převine vpřed o 1 minutu.
  </p></dd><dt><span class="term"><span class="bold"><strong>evForward10min</strong></span></span></dt><dd><p>
  Převine vpřed o 10 minut.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetMoviePosition</strong></span></span></dt><dd><p>
  Převine na danou pozici (může být přiřazeno potenciometru; použije se
  relativní hodnota (0-100%) potenciometru).
  </p></dd></dl></div><div class="variablelist" title="Ovládání videa:"><p class="title"><b>Ovládání videa:</b></p><dl><dt><span class="term"><span class="bold"><strong>evHalfSize</strong></span></span></dt><dd><p>
  Nastaví velikost okna filmu na poloviční velikost.
  </p></dd><dt><span class="term"><span class="bold"><strong>evDoubleSize</strong></span></span></dt><dd><p>
  Nastaví velikost okna filmu na dvojnásobnou velikost.
  </p></dd><dt><span class="term"><span class="bold"><strong>evFullScreen</strong></span></span></dt><dd><p>
  Přepíná do celoobrazovkového režimu a zpět.
  </p></dd><dt><span class="term"><span class="bold"><strong>evNormalSize</strong></span></span></dt><dd><p>
  Nastaví velikost okna na normální velikost.
  </p></dd></dl></div><div class="variablelist" title="Ovládání zvuku:"><p class="title"><b>Ovládání zvuku:</b></p><dl><dt><span class="term"><span class="bold"><strong>evDecAudioBufDelay</strong></span></span></dt><dd><p>
  Sníží zpoždění vyrovnávací paměti zvuku.
  </p></dd><dt><span class="term"><span class="bold"><strong>evDecBalance</strong></span></span></dt><dd><p>
  Sníží hodnotu stereováhy.
  </p></dd><dt><span class="term"><span class="bold"><strong>evDecVolume</strong></span></span></dt><dd><p>
  Sníží hlasitost.
  </p></dd><dt><span class="term"><span class="bold"><strong>evIncAudioBufDelay</strong></span></span></dt><dd><p>
  Zvýší zpoždění vyrovnávací paměti zvuku.
  </p></dd><dt><span class="term"><span class="bold"><strong>evIncBalance</strong></span></span></dt><dd><p>
  Zvýší hodnotu stereováhy.
  </p></dd><dt><span class="term"><span class="bold"><strong>evIncVolume</strong></span></span></dt><dd><p>
  Zvýší hlasitost.
  </p></dd><dt><span class="term"><span class="bold"><strong>evMute</strong></span></span></dt><dd><p>
  Vypne/zapne zvuk.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetBalance</strong></span></span></dt><dd><p>
  Nastaví stereováhu (může být sdruženo s potenciometrem; použije se
  relativní hodnota potenciometru (0-100%)).
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetVolume</strong></span></span></dt><dd><p>
  Nastaví hlasitost (může být sdruženo s potenciometrem; použije se
  relativní hodnota potenciometru (0-100%)).
  </p></dd></dl></div><div class="variablelist" title="Různé:"><p class="title"><b>Různé:</b></p><dl><dt><span class="term"><span class="bold"><strong>evAbout</strong></span></span></dt><dd><p>
  Otevře okno o aplikaci.
  </p></dd><dt><span class="term"><span class="bold"><strong>evDropSubtitle</strong></span></span></dt><dd><p>
  Vypne aktuálně použité titulky.
  </p></dd><dt><span class="term"><span class="bold"><strong>evEqualizer</strong></span></span></dt><dd><p>
  Zapne/vypne ekvalizér.
  </p></dd><dt><span class="term"><span class="bold"><strong>evExit</strong></span></span></dt><dd><p>
  Ukončí program.
  </p></dd><dt><span class="term"><span class="bold"><strong>evIconify</strong></span></span></dt><dd><p>
  Minimalizuje okno.
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoad</strong></span></span></dt><dd><p>
  Otevře soubor (otevřením okna prohlížeče souborů, kde si soubor vyberete).
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadPlay</strong></span></span></dt><dd><p>
  Stejné jako <code class="literal">evLoad</code>, ale navíc se okamžitě spustí přehrávání
  otevřeného souboru.
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadSubtitle</strong></span></span></dt><dd><p>
  Otevře soubor s titulky (pomocí prohlížeče souborů)
  </p></dd><dt><span class="term"><span class="bold"><strong>evLoadAudioFile</strong></span></span></dt><dd><p>
  Otevře soubor se zvukem (pomocí prohlížeče souborů)
  </p></dd><dt><span class="term"><span class="bold"><strong>evNone</strong></span></span></dt><dd><p>
  Prázdná zpráva, nemá žádný efekt (možná s výjimkou Subversion verzí :-)).
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlaylist</strong></span></span></dt><dd><p>
  Otevře/zavře okno playlistu.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayDVD</strong></span></span></dt><dd><p>
  Zkusí otevřít disk v zadané DVD-ROM mechanice.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPlayVCD</strong></span></span></dt><dd><p>
  Zkusí otevřít disk v zadané CD-ROM mechanice.
  </p></dd><dt><span class="term"><span class="bold"><strong>evPreferences</strong></span></span></dt><dd><p>
  Otevře okno předvoleb.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetAspect</strong></span></span></dt><dd><p>
  Nastaví poměr stran zobrazovaného obrázku.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSetURL</strong></span></span></dt><dd><p>
  Zobrazí dialogové okno pro volbu URL.
  </p></dd><dt><span class="term"><span class="bold"><strong>evSkinBrowser</strong></span></span></dt><dd><p>
  Otevře okno voliče skinů.
  </p></dd></dl></div></div><div class="sect1" title="B.5. Tvorba kvalitních skinů"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skin-quality"></a>B.5. Tvorba kvalitních skinů</h2></div></div></div><p>
Co když jste si přečetli o skinech pro GUI
<span class="application">MPlayer</span>u, odvedli to nejlepší s
<span class="application">Gimp</span>em a chcete nám poslat svůj skin?
Přečtěte si pár návodů, abyste se vyhnuli běžným omylům a vytvořili
vysoce kvalitní skin.
</p><p>
Chceme, aby skiny, které přidáme do našeho repozitáře odpovídaly
určitým standardům kvality. Je zde také mnoho věcí, které můžete
udělat, abyste nám ulehčili práci.
</p><p>
Za příklad si vemte skin <code class="systemitem">Blue</code>.
Ten splňuje všechna kritéria od verze 1.5.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
  Ke každému skinu by měl být soubor
  <tt class="filename">README</tt>, obsahující informace o vás jako autorovi,
  o copyrightu a licenci a vše ostatní, co chcete dodat.
  Chcete-li mít changelog, tento soubor je dobrým místem.
  </p></li><li class="listitem"><p>
  Měl by tu být soubor <tt class="filename">VERSION</tt>
  neobsahující nic jiného, než číslo verze na jediném řádku (např. 1.0).
  </p></li><li class="listitem"><p>
  Horizontální a vertikální ovládání (posuvníky jako hlasitost
  nebo pozice) by měly mít střed knoflíku správně zarovnán na stred posuvníku.
  Mělo by být možné posouvat knoflík na oba konce posuvníku, ale ne za ně.
  </p></li><li class="listitem"><p>
  Jednotlivé součásti skinu by měly mít správné rozměry
  deklarované v souboru skin. Pokud to tak není, můžete kliknout mimo např.
  tlačítko a to se stejně stiskne, nebo kliknout na jeho plochu a nestisknout
  jej.
  </p></li><li class="listitem"><p>
  Soubor <tt class="filename">skin</tt> by měl být srovnán na znaky
  a neobsahovat tabulátory. Srovnán na znaky znamená, že se čísla budou rovnat
  do úhledných sloupců.
  </p></li></ul></div></div></div></div></body></html>
